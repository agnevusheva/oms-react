var W7=Object.defineProperty;var Xq=e=>{throw TypeError(e)};var J7=(e,t,n)=>t in e?W7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var b=(e,t,n)=>J7(e,typeof t!="symbol"?t+"":t,n),WT=(e,t,n)=>t.has(e)||Xq("Cannot "+n);var Ne=(e,t,n)=>(WT(e,t,"read from private field"),n?n.call(e):t.get(e)),Ir=(e,t,n)=>t.has(e)?Xq("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Mu=(e,t,n,r)=>(WT(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Zt=(e,t,n)=>(WT(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function bz(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var JT={exports:{}},Wg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zq;function X7(){if(Zq)return Wg;Zq=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var d in a)d!=="key"&&(o[d]=a[d])}else o=a;return a=o.ref,{$$typeof:e,type:r,key:l,ref:a!==void 0?a:null,props:o}}return Wg.Fragment=t,Wg.jsx=n,Wg.jsxs=n,Wg}var e3;function Z7(){return e3||(e3=1,JT.exports=X7()),JT.exports}var Pe=Z7(),XT={exports:{}},Jg={},ZT={exports:{}},eR={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t3;function e9(){return t3||(t3=1,function(e){function t(ae,Te){var Re=ae.length;ae.push(Te);e:for(;0<Re;){var Xe=Re-1>>>1,Q=ae[Xe];if(0<a(Q,Te))ae[Xe]=Te,ae[Re]=Q,Re=Xe;else break e}}function n(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var Te=ae[0],Re=ae.pop();if(Re!==Te){ae[0]=Re;e:for(var Xe=0,Q=ae.length,de=Q>>>1;Xe<de;){var Le=2*(Xe+1)-1,ge=ae[Le],ve=Le+1,ht=ae[ve];if(0>a(ge,Re))ve<Q&&0>a(ht,ge)?(ae[Xe]=ht,ae[ve]=Re,Xe=ve):(ae[Xe]=ge,ae[Le]=Re,Xe=Le);else if(ve<Q&&0>a(ht,Re))ae[Xe]=ht,ae[ve]=Re,Xe=ve;else break e}}return Te}function a(ae,Te){var Re=ae.sortIndex-Te.sortIndex;return Re!==0?Re:ae.id-Te.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var h=[],p=[],S=1,v=null,R=3,O=!1,x=!1,z=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function q(ae){for(var Te=n(p);Te!==null;){if(Te.callback===null)r(p);else if(Te.startTime<=ae)r(p),Te.sortIndex=Te.expirationTime,t(h,Te);else break;Te=n(p)}}function D(ae){if(z=!1,q(ae),!x)if(n(h)!==null)x=!0,fe();else{var Te=n(p);Te!==null&&De(D,Te.startTime-ae)}}var I=!1,$=-1,H=5,K=-1;function V(){return!(e.unstable_now()-K<H)}function j(){if(I){var ae=e.unstable_now();K=ae;var Te=!0;try{e:{x=!1,z&&(z=!1,E($),$=-1),O=!0;var Re=R;try{t:{for(q(ae),v=n(h);v!==null&&!(v.expirationTime>ae&&V());){var Xe=v.callback;if(typeof Xe=="function"){v.callback=null,R=v.priorityLevel;var Q=Xe(v.expirationTime<=ae);if(ae=e.unstable_now(),typeof Q=="function"){v.callback=Q,q(ae),Te=!0;break t}v===n(h)&&r(h),q(ae)}else r(h);v=n(h)}if(v!==null)Te=!0;else{var de=n(p);de!==null&&De(D,de.startTime-ae),Te=!1}}break e}finally{v=null,R=Re,O=!1}Te=void 0}}finally{Te?te():I=!1}}}var te;if(typeof T=="function")te=function(){T(j)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,xe=Ee.port2;Ee.port1.onmessage=j,te=function(){xe.postMessage(null)}}else te=function(){A(j,0)};function fe(){I||(I=!0,te())}function De(ae,Te){$=A(function(){ae(e.unstable_now())},Te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ae){ae.callback=null},e.unstable_continueExecution=function(){x||O||(x=!0,fe())},e.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<ae?Math.floor(1e3/ae):5},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(ae){switch(R){case 1:case 2:case 3:var Te=3;break;default:Te=R}var Re=R;R=Te;try{return ae()}finally{R=Re}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ae,Te){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var Re=R;R=ae;try{return Te()}finally{R=Re}},e.unstable_scheduleCallback=function(ae,Te,Re){var Xe=e.unstable_now();switch(typeof Re=="object"&&Re!==null?(Re=Re.delay,Re=typeof Re=="number"&&0<Re?Xe+Re:Xe):Re=Xe,ae){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=Re+Q,ae={id:S++,callback:Te,priorityLevel:ae,startTime:Re,expirationTime:Q,sortIndex:-1},Re>Xe?(ae.sortIndex=Re,t(p,ae),n(h)===null&&ae===n(p)&&(z?(E($),$=-1):z=!0,De(D,Re-Xe))):(ae.sortIndex=Q,t(h,ae),x||O||(x=!0,fe())),ae},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(ae){var Te=R;return function(){var Re=R;R=Te;try{return ae.apply(this,arguments)}finally{R=Re}}}}(eR)),eR}var n3;function t9(){return n3||(n3=1,ZT.exports=e9()),ZT.exports}var tR={exports:{}},Ot={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r3;function n9(){if(r3)return Ot;r3=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),v=Symbol.iterator;function R(Q){return Q===null||typeof Q!="object"?null:(Q=v&&Q[v]||Q["@@iterator"],typeof Q=="function"?Q:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,z={};function A(Q,de,Le){this.props=Q,this.context=de,this.refs=z,this.updater=Le||O}A.prototype.isReactComponent={},A.prototype.setState=function(Q,de){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,de,"setState")},A.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function E(){}E.prototype=A.prototype;function T(Q,de,Le){this.props=Q,this.context=de,this.refs=z,this.updater=Le||O}var q=T.prototype=new E;q.constructor=T,x(q,A.prototype),q.isPureReactComponent=!0;var D=Array.isArray,I={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function H(Q,de,Le,ge,ve,ht){return Le=ht.ref,{$$typeof:e,type:Q,key:de,ref:Le!==void 0?Le:null,props:ht}}function K(Q,de){return H(Q.type,de,void 0,void 0,void 0,Q.props)}function V(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===e}function j(Q){var de={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(Le){return de[Le]})}var te=/\/+/g;function Ee(Q,de){return typeof Q=="object"&&Q!==null&&Q.key!=null?j(""+Q.key):de.toString(36)}function xe(){}function fe(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(xe,xe):(Q.status="pending",Q.then(function(de){Q.status==="pending"&&(Q.status="fulfilled",Q.value=de)},function(de){Q.status==="pending"&&(Q.status="rejected",Q.reason=de)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function De(Q,de,Le,ge,ve){var ht=typeof Q;(ht==="undefined"||ht==="boolean")&&(Q=null);var tt=!1;if(Q===null)tt=!0;else switch(ht){case"bigint":case"string":case"number":tt=!0;break;case"object":switch(Q.$$typeof){case e:case t:tt=!0;break;case S:return tt=Q._init,De(tt(Q._payload),de,Le,ge,ve)}}if(tt)return ve=ve(Q),tt=ge===""?"."+Ee(Q,0):ge,D(ve)?(Le="",tt!=null&&(Le=tt.replace(te,"$&/")+"/"),De(ve,de,Le,"",function(En){return En})):ve!=null&&(V(ve)&&(ve=K(ve,Le+(ve.key==null||Q&&Q.key===ve.key?"":(""+ve.key).replace(te,"$&/")+"/")+tt)),de.push(ve)),1;tt=0;var Kn=ge===""?".":ge+":";if(D(Q))for(var Gt=0;Gt<Q.length;Gt++)ge=Q[Gt],ht=Kn+Ee(ge,Gt),tt+=De(ge,de,Le,ht,ve);else if(Gt=R(Q),typeof Gt=="function")for(Q=Gt.call(Q),Gt=0;!(ge=Q.next()).done;)ge=ge.value,ht=Kn+Ee(ge,Gt++),tt+=De(ge,de,Le,ht,ve);else if(ht==="object"){if(typeof Q.then=="function")return De(fe(Q),de,Le,ge,ve);throw de=String(Q),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.")}return tt}function ae(Q,de,Le){if(Q==null)return Q;var ge=[],ve=0;return De(Q,ge,"","",function(ht){return de.call(Le,ht,ve++)}),ge}function Te(Q){if(Q._status===-1){var de=Q._result;de=de(),de.then(function(Le){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=Le)},function(Le){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=Le)}),Q._status===-1&&(Q._status=0,Q._result=de)}if(Q._status===1)return Q._result.default;throw Q._result}var Re=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var de=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(de))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)};function Xe(){}return Ot.Children={map:ae,forEach:function(Q,de,Le){ae(Q,function(){de.apply(this,arguments)},Le)},count:function(Q){var de=0;return ae(Q,function(){de++}),de},toArray:function(Q){return ae(Q,function(de){return de})||[]},only:function(Q){if(!V(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},Ot.Component=A,Ot.Fragment=n,Ot.Profiler=a,Ot.PureComponent=T,Ot.StrictMode=r,Ot.Suspense=h,Ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Ot.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ot.cache=function(Q){return function(){return Q.apply(null,arguments)}},Ot.cloneElement=function(Q,de,Le){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var ge=x({},Q.props),ve=Q.key,ht=void 0;if(de!=null)for(tt in de.ref!==void 0&&(ht=void 0),de.key!==void 0&&(ve=""+de.key),de)!$.call(de,tt)||tt==="key"||tt==="__self"||tt==="__source"||tt==="ref"&&de.ref===void 0||(ge[tt]=de[tt]);var tt=arguments.length-2;if(tt===1)ge.children=Le;else if(1<tt){for(var Kn=Array(tt),Gt=0;Gt<tt;Gt++)Kn[Gt]=arguments[Gt+2];ge.children=Kn}return H(Q.type,ve,void 0,void 0,ht,ge)},Ot.createContext=function(Q){return Q={$$typeof:l,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:o,_context:Q},Q},Ot.createElement=function(Q,de,Le){var ge,ve={},ht=null;if(de!=null)for(ge in de.key!==void 0&&(ht=""+de.key),de)$.call(de,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(ve[ge]=de[ge]);var tt=arguments.length-2;if(tt===1)ve.children=Le;else if(1<tt){for(var Kn=Array(tt),Gt=0;Gt<tt;Gt++)Kn[Gt]=arguments[Gt+2];ve.children=Kn}if(Q&&Q.defaultProps)for(ge in tt=Q.defaultProps,tt)ve[ge]===void 0&&(ve[ge]=tt[ge]);return H(Q,ht,void 0,void 0,null,ve)},Ot.createRef=function(){return{current:null}},Ot.forwardRef=function(Q){return{$$typeof:d,render:Q}},Ot.isValidElement=V,Ot.lazy=function(Q){return{$$typeof:S,_payload:{_status:-1,_result:Q},_init:Te}},Ot.memo=function(Q,de){return{$$typeof:p,type:Q,compare:de===void 0?null:de}},Ot.startTransition=function(Q){var de=I.T,Le={};I.T=Le;try{var ge=Q(),ve=I.S;ve!==null&&ve(Le,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(Xe,Re)}catch(ht){Re(ht)}finally{I.T=de}},Ot.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Ot.use=function(Q){return I.H.use(Q)},Ot.useActionState=function(Q,de,Le){return I.H.useActionState(Q,de,Le)},Ot.useCallback=function(Q,de){return I.H.useCallback(Q,de)},Ot.useContext=function(Q){return I.H.useContext(Q)},Ot.useDebugValue=function(){},Ot.useDeferredValue=function(Q,de){return I.H.useDeferredValue(Q,de)},Ot.useEffect=function(Q,de){return I.H.useEffect(Q,de)},Ot.useId=function(){return I.H.useId()},Ot.useImperativeHandle=function(Q,de,Le){return I.H.useImperativeHandle(Q,de,Le)},Ot.useInsertionEffect=function(Q,de){return I.H.useInsertionEffect(Q,de)},Ot.useLayoutEffect=function(Q,de){return I.H.useLayoutEffect(Q,de)},Ot.useMemo=function(Q,de){return I.H.useMemo(Q,de)},Ot.useOptimistic=function(Q,de){return I.H.useOptimistic(Q,de)},Ot.useReducer=function(Q,de,Le){return I.H.useReducer(Q,de,Le)},Ot.useRef=function(Q){return I.H.useRef(Q)},Ot.useState=function(Q){return I.H.useState(Q)},Ot.useSyncExternalStore=function(Q,de,Le){return I.H.useSyncExternalStore(Q,de,Le)},Ot.useTransition=function(){return I.H.useTransition()},Ot.version="19.0.0",Ot}var s3;function cA(){return s3||(s3=1,tR.exports=n9()),tR.exports}var nR={exports:{}},ps={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a3;function r9(){if(a3)return ps;a3=1;var e=cA();function t(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)p+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(h,p,S){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:h,containerInfo:p,implementation:S}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ps.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ps.createPortal=function(h,p){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return o(h,p,null,S)},ps.flushSync=function(h){var p=l.T,S=r.p;try{if(l.T=null,r.p=2,h)return h()}finally{l.T=p,r.p=S,r.d.f()}},ps.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(h,p))},ps.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},ps.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var S=p.as,v=d(S,p.crossOrigin),R=typeof p.integrity=="string"?p.integrity:void 0,O=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;S==="style"?r.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:R,fetchPriority:O}):S==="script"&&r.d.X(h,{crossOrigin:v,integrity:R,fetchPriority:O,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ps.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var S=d(p.as,p.crossOrigin);r.d.M(h,{crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(h)},ps.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var S=p.as,v=d(S,p.crossOrigin);r.d.L(h,S,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ps.preloadModule=function(h,p){if(typeof h=="string")if(p){var S=d(p.as,p.crossOrigin);r.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:S,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(h)},ps.requestFormReset=function(h){r.d.r(h)},ps.unstable_batchedUpdates=function(h,p){return h(p)},ps.useFormState=function(h,p,S){return l.H.useFormState(h,p,S)},ps.useFormStatus=function(){return l.H.useHostTransitionStatus()},ps.version="19.0.0",ps}var i3;function Sz(){if(i3)return nR.exports;i3=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),nR.exports=r9(),nR.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o3;function s9(){if(o3)return Jg;o3=1;var e=t9(),t=cA(),n=Sz();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}var o=Symbol.for("react.element"),l=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),O=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),D=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function $(s){return s===null||typeof s!="object"?null:(s=I&&s[I]||s["@@iterator"],typeof s=="function"?s:null)}var H=Symbol.for("react.client.reference");function K(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===H?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case h:return"Fragment";case d:return"Portal";case S:return"Profiler";case p:return"StrictMode";case z:return"Suspense";case A:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case O:return(s.displayName||"Context")+".Provider";case R:return(s._context.displayName||"Context")+".Consumer";case x:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case E:return i=s.displayName||null,i!==null?i:K(s.type)||"Memo";case T:i=s._payload,s=s._init;try{return K(s(i))}catch{}}return null}var V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=Object.assign,te,Ee;function xe(s){if(te===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);te=i&&i[1]||"",Ee=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+te+s+Ee}var fe=!1;function De(s,i){if(!s||fe)return"";fe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(le){var re=le}Reflect.construct(s,[],ye)}else{try{ye.call()}catch(le){re=le}s.call(ye.prototype)}}else{try{throw Error()}catch(le){re=le}(ye=s())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(le){if(le&&re&&typeof le.stack=="string")return[le.stack,re.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),k=y[0],L=y[1];if(k&&L){var B=k.split(`
`),X=L.split(`
`);for(g=u=0;u<B.length&&!B[u].includes("DetermineComponentFrameRoot");)u++;for(;g<X.length&&!X[g].includes("DetermineComponentFrameRoot");)g++;if(u===B.length||g===X.length)for(u=B.length-1,g=X.length-1;1<=u&&0<=g&&B[u]!==X[g];)g--;for(;1<=u&&0<=g;u--,g--)if(B[u]!==X[g]){if(u!==1||g!==1)do if(u--,g--,0>g||B[u]!==X[g]){var ue=`
`+B[u].replace(" at new "," at ");return s.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",s.displayName)),ue}while(1<=u&&0<=g);break}}}finally{fe=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?xe(c):""}function ae(s){switch(s.tag){case 26:case 27:case 5:return xe(s.type);case 16:return xe("Lazy");case 13:return xe("Suspense");case 19:return xe("SuspenseList");case 0:case 15:return s=De(s.type,!1),s;case 11:return s=De(s.type.render,!1),s;case 1:return s=De(s.type,!0),s;default:return""}}function Te(s){try{var i="";do i+=ae(s),s=s.return;while(s);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function Re(s){var i=s,c=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(c=i.return),s=i.return;while(s)}return i.tag===3?c:null}function Xe(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function Q(s){if(Re(s)!==s)throw Error(r(188))}function de(s){var i=s.alternate;if(!i){if(i=Re(s),i===null)throw Error(r(188));return i!==s?null:s}for(var c=s,u=i;;){var g=c.return;if(g===null)break;var y=g.alternate;if(y===null){if(u=g.return,u!==null){c=u;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===c)return Q(g),s;if(y===u)return Q(g),i;y=y.sibling}throw Error(r(188))}if(c.return!==u.return)c=g,u=y;else{for(var k=!1,L=g.child;L;){if(L===c){k=!0,c=g,u=y;break}if(L===u){k=!0,u=g,c=y;break}L=L.sibling}if(!k){for(L=y.child;L;){if(L===c){k=!0,c=y,u=g;break}if(L===u){k=!0,u=y,c=g;break}L=L.sibling}if(!k)throw Error(r(189))}}if(c.alternate!==u)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?s:i}function Le(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=Le(s),i!==null)return i;s=s.sibling}return null}var ge=Array.isArray,ve=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ht={pending:!1,data:null,method:null,action:null},tt=[],Kn=-1;function Gt(s){return{current:s}}function En(s){0>Kn||(s.current=tt[Kn],tt[Kn]=null,Kn--)}function St(s,i){Kn++,tt[Kn]=s.current,s.current=i}var Tn=Gt(null),Ui=Gt(null),na=Gt(null),js=Gt(null);function Pi(s,i){switch(St(na,i),St(Ui,s),St(Tn,null),s=i.nodeType,s){case 9:case 11:i=(i=i.documentElement)&&(i=i.namespaceURI)?kq(i):0;break;default:if(s=s===8?i.parentNode:i,i=s.tagName,s=s.namespaceURI)s=kq(s),i=Aq(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}En(Tn),St(Tn,i)}function fi(){En(Tn),En(Ui),En(na)}function qc(s){s.memoizedState!==null&&St(js,s);var i=Tn.current,c=Aq(i,s.type);i!==c&&(St(Ui,s),St(Tn,c))}function Oo(s){Ui.current===s&&(En(Tn),En(Ui)),js.current===s&&(En(js),Vg._currentValue=ht)}var au=Object.prototype.hasOwnProperty,iu=e.unstable_scheduleCallback,ou=e.unstable_cancelCallback,Je=e.unstable_shouldYield,Wt=e.unstable_requestPaint,ds=e.unstable_now,ji=e.unstable_getCurrentPriorityLevel,Hs=e.unstable_ImmediatePriority,qr=e.unstable_UserBlockingPriority,Do=e.unstable_NormalPriority,cu=e.unstable_LowPriority,lu=e.unstable_IdlePriority,Zr=e.log,Aa=e.unstable_setDisableYieldValue,Hi=null,vt=null;function Wm(s){if(vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(Hi,s,void 0,(s.current.flags&128)===128)}catch{}}function Bs(s){if(typeof Zr=="function"&&Aa(s),vt&&typeof vt.setStrictMode=="function")try{vt.setStrictMode(Hi,s)}catch{}}var pn=Math.clz32?Math.clz32:uu,Nc=Math.log,Oa=Math.LN2;function uu(s){return s>>>=0,s===0?32:31-(Nc(s)/Oa|0)|0}var di=128,Mc=4194304;function Vr(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function hi(s,i){var c=s.pendingLanes;if(c===0)return 0;var u=0,g=s.suspendedLanes,y=s.pingedLanes,k=s.warmLanes;s=s.finishedLanes!==0;var L=c&134217727;return L!==0?(c=L&~g,c!==0?u=Vr(c):(y&=L,y!==0?u=Vr(y):s||(k=L&~k,k!==0&&(u=Vr(k))))):(L=c&~g,L!==0?u=Vr(L):y!==0?u=Vr(y):s||(k=c&~k,k!==0&&(u=Vr(k)))),u===0?0:i!==0&&i!==u&&(i&g)===0&&(g=u&-u,k=i&-i,g>=k||g===32&&(k&4194176)!==0)?i:u}function ra(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function fd(s,i){switch(s){case 1:case 2:case 4:case 8:return i+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lt(){var s=di;return di<<=1,(di&4194176)===0&&(di=128),s}function Y(){var s=Mc;return Mc<<=1,(Mc&62914560)===0&&(Mc=4194304),s}function Z(s){for(var i=[],c=0;31>c;c++)i.push(s);return i}function se(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Se(s,i,c,u,g,y){var k=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var L=s.entanglements,B=s.expirationTimes,X=s.hiddenUpdates;for(c=k&~c;0<c;){var ue=31-pn(c),ye=1<<ue;L[ue]=0,B[ue]=-1;var re=X[ue];if(re!==null)for(X[ue]=null,ue=0;ue<re.length;ue++){var le=re[ue];le!==null&&(le.lane&=-536870913)}c&=~ye}u!==0&&Oe(s,u,0),y!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=y&~(k&~i))}function Oe(s,i,c){s.pendingLanes|=i,s.suspendedLanes&=~i;var u=31-pn(i);s.entangledLanes|=i,s.entanglements[u]=s.entanglements[u]|1073741824|c&4194218}function Ve(s,i){var c=s.entangledLanes|=i;for(s=s.entanglements;c;){var u=31-pn(c),g=1<<u;g&i|s[u]&i&&(s[u]|=i),c&=~g}}function st(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function C(){var s=ve.p;return s!==0?s:(s=window.event,s===void 0?32:Kq(s.type))}function we(s,i){var c=ve.p;try{return ve.p=s,i()}finally{ve.p=c}}var Ue=Math.random().toString(36).slice(2),He="__reactFiber$"+Ue,$e="__reactProps$"+Ue,mt="__reactContainer$"+Ue,Ht="__reactEvents$"+Ue,Gn="__reactListeners$"+Ue,wr="__reactHandles$"+Ue,Kr="__reactResources$"+Ue,Tt="__reactMarker$"+Ue;function mi(s){delete s[He],delete s[$e],delete s[Ht],delete s[Gn],delete s[wr]}function Fn(s){var i=s[He];if(i)return i;for(var c=s.parentNode;c;){if(i=c[mt]||c[He]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(s=xq(s);s!==null;){if(c=s[He])return c;s=xq(s)}return i}s=c,c=s.parentNode}return null}function Vs(s){if(s=s[He]||s[mt]){var i=s.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return s}return null}function Er(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function Ks(s){var i=s[Kr];return i||(i=s[Kr]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Rn(s){s[Tt]=!0}var Ic=new Set,Da={};function Gs(s,i){It(s,i),It(s+"Capture",i)}function It(s,i){for(Da[s]=i,s=0;s<i.length;s++)Ic.add(i[s])}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xo={},Lc={};function Un(s){return au.call(Lc,s)?!0:au.call(xo,s)?!1:sa.test(s)?Lc[s]=!0:(xo[s]=!0,!1)}function aa(s,i,c){if(Un(i))if(c===null)s.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+c)}}function $o(s,i,c){if(c===null)s.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+c)}}function ia(s,i,c,u){if(u===null)s.removeAttribute(c);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(i,c,""+u)}}function Qs(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function V_(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function jE(s){var i=V_(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),u=""+s[i];if(!s.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,y=c.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return g.call(this)},set:function(k){u=""+k,y.call(this,k)}}),Object.defineProperty(s,i,{enumerable:c.enumerable}),{getValue:function(){return u},setValue:function(k){u=""+k},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function dd(s){s._valueTracker||(s._valueTracker=jE(s))}function K_(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var c=i.getValue(),u="";return s&&(u=V_(s)?s.checked?"true":"false":s.value),s=u,s!==c?(i.setValue(s),!0):!1}function hd(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var HE=/[\n"\\]/g;function Ys(s){return s.replace(HE,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function fu(s,i,c,u,g,y,k,L){s.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?s.type=k:s.removeAttribute("type"),i!=null?k==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+Qs(i)):s.value!==""+Qs(i)&&(s.value=""+Qs(i)):k!=="submit"&&k!=="reset"||s.removeAttribute("value"),i!=null?qo(s,k,Qs(i)):c!=null?qo(s,k,Qs(c)):u!=null&&s.removeAttribute("value"),g==null&&y!=null&&(s.defaultChecked=!!y),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?s.name=""+Qs(L):s.removeAttribute("name")}function G_(s,i,c,u,g,y,k,L){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),i!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||i!=null))return;c=c!=null?""+Qs(c):"",i=i!=null?""+Qs(i):c,L||i===s.value||(s.value=i),s.defaultValue=i}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=L?s.checked:!!u,s.defaultChecked=!!u,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(s.name=k)}function qo(s,i,c){i==="number"&&hd(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function Fc(s,i,c,u){if(s=s.options,i){i={};for(var g=0;g<c.length;g++)i["$"+c[g]]=!0;for(c=0;c<s.length;c++)g=i.hasOwnProperty("$"+s[c].value),s[c].selected!==g&&(s[c].selected=g),g&&u&&(s[c].defaultSelected=!0)}else{for(c=""+Qs(c),i=null,g=0;g<s.length;g++){if(s[g].value===c){s[g].selected=!0,u&&(s[g].defaultSelected=!0);return}i!==null||s[g].disabled||(i=s[g])}i!==null&&(i.selected=!0)}}function Q_(s,i,c){if(i!=null&&(i=""+Qs(i),i!==s.value&&(s.value=i),c==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=c!=null?""+Qs(c):""}function Y_(s,i,c,u){if(i==null){if(u!=null){if(c!=null)throw Error(r(92));if(ge(u)){if(1<u.length)throw Error(r(93));u=u[0]}c=u}c==null&&(c=""),i=c}c=Qs(i),s.defaultValue=c,u=s.textContent,u===c&&u!==""&&u!==null&&(s.value=u)}function zc(s,i){if(i){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=i;return}}s.textContent=i}var BE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function W_(s,i,c){var u=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?u?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":u?s.setProperty(i,c):typeof c!="number"||c===0||BE.has(i)?i==="float"?s.cssFloat=c:s[i]=(""+c).trim():s[i]=c+"px"}function J_(s,i,c){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,c!=null){for(var u in c)!c.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var g in i)u=i[g],i.hasOwnProperty(g)&&c[g]!==u&&W_(s,g,u)}else for(var y in i)i.hasOwnProperty(y)&&W_(s,y,i[y])}function Jm(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var VE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),KE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function md(s){return KE.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var qt=null;function Xm(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Uc=null,Pc=null;function X_(s){var i=Vs(s);if(i&&(s=i.stateNode)){var c=s[$e]||null;e:switch(s=i.stateNode,i.type){case"input":if(fu(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Ys(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var u=c[i];if(u!==s&&u.form===s.form){var g=u[$e]||null;if(!g)throw Error(r(90));fu(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<c.length;i++)u=c[i],u.form===s.form&&K_(u)}break e;case"textarea":Q_(s,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&Fc(s,!!c.multiple,i,!1)}}}var Zm=!1;function Z_(s,i,c){if(Zm)return s(i,c);Zm=!0;try{var u=s(i);return u}finally{if(Zm=!1,(Uc!==null||Pc!==null)&&(Hb(),Uc&&(i=Uc,s=Pc,Pc=Uc=null,X_(i),s)))for(i=0;i<s.length;i++)X_(s[i])}}function du(s,i){var c=s.stateNode;if(c===null)return null;var u=c[$e]||null;if(u===null)return null;c=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(r(231,i,typeof c));return c}var eg=!1;if(zn)try{var hu={};Object.defineProperty(hu,"passive",{get:function(){eg=!0}}),window.addEventListener("test",hu,hu),window.removeEventListener("test",hu,hu)}catch{eg=!1}var Bi=null,tg=null,gd=null;function eb(){if(gd)return gd;var s,i=tg,c=i.length,u,g="value"in Bi?Bi.value:Bi.textContent,y=g.length;for(s=0;s<c&&i[s]===g[s];s++);var k=c-s;for(u=1;u<=k&&i[c-u]===g[y-u];u++);return gd=g.slice(s,1<u?1-u:void 0)}function pd(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function yd(){return!0}function tb(){return!1}function hs(s){function i(c,u,g,y,k){this._reactName=c,this._targetInst=g,this.type=u,this.nativeEvent=y,this.target=k,this.currentTarget=null;for(var L in s)s.hasOwnProperty(L)&&(c=s[L],this[L]=c?c(y):y[L]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?yd:tb,this.isPropagationStopped=tb,this}return j(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=yd)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=yd)},persist:function(){},isPersistent:yd}),i}var No={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_d=hs(No),mu=j({},No,{view:0,detail:0}),GE=hs(mu),ng,rg,gu,bd=j({},mu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ig,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==gu&&(gu&&s.type==="mousemove"?(ng=s.screenX-gu.screenX,rg=s.screenY-gu.screenY):rg=ng=0,gu=s),ng)},movementY:function(s){return"movementY"in s?s.movementY:rg}}),nb=hs(bd),QE=j({},bd,{dataTransfer:0}),YE=hs(QE),WE=j({},mu,{relatedTarget:0}),sg=hs(WE),JE=j({},No,{animationName:0,elapsedTime:0,pseudoElement:0}),XE=hs(JE),ZE=j({},No,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),e1=hs(ZE),t1=j({},No,{data:0}),ag=hs(t1),n1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},r1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jc(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=s1[s])?!!i[s]:!1}function ig(){return jc}var a1=j({},mu,{key:function(s){if(s.key){var i=n1[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=pd(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?r1[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ig,charCode:function(s){return s.type==="keypress"?pd(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?pd(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Hc=hs(a1),i1=j({},bd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),og=hs(i1),o1=j({},mu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ig}),rb=hs(o1),c1=j({},No,{propertyName:0,elapsedTime:0,pseudoElement:0}),sb=hs(c1),ab=j({},bd,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ib=hs(ab),l1=j({},No,{newState:0,oldState:0}),Vi=hs(l1),u1=[9,13,27,32],cg=zn&&"CompositionEvent"in window,pu=null;zn&&"documentMode"in document&&(pu=document.documentMode);var f1=zn&&"TextEvent"in window&&!pu,ob=zn&&(!cg||pu&&8<pu&&11>=pu),lg=" ",cb=!1;function lb(s,i){switch(s){case"keyup":return u1.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ub(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Bc=!1;function U(s,i){switch(s){case"compositionend":return ub(i);case"keypress":return i.which!==32?null:(cb=!0,lg);case"textInput":return s=i.data,s===lg&&cb?null:s;default:return null}}function fb(s,i){if(Bc)return s==="compositionend"||!cg&&lb(s,i)?(s=eb(),gd=tg=Bi=null,Bc=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ob&&i.locale!=="ko"?null:i.data;default:return null}}var db={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ug(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!db[s.type]:i==="textarea"}function fg(s,i,c,u){Uc?Pc?Pc.push(u):Pc=[u]:Uc=u,i=Qb(i,"onChange"),0<i.length&&(c=new _d("onChange","change",null,c,u),s.push({event:c,listeners:i}))}var Vc=null,Kc=null;function Sd(s){wq(s,0)}function vd(s){var i=Er(s);if(K_(i))return s}function dg(s,i){if(s==="change")return i}var hg=!1;if(zn){var f;if(zn){var m="oninput"in document;if(!m){var _=document.createElement("div");_.setAttribute("oninput","return;"),m=typeof _.oninput=="function"}f=m}else f=!1;hg=f&&(!document.documentMode||9<document.documentMode)}function w(){Vc&&(Vc.detachEvent("onpropertychange",N),Kc=Vc=null)}function N(s){if(s.propertyName==="value"&&vd(Kc)){var i=[];fg(i,Kc,s,Xm(s)),Z_(Sd,i)}}function P(s,i,c){s==="focusin"?(w(),Vc=i,Kc=c,Vc.attachEvent("onpropertychange",N)):s==="focusout"&&w()}function G(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return vd(Kc)}function W(s,i){if(s==="click")return vd(i)}function he(s,i){if(s==="input"||s==="change")return vd(i)}function qe(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Qe=typeof Object.is=="function"?Object.is:qe;function pt(s,i){if(Qe(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var c=Object.keys(s),u=Object.keys(i);if(c.length!==u.length)return!1;for(u=0;u<c.length;u++){var g=c[u];if(!au.call(i,g)||!Qe(s[g],i[g]))return!1}return!0}function Pt(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ye(s,i){var c=Pt(s);s=0;for(var u;c;){if(c.nodeType===3){if(u=s+c.textContent.length,s<=i&&u>=i)return{node:c,offset:i-s};s=u}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Pt(c)}}function nt(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?nt(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function nn(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=hd(s.document);i instanceof s.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)s=i.contentWindow;else break;i=hd(s.document)}return i}function Gr(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}function Rs(s,i){var c=nn(i);i=s.focusedElem;var u=s.selectionRange;if(c!==i&&i&&i.ownerDocument&&nt(i.ownerDocument.documentElement,i)){if(u!==null&&Gr(i)){if(s=u.start,c=u.end,c===void 0&&(c=s),"selectionStart"in i)i.selectionStart=s,i.selectionEnd=Math.min(c,i.value.length);else if(c=(s=i.ownerDocument||document)&&s.defaultView||window,c.getSelection){c=c.getSelection();var g=i.textContent.length,y=Math.min(u.start,g);u=u.end===void 0?y:Math.min(u.end,g),!c.extend&&y>u&&(g=u,u=y,y=g),g=Ye(i,y);var k=Ye(i,u);g&&k&&(c.rangeCount!==1||c.anchorNode!==g.node||c.anchorOffset!==g.offset||c.focusNode!==k.node||c.focusOffset!==k.offset)&&(s=s.createRange(),s.setStart(g.node,g.offset),c.removeAllRanges(),y>u?(c.addRange(s),c.extend(k.node,k.offset)):(s.setEnd(k.node,k.offset),c.addRange(s)))}}for(s=[],c=i;c=c.parentNode;)c.nodeType===1&&s.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<s.length;i++)c=s[i],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var oa=zn&&"documentMode"in document&&11>=document.documentMode,Qr=null,Mo=null,ms=null,Ki=!1;function Tr(s,i,c){var u=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Ki||Qr==null||Qr!==hd(u)||(u=Qr,"selectionStart"in u&&Gr(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ms&&pt(ms,u)||(ms=u,u=Qb(Mo,"onSelect"),0<u.length&&(i=new _d("onSelect","select",null,i,c),s.push({event:i,listeners:u}),i.target=Qr)))}function yu(s,i){var c={};return c[s.toLowerCase()]=i.toLowerCase(),c["Webkit"+s]="webkit"+i,c["Moz"+s]="moz"+i,c}var wd={animationend:yu("Animation","AnimationEnd"),animationiteration:yu("Animation","AnimationIteration"),animationstart:yu("Animation","AnimationStart"),transitionrun:yu("Transition","TransitionRun"),transitionstart:yu("Transition","TransitionStart"),transitioncancel:yu("Transition","TransitionCancel"),transitionend:yu("Transition","TransitionEnd")},d1={},ox={};zn&&(ox=document.createElement("div").style,"AnimationEvent"in window||(delete wd.animationend.animation,delete wd.animationiteration.animation,delete wd.animationstart.animation),"TransitionEvent"in window||delete wd.transitionend.transition);function _u(s){if(d1[s])return d1[s];if(!wd[s])return s;var i=wd[s],c;for(c in i)if(i.hasOwnProperty(c)&&c in ox)return d1[s]=i[c];return s}var cx=_u("animationend"),lx=_u("animationiteration"),ux=_u("animationstart"),qV=_u("transitionrun"),NV=_u("transitionstart"),MV=_u("transitioncancel"),fx=_u("transitionend"),dx=new Map,hx="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function gi(s,i){dx.set(s,i),Gs(i,[s])}var xa=[],Ed=0,h1=0;function hb(){for(var s=Ed,i=h1=Ed=0;i<s;){var c=xa[i];xa[i++]=null;var u=xa[i];xa[i++]=null;var g=xa[i];xa[i++]=null;var y=xa[i];if(xa[i++]=null,u!==null&&g!==null){var k=u.pending;k===null?g.next=g:(g.next=k.next,k.next=g),u.pending=g}y!==0&&mx(c,g,y)}}function mb(s,i,c,u){xa[Ed++]=s,xa[Ed++]=i,xa[Ed++]=c,xa[Ed++]=u,h1|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function m1(s,i,c,u){return mb(s,i,c,u),gb(s)}function Gc(s,i){return mb(s,null,null,i),gb(s)}function mx(s,i,c){s.lanes|=c;var u=s.alternate;u!==null&&(u.lanes|=c);for(var g=!1,y=s.return;y!==null;)y.childLanes|=c,u=y.alternate,u!==null&&(u.childLanes|=c),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(g=!0)),s=y,y=y.return;g&&i!==null&&s.tag===3&&(y=s.stateNode,g=31-pn(c),y=y.hiddenUpdates,s=y[g],s===null?y[g]=[i]:s.push(i),i.lane=c|536870912)}function gb(s){if(50<Fg)throw Fg=0,ST=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var Td={},gx=new WeakMap;function $a(s,i){if(typeof s=="object"&&s!==null){var c=gx.get(s);return c!==void 0?c:(i={value:s,source:i,stack:Te(i)},gx.set(s,i),i)}return{value:s,source:i,stack:Te(i)}}var Rd=[],Cd=0,pb=null,yb=0,qa=[],Na=0,bu=null,Io=1,Lo="";function Su(s,i){Rd[Cd++]=yb,Rd[Cd++]=pb,pb=s,yb=i}function px(s,i,c){qa[Na++]=Io,qa[Na++]=Lo,qa[Na++]=bu,bu=s;var u=Io;s=Lo;var g=32-pn(u)-1;u&=~(1<<g),c+=1;var y=32-pn(i)+g;if(30<y){var k=g-g%5;y=(u&(1<<k)-1).toString(32),u>>=k,g-=k,Io=1<<32-pn(i)+g|c<<g|u,Lo=y+s}else Io=1<<y|c<<g|u,Lo=s}function g1(s){s.return!==null&&(Su(s,1),px(s,1,0))}function p1(s){for(;s===pb;)pb=Rd[--Cd],Rd[Cd]=null,yb=Rd[--Cd],Rd[Cd]=null;for(;s===bu;)bu=qa[--Na],qa[Na]=null,Lo=qa[--Na],qa[Na]=null,Io=qa[--Na],qa[Na]=null}var Cs=null,es=null,Jt=!1,pi=null,Gi=!1,y1=Error(r(519));function vu(s){var i=Error(r(418,""));throw pg($a(i,s)),y1}function yx(s){var i=s.stateNode,c=s.type,u=s.memoizedProps;switch(i[He]=s,i[$e]=u,c){case"dialog":Bt("cancel",i),Bt("close",i);break;case"iframe":case"object":case"embed":Bt("load",i);break;case"video":case"audio":for(c=0;c<Ug.length;c++)Bt(Ug[c],i);break;case"source":Bt("error",i);break;case"img":case"image":case"link":Bt("error",i),Bt("load",i);break;case"details":Bt("toggle",i);break;case"input":Bt("invalid",i),G_(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),dd(i);break;case"select":Bt("invalid",i);break;case"textarea":Bt("invalid",i),Y_(i,u.value,u.defaultValue,u.children),dd(i)}c=u.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||u.suppressHydrationWarning===!0||Cq(i.textContent,c)?(u.popover!=null&&(Bt("beforetoggle",i),Bt("toggle",i)),u.onScroll!=null&&Bt("scroll",i),u.onScrollEnd!=null&&Bt("scrollend",i),u.onClick!=null&&(i.onclick=Yb),i=!0):i=!1,i||vu(s)}function _x(s){for(Cs=s.return;Cs;)switch(Cs.tag){case 3:case 27:Gi=!0;return;case 5:case 13:Gi=!1;return;default:Cs=Cs.return}}function mg(s){if(s!==Cs)return!1;if(!Jt)return _x(s),Jt=!0,!1;var i=!1,c;if((c=s.tag!==3&&s.tag!==27)&&((c=s.tag===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||LT(s.type,s.memoizedProps)),c=!c),c&&(i=!0),i&&es&&vu(s),_x(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8)if(c=s.data,c==="/$"){if(i===0){es=_i(s.nextSibling);break e}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++;s=s.nextSibling}es=null}}else es=Cs?_i(s.stateNode.nextSibling):null;return!0}function gg(){es=Cs=null,Jt=!1}function pg(s){pi===null?pi=[s]:pi.push(s)}var yg=Error(r(460)),bx=Error(r(474)),_1={then:function(){}};function Sx(s){return s=s.status,s==="fulfilled"||s==="rejected"}function _b(){}function vx(s,i,c){switch(c=s[c],c===void 0?s.push(i):c!==i&&(i.then(_b,_b),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,s===yg?Error(r(483)):s;default:if(typeof i.status=="string")i.then(_b,_b);else{if(s=Cn,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(u){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=u}},function(u){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,s===yg?Error(r(483)):s}throw _g=i,yg}}var _g=null;function wx(){if(_g===null)throw Error(r(459));var s=_g;return _g=null,s}var kd=null,bg=0;function bb(s){var i=bg;return bg+=1,kd===null&&(kd=[]),vx(kd,s,i)}function Sg(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function Sb(s,i){throw i.$$typeof===o?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function Ex(s){var i=s._init;return i(s._payload)}function Tx(s){function i(ee,J){if(s){var ne=ee.deletions;ne===null?(ee.deletions=[J],ee.flags|=16):ne.push(J)}}function c(ee,J){if(!s)return null;for(;J!==null;)i(ee,J),J=J.sibling;return null}function u(ee){for(var J=new Map;ee!==null;)ee.key!==null?J.set(ee.key,ee):J.set(ee.index,ee),ee=ee.sibling;return J}function g(ee,J){return ee=al(ee,J),ee.index=0,ee.sibling=null,ee}function y(ee,J,ne){return ee.index=ne,s?(ne=ee.alternate,ne!==null?(ne=ne.index,ne<J?(ee.flags|=33554434,J):ne):(ee.flags|=33554434,J)):(ee.flags|=1048576,J)}function k(ee){return s&&ee.alternate===null&&(ee.flags|=33554434),ee}function L(ee,J,ne,me){return J===null||J.tag!==6?(J=dT(ne,ee.mode,me),J.return=ee,J):(J=g(J,ne),J.return=ee,J)}function B(ee,J,ne,me){var ze=ne.type;return ze===h?ue(ee,J,ne.props.children,me,ne.key):J!==null&&(J.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===T&&Ex(ze)===J.type)?(J=g(J,ne.props),Sg(J,ne),J.return=ee,J):(J=Fb(ne.type,ne.key,ne.props,null,ee.mode,me),Sg(J,ne),J.return=ee,J)}function X(ee,J,ne,me){return J===null||J.tag!==4||J.stateNode.containerInfo!==ne.containerInfo||J.stateNode.implementation!==ne.implementation?(J=hT(ne,ee.mode,me),J.return=ee,J):(J=g(J,ne.children||[]),J.return=ee,J)}function ue(ee,J,ne,me,ze){return J===null||J.tag!==7?(J=xu(ne,ee.mode,me,ze),J.return=ee,J):(J=g(J,ne),J.return=ee,J)}function ye(ee,J,ne){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=dT(""+J,ee.mode,ne),J.return=ee,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case l:return ne=Fb(J.type,J.key,J.props,null,ee.mode,ne),Sg(ne,J),ne.return=ee,ne;case d:return J=hT(J,ee.mode,ne),J.return=ee,J;case T:var me=J._init;return J=me(J._payload),ye(ee,J,ne)}if(ge(J)||$(J))return J=xu(J,ee.mode,ne,null),J.return=ee,J;if(typeof J.then=="function")return ye(ee,bb(J),ne);if(J.$$typeof===O)return ye(ee,Mb(ee,J),ne);Sb(ee,J)}return null}function re(ee,J,ne,me){var ze=J!==null?J.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ze!==null?null:L(ee,J,""+ne,me);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case l:return ne.key===ze?B(ee,J,ne,me):null;case d:return ne.key===ze?X(ee,J,ne,me):null;case T:return ze=ne._init,ne=ze(ne._payload),re(ee,J,ne,me)}if(ge(ne)||$(ne))return ze!==null?null:ue(ee,J,ne,me,null);if(typeof ne.then=="function")return re(ee,J,bb(ne),me);if(ne.$$typeof===O)return re(ee,J,Mb(ee,ne),me);Sb(ee,ne)}return null}function le(ee,J,ne,me,ze){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return ee=ee.get(ne)||null,L(J,ee,""+me,ze);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case l:return ee=ee.get(me.key===null?ne:me.key)||null,B(J,ee,me,ze);case d:return ee=ee.get(me.key===null?ne:me.key)||null,X(J,ee,me,ze);case T:var Nt=me._init;return me=Nt(me._payload),le(ee,J,ne,me,ze)}if(ge(me)||$(me))return ee=ee.get(ne)||null,ue(J,ee,me,ze,null);if(typeof me.then=="function")return le(ee,J,ne,bb(me),ze);if(me.$$typeof===O)return le(ee,J,ne,Mb(J,me),ze);Sb(J,me)}return null}function We(ee,J,ne,me){for(var ze=null,Nt=null,Ze=J,ut=J=0,Jr=null;Ze!==null&&ut<ne.length;ut++){Ze.index>ut?(Jr=Ze,Ze=null):Jr=Ze.sibling;var Xt=re(ee,Ze,ne[ut],me);if(Xt===null){Ze===null&&(Ze=Jr);break}s&&Ze&&Xt.alternate===null&&i(ee,Ze),J=y(Xt,J,ut),Nt===null?ze=Xt:Nt.sibling=Xt,Nt=Xt,Ze=Jr}if(ut===ne.length)return c(ee,Ze),Jt&&Su(ee,ut),ze;if(Ze===null){for(;ut<ne.length;ut++)Ze=ye(ee,ne[ut],me),Ze!==null&&(J=y(Ze,J,ut),Nt===null?ze=Ze:Nt.sibling=Ze,Nt=Ze);return Jt&&Su(ee,ut),ze}for(Ze=u(Ze);ut<ne.length;ut++)Jr=le(Ze,ee,ut,ne[ut],me),Jr!==null&&(s&&Jr.alternate!==null&&Ze.delete(Jr.key===null?ut:Jr.key),J=y(Jr,J,ut),Nt===null?ze=Jr:Nt.sibling=Jr,Nt=Jr);return s&&Ze.forEach(function(dl){return i(ee,dl)}),Jt&&Su(ee,ut),ze}function Rt(ee,J,ne,me){if(ne==null)throw Error(r(151));for(var ze=null,Nt=null,Ze=J,ut=J=0,Jr=null,Xt=ne.next();Ze!==null&&!Xt.done;ut++,Xt=ne.next()){Ze.index>ut?(Jr=Ze,Ze=null):Jr=Ze.sibling;var dl=re(ee,Ze,Xt.value,me);if(dl===null){Ze===null&&(Ze=Jr);break}s&&Ze&&dl.alternate===null&&i(ee,Ze),J=y(dl,J,ut),Nt===null?ze=dl:Nt.sibling=dl,Nt=dl,Ze=Jr}if(Xt.done)return c(ee,Ze),Jt&&Su(ee,ut),ze;if(Ze===null){for(;!Xt.done;ut++,Xt=ne.next())Xt=ye(ee,Xt.value,me),Xt!==null&&(J=y(Xt,J,ut),Nt===null?ze=Xt:Nt.sibling=Xt,Nt=Xt);return Jt&&Su(ee,ut),ze}for(Ze=u(Ze);!Xt.done;ut++,Xt=ne.next())Xt=le(Ze,ee,ut,Xt.value,me),Xt!==null&&(s&&Xt.alternate!==null&&Ze.delete(Xt.key===null?ut:Xt.key),J=y(Xt,J,ut),Nt===null?ze=Xt:Nt.sibling=Xt,Nt=Xt);return s&&Ze.forEach(function(Y7){return i(ee,Y7)}),Jt&&Su(ee,ut),ze}function ar(ee,J,ne,me){if(typeof ne=="object"&&ne!==null&&ne.type===h&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case l:e:{for(var ze=ne.key;J!==null;){if(J.key===ze){if(ze=ne.type,ze===h){if(J.tag===7){c(ee,J.sibling),me=g(J,ne.props.children),me.return=ee,ee=me;break e}}else if(J.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===T&&Ex(ze)===J.type){c(ee,J.sibling),me=g(J,ne.props),Sg(me,ne),me.return=ee,ee=me;break e}c(ee,J);break}else i(ee,J);J=J.sibling}ne.type===h?(me=xu(ne.props.children,ee.mode,me,ne.key),me.return=ee,ee=me):(me=Fb(ne.type,ne.key,ne.props,null,ee.mode,me),Sg(me,ne),me.return=ee,ee=me)}return k(ee);case d:e:{for(ze=ne.key;J!==null;){if(J.key===ze)if(J.tag===4&&J.stateNode.containerInfo===ne.containerInfo&&J.stateNode.implementation===ne.implementation){c(ee,J.sibling),me=g(J,ne.children||[]),me.return=ee,ee=me;break e}else{c(ee,J);break}else i(ee,J);J=J.sibling}me=hT(ne,ee.mode,me),me.return=ee,ee=me}return k(ee);case T:return ze=ne._init,ne=ze(ne._payload),ar(ee,J,ne,me)}if(ge(ne))return We(ee,J,ne,me);if($(ne)){if(ze=$(ne),typeof ze!="function")throw Error(r(150));return ne=ze.call(ne),Rt(ee,J,ne,me)}if(typeof ne.then=="function")return ar(ee,J,bb(ne),me);if(ne.$$typeof===O)return ar(ee,J,Mb(ee,ne),me);Sb(ee,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,J!==null&&J.tag===6?(c(ee,J.sibling),me=g(J,ne),me.return=ee,ee=me):(c(ee,J),me=dT(ne,ee.mode,me),me.return=ee,ee=me),k(ee)):c(ee,J)}return function(ee,J,ne,me){try{bg=0;var ze=ar(ee,J,ne,me);return kd=null,ze}catch(Ze){if(Ze===yg)throw Ze;var Nt=Fa(29,Ze,null,ee.mode);return Nt.lanes=me,Nt.return=ee,Nt}finally{}}}var wu=Tx(!0),Rx=Tx(!1),Ad=Gt(null),vb=Gt(0);function Cx(s,i){s=Qo,St(vb,s),St(Ad,i),Qo=s|i.baseLanes}function b1(){St(vb,Qo),St(Ad,Ad.current)}function S1(){Qo=vb.current,En(Ad),En(vb)}var Ma=Gt(null),Qi=null;function Qc(s){var i=s.alternate;St(Nr,Nr.current&1),St(Ma,s),Qi===null&&(i===null||Ad.current!==null||i.memoizedState!==null)&&(Qi=s)}function kx(s){if(s.tag===22){if(St(Nr,Nr.current),St(Ma,s),Qi===null){var i=s.alternate;i!==null&&i.memoizedState!==null&&(Qi=s)}}else Yc()}function Yc(){St(Nr,Nr.current),St(Ma,Ma.current)}function Fo(s){En(Ma),Qi===s&&(Qi=null),En(Nr)}var Nr=Gt(0);function wb(s){for(var i=s;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var IV=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(c,u){s.push(u)}};this.abort=function(){i.aborted=!0,s.forEach(function(c){return c()})}},LV=e.unstable_scheduleCallback,FV=e.unstable_NormalPriority,Mr={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function v1(){return{controller:new IV,data:new Map,refCount:0}}function vg(s){s.refCount--,s.refCount===0&&LV(FV,function(){s.controller.abort()})}var wg=null,w1=0,Od=0,Dd=null;function zV(s,i){if(wg===null){var c=wg=[];w1=0,Od=AT(),Dd={status:"pending",value:void 0,then:function(u){c.push(u)}}}return w1++,i.then(Ax,Ax),i}function Ax(){if(--w1===0&&wg!==null){Dd!==null&&(Dd.status="fulfilled");var s=wg;wg=null,Od=0,Dd=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function UV(s,i){var c=[],u={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return s.then(function(){u.status="fulfilled",u.value=i;for(var g=0;g<c.length;g++)(0,c[g])(i)},function(g){for(u.status="rejected",u.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),u}var Ox=V.S;V.S=function(s,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&zV(s,i),Ox!==null&&Ox(s,i)};var Eu=Gt(null);function E1(){var s=Eu.current;return s!==null?s:Cn.pooledCache}function Eb(s,i){i===null?St(Eu,Eu.current):St(Eu,i.pool)}function Dx(){var s=E1();return s===null?null:{parent:Mr._currentValue,pool:s}}var Wc=0,$t=null,fn=null,Rr=null,Tb=!1,xd=!1,Tu=!1,Rb=0,Eg=0,$d=null,PV=0;function hr(){throw Error(r(321))}function T1(s,i){if(i===null)return!1;for(var c=0;c<i.length&&c<s.length;c++)if(!Qe(s[c],i[c]))return!1;return!0}function R1(s,i,c,u,g,y){return Wc=y,$t=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,V.H=s===null||s.memoizedState===null?Ru:Jc,Tu=!1,y=c(u,g),Tu=!1,xd&&(y=$x(i,c,u,g)),xx(s),y}function xx(s){V.H=Yi;var i=fn!==null&&fn.next!==null;if(Wc=0,Rr=fn=$t=null,Tb=!1,Eg=0,$d=null,i)throw Error(r(300));s===null||Yr||(s=s.dependencies,s!==null&&Nb(s)&&(Yr=!0))}function $x(s,i,c,u){$t=s;var g=0;do{if(xd&&($d=null),Eg=0,xd=!1,25<=g)throw Error(r(301));if(g+=1,Rr=fn=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}V.H=Cu,y=i(c,u)}while(xd);return y}function jV(){var s=V.H,i=s.useState()[0];return i=typeof i.then=="function"?Tg(i):i,s=s.useState()[0],(fn!==null?fn.memoizedState:null)!==s&&($t.flags|=1024),i}function C1(){var s=Rb!==0;return Rb=0,s}function k1(s,i,c){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~c}function A1(s){if(Tb){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Tb=!1}Wc=0,Rr=fn=$t=null,xd=!1,Eg=Rb=0,$d=null}function Ws(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rr===null?$t.memoizedState=Rr=s:Rr=Rr.next=s,Rr}function Cr(){if(fn===null){var s=$t.alternate;s=s!==null?s.memoizedState:null}else s=fn.next;var i=Rr===null?$t.memoizedState:Rr.next;if(i!==null)Rr=i,fn=s;else{if(s===null)throw $t.alternate===null?Error(r(467)):Error(r(310));fn=s,s={memoizedState:fn.memoizedState,baseState:fn.baseState,baseQueue:fn.baseQueue,queue:fn.queue,next:null},Rr===null?$t.memoizedState=Rr=s:Rr=Rr.next=s}return Rr}var Cb;Cb=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Tg(s){var i=Eg;return Eg+=1,$d===null&&($d=[]),s=vx($d,s,i),i=$t,(Rr===null?i.memoizedState:Rr.next)===null&&(i=i.alternate,V.H=i===null||i.memoizedState===null?Ru:Jc),s}function kb(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Tg(s);if(s.$$typeof===O)return gs(s)}throw Error(r(438,String(s)))}function O1(s){var i=null,c=$t.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var u=$t.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=Cb(),$t.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(s),u=0;u<s;u++)c[u]=D;return i.index++,c}function zo(s,i){return typeof i=="function"?i(s):i}function Ab(s){var i=Cr();return D1(i,fn,s)}function D1(s,i,c){var u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=c;var g=s.baseQueue,y=u.pending;if(y!==null){if(g!==null){var k=g.next;g.next=y.next,y.next=k}i.baseQueue=g=y,u.pending=null}if(y=s.baseState,g===null)s.memoizedState=y;else{i=g.next;var L=k=null,B=null,X=i,ue=!1;do{var ye=X.lane&-536870913;if(ye!==X.lane?(Kt&ye)===ye:(Wc&ye)===ye){var re=X.revertLane;if(re===0)B!==null&&(B=B.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ye===Od&&(ue=!0);else if((Wc&re)===re){X=X.next,re===Od&&(ue=!0);continue}else ye={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},B===null?(L=B=ye,k=y):B=B.next=ye,$t.lanes|=re,il|=re;ye=X.action,Tu&&c(y,ye),y=X.hasEagerState?X.eagerState:c(y,ye)}else re={lane:ye,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},B===null?(L=B=re,k=y):B=B.next=re,$t.lanes|=ye,il|=ye;X=X.next}while(X!==null&&X!==i);if(B===null?k=y:B.next=L,!Qe(y,s.memoizedState)&&(Yr=!0,ue&&(c=Dd,c!==null)))throw c;s.memoizedState=y,s.baseState=k,s.baseQueue=B,u.lastRenderedState=y}return g===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function x1(s){var i=Cr(),c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=s;var u=c.dispatch,g=c.pending,y=i.memoizedState;if(g!==null){c.pending=null;var k=g=g.next;do y=s(y,k.action),k=k.next;while(k!==g);Qe(y,i.memoizedState)||(Yr=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),c.lastRenderedState=y}return[y,u]}function qx(s,i,c){var u=$t,g=Cr(),y=Jt;if(y){if(c===void 0)throw Error(r(407));c=c()}else c=i();var k=!Qe((fn||g).memoizedState,c);if(k&&(g.memoizedState=c,Yr=!0),g=g.queue,N1(Ix.bind(null,u,g,s),[s]),g.getSnapshot!==i||k||Rr!==null&&Rr.memoizedState.tag&1){if(u.flags|=2048,qd(9,Mx.bind(null,u,g,c,i),{destroy:void 0},null),Cn===null)throw Error(r(349));y||(Wc&60)!==0||Nx(u,i,c)}return c}function Nx(s,i,c){s.flags|=16384,s={getSnapshot:i,value:c},i=$t.updateQueue,i===null?(i=Cb(),$t.updateQueue=i,i.stores=[s]):(c=i.stores,c===null?i.stores=[s]:c.push(s))}function Mx(s,i,c,u){i.value=c,i.getSnapshot=u,Lx(i)&&Fx(s)}function Ix(s,i,c){return c(function(){Lx(i)&&Fx(s)})}function Lx(s){var i=s.getSnapshot;s=s.value;try{var c=i();return!Qe(s,c)}catch{return!0}}function Fx(s){var i=Gc(s,2);i!==null&&ks(i,s,2)}function $1(s){var i=Ws();if(typeof s=="function"){var c=s;if(s=c(),Tu){Bs(!0);try{c()}finally{Bs(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:s},i}function zx(s,i,c,u){return s.baseState=c,D1(s,fn,typeof u=="function"?u:zo)}function HV(s,i,c,u,g){if(xb(s))throw Error(r(485));if(s=i.action,s!==null){var y={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){y.listeners.push(k)}};V.T!==null?c(!0):y.isTransition=!1,u(y),c=i.pending,c===null?(y.next=i.pending=y,Ux(i,y)):(y.next=c.next,i.pending=c.next=y)}}function Ux(s,i){var c=i.action,u=i.payload,g=s.state;if(i.isTransition){var y=V.T,k={};V.T=k;try{var L=c(g,u),B=V.S;B!==null&&B(k,L),Px(s,i,L)}catch(X){q1(s,i,X)}finally{V.T=y}}else try{y=c(g,u),Px(s,i,y)}catch(X){q1(s,i,X)}}function Px(s,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(u){jx(s,i,u)},function(u){return q1(s,i,u)}):jx(s,i,c)}function jx(s,i,c){i.status="fulfilled",i.value=c,Hx(i),s.state=c,i=s.pending,i!==null&&(c=i.next,c===i?s.pending=null:(c=c.next,i.next=c,Ux(s,c)))}function q1(s,i,c){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=c,Hx(i),i=i.next;while(i!==u)}s.action=null}function Hx(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function Bx(s,i){return i}function Vx(s,i){if(Jt){var c=Cn.formState;if(c!==null){e:{var u=$t;if(Jt){if(es){t:{for(var g=es,y=Gi;g.nodeType!==8;){if(!y){g=null;break t}if(g=_i(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){es=_i(g.nextSibling),u=g.data==="F!";break e}}vu(u)}u=!1}u&&(i=c[0])}}return c=Ws(),c.memoizedState=c.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bx,lastRenderedState:i},c.queue=u,c=l$.bind(null,$t,u),u.dispatch=c,u=$1(!1),y=z1.bind(null,$t,!1,u.queue),u=Ws(),g={state:i,dispatch:null,action:s,pending:null},u.queue=g,c=HV.bind(null,$t,g,y,c),g.dispatch=c,u.memoizedState=s,[i,c,!1]}function Kx(s){var i=Cr();return Gx(i,fn,s)}function Gx(s,i,c){i=D1(s,i,Bx)[0],s=Ab(zo)[0],i=typeof i=="object"&&i!==null&&typeof i.then=="function"?Tg(i):i;var u=Cr(),g=u.queue,y=g.dispatch;return c!==u.memoizedState&&($t.flags|=2048,qd(9,BV.bind(null,g,c),{destroy:void 0},null)),[i,y,s]}function BV(s,i){s.action=i}function Qx(s){var i=Cr(),c=fn;if(c!==null)return Gx(i,c,s);Cr(),i=i.memoizedState,c=Cr();var u=c.queue.dispatch;return c.memoizedState=s,[i,u,!1]}function qd(s,i,c,u){return s={tag:s,create:i,inst:c,deps:u,next:null},i=$t.updateQueue,i===null&&(i=Cb(),$t.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=s.next=s:(u=c.next,c.next=s,s.next=u,i.lastEffect=s),s}function Yx(){return Cr().memoizedState}function Ob(s,i,c,u){var g=Ws();$t.flags|=s,g.memoizedState=qd(1|i,c,{destroy:void 0},u===void 0?null:u)}function Db(s,i,c,u){var g=Cr();u=u===void 0?null:u;var y=g.memoizedState.inst;fn!==null&&u!==null&&T1(u,fn.memoizedState.deps)?g.memoizedState=qd(i,c,y,u):($t.flags|=s,g.memoizedState=qd(1|i,c,y,u))}function Wx(s,i){Ob(8390656,8,s,i)}function N1(s,i){Db(2048,8,s,i)}function Jx(s,i){return Db(4,2,s,i)}function Xx(s,i){return Db(4,4,s,i)}function Zx(s,i){if(typeof i=="function"){s=s();var c=i(s);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function e$(s,i,c){c=c!=null?c.concat([s]):null,Db(4,4,Zx.bind(null,i,s),c)}function M1(){}function t$(s,i){var c=Cr();i=i===void 0?null:i;var u=c.memoizedState;return i!==null&&T1(i,u[1])?u[0]:(c.memoizedState=[s,i],s)}function n$(s,i){var c=Cr();i=i===void 0?null:i;var u=c.memoizedState;if(i!==null&&T1(i,u[1]))return u[0];if(u=s(),Tu){Bs(!0);try{s()}finally{Bs(!1)}}return c.memoizedState=[u,i],u}function I1(s,i,c){return c===void 0||(Wc&1073741824)!==0?s.memoizedState=i:(s.memoizedState=c,s=sq(),$t.lanes|=s,il|=s,c)}function r$(s,i,c,u){return Qe(c,i)?c:Ad.current!==null?(s=I1(s,c,u),Qe(s,i)||(Yr=!0),s):(Wc&42)===0?(Yr=!0,s.memoizedState=c):(s=sq(),$t.lanes|=s,il|=s,i)}function s$(s,i,c,u,g){var y=ve.p;ve.p=y!==0&&8>y?y:8;var k=V.T,L={};V.T=L,z1(s,!1,i,c);try{var B=g(),X=V.S;if(X!==null&&X(L,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ue=UV(B,u);Rg(s,i,ue,fa(s))}else Rg(s,i,u,fa(s))}catch(ye){Rg(s,i,{then:function(){},status:"rejected",reason:ye},fa())}finally{ve.p=y,V.T=k}}function VV(){}function L1(s,i,c,u){if(s.tag!==5)throw Error(r(476));var g=a$(s).queue;s$(s,g,i,ht,c===null?VV:function(){return i$(s),c(u)})}function a$(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:ht,baseState:ht,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:ht},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:c},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function i$(s){var i=a$(s).next.queue;Rg(s,i,{},fa())}function F1(){return gs(Vg)}function o$(){return Cr().memoizedState}function c$(){return Cr().memoizedState}function KV(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var c=fa();s=el(c);var u=tl(i,s,c);u!==null&&(ks(u,i,c),Ag(u,i,c)),i={cache:v1()},s.payload=i;return}i=i.return}}function GV(s,i,c){var u=fa();c={lane:u,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},xb(s)?u$(i,c):(c=m1(s,i,c,u),c!==null&&(ks(c,s,u),f$(c,i,u)))}function l$(s,i,c){var u=fa();Rg(s,i,c,u)}function Rg(s,i,c,u){var g={lane:u,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(xb(s))u$(i,g);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var k=i.lastRenderedState,L=y(k,c);if(g.hasEagerState=!0,g.eagerState=L,Qe(L,k))return mb(s,i,g,0),Cn===null&&hb(),!1}catch{}finally{}if(c=m1(s,i,g,u),c!==null)return ks(c,s,u),f$(c,i,u),!0}return!1}function z1(s,i,c,u){if(u={lane:2,revertLane:AT(),action:u,hasEagerState:!1,eagerState:null,next:null},xb(s)){if(i)throw Error(r(479))}else i=m1(s,c,u,2),i!==null&&ks(i,s,2)}function xb(s){var i=s.alternate;return s===$t||i!==null&&i===$t}function u$(s,i){xd=Tb=!0;var c=s.pending;c===null?i.next=i:(i.next=c.next,c.next=i),s.pending=i}function f$(s,i,c){if((c&4194176)!==0){var u=i.lanes;u&=s.pendingLanes,c|=u,i.lanes=c,Ve(s,c)}}var Yi={readContext:gs,use:kb,useCallback:hr,useContext:hr,useEffect:hr,useImperativeHandle:hr,useLayoutEffect:hr,useInsertionEffect:hr,useMemo:hr,useReducer:hr,useRef:hr,useState:hr,useDebugValue:hr,useDeferredValue:hr,useTransition:hr,useSyncExternalStore:hr,useId:hr};Yi.useCacheRefresh=hr,Yi.useMemoCache=hr,Yi.useHostTransitionStatus=hr,Yi.useFormState=hr,Yi.useActionState=hr,Yi.useOptimistic=hr;var Ru={readContext:gs,use:kb,useCallback:function(s,i){return Ws().memoizedState=[s,i===void 0?null:i],s},useContext:gs,useEffect:Wx,useImperativeHandle:function(s,i,c){c=c!=null?c.concat([s]):null,Ob(4194308,4,Zx.bind(null,i,s),c)},useLayoutEffect:function(s,i){return Ob(4194308,4,s,i)},useInsertionEffect:function(s,i){Ob(4,2,s,i)},useMemo:function(s,i){var c=Ws();i=i===void 0?null:i;var u=s();if(Tu){Bs(!0);try{s()}finally{Bs(!1)}}return c.memoizedState=[u,i],u},useReducer:function(s,i,c){var u=Ws();if(c!==void 0){var g=c(i);if(Tu){Bs(!0);try{c(i)}finally{Bs(!1)}}}else g=i;return u.memoizedState=u.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},u.queue=s,s=s.dispatch=GV.bind(null,$t,s),[u.memoizedState,s]},useRef:function(s){var i=Ws();return s={current:s},i.memoizedState=s},useState:function(s){s=$1(s);var i=s.queue,c=l$.bind(null,$t,i);return i.dispatch=c,[s.memoizedState,c]},useDebugValue:M1,useDeferredValue:function(s,i){var c=Ws();return I1(c,s,i)},useTransition:function(){var s=$1(!1);return s=s$.bind(null,$t,s.queue,!0,!1),Ws().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,c){var u=$t,g=Ws();if(Jt){if(c===void 0)throw Error(r(407));c=c()}else{if(c=i(),Cn===null)throw Error(r(349));(Kt&60)!==0||Nx(u,i,c)}g.memoizedState=c;var y={value:c,getSnapshot:i};return g.queue=y,Wx(Ix.bind(null,u,y,s),[s]),u.flags|=2048,qd(9,Mx.bind(null,u,y,c,i),{destroy:void 0},null),c},useId:function(){var s=Ws(),i=Cn.identifierPrefix;if(Jt){var c=Lo,u=Io;c=(u&~(1<<32-pn(u)-1)).toString(32)+c,i=":"+i+"R"+c,c=Rb++,0<c&&(i+="H"+c.toString(32)),i+=":"}else c=PV++,i=":"+i+"r"+c.toString(32)+":";return s.memoizedState=i},useCacheRefresh:function(){return Ws().memoizedState=KV.bind(null,$t)}};Ru.useMemoCache=O1,Ru.useHostTransitionStatus=F1,Ru.useFormState=Vx,Ru.useActionState=Vx,Ru.useOptimistic=function(s){var i=Ws();i.memoizedState=i.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=z1.bind(null,$t,!0,c),c.dispatch=i,[s,i]};var Jc={readContext:gs,use:kb,useCallback:t$,useContext:gs,useEffect:N1,useImperativeHandle:e$,useInsertionEffect:Jx,useLayoutEffect:Xx,useMemo:n$,useReducer:Ab,useRef:Yx,useState:function(){return Ab(zo)},useDebugValue:M1,useDeferredValue:function(s,i){var c=Cr();return r$(c,fn.memoizedState,s,i)},useTransition:function(){var s=Ab(zo)[0],i=Cr().memoizedState;return[typeof s=="boolean"?s:Tg(s),i]},useSyncExternalStore:qx,useId:o$};Jc.useCacheRefresh=c$,Jc.useMemoCache=O1,Jc.useHostTransitionStatus=F1,Jc.useFormState=Kx,Jc.useActionState=Kx,Jc.useOptimistic=function(s,i){var c=Cr();return zx(c,fn,s,i)};var Cu={readContext:gs,use:kb,useCallback:t$,useContext:gs,useEffect:N1,useImperativeHandle:e$,useInsertionEffect:Jx,useLayoutEffect:Xx,useMemo:n$,useReducer:x1,useRef:Yx,useState:function(){return x1(zo)},useDebugValue:M1,useDeferredValue:function(s,i){var c=Cr();return fn===null?I1(c,s,i):r$(c,fn.memoizedState,s,i)},useTransition:function(){var s=x1(zo)[0],i=Cr().memoizedState;return[typeof s=="boolean"?s:Tg(s),i]},useSyncExternalStore:qx,useId:o$};Cu.useCacheRefresh=c$,Cu.useMemoCache=O1,Cu.useHostTransitionStatus=F1,Cu.useFormState=Qx,Cu.useActionState=Qx,Cu.useOptimistic=function(s,i){var c=Cr();return fn!==null?zx(c,fn,s,i):(c.baseState=s,[s,c.queue.dispatch])};function U1(s,i,c,u){i=s.memoizedState,c=c(u,i),c=c==null?i:j({},i,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var P1={isMounted:function(s){return(s=s._reactInternals)?Re(s)===s:!1},enqueueSetState:function(s,i,c){s=s._reactInternals;var u=fa(),g=el(u);g.payload=i,c!=null&&(g.callback=c),i=tl(s,g,u),i!==null&&(ks(i,s,u),Ag(i,s,u))},enqueueReplaceState:function(s,i,c){s=s._reactInternals;var u=fa(),g=el(u);g.tag=1,g.payload=i,c!=null&&(g.callback=c),i=tl(s,g,u),i!==null&&(ks(i,s,u),Ag(i,s,u))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var c=fa(),u=el(c);u.tag=2,i!=null&&(u.callback=i),i=tl(s,u,c),i!==null&&(ks(i,s,c),Ag(i,s,c))}};function d$(s,i,c,u,g,y,k){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,y,k):i.prototype&&i.prototype.isPureReactComponent?!pt(c,u)||!pt(g,y):!0}function h$(s,i,c,u){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,u),i.state!==s&&P1.enqueueReplaceState(i,i.state,null)}function ku(s,i){var c=i;if("ref"in i){c={};for(var u in i)u!=="ref"&&(c[u]=i[u])}if(s=s.defaultProps){c===i&&(c=j({},c));for(var g in s)c[g]===void 0&&(c[g]=s[g])}return c}var $b=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function m$(s){$b(s)}function g$(s){console.error(s)}function p$(s){$b(s)}function qb(s,i){try{var c=s.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function y$(s,i,c){try{var u=s.onCaughtError;u(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function j1(s,i,c){return c=el(c),c.tag=3,c.payload={element:null},c.callback=function(){qb(s,i)},c}function _$(s){return s=el(s),s.tag=3,s}function b$(s,i,c,u){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;s.payload=function(){return g(y)},s.callback=function(){y$(i,c,u)}}var k=c.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(s.callback=function(){y$(i,c,u),typeof g!="function"&&(ol===null?ol=new Set([this]):ol.add(this));var L=u.stack;this.componentDidCatch(u.value,{componentStack:L!==null?L:""})})}function QV(s,i,c,u,g){if(c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=c.alternate,i!==null&&kg(i,c,g,!0),c=Ma.current,c!==null){switch(c.tag){case 13:return Qi===null?ET():c.alternate===null&&sr===0&&(sr=3),c.flags&=-257,c.flags|=65536,c.lanes=g,u===_1?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([u]):i.add(u),RT(s,u,g)),!1;case 22:return c.flags|=65536,u===_1?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([u]):c.add(u)),RT(s,u,g)),!1}throw Error(r(435,c.tag))}return RT(s,u,g),ET(),!1}if(Jt)return i=Ma.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,u!==y1&&(s=Error(r(422),{cause:u}),pg($a(s,c)))):(u!==y1&&(i=Error(r(423),{cause:u}),pg($a(i,c))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,u=$a(u,c),g=j1(s.stateNode,u,g),rT(s,g),sr!==4&&(sr=2)),!1;var y=Error(r(520),{cause:u});if(y=$a(y,c),Ig===null?Ig=[y]:Ig.push(y),sr!==4&&(sr=2),i===null)return!0;u=$a(u,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,s=g&-g,c.lanes|=s,s=j1(c.stateNode,u,s),rT(c,s),!1;case 1:if(i=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ol===null||!ol.has(y))))return c.flags|=65536,g&=-g,c.lanes|=g,g=_$(g),b$(g,s,c,u),rT(c,g),!1}c=c.return}while(c!==null);return!1}var S$=Error(r(461)),Yr=!1;function ts(s,i,c,u){i.child=s===null?Rx(i,null,c,u):wu(i,s.child,c,u)}function v$(s,i,c,u,g){c=c.render;var y=i.ref;if("ref"in u){var k={};for(var L in u)L!=="ref"&&(k[L]=u[L])}else k=u;return Ou(i),u=R1(s,i,c,k,y,g),L=C1(),s!==null&&!Yr?(k1(s,i,g),Uo(s,i,g)):(Jt&&L&&g1(i),i.flags|=1,ts(s,i,u,g),i.child)}function w$(s,i,c,u,g){if(s===null){var y=c.type;return typeof y=="function"&&!fT(y)&&y.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=y,E$(s,i,y,u,g)):(s=Fb(c.type,null,u,i,i.mode,g),s.ref=i.ref,s.return=i,i.child=s)}if(y=s.child,!J1(s,g)){var k=y.memoizedProps;if(c=c.compare,c=c!==null?c:pt,c(k,u)&&s.ref===i.ref)return Uo(s,i,g)}return i.flags|=1,s=al(y,u),s.ref=i.ref,s.return=i,i.child=s}function E$(s,i,c,u,g){if(s!==null){var y=s.memoizedProps;if(pt(y,u)&&s.ref===i.ref)if(Yr=!1,i.pendingProps=u=y,J1(s,g))(s.flags&131072)!==0&&(Yr=!0);else return i.lanes=s.lanes,Uo(s,i,g)}return H1(s,i,c,u,g)}function T$(s,i,c){var u=i.pendingProps,g=u.children,y=(i.stateNode._pendingVisibility&2)!==0,k=s!==null?s.memoizedState:null;if(Cg(s,i),u.mode==="hidden"||y){if((i.flags&128)!==0){if(u=k!==null?k.baseLanes|c:c,s!==null){for(g=i.child=s.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;i.childLanes=y&~u}else i.childLanes=0,i.child=null;return R$(s,i,u,c)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&Eb(i,k!==null?k.cachePool:null),k!==null?Cx(i,k):b1(),kx(i);else return i.lanes=i.childLanes=536870912,R$(s,i,k!==null?k.baseLanes|c:c,c)}else k!==null?(Eb(i,k.cachePool),Cx(i,k),Yc(),i.memoizedState=null):(s!==null&&Eb(i,null),b1(),Yc());return ts(s,i,g,c),i.child}function R$(s,i,c,u){var g=E1();return g=g===null?null:{parent:Mr._currentValue,pool:g},i.memoizedState={baseLanes:c,cachePool:g},s!==null&&Eb(i,null),b1(),kx(i),s!==null&&kg(s,i,u,!0),null}function Cg(s,i){var c=i.ref;if(c===null)s!==null&&s.ref!==null&&(i.flags|=2097664);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(s===null||s.ref!==c)&&(i.flags|=2097664)}}function H1(s,i,c,u,g){return Ou(i),c=R1(s,i,c,u,void 0,g),u=C1(),s!==null&&!Yr?(k1(s,i,g),Uo(s,i,g)):(Jt&&u&&g1(i),i.flags|=1,ts(s,i,c,g),i.child)}function C$(s,i,c,u,g,y){return Ou(i),i.updateQueue=null,c=$x(i,u,c,g),xx(s),u=C1(),s!==null&&!Yr?(k1(s,i,y),Uo(s,i,y)):(Jt&&u&&g1(i),i.flags|=1,ts(s,i,c,y),i.child)}function k$(s,i,c,u,g){if(Ou(i),i.stateNode===null){var y=Td,k=c.contextType;typeof k=="object"&&k!==null&&(y=gs(k)),y=new c(u,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=P1,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=u,y.state=i.memoizedState,y.refs={},tT(i),k=c.contextType,y.context=typeof k=="object"&&k!==null?gs(k):Td,y.state=i.memoizedState,k=c.getDerivedStateFromProps,typeof k=="function"&&(U1(i,c,k,u),y.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(k=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),k!==y.state&&P1.enqueueReplaceState(y,y.state,null),Dg(i,u,y,g),Og(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(s===null){y=i.stateNode;var L=i.memoizedProps,B=ku(c,L);y.props=B;var X=y.context,ue=c.contextType;k=Td,typeof ue=="object"&&ue!==null&&(k=gs(ue));var ye=c.getDerivedStateFromProps;ue=typeof ye=="function"||typeof y.getSnapshotBeforeUpdate=="function",L=i.pendingProps!==L,ue||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(L||X!==k)&&h$(i,y,u,k),Zc=!1;var re=i.memoizedState;y.state=re,Dg(i,u,y,g),Og(),X=i.memoizedState,L||re!==X||Zc?(typeof ye=="function"&&(U1(i,c,ye,u),X=i.memoizedState),(B=Zc||d$(i,c,B,u,re,X,k))?(ue||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=X),y.props=u,y.state=X,y.context=k,u=B):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{y=i.stateNode,nT(s,i),k=i.memoizedProps,ue=ku(c,k),y.props=ue,ye=i.pendingProps,re=y.context,X=c.contextType,B=Td,typeof X=="object"&&X!==null&&(B=gs(X)),L=c.getDerivedStateFromProps,(X=typeof L=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(k!==ye||re!==B)&&h$(i,y,u,B),Zc=!1,re=i.memoizedState,y.state=re,Dg(i,u,y,g),Og();var le=i.memoizedState;k!==ye||re!==le||Zc||s!==null&&s.dependencies!==null&&Nb(s.dependencies)?(typeof L=="function"&&(U1(i,c,L,u),le=i.memoizedState),(ue=Zc||d$(i,c,ue,u,re,le,B)||s!==null&&s.dependencies!==null&&Nb(s.dependencies))?(X||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,le,B),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,le,B)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||k===s.memoizedProps&&re===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&re===s.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=le),y.props=u,y.state=le,y.context=B,u=ue):(typeof y.componentDidUpdate!="function"||k===s.memoizedProps&&re===s.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&re===s.memoizedState||(i.flags|=1024),u=!1)}return y=u,Cg(s,i),u=(i.flags&128)!==0,y||u?(y=i.stateNode,c=u&&typeof c.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,s!==null&&u?(i.child=wu(i,s.child,null,g),i.child=wu(i,null,c,g)):ts(s,i,c,g),i.memoizedState=y.state,s=i.child):s=Uo(s,i,g),s}function A$(s,i,c,u){return gg(),i.flags|=256,ts(s,i,c,u),i.child}var B1={dehydrated:null,treeContext:null,retryLane:0};function V1(s){return{baseLanes:s,cachePool:Dx()}}function K1(s,i,c){return s=s!==null?s.childLanes&~c:0,i&&(s|=za),s}function O$(s,i,c){var u=i.pendingProps,g=!1,y=(i.flags&128)!==0,k;if((k=y)||(k=s!==null&&s.memoizedState===null?!1:(Nr.current&2)!==0),k&&(g=!0,i.flags&=-129),k=(i.flags&32)!==0,i.flags&=-33,s===null){if(Jt){if(g?Qc(i):Yc(),Jt){var L=es,B;if(B=L){e:{for(B=L,L=Gi;B.nodeType!==8;){if(!L){L=null;break e}if(B=_i(B.nextSibling),B===null){L=null;break e}}L=B}L!==null?(i.memoizedState={dehydrated:L,treeContext:bu!==null?{id:Io,overflow:Lo}:null,retryLane:536870912},B=Fa(18,null,null,0),B.stateNode=L,B.return=i,i.child=B,Cs=i,es=null,B=!0):B=!1}B||vu(i)}if(L=i.memoizedState,L!==null&&(L=L.dehydrated,L!==null))return L.data==="$!"?i.lanes=16:i.lanes=536870912,null;Fo(i)}return L=u.children,u=u.fallback,g?(Yc(),g=i.mode,L=Q1({mode:"hidden",children:L},g),u=xu(u,g,c,null),L.return=i,u.return=i,L.sibling=u,i.child=L,g=i.child,g.memoizedState=V1(c),g.childLanes=K1(s,k,c),i.memoizedState=B1,u):(Qc(i),G1(i,L))}if(B=s.memoizedState,B!==null&&(L=B.dehydrated,L!==null)){if(y)i.flags&256?(Qc(i),i.flags&=-257,i=Y1(s,i,c)):i.memoizedState!==null?(Yc(),i.child=s.child,i.flags|=128,i=null):(Yc(),g=u.fallback,L=i.mode,u=Q1({mode:"visible",children:u.children},L),g=xu(g,L,c,null),g.flags|=2,u.return=i,g.return=i,u.sibling=g,i.child=u,wu(i,s.child,null,c),u=i.child,u.memoizedState=V1(c),u.childLanes=K1(s,k,c),i.memoizedState=B1,i=g);else if(Qc(i),L.data==="$!"){if(k=L.nextSibling&&L.nextSibling.dataset,k)var X=k.dgst;k=X,u=Error(r(419)),u.stack="",u.digest=k,pg({value:u,source:null,stack:null}),i=Y1(s,i,c)}else if(Yr||kg(s,i,c,!1),k=(c&s.childLanes)!==0,Yr||k){if(k=Cn,k!==null){if(u=c&-c,(u&42)!==0)u=1;else switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=64;break;case 268435456:u=134217728;break;default:u=0}if(u=(u&(k.suspendedLanes|c))!==0?0:u,u!==0&&u!==B.retryLane)throw B.retryLane=u,Gc(s,u),ks(k,s,u),S$}L.data==="$?"||ET(),i=Y1(s,i,c)}else L.data==="$?"?(i.flags|=128,i.child=s.child,i=l7.bind(null,s),L._reactRetry=i,i=null):(s=B.treeContext,es=_i(L.nextSibling),Cs=i,Jt=!0,pi=null,Gi=!1,s!==null&&(qa[Na++]=Io,qa[Na++]=Lo,qa[Na++]=bu,Io=s.id,Lo=s.overflow,bu=i),i=G1(i,u.children),i.flags|=4096);return i}return g?(Yc(),g=u.fallback,L=i.mode,B=s.child,X=B.sibling,u=al(B,{mode:"hidden",children:u.children}),u.subtreeFlags=B.subtreeFlags&31457280,X!==null?g=al(X,g):(g=xu(g,L,c,null),g.flags|=2),g.return=i,u.return=i,u.sibling=g,i.child=u,u=g,g=i.child,L=s.child.memoizedState,L===null?L=V1(c):(B=L.cachePool,B!==null?(X=Mr._currentValue,B=B.parent!==X?{parent:X,pool:X}:B):B=Dx(),L={baseLanes:L.baseLanes|c,cachePool:B}),g.memoizedState=L,g.childLanes=K1(s,k,c),i.memoizedState=B1,u):(Qc(i),c=s.child,s=c.sibling,c=al(c,{mode:"visible",children:u.children}),c.return=i,c.sibling=null,s!==null&&(k=i.deletions,k===null?(i.deletions=[s],i.flags|=16):k.push(s)),i.child=c,i.memoizedState=null,c)}function G1(s,i){return i=Q1({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function Q1(s,i){return tq(s,i,0,null)}function Y1(s,i,c){return wu(i,s.child,null,c),s=G1(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function D$(s,i,c){s.lanes|=i;var u=s.alternate;u!==null&&(u.lanes|=i),Z1(s.return,i,c)}function W1(s,i,c,u,g){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:c,tailMode:g}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=u,y.tail=c,y.tailMode=g)}function x$(s,i,c){var u=i.pendingProps,g=u.revealOrder,y=u.tail;if(ts(s,i,u.children,c),u=Nr.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&D$(s,c,i);else if(s.tag===19)D$(s,c,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}switch(St(Nr,u),g){case"forwards":for(c=i.child,g=null;c!==null;)s=c.alternate,s!==null&&wb(s)===null&&(g=c),c=c.sibling;c=g,c===null?(g=i.child,i.child=null):(g=c.sibling,c.sibling=null),W1(i,!1,g,c,y);break;case"backwards":for(c=null,g=i.child,i.child=null;g!==null;){if(s=g.alternate,s!==null&&wb(s)===null){i.child=g;break}s=g.sibling,g.sibling=c,c=g,g=s}W1(i,!0,c,null,y);break;case"together":W1(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Uo(s,i,c){if(s!==null&&(i.dependencies=s.dependencies),il|=i.lanes,(c&i.childLanes)===0)if(s!==null){if(kg(s,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,c=al(s,s.pendingProps),i.child=c,c.return=i;s.sibling!==null;)s=s.sibling,c=c.sibling=al(s,s.pendingProps),c.return=i;c.sibling=null}return i.child}function J1(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&Nb(s)))}function YV(s,i,c){switch(i.tag){case 3:Pi(i,i.stateNode.containerInfo),Xc(i,Mr,s.memoizedState.cache),gg();break;case 27:case 5:qc(i);break;case 4:Pi(i,i.stateNode.containerInfo);break;case 10:Xc(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Qc(i),i.flags|=128,null):(c&i.child.childLanes)!==0?O$(s,i,c):(Qc(i),s=Uo(s,i,c),s!==null?s.sibling:null);Qc(i);break;case 19:var g=(s.flags&128)!==0;if(u=(c&i.childLanes)!==0,u||(kg(s,i,c,!1),u=(c&i.childLanes)!==0),g){if(u)return x$(s,i,c);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),St(Nr,Nr.current),u)break;return null;case 22:case 23:return i.lanes=0,T$(s,i,c);case 24:Xc(i,Mr,s.memoizedState.cache)}return Uo(s,i,c)}function $$(s,i,c){if(s!==null)if(s.memoizedProps!==i.pendingProps)Yr=!0;else{if(!J1(s,c)&&(i.flags&128)===0)return Yr=!1,YV(s,i,c);Yr=(s.flags&131072)!==0}else Yr=!1,Jt&&(i.flags&1048576)!==0&&px(i,yb,i.index);switch(i.lanes=0,i.tag){case 16:e:{s=i.pendingProps;var u=i.elementType,g=u._init;if(u=g(u._payload),i.type=u,typeof u=="function")fT(u)?(s=ku(u,s),i.tag=1,i=k$(null,i,u,s,c)):(i.tag=0,i=H1(null,i,u,s,c));else{if(u!=null){if(g=u.$$typeof,g===x){i.tag=11,i=v$(null,i,u,s,c);break e}else if(g===E){i.tag=14,i=w$(null,i,u,s,c);break e}}throw i=K(u)||u,Error(r(306,i,""))}}return i;case 0:return H1(s,i,i.type,i.pendingProps,c);case 1:return u=i.type,g=ku(u,i.pendingProps),k$(s,i,u,g,c);case 3:e:{if(Pi(i,i.stateNode.containerInfo),s===null)throw Error(r(387));var y=i.pendingProps;g=i.memoizedState,u=g.element,nT(s,i),Dg(i,y,null,c);var k=i.memoizedState;if(y=k.cache,Xc(i,Mr,y),y!==g.cache&&eT(i,[Mr],c,!0),Og(),y=k.element,g.isDehydrated)if(g={element:y,isDehydrated:!1,cache:k.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=A$(s,i,y,c);break e}else if(y!==u){u=$a(Error(r(424)),i),pg(u),i=A$(s,i,y,c);break e}else for(es=_i(i.stateNode.containerInfo.firstChild),Cs=i,Jt=!0,pi=null,Gi=!0,c=Rx(i,null,y,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(gg(),y===u){i=Uo(s,i,c);break e}ts(s,i,y,c)}i=i.child}return i;case 26:return Cg(s,i),s===null?(c=Mq(i.type,null,i.pendingProps,null))?i.memoizedState=c:Jt||(c=i.type,s=i.pendingProps,u=Wb(na.current).createElement(c),u[He]=i,u[$e]=s,ns(u,c,s),Rn(u),i.stateNode=u):i.memoizedState=Mq(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return qc(i),s===null&&Jt&&(u=i.stateNode=$q(i.type,i.pendingProps,na.current),Cs=i,Gi=!0,es=_i(u.firstChild)),u=i.pendingProps.children,s!==null||Jt?ts(s,i,u,c):i.child=wu(i,null,u,c),Cg(s,i),i.child;case 5:return s===null&&Jt&&((g=u=es)&&(u=R7(u,i.type,i.pendingProps,Gi),u!==null?(i.stateNode=u,Cs=i,es=_i(u.firstChild),Gi=!1,g=!0):g=!1),g||vu(i)),qc(i),g=i.type,y=i.pendingProps,k=s!==null?s.memoizedProps:null,u=y.children,LT(g,y)?u=null:k!==null&&LT(g,k)&&(i.flags|=32),i.memoizedState!==null&&(g=R1(s,i,jV,null,null,c),Vg._currentValue=g),Cg(s,i),ts(s,i,u,c),i.child;case 6:return s===null&&Jt&&((s=c=es)&&(c=C7(c,i.pendingProps,Gi),c!==null?(i.stateNode=c,Cs=i,es=null,s=!0):s=!1),s||vu(i)),null;case 13:return O$(s,i,c);case 4:return Pi(i,i.stateNode.containerInfo),u=i.pendingProps,s===null?i.child=wu(i,null,u,c):ts(s,i,u,c),i.child;case 11:return v$(s,i,i.type,i.pendingProps,c);case 7:return ts(s,i,i.pendingProps,c),i.child;case 8:return ts(s,i,i.pendingProps.children,c),i.child;case 12:return ts(s,i,i.pendingProps.children,c),i.child;case 10:return u=i.pendingProps,Xc(i,i.type,u.value),ts(s,i,u.children,c),i.child;case 9:return g=i.type._context,u=i.pendingProps.children,Ou(i),g=gs(g),u=u(g),i.flags|=1,ts(s,i,u,c),i.child;case 14:return w$(s,i,i.type,i.pendingProps,c);case 15:return E$(s,i,i.type,i.pendingProps,c);case 19:return x$(s,i,c);case 22:return T$(s,i,c);case 24:return Ou(i),u=gs(Mr),s===null?(g=E1(),g===null&&(g=Cn,y=v1(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=c),g=y),i.memoizedState={parent:u,cache:g},tT(i),Xc(i,Mr,g)):((s.lanes&c)!==0&&(nT(s,i),Dg(i,null,null,c),Og()),g=s.memoizedState,y=i.memoizedState,g.parent!==u?(g={parent:u,cache:u},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),Xc(i,Mr,u)):(u=y.cache,Xc(i,Mr,u),u!==g.cache&&eT(i,[Mr],c,!0))),ts(s,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}var X1=Gt(null),Au=null,Po=null;function Xc(s,i,c){St(X1,i._currentValue),i._currentValue=c}function jo(s){s._currentValue=X1.current,En(X1)}function Z1(s,i,c){for(;s!==null;){var u=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),s===c)break;s=s.return}}function eT(s,i,c,u){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var y=g.dependencies;if(y!==null){var k=g.child;y=y.firstContext;e:for(;y!==null;){var L=y;y=g;for(var B=0;B<i.length;B++)if(L.context===i[B]){y.lanes|=c,L=y.alternate,L!==null&&(L.lanes|=c),Z1(y.return,c,s),u||(k=null);break e}y=L.next}}else if(g.tag===18){if(k=g.return,k===null)throw Error(r(341));k.lanes|=c,y=k.alternate,y!==null&&(y.lanes|=c),Z1(k,c,s),k=null}else k=g.child;if(k!==null)k.return=g;else for(k=g;k!==null;){if(k===s){k=null;break}if(g=k.sibling,g!==null){g.return=k.return,k=g;break}k=k.return}g=k}}function kg(s,i,c,u){s=null;for(var g=i,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var k=g.alternate;if(k===null)throw Error(r(387));if(k=k.memoizedProps,k!==null){var L=g.type;Qe(g.pendingProps.value,k.value)||(s!==null?s.push(L):s=[L])}}else if(g===js.current){if(k=g.alternate,k===null)throw Error(r(387));k.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(Vg):s=[Vg])}g=g.return}s!==null&&eT(i,s,c,u),i.flags|=262144}function Nb(s){for(s=s.firstContext;s!==null;){if(!Qe(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ou(s){Au=s,Po=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function gs(s){return q$(Au,s)}function Mb(s,i){return Au===null&&Ou(s),q$(s,i)}function q$(s,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},Po===null){if(s===null)throw Error(r(308));Po=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else Po=Po.next=i;return c}var Zc=!1;function tT(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nT(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function el(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function tl(s,i,c){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(Yn&2)!==0){var g=u.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),u.pending=i,i=gb(s),mx(s,null,c),i}return mb(s,u,i,c),gb(s)}function Ag(s,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194176)!==0)){var u=i.lanes;u&=s.pendingLanes,c|=u,i.lanes=c,Ve(s,c)}}function rT(s,i){var c=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,c===u)){var g=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var k={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?g=y=k:y=y.next=k,c=c.next}while(c!==null);y===null?g=y=i:y=y.next=i}else g=y=i;c={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=i:s.next=i,c.lastBaseUpdate=i}var sT=!1;function Og(){if(sT){var s=Dd;if(s!==null)throw s}}function Dg(s,i,c,u){sT=!1;var g=s.updateQueue;Zc=!1;var y=g.firstBaseUpdate,k=g.lastBaseUpdate,L=g.shared.pending;if(L!==null){g.shared.pending=null;var B=L,X=B.next;B.next=null,k===null?y=X:k.next=X,k=B;var ue=s.alternate;ue!==null&&(ue=ue.updateQueue,L=ue.lastBaseUpdate,L!==k&&(L===null?ue.firstBaseUpdate=X:L.next=X,ue.lastBaseUpdate=B))}if(y!==null){var ye=g.baseState;k=0,ue=X=B=null,L=y;do{var re=L.lane&-536870913,le=re!==L.lane;if(le?(Kt&re)===re:(u&re)===re){re!==0&&re===Od&&(sT=!0),ue!==null&&(ue=ue.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var We=s,Rt=L;re=i;var ar=c;switch(Rt.tag){case 1:if(We=Rt.payload,typeof We=="function"){ye=We.call(ar,ye,re);break e}ye=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=Rt.payload,re=typeof We=="function"?We.call(ar,ye,re):We,re==null)break e;ye=j({},ye,re);break e;case 2:Zc=!0}}re=L.callback,re!==null&&(s.flags|=64,le&&(s.flags|=8192),le=g.callbacks,le===null?g.callbacks=[re]:le.push(re))}else le={lane:re,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ue===null?(X=ue=le,B=ye):ue=ue.next=le,k|=re;if(L=L.next,L===null){if(L=g.shared.pending,L===null)break;le=L,L=le.next,le.next=null,g.lastBaseUpdate=le,g.shared.pending=null}}while(!0);ue===null&&(B=ye),g.baseState=B,g.firstBaseUpdate=X,g.lastBaseUpdate=ue,y===null&&(g.shared.lanes=0),il|=k,s.lanes=k,s.memoizedState=ye}}function N$(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function M$(s,i){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)N$(c[s],i)}function xg(s,i){try{var c=i.updateQueue,u=c!==null?c.lastEffect:null;if(u!==null){var g=u.next;c=g;do{if((c.tag&s)===s){u=void 0;var y=c.create,k=c.inst;u=y(),k.destroy=u}c=c.next}while(c!==g)}}catch(L){yn(i,i.return,L)}}function nl(s,i,c){try{var u=i.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var y=g.next;u=y;do{if((u.tag&s)===s){var k=u.inst,L=k.destroy;if(L!==void 0){k.destroy=void 0,g=i;var B=c;try{L()}catch(X){yn(g,B,X)}}}u=u.next}while(u!==y)}}catch(X){yn(i,i.return,X)}}function I$(s){var i=s.updateQueue;if(i!==null){var c=s.stateNode;try{M$(i,c)}catch(u){yn(s,s.return,u)}}}function L$(s,i,c){c.props=ku(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(u){yn(s,i,u)}}function Du(s,i){try{var c=s.ref;if(c!==null){var u=s.stateNode;switch(s.tag){case 26:case 27:case 5:var g=u;break;default:g=u}typeof c=="function"?s.refCleanup=c(g):c.current=g}}catch(y){yn(s,i,y)}}function ca(s,i){var c=s.ref,u=s.refCleanup;if(c!==null)if(typeof u=="function")try{u()}catch(g){yn(s,i,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){yn(s,i,g)}else c.current=null}function F$(s){var i=s.type,c=s.memoizedProps,u=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&u.focus();break e;case"img":c.src?u.src=c.src:c.srcSet&&(u.srcset=c.srcSet)}}catch(g){yn(s,s.return,g)}}function z$(s,i,c){try{var u=s.stateNode;S7(u,s.type,c,i),u[$e]=i}catch(g){yn(s,s.return,g)}}function U$(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27||s.tag===4}function aT(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||U$(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==27&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function iT(s,i,c){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?c.nodeType===8?c.parentNode.insertBefore(s,i):c.insertBefore(s,i):(c.nodeType===8?(i=c.parentNode,i.insertBefore(s,c)):(i=c,i.appendChild(s)),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=Yb));else if(u!==4&&u!==27&&(s=s.child,s!==null))for(iT(s,i,c),s=s.sibling;s!==null;)iT(s,i,c),s=s.sibling}function Ib(s,i,c){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?c.insertBefore(s,i):c.appendChild(s);else if(u!==4&&u!==27&&(s=s.child,s!==null))for(Ib(s,i,c),s=s.sibling;s!==null;)Ib(s,i,c),s=s.sibling}var Ho=!1,rr=!1,oT=!1,P$=typeof WeakSet=="function"?WeakSet:Set,Wr=null,j$=!1;function WV(s,i){if(s=s.containerInfo,MT=nS,s=nn(s),Gr(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var u=c.getSelection&&c.getSelection();if(u&&u.rangeCount!==0){c=u.anchorNode;var g=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var k=0,L=-1,B=-1,X=0,ue=0,ye=s,re=null;t:for(;;){for(var le;ye!==c||g!==0&&ye.nodeType!==3||(L=k+g),ye!==y||u!==0&&ye.nodeType!==3||(B=k+u),ye.nodeType===3&&(k+=ye.nodeValue.length),(le=ye.firstChild)!==null;)re=ye,ye=le;for(;;){if(ye===s)break t;if(re===c&&++X===g&&(L=k),re===y&&++ue===u&&(B=k),(le=ye.nextSibling)!==null)break;ye=re,re=ye.parentNode}ye=le}c=L===-1||B===-1?null:{start:L,end:B}}else c=null}c=c||{start:0,end:0}}else c=null;for(IT={focusedElem:s,selectionRange:c},nS=!1,Wr=i;Wr!==null;)if(i=Wr,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,Wr=s;else for(;Wr!==null;){switch(i=Wr,y=i.alternate,s=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,c=i,g=y.memoizedProps,y=y.memoizedState,u=c.stateNode;try{var We=ku(c.type,g,c.elementType===c.type);s=u.getSnapshotBeforeUpdate(We,y),u.__reactInternalSnapshotBeforeUpdate=s}catch(Rt){yn(c,c.return,Rt)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,c=s.nodeType,c===9)UT(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":UT(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,Wr=s;break}Wr=i.return}return We=j$,j$=!1,We}function H$(s,i,c){var u=c.flags;switch(c.tag){case 0:case 11:case 15:Vo(s,c),u&4&&xg(5,c);break;case 1:if(Vo(s,c),u&4)if(s=c.stateNode,i===null)try{s.componentDidMount()}catch(L){yn(c,c.return,L)}else{var g=ku(c.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(g,i,s.__reactInternalSnapshotBeforeUpdate)}catch(L){yn(c,c.return,L)}}u&64&&I$(c),u&512&&Du(c,c.return);break;case 3:if(Vo(s,c),u&64&&(u=c.updateQueue,u!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{M$(u,s)}catch(L){yn(c,c.return,L)}}break;case 26:Vo(s,c),u&512&&Du(c,c.return);break;case 27:case 5:Vo(s,c),i===null&&u&4&&F$(c),u&512&&Du(c,c.return);break;case 12:Vo(s,c);break;case 13:Vo(s,c),u&4&&K$(s,c);break;case 22:if(g=c.memoizedState!==null||Ho,!g){i=i!==null&&i.memoizedState!==null||rr;var y=Ho,k=rr;Ho=g,(rr=i)&&!k?rl(s,c,(c.subtreeFlags&8772)!==0):Vo(s,c),Ho=y,rr=k}u&512&&(c.memoizedProps.mode==="manual"?Du(c,c.return):ca(c,c.return));break;default:Vo(s,c)}}function B$(s){var i=s.alternate;i!==null&&(s.alternate=null,B$(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&mi(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var kr=null,la=!1;function Bo(s,i,c){for(c=c.child;c!==null;)V$(s,i,c),c=c.sibling}function V$(s,i,c){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(Hi,c)}catch{}switch(c.tag){case 26:rr||ca(c,i),Bo(s,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:rr||ca(c,i);var u=kr,g=la;for(kr=c.stateNode,Bo(s,i,c),c=c.stateNode,i=c.attributes;i.length;)c.removeAttributeNode(i[0]);mi(c),kr=u,la=g;break;case 5:rr||ca(c,i);case 6:g=kr;var y=la;if(kr=null,Bo(s,i,c),kr=g,la=y,kr!==null)if(la)try{s=kr,u=c.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)}catch(k){yn(c,i,k)}else try{kr.removeChild(c.stateNode)}catch(k){yn(c,i,k)}break;case 18:kr!==null&&(la?(i=kr,c=c.stateNode,i.nodeType===8?zT(i.parentNode,c):i.nodeType===1&&zT(i,c),Yg(i)):zT(kr,c.stateNode));break;case 4:u=kr,g=la,kr=c.stateNode.containerInfo,la=!0,Bo(s,i,c),kr=u,la=g;break;case 0:case 11:case 14:case 15:rr||nl(2,c,i),rr||nl(4,c,i),Bo(s,i,c);break;case 1:rr||(ca(c,i),u=c.stateNode,typeof u.componentWillUnmount=="function"&&L$(c,i,u)),Bo(s,i,c);break;case 21:Bo(s,i,c);break;case 22:rr||ca(c,i),rr=(u=rr)||c.memoizedState!==null,Bo(s,i,c),rr=u;break;default:Bo(s,i,c)}}function K$(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Yg(s)}catch(c){yn(i,i.return,c)}}function JV(s){switch(s.tag){case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new P$),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new P$),i;default:throw Error(r(435,s.tag))}}function cT(s,i){var c=JV(s);i.forEach(function(u){var g=u7.bind(null,s,u);c.has(u)||(c.add(u),u.then(g,g))})}function Ia(s,i){var c=i.deletions;if(c!==null)for(var u=0;u<c.length;u++){var g=c[u],y=s,k=i,L=k;e:for(;L!==null;){switch(L.tag){case 27:case 5:kr=L.stateNode,la=!1;break e;case 3:kr=L.stateNode.containerInfo,la=!0;break e;case 4:kr=L.stateNode.containerInfo,la=!0;break e}L=L.return}if(kr===null)throw Error(r(160));V$(y,k,g),kr=null,la=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)G$(i,s),i=i.sibling}var yi=null;function G$(s,i){var c=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ia(i,s),La(s),u&4&&(nl(3,s,s.return),xg(3,s),nl(5,s,s.return));break;case 1:Ia(i,s),La(s),u&512&&(rr||c===null||ca(c,c.return)),u&64&&Ho&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?u:c.concat(u))));break;case 26:var g=yi;if(Ia(i,s),La(s),u&512&&(rr||c===null||ca(c,c.return)),u&4){var y=c!==null?c.memoizedState:null;if(u=s.memoizedState,c===null)if(u===null)if(s.stateNode===null){e:{u=s.type,c=s.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Tt]||y[He]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(u),g.head.insertBefore(y,g.querySelector("head > title"))),ns(y,u,c),y[He]=s,Rn(y),u=y;break e;case"link":var k=Fq("link","href",g).get(u+(c.href||""));if(k){for(var L=0;L<k.length;L++)if(y=k[L],y.getAttribute("href")===(c.href==null?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){k.splice(L,1);break t}}y=g.createElement(u),ns(y,u,c),g.head.appendChild(y);break;case"meta":if(k=Fq("meta","content",g).get(u+(c.content||""))){for(L=0;L<k.length;L++)if(y=k[L],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){k.splice(L,1);break t}}y=g.createElement(u),ns(y,u,c),g.head.appendChild(y);break;default:throw Error(r(468,u))}y[He]=s,Rn(y),u=y}s.stateNode=u}else zq(g,s.type,s.stateNode);else s.stateNode=Lq(g,u,s.memoizedProps);else y!==u?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,u===null?zq(g,s.type,s.stateNode):Lq(g,u,s.memoizedProps)):u===null&&s.stateNode!==null&&z$(s,s.memoizedProps,c.memoizedProps)}break;case 27:if(u&4&&s.alternate===null){g=s.stateNode,y=s.memoizedProps;try{for(var B=g.firstChild;B;){var X=B.nextSibling,ue=B.nodeName;B[Tt]||ue==="HEAD"||ue==="BODY"||ue==="SCRIPT"||ue==="STYLE"||ue==="LINK"&&B.rel.toLowerCase()==="stylesheet"||g.removeChild(B),B=X}for(var ye=s.type,re=g.attributes;re.length;)g.removeAttributeNode(re[0]);ns(g,ye,y),g[He]=s,g[$e]=y}catch(We){yn(s,s.return,We)}}case 5:if(Ia(i,s),La(s),u&512&&(rr||c===null||ca(c,c.return)),s.flags&32){g=s.stateNode;try{zc(g,"")}catch(We){yn(s,s.return,We)}}u&4&&s.stateNode!=null&&(g=s.memoizedProps,z$(s,g,c!==null?c.memoizedProps:g)),u&1024&&(oT=!0);break;case 6:if(Ia(i,s),La(s),u&4){if(s.stateNode===null)throw Error(r(162));u=s.memoizedProps,c=s.stateNode;try{c.nodeValue=u}catch(We){yn(s,s.return,We)}}break;case 3:if(Zb=null,g=yi,yi=Jb(i.containerInfo),Ia(i,s),yi=g,La(s),u&4&&c!==null&&c.memoizedState.isDehydrated)try{Yg(i.containerInfo)}catch(We){yn(s,s.return,We)}oT&&(oT=!1,Q$(s));break;case 4:u=yi,yi=Jb(s.stateNode.containerInfo),Ia(i,s),La(s),yi=u;break;case 12:Ia(i,s),La(s);break;case 13:Ia(i,s),La(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(yT=ds()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,cT(s,u)));break;case 22:if(u&512&&(rr||c===null||ca(c,c.return)),B=s.memoizedState!==null,X=c!==null&&c.memoizedState!==null,ue=Ho,ye=rr,Ho=ue||B,rr=ye||X,Ia(i,s),rr=ye,Ho=ue,La(s),i=s.stateNode,i._current=s,i._visibility&=-3,i._visibility|=i._pendingVisibility&2,u&8192&&(i._visibility=B?i._visibility&-2:i._visibility|1,B&&(i=Ho||rr,c===null||X||i||Nd(s)),s.memoizedProps===null||s.memoizedProps.mode!=="manual"))e:for(c=null,i=s;;){if(i.tag===5||i.tag===26||i.tag===27){if(c===null){X=c=i;try{if(g=X.stateNode,B)y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{k=X.stateNode,L=X.memoizedProps.style;var le=L!=null&&L.hasOwnProperty("display")?L.display:null;k.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(We){yn(X,X.return,We)}}}else if(i.tag===6){if(c===null){X=i;try{X.stateNode.nodeValue=B?"":X.memoizedProps}catch(We){yn(X,X.return,We)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=s.updateQueue,u!==null&&(c=u.retryQueue,c!==null&&(u.retryQueue=null,cT(s,c))));break;case 19:Ia(i,s),La(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,cT(s,u)));break;case 21:break;default:Ia(i,s),La(s)}}function La(s){var i=s.flags;if(i&2){try{if(s.tag!==27){e:{for(var c=s.return;c!==null;){if(U$(c)){var u=c;break e}c=c.return}throw Error(r(160))}switch(u.tag){case 27:var g=u.stateNode,y=aT(s);Ib(s,y,g);break;case 5:var k=u.stateNode;u.flags&32&&(zc(k,""),u.flags&=-33);var L=aT(s);Ib(s,L,k);break;case 3:case 4:var B=u.stateNode.containerInfo,X=aT(s);iT(s,X,B);break;default:throw Error(r(161))}}}catch(ue){yn(s,s.return,ue)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function Q$(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;Q$(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function Vo(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)H$(s,i.alternate,i),i=i.sibling}function Nd(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:nl(4,i,i.return),Nd(i);break;case 1:ca(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&L$(i,i.return,c),Nd(i);break;case 26:case 27:case 5:ca(i,i.return),Nd(i);break;case 22:ca(i,i.return),i.memoizedState===null&&Nd(i);break;default:Nd(i)}s=s.sibling}}function rl(s,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,g=s,y=i,k=y.flags;switch(y.tag){case 0:case 11:case 15:rl(g,y,c),xg(4,y);break;case 1:if(rl(g,y,c),u=y,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(X){yn(u,u.return,X)}if(u=y,g=u.updateQueue,g!==null){var L=u.stateNode;try{var B=g.shared.hiddenCallbacks;if(B!==null)for(g.shared.hiddenCallbacks=null,g=0;g<B.length;g++)N$(B[g],L)}catch(X){yn(u,u.return,X)}}c&&k&64&&I$(y),Du(y,y.return);break;case 26:case 27:case 5:rl(g,y,c),c&&u===null&&k&4&&F$(y),Du(y,y.return);break;case 12:rl(g,y,c);break;case 13:rl(g,y,c),c&&k&4&&K$(g,y);break;case 22:y.memoizedState===null&&rl(g,y,c),Du(y,y.return);break;default:rl(g,y,c)}i=i.sibling}}function lT(s,i){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&vg(c))}function uT(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&vg(s))}function sl(s,i,c,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Y$(s,i,c,u),i=i.sibling}function Y$(s,i,c,u){var g=i.flags;switch(i.tag){case 0:case 11:case 15:sl(s,i,c,u),g&2048&&xg(9,i);break;case 3:sl(s,i,c,u),g&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&vg(s)));break;case 12:if(g&2048){sl(s,i,c,u),s=i.stateNode;try{var y=i.memoizedProps,k=y.id,L=y.onPostCommit;typeof L=="function"&&L(k,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(B){yn(i,i.return,B)}}else sl(s,i,c,u);break;case 23:break;case 22:y=i.stateNode,i.memoizedState!==null?y._visibility&4?sl(s,i,c,u):$g(s,i):y._visibility&4?sl(s,i,c,u):(y._visibility|=4,Md(s,i,c,u,(i.subtreeFlags&10256)!==0)),g&2048&&lT(i.alternate,i);break;case 24:sl(s,i,c,u),g&2048&&uT(i.alternate,i);break;default:sl(s,i,c,u)}}function Md(s,i,c,u,g){for(g=g&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var y=s,k=i,L=c,B=u,X=k.flags;switch(k.tag){case 0:case 11:case 15:Md(y,k,L,B,g),xg(8,k);break;case 23:break;case 22:var ue=k.stateNode;k.memoizedState!==null?ue._visibility&4?Md(y,k,L,B,g):$g(y,k):(ue._visibility|=4,Md(y,k,L,B,g)),g&&X&2048&&lT(k.alternate,k);break;case 24:Md(y,k,L,B,g),g&&X&2048&&uT(k.alternate,k);break;default:Md(y,k,L,B,g)}i=i.sibling}}function $g(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=s,u=i,g=u.flags;switch(u.tag){case 22:$g(c,u),g&2048&&lT(u.alternate,u);break;case 24:$g(c,u),g&2048&&uT(u.alternate,u);break;default:$g(c,u)}i=i.sibling}}var qg=8192;function Id(s){if(s.subtreeFlags&qg)for(s=s.child;s!==null;)W$(s),s=s.sibling}function W$(s){switch(s.tag){case 26:Id(s),s.flags&qg&&s.memoizedState!==null&&z7(yi,s.memoizedState,s.memoizedProps);break;case 5:Id(s);break;case 3:case 4:var i=yi;yi=Jb(s.stateNode.containerInfo),Id(s),yi=i;break;case 22:s.memoizedState===null&&(i=s.alternate,i!==null&&i.memoizedState!==null?(i=qg,qg=16777216,Id(s),qg=i):Id(s));break;default:Id(s)}}function J$(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function Ng(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var u=i[c];Wr=u,Z$(u,s)}J$(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)X$(s),s=s.sibling}function X$(s){switch(s.tag){case 0:case 11:case 15:Ng(s),s.flags&2048&&nl(9,s,s.return);break;case 3:Ng(s);break;case 12:Ng(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&4&&(s.return===null||s.return.tag!==13)?(i._visibility&=-5,Lb(s)):Ng(s);break;default:Ng(s)}}function Lb(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var u=i[c];Wr=u,Z$(u,s)}J$(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:nl(8,i,i.return),Lb(i);break;case 22:c=i.stateNode,c._visibility&4&&(c._visibility&=-5,Lb(i));break;default:Lb(i)}s=s.sibling}}function Z$(s,i){for(;Wr!==null;){var c=Wr;switch(c.tag){case 0:case 11:case 15:nl(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var u=c.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:vg(c.memoizedState.cache)}if(u=c.child,u!==null)u.return=c,Wr=u;else e:for(c=s;Wr!==null;){u=Wr;var g=u.sibling,y=u.return;if(B$(u),u===c){Wr=null;break e}if(g!==null){g.return=y,Wr=g;break e}Wr=y}}}function XV(s,i,c,u){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fa(s,i,c,u){return new XV(s,i,c,u)}function fT(s){return s=s.prototype,!(!s||!s.isReactComponent)}function al(s,i){var c=s.alternate;return c===null?(c=Fa(s.tag,i,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=i,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&31457280,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,i=s.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function eq(s,i){s.flags&=31457282;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,i=c.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function Fb(s,i,c,u,g,y){var k=0;if(u=s,typeof s=="function")fT(s)&&(k=1);else if(typeof s=="string")k=L7(s,c,Tn.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case h:return xu(c.children,g,y,i);case p:k=8,g|=24;break;case S:return s=Fa(12,c,i,g|2),s.elementType=S,s.lanes=y,s;case z:return s=Fa(13,c,i,g),s.elementType=z,s.lanes=y,s;case A:return s=Fa(19,c,i,g),s.elementType=A,s.lanes=y,s;case q:return tq(c,g,y,i);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case v:case O:k=10;break e;case R:k=9;break e;case x:k=11;break e;case E:k=14;break e;case T:k=16,u=null;break e}k=29,c=Error(r(130,s===null?"null":typeof s,"")),u=null}return i=Fa(k,c,i,g),i.elementType=s,i.type=u,i.lanes=y,i}function xu(s,i,c,u){return s=Fa(7,s,u,i),s.lanes=c,s}function tq(s,i,c,u){s=Fa(22,s,u,i),s.elementType=q,s.lanes=c;var g={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var y=g._current;if(y===null)throw Error(r(456));if((g._pendingVisibility&2)===0){var k=Gc(y,2);k!==null&&(g._pendingVisibility|=2,ks(k,y,2))}},attach:function(){var y=g._current;if(y===null)throw Error(r(456));if((g._pendingVisibility&2)!==0){var k=Gc(y,2);k!==null&&(g._pendingVisibility&=-3,ks(k,y,2))}}};return s.stateNode=g,s}function dT(s,i,c){return s=Fa(6,s,null,i),s.lanes=c,s}function hT(s,i,c){return i=Fa(4,s.children!==null?s.children:[],s.key,i),i.lanes=c,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}function Ko(s){s.flags|=4}function nq(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Uq(i)){if(i=Ma.current,i!==null&&((Kt&4194176)===Kt?Qi!==null:(Kt&62914560)!==Kt&&(Kt&536870912)===0||i!==Qi))throw _g=_1,bx;s.flags|=8192}}function zb(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?Y():536870912,s.lanes|=i,Fd|=i)}function Mg(s,i){if(!Jt)switch(s.tailMode){case"hidden":i=s.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var u=null;c!==null;)c.alternate!==null&&(u=c),c=c.sibling;u===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function Qn(s){var i=s.alternate!==null&&s.alternate.child===s.child,c=0,u=0;if(i)for(var g=s.child;g!==null;)c|=g.lanes|g.childLanes,u|=g.subtreeFlags&31457280,u|=g.flags&31457280,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)c|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=u,s.childLanes=c,i}function ZV(s,i,c){var u=i.pendingProps;switch(p1(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qn(i),null;case 1:return Qn(i),null;case 3:return c=i.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),jo(Mr),fi(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(mg(i)?Ko(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,pi!==null&&(vT(pi),pi=null))),Qn(i),null;case 26:return c=i.memoizedState,s===null?(Ko(i),c!==null?(Qn(i),nq(i,c)):(Qn(i),i.flags&=-16777217)):c?c!==s.memoizedState?(Ko(i),Qn(i),nq(i,c)):(Qn(i),i.flags&=-16777217):(s.memoizedProps!==u&&Ko(i),Qn(i),i.flags&=-16777217),null;case 27:Oo(i),c=na.current;var g=i.type;if(s!==null&&i.stateNode!=null)s.memoizedProps!==u&&Ko(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return Qn(i),null}s=Tn.current,mg(i)?yx(i):(s=$q(g,u,c),i.stateNode=s,Ko(i))}return Qn(i),null;case 5:if(Oo(i),c=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&Ko(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return Qn(i),null}if(s=Tn.current,mg(i))yx(i);else{switch(g=Wb(na.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof u.is=="string"?g.createElement("select",{is:u.is}):g.createElement("select"),u.multiple?s.multiple=!0:u.size&&(s.size=u.size);break;default:s=typeof u.is=="string"?g.createElement(c,{is:u.is}):g.createElement(c)}}s[He]=i,s[$e]=u;e:for(g=i.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===i)break e;for(;g.sibling===null;){if(g.return===null||g.return===i)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}i.stateNode=s;e:switch(ns(s,c,u),c){case"button":case"input":case"select":case"textarea":s=!!u.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Ko(i)}}return Qn(i),i.flags&=-16777217,null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==u&&Ko(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(s=na.current,mg(i)){if(s=i.stateNode,c=i.memoizedProps,u=null,g=Cs,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}s[He]=i,s=!!(s.nodeValue===c||u!==null&&u.suppressHydrationWarning===!0||Cq(s.nodeValue,c)),s||vu(i)}else s=Wb(s).createTextNode(u),s[He]=i,i.stateNode=s}return Qn(i),null;case 13:if(u=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=mg(i),u!==null&&u.dehydrated!==null){if(s===null){if(!g)throw Error(r(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[He]=i}else gg(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Qn(i),g=!1}else pi!==null&&(vT(pi),pi=null),g=!0;if(!g)return i.flags&256?(Fo(i),i):(Fo(i),null)}if(Fo(i),(i.flags&128)!==0)return i.lanes=c,i;if(c=u!==null,s=s!==null&&s.memoizedState!==null,c){u=i.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool);var y=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==g&&(u.flags|=2048)}return c!==s&&c&&(i.child.flags|=8192),zb(i,i.updateQueue),Qn(i),null;case 4:return fi(),s===null&&$T(i.stateNode.containerInfo),Qn(i),null;case 10:return jo(i.type),Qn(i),null;case 19:if(En(Nr),g=i.memoizedState,g===null)return Qn(i),null;if(u=(i.flags&128)!==0,y=g.rendering,y===null)if(u)Mg(g,!1);else{if(sr!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(y=wb(s),y!==null){for(i.flags|=128,Mg(g,!1),s=y.updateQueue,i.updateQueue=s,zb(i,s),i.subtreeFlags=0,s=c,c=i.child;c!==null;)eq(c,s),c=c.sibling;return St(Nr,Nr.current&1|2),i.child}s=s.sibling}g.tail!==null&&ds()>Ub&&(i.flags|=128,u=!0,Mg(g,!1),i.lanes=4194304)}else{if(!u)if(s=wb(y),s!==null){if(i.flags|=128,u=!0,s=s.updateQueue,i.updateQueue=s,zb(i,s),Mg(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!Jt)return Qn(i),null}else 2*ds()-g.renderingStartTime>Ub&&c!==536870912&&(i.flags|=128,u=!0,Mg(g,!1),i.lanes=4194304);g.isBackwards?(y.sibling=i.child,i.child=y):(s=g.last,s!==null?s.sibling=y:i.child=y,g.last=y)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=ds(),i.sibling=null,s=Nr.current,St(Nr,u?s&1|2:s&1),i):(Qn(i),null);case 22:case 23:return Fo(i),S1(),u=i.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(c&536870912)!==0&&(i.flags&128)===0&&(Qn(i),i.subtreeFlags&6&&(i.flags|=8192)):Qn(i),c=i.updateQueue,c!==null&&zb(i,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==c&&(i.flags|=2048),s!==null&&En(Eu),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),jo(Mr),Qn(i),null;case 25:return null}throw Error(r(156,i.tag))}function e7(s,i){switch(p1(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return jo(Mr),fi(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return Oo(i),null;case 13:if(Fo(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));gg()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return En(Nr),null;case 4:return fi(),null;case 10:return jo(i.type),null;case 22:case 23:return Fo(i),S1(),s!==null&&En(Eu),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return jo(Mr),null;case 25:return null;default:return null}}function rq(s,i){switch(p1(i),i.tag){case 3:jo(Mr),fi();break;case 26:case 27:case 5:Oo(i);break;case 4:fi();break;case 13:Fo(i);break;case 19:En(Nr);break;case 10:jo(i.type);break;case 22:case 23:Fo(i),S1(),s!==null&&En(Eu);break;case 24:jo(Mr)}}var t7={getCacheForType:function(s){var i=gs(Mr),c=i.data.get(s);return c===void 0&&(c=s(),i.data.set(s,c)),c}},n7=typeof WeakMap=="function"?WeakMap:Map,Yn=0,Cn=null,Lt=null,Kt=0,kn=0,ua=null,Go=!1,Ld=!1,mT=!1,Qo=0,sr=0,il=0,$u=0,gT=0,za=0,Fd=0,Ig=null,Wi=null,pT=!1,yT=0,Ub=1/0,Pb=null,ol=null,jb=!1,qu=null,Lg=0,_T=0,bT=null,Fg=0,ST=null;function fa(){if((Yn&2)!==0&&Kt!==0)return Kt&-Kt;if(V.T!==null){var s=Od;return s!==0?s:AT()}return C()}function sq(){za===0&&(za=(Kt&536870912)===0||Jt?lt():536870912);var s=Ma.current;return s!==null&&(s.flags|=32),za}function ks(s,i,c){(s===Cn&&kn===2||s.cancelPendingCommit!==null)&&(zd(s,0),Yo(s,Kt,za,!1)),se(s,c),((Yn&2)===0||s!==Cn)&&(s===Cn&&((Yn&2)===0&&($u|=c),sr===4&&Yo(s,Kt,za,!1)),Ji(s))}function aq(s,i,c){if((Yn&6)!==0)throw Error(r(327));var u=!c&&(i&60)===0&&(i&s.expiredLanes)===0||ra(s,i),g=u?a7(s,i):TT(s,i,!0),y=u;do{if(g===0){Ld&&!u&&Yo(s,i,0,!1);break}else if(g===6)Yo(s,i,0,!Go);else{if(c=s.current.alternate,y&&!r7(c)){g=TT(s,i,!1),y=!1;continue}if(g===2){if(y=i,s.errorRecoveryDisabledLanes&y)var k=0;else k=s.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){i=k;e:{var L=s;g=Ig;var B=L.current.memoizedState.isDehydrated;if(B&&(zd(L,k).flags|=256),k=TT(L,k,!1),k!==2){if(mT&&!B){L.errorRecoveryDisabledLanes|=y,$u|=y,g=4;break e}y=Wi,Wi=g,y!==null&&vT(y)}g=k}if(y=!1,g!==2)continue}}if(g===1){zd(s,0),Yo(s,i,0,!0);break}e:{switch(u=s,g){case 0:case 1:throw Error(r(345));case 4:if((i&4194176)===i){Yo(u,i,za,!Go);break e}break;case 2:Wi=null;break;case 3:case 5:break;default:throw Error(r(329))}if(u.finishedWork=c,u.finishedLanes=i,(i&62914560)===i&&(y=yT+300-ds(),10<y)){if(Yo(u,i,za,!Go),hi(u,0)!==0)break e;u.timeoutHandle=Oq(iq.bind(null,u,c,Wi,Pb,pT,i,za,$u,Fd,Go,2,-0,0),y);break e}iq(u,c,Wi,Pb,pT,i,za,$u,Fd,Go,0,-0,0)}}break}while(!0);Ji(s)}function vT(s){Wi===null?Wi=s:Wi.push.apply(Wi,s)}function iq(s,i,c,u,g,y,k,L,B,X,ue,ye,re){var le=i.subtreeFlags;if((le&8192||(le&16785408)===16785408)&&(Bg={stylesheets:null,count:0,unsuspend:F7},W$(i),i=U7(),i!==null)){s.cancelPendingCommit=i(hq.bind(null,s,c,u,g,k,L,B,1,ye,re)),Yo(s,y,k,!X);return}hq(s,c,u,g,k,L,B,ue,ye,re)}function r7(s){for(var i=s;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var u=0;u<c.length;u++){var g=c[u],y=g.getSnapshot;g=g.value;try{if(!Qe(y(),g))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Yo(s,i,c,u){i&=~gT,i&=~$u,s.suspendedLanes|=i,s.pingedLanes&=~i,u&&(s.warmLanes|=i),u=s.expirationTimes;for(var g=i;0<g;){var y=31-pn(g),k=1<<y;u[y]=-1,g&=~k}c!==0&&Oe(s,c,i)}function Hb(){return(Yn&6)===0?(zg(0),!1):!0}function wT(){if(Lt!==null){if(kn===0)var s=Lt.return;else s=Lt,Po=Au=null,A1(s),kd=null,bg=0,s=Lt;for(;s!==null;)rq(s.alternate,s),s=s.return;Lt=null}}function zd(s,i){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,w7(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),wT(),Cn=s,Lt=c=al(s.current,null),Kt=i,kn=0,ua=null,Go=!1,Ld=ra(s,i),mT=!1,Fd=za=gT=$u=il=sr=0,Wi=Ig=null,pT=!1,(i&8)!==0&&(i|=i&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=i;0<u;){var g=31-pn(u),y=1<<g;i|=s[g],u&=~y}return Qo=i,hb(),c}function oq(s,i){$t=null,V.H=Yi,i===yg?(i=wx(),kn=3):i===bx?(i=wx(),kn=4):kn=i===S$?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,ua=i,Lt===null&&(sr=1,qb(s,$a(i,s.current)))}function cq(){var s=V.H;return V.H=Yi,s===null?Yi:s}function lq(){var s=V.A;return V.A=t7,s}function ET(){sr=4,Go||(Kt&4194176)!==Kt&&Ma.current!==null||(Ld=!0),(il&134217727)===0&&($u&134217727)===0||Cn===null||Yo(Cn,Kt,za,!1)}function TT(s,i,c){var u=Yn;Yn|=2;var g=cq(),y=lq();(Cn!==s||Kt!==i)&&(Pb=null,zd(s,i)),i=!1;var k=sr;e:do try{if(kn!==0&&Lt!==null){var L=Lt,B=ua;switch(kn){case 8:wT(),k=6;break e;case 3:case 2:case 6:Ma.current===null&&(i=!0);var X=kn;if(kn=0,ua=null,Ud(s,L,B,X),c&&Ld){k=0;break e}break;default:X=kn,kn=0,ua=null,Ud(s,L,B,X)}}s7(),k=sr;break}catch(ue){oq(s,ue)}while(!0);return i&&s.shellSuspendCounter++,Po=Au=null,Yn=u,V.H=g,V.A=y,Lt===null&&(Cn=null,Kt=0,hb()),k}function s7(){for(;Lt!==null;)uq(Lt)}function a7(s,i){var c=Yn;Yn|=2;var u=cq(),g=lq();Cn!==s||Kt!==i?(Pb=null,Ub=ds()+500,zd(s,i)):Ld=ra(s,i);e:do try{if(kn!==0&&Lt!==null){i=Lt;var y=ua;t:switch(kn){case 1:kn=0,ua=null,Ud(s,i,y,1);break;case 2:if(Sx(y)){kn=0,ua=null,fq(i);break}i=function(){kn===2&&Cn===s&&(kn=7),Ji(s)},y.then(i,i);break e;case 3:kn=7;break e;case 4:kn=5;break e;case 7:Sx(y)?(kn=0,ua=null,fq(i)):(kn=0,ua=null,Ud(s,i,y,7));break;case 5:var k=null;switch(Lt.tag){case 26:k=Lt.memoizedState;case 5:case 27:var L=Lt;if(!k||Uq(k)){kn=0,ua=null;var B=L.sibling;if(B!==null)Lt=B;else{var X=L.return;X!==null?(Lt=X,Bb(X)):Lt=null}break t}}kn=0,ua=null,Ud(s,i,y,5);break;case 6:kn=0,ua=null,Ud(s,i,y,6);break;case 8:wT(),sr=6;break e;default:throw Error(r(462))}}i7();break}catch(ue){oq(s,ue)}while(!0);return Po=Au=null,V.H=u,V.A=g,Yn=c,Lt!==null?0:(Cn=null,Kt=0,hb(),sr)}function i7(){for(;Lt!==null&&!Je();)uq(Lt)}function uq(s){var i=$$(s.alternate,s,Qo);s.memoizedProps=s.pendingProps,i===null?Bb(s):Lt=i}function fq(s){var i=s,c=i.alternate;switch(i.tag){case 15:case 0:i=C$(c,i,i.pendingProps,i.type,void 0,Kt);break;case 11:i=C$(c,i,i.pendingProps,i.type.render,i.ref,Kt);break;case 5:A1(i);default:rq(c,i),i=Lt=eq(i,Qo),i=$$(c,i,Qo)}s.memoizedProps=s.pendingProps,i===null?Bb(s):Lt=i}function Ud(s,i,c,u){Po=Au=null,A1(i),kd=null,bg=0;var g=i.return;try{if(QV(s,g,i,c,Kt)){sr=1,qb(s,$a(c,s.current)),Lt=null;return}}catch(y){if(g!==null)throw Lt=g,y;sr=1,qb(s,$a(c,s.current)),Lt=null;return}i.flags&32768?(Jt||u===1?s=!0:Ld||(Kt&536870912)!==0?s=!1:(Go=s=!0,(u===2||u===3||u===6)&&(u=Ma.current,u!==null&&u.tag===13&&(u.flags|=16384))),dq(i,s)):Bb(i)}function Bb(s){var i=s;do{if((i.flags&32768)!==0){dq(i,Go);return}s=i.return;var c=ZV(i.alternate,i,Qo);if(c!==null){Lt=c;return}if(i=i.sibling,i!==null){Lt=i;return}Lt=i=s}while(i!==null);sr===0&&(sr=5)}function dq(s,i){do{var c=e7(s.alternate,s);if(c!==null){c.flags&=32767,Lt=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(s=s.sibling,s!==null)){Lt=s;return}Lt=s=c}while(s!==null);sr=6,Lt=null}function hq(s,i,c,u,g,y,k,L,B,X){var ue=V.T,ye=ve.p;try{ve.p=2,V.T=null,o7(s,i,c,u,ye,g,y,k,L,B,X)}finally{V.T=ue,ve.p=ye}}function o7(s,i,c,u,g,y,k,L){do Pd();while(qu!==null);if((Yn&6)!==0)throw Error(r(327));var B=s.finishedWork;if(u=s.finishedLanes,B===null)return null;if(s.finishedWork=null,s.finishedLanes=0,B===s.current)throw Error(r(177));s.callbackNode=null,s.callbackPriority=0,s.cancelPendingCommit=null;var X=B.lanes|B.childLanes;if(X|=h1,Se(s,u,X,y,k,L),s===Cn&&(Lt=Cn=null,Kt=0),(B.subtreeFlags&10256)===0&&(B.flags&10256)===0||jb||(jb=!0,_T=X,bT=c,f7(Do,function(){return Pd(),null})),c=(B.flags&15990)!==0,(B.subtreeFlags&15990)!==0||c?(c=V.T,V.T=null,y=ve.p,ve.p=2,k=Yn,Yn|=4,WV(s,B),G$(B,s),Rs(IT,s.containerInfo),nS=!!MT,IT=MT=null,s.current=B,H$(s,B.alternate,B),Wt(),Yn=k,ve.p=y,V.T=c):s.current=B,jb?(jb=!1,qu=s,Lg=u):mq(s,X),X=s.pendingLanes,X===0&&(ol=null),Wm(B.stateNode),Ji(s),i!==null)for(g=s.onRecoverableError,B=0;B<i.length;B++)X=i[B],g(X.value,{componentStack:X.stack});return(Lg&3)!==0&&Pd(),X=s.pendingLanes,(u&4194218)!==0&&(X&42)!==0?s===ST?Fg++:(Fg=0,ST=s):Fg=0,zg(0),null}function mq(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,vg(i)))}function Pd(){if(qu!==null){var s=qu,i=_T;_T=0;var c=st(Lg),u=V.T,g=ve.p;try{if(ve.p=32>c?32:c,V.T=null,qu===null)var y=!1;else{c=bT,bT=null;var k=qu,L=Lg;if(qu=null,Lg=0,(Yn&6)!==0)throw Error(r(331));var B=Yn;if(Yn|=4,X$(k.current),Y$(k,k.current,L,c),Yn=B,zg(0,!1),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(Hi,k)}catch{}y=!0}return y}finally{ve.p=g,V.T=u,mq(s,i)}}return!1}function gq(s,i,c){i=$a(c,i),i=j1(s.stateNode,i,2),s=tl(s,i,2),s!==null&&(se(s,2),Ji(s))}function yn(s,i,c){if(s.tag===3)gq(s,s,c);else for(;i!==null;){if(i.tag===3){gq(i,s,c);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ol===null||!ol.has(u))){s=$a(c,s),c=_$(2),u=tl(i,c,2),u!==null&&(b$(c,u,i,s),se(u,2),Ji(u));break}}i=i.return}}function RT(s,i,c){var u=s.pingCache;if(u===null){u=s.pingCache=new n7;var g=new Set;u.set(i,g)}else g=u.get(i),g===void 0&&(g=new Set,u.set(i,g));g.has(c)||(mT=!0,g.add(c),s=c7.bind(null,s,i,c),i.then(s,s))}function c7(s,i,c){var u=s.pingCache;u!==null&&u.delete(i),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,Cn===s&&(Kt&c)===c&&(sr===4||sr===3&&(Kt&62914560)===Kt&&300>ds()-yT?(Yn&2)===0&&zd(s,0):gT|=c,Fd===Kt&&(Fd=0)),Ji(s)}function pq(s,i){i===0&&(i=Y()),s=Gc(s,i),s!==null&&(se(s,i),Ji(s))}function l7(s){var i=s.memoizedState,c=0;i!==null&&(c=i.retryLane),pq(s,c)}function u7(s,i){var c=0;switch(s.tag){case 13:var u=s.stateNode,g=s.memoizedState;g!==null&&(c=g.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),pq(s,c)}function f7(s,i){return iu(s,i)}var Vb=null,jd=null,CT=!1,Kb=!1,kT=!1,Nu=0;function Ji(s){s!==jd&&s.next===null&&(jd===null?Vb=jd=s:jd=jd.next=s),Kb=!0,CT||(CT=!0,h7(d7))}function zg(s,i){if(!kT&&Kb){kT=!0;do for(var c=!1,u=Vb;u!==null;){if(s!==0){var g=u.pendingLanes;if(g===0)var y=0;else{var k=u.suspendedLanes,L=u.pingedLanes;y=(1<<31-pn(42|s)+1)-1,y&=g&~(k&~L),y=y&201326677?y&201326677|1:y?y|2:0}y!==0&&(c=!0,bq(u,y))}else y=Kt,y=hi(u,u===Cn?y:0),(y&3)===0||ra(u,y)||(c=!0,bq(u,y));u=u.next}while(c);kT=!1}}function d7(){Kb=CT=!1;var s=0;Nu!==0&&(v7()&&(s=Nu),Nu=0);for(var i=ds(),c=null,u=Vb;u!==null;){var g=u.next,y=yq(u,i);y===0?(u.next=null,c===null?Vb=g:c.next=g,g===null&&(jd=c)):(c=u,(s!==0||(y&3)!==0)&&(Kb=!0)),u=g}zg(s)}function yq(s,i){for(var c=s.suspendedLanes,u=s.pingedLanes,g=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var k=31-pn(y),L=1<<k,B=g[k];B===-1?((L&c)===0||(L&u)!==0)&&(g[k]=fd(L,i)):B<=i&&(s.expiredLanes|=L),y&=~L}if(i=Cn,c=Kt,c=hi(s,s===i?c:0),u=s.callbackNode,c===0||s===i&&kn===2||s.cancelPendingCommit!==null)return u!==null&&u!==null&&ou(u),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||ra(s,c)){if(i=c&-c,i===s.callbackPriority)return i;switch(u!==null&&ou(u),st(c)){case 2:case 8:c=qr;break;case 32:c=Do;break;case 268435456:c=lu;break;default:c=Do}return u=_q.bind(null,s),c=iu(c,u),s.callbackPriority=i,s.callbackNode=c,i}return u!==null&&u!==null&&ou(u),s.callbackPriority=2,s.callbackNode=null,2}function _q(s,i){var c=s.callbackNode;if(Pd()&&s.callbackNode!==c)return null;var u=Kt;return u=hi(s,s===Cn?u:0),u===0?null:(aq(s,u,i),yq(s,ds()),s.callbackNode!=null&&s.callbackNode===c?_q.bind(null,s):null)}function bq(s,i){if(Pd())return null;aq(s,i,!0)}function h7(s){E7(function(){(Yn&6)!==0?iu(Hs,s):s()})}function AT(){return Nu===0&&(Nu=lt()),Nu}function Sq(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:md(""+s)}function vq(s,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,s.id&&c.setAttribute("form",s.id),i.parentNode.insertBefore(c,i),s=new FormData(s),c.parentNode.removeChild(c),s}function m7(s,i,c,u,g){if(i==="submit"&&c&&c.stateNode===g){var y=Sq((g[$e]||null).action),k=u.submitter;k&&(i=(i=k[$e]||null)?Sq(i.formAction):k.getAttribute("formAction"),i!==null&&(y=i,k=null));var L=new _d("action","action",null,u,g);s.push({event:L,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Nu!==0){var B=k?vq(g,k):new FormData(g);L1(c,{pending:!0,data:B,method:g.method,action:y},null,B)}}else typeof y=="function"&&(L.preventDefault(),B=k?vq(g,k):new FormData(g),L1(c,{pending:!0,data:B,method:g.method,action:y},y,B))},currentTarget:g}]})}}for(var OT=0;OT<hx.length;OT++){var DT=hx[OT],g7=DT.toLowerCase(),p7=DT[0].toUpperCase()+DT.slice(1);gi(g7,"on"+p7)}gi(cx,"onAnimationEnd"),gi(lx,"onAnimationIteration"),gi(ux,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(qV,"onTransitionRun"),gi(NV,"onTransitionStart"),gi(MV,"onTransitionCancel"),gi(fx,"onTransitionEnd"),It("onMouseEnter",["mouseout","mouseover"]),It("onMouseLeave",["mouseout","mouseover"]),It("onPointerEnter",["pointerout","pointerover"]),It("onPointerLeave",["pointerout","pointerover"]),Gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ug="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ug));function wq(s,i){i=(i&4)!==0;for(var c=0;c<s.length;c++){var u=s[c],g=u.event;u=u.listeners;e:{var y=void 0;if(i)for(var k=u.length-1;0<=k;k--){var L=u[k],B=L.instance,X=L.currentTarget;if(L=L.listener,B!==y&&g.isPropagationStopped())break e;y=L,g.currentTarget=X;try{y(g)}catch(ue){$b(ue)}g.currentTarget=null,y=B}else for(k=0;k<u.length;k++){if(L=u[k],B=L.instance,X=L.currentTarget,L=L.listener,B!==y&&g.isPropagationStopped())break e;y=L,g.currentTarget=X;try{y(g)}catch(ue){$b(ue)}g.currentTarget=null,y=B}}}}function Bt(s,i){var c=i[Ht];c===void 0&&(c=i[Ht]=new Set);var u=s+"__bubble";c.has(u)||(Eq(i,s,2,!1),c.add(u))}function xT(s,i,c){var u=0;i&&(u|=4),Eq(c,s,u,i)}var Gb="_reactListening"+Math.random().toString(36).slice(2);function $T(s){if(!s[Gb]){s[Gb]=!0,Ic.forEach(function(c){c!=="selectionchange"&&(y7.has(c)||xT(c,!1,s),xT(c,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Gb]||(i[Gb]=!0,xT("selectionchange",!1,i))}}function Eq(s,i,c,u){switch(Kq(i)){case 2:var g=H7;break;case 8:g=B7;break;default:g=VT}c=g.bind(null,i,c,s),g=void 0,!eg||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),u?g!==void 0?s.addEventListener(i,c,{capture:!0,passive:g}):s.addEventListener(i,c,!0):g!==void 0?s.addEventListener(i,c,{passive:g}):s.addEventListener(i,c,!1)}function qT(s,i,c,u,g){var y=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var k=u.tag;if(k===3||k===4){var L=u.stateNode.containerInfo;if(L===g||L.nodeType===8&&L.parentNode===g)break;if(k===4)for(k=u.return;k!==null;){var B=k.tag;if((B===3||B===4)&&(B=k.stateNode.containerInfo,B===g||B.nodeType===8&&B.parentNode===g))return;k=k.return}for(;L!==null;){if(k=Fn(L),k===null)return;if(B=k.tag,B===5||B===6||B===26||B===27){u=y=k;continue e}L=L.parentNode}}u=u.return}Z_(function(){var X=y,ue=Xm(c),ye=[];e:{var re=dx.get(s);if(re!==void 0){var le=_d,We=s;switch(s){case"keypress":if(pd(c)===0)break e;case"keydown":case"keyup":le=Hc;break;case"focusin":We="focus",le=sg;break;case"focusout":We="blur",le=sg;break;case"beforeblur":case"afterblur":le=sg;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=nb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=YE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=rb;break;case cx:case lx:case ux:le=XE;break;case fx:le=sb;break;case"scroll":case"scrollend":le=GE;break;case"wheel":le=ib;break;case"copy":case"cut":case"paste":le=e1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=og;break;case"toggle":case"beforetoggle":le=Vi}var Rt=(i&4)!==0,ar=!Rt&&(s==="scroll"||s==="scrollend"),ee=Rt?re!==null?re+"Capture":null:re;Rt=[];for(var J=X,ne;J!==null;){var me=J;if(ne=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||ne===null||ee===null||(me=du(J,ee),me!=null&&Rt.push(Pg(J,me,ne))),ar)break;J=J.return}0<Rt.length&&(re=new le(re,We,null,c,ue),ye.push({event:re,listeners:Rt}))}}if((i&7)===0){e:{if(re=s==="mouseover"||s==="pointerover",le=s==="mouseout"||s==="pointerout",re&&c!==qt&&(We=c.relatedTarget||c.fromElement)&&(Fn(We)||We[mt]))break e;if((le||re)&&(re=ue.window===ue?ue:(re=ue.ownerDocument)?re.defaultView||re.parentWindow:window,le?(We=c.relatedTarget||c.toElement,le=X,We=We?Fn(We):null,We!==null&&(ar=Re(We),Rt=We.tag,We!==ar||Rt!==5&&Rt!==27&&Rt!==6)&&(We=null)):(le=null,We=X),le!==We)){if(Rt=nb,me="onMouseLeave",ee="onMouseEnter",J="mouse",(s==="pointerout"||s==="pointerover")&&(Rt=og,me="onPointerLeave",ee="onPointerEnter",J="pointer"),ar=le==null?re:Er(le),ne=We==null?re:Er(We),re=new Rt(me,J+"leave",le,c,ue),re.target=ar,re.relatedTarget=ne,me=null,Fn(ue)===X&&(Rt=new Rt(ee,J+"enter",We,c,ue),Rt.target=ne,Rt.relatedTarget=ar,me=Rt),ar=me,le&&We)t:{for(Rt=le,ee=We,J=0,ne=Rt;ne;ne=Hd(ne))J++;for(ne=0,me=ee;me;me=Hd(me))ne++;for(;0<J-ne;)Rt=Hd(Rt),J--;for(;0<ne-J;)ee=Hd(ee),ne--;for(;J--;){if(Rt===ee||ee!==null&&Rt===ee.alternate)break t;Rt=Hd(Rt),ee=Hd(ee)}Rt=null}else Rt=null;le!==null&&Tq(ye,re,le,Rt,!1),We!==null&&ar!==null&&Tq(ye,ar,We,Rt,!0)}}e:{if(re=X?Er(X):window,le=re.nodeName&&re.nodeName.toLowerCase(),le==="select"||le==="input"&&re.type==="file")var ze=dg;else if(ug(re))if(hg)ze=he;else{ze=G;var Nt=P}else le=re.nodeName,!le||le.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?X&&Jm(X.elementType)&&(ze=dg):ze=W;if(ze&&(ze=ze(s,X))){fg(ye,ze,c,ue);break e}Nt&&Nt(s,re,X),s==="focusout"&&X&&re.type==="number"&&X.memoizedProps.value!=null&&qo(re,"number",re.value)}switch(Nt=X?Er(X):window,s){case"focusin":(ug(Nt)||Nt.contentEditable==="true")&&(Qr=Nt,Mo=X,ms=null);break;case"focusout":ms=Mo=Qr=null;break;case"mousedown":Ki=!0;break;case"contextmenu":case"mouseup":case"dragend":Ki=!1,Tr(ye,c,ue);break;case"selectionchange":if(oa)break;case"keydown":case"keyup":Tr(ye,c,ue)}var Ze;if(cg)e:{switch(s){case"compositionstart":var ut="onCompositionStart";break e;case"compositionend":ut="onCompositionEnd";break e;case"compositionupdate":ut="onCompositionUpdate";break e}ut=void 0}else Bc?lb(s,c)&&(ut="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(ut="onCompositionStart");ut&&(ob&&c.locale!=="ko"&&(Bc||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&Bc&&(Ze=eb()):(Bi=ue,tg="value"in Bi?Bi.value:Bi.textContent,Bc=!0)),Nt=Qb(X,ut),0<Nt.length&&(ut=new ag(ut,s,null,c,ue),ye.push({event:ut,listeners:Nt}),Ze?ut.data=Ze:(Ze=ub(c),Ze!==null&&(ut.data=Ze)))),(Ze=f1?U(s,c):fb(s,c))&&(ut=Qb(X,"onBeforeInput"),0<ut.length&&(Nt=new ag("onBeforeInput","beforeinput",null,c,ue),ye.push({event:Nt,listeners:ut}),Nt.data=Ze)),m7(ye,s,X,c,ue)}wq(ye,i)})}function Pg(s,i,c){return{instance:s,listener:i,currentTarget:c}}function Qb(s,i){for(var c=i+"Capture",u=[];s!==null;){var g=s,y=g.stateNode;g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=du(s,c),g!=null&&u.unshift(Pg(s,g,y)),g=du(s,i),g!=null&&u.push(Pg(s,g,y))),s=s.return}return u}function Hd(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Tq(s,i,c,u,g){for(var y=i._reactName,k=[];c!==null&&c!==u;){var L=c,B=L.alternate,X=L.stateNode;if(L=L.tag,B!==null&&B===u)break;L!==5&&L!==26&&L!==27||X===null||(B=X,g?(X=du(c,y),X!=null&&k.unshift(Pg(c,X,B))):g||(X=du(c,y),X!=null&&k.push(Pg(c,X,B)))),c=c.return}k.length!==0&&s.push({event:i,listeners:k})}var _7=/\r\n?/g,b7=/\u0000|\uFFFD/g;function Rq(s){return(typeof s=="string"?s:""+s).replace(_7,`
`).replace(b7,"")}function Cq(s,i){return i=Rq(i),Rq(s)===i}function Yb(){}function dn(s,i,c,u,g,y){switch(c){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||zc(s,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&zc(s,""+u);break;case"className":$o(s,"class",u);break;case"tabIndex":$o(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":$o(s,c,u);break;case"style":J_(s,u,y);break;case"data":if(i!=="object"){$o(s,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||c!=="href")){s.removeAttribute(c);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(c);break}u=md(""+u),s.setAttribute(c,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(i!=="input"&&dn(s,i,"name",g.name,g,null),dn(s,i,"formEncType",g.formEncType,g,null),dn(s,i,"formMethod",g.formMethod,g,null),dn(s,i,"formTarget",g.formTarget,g,null)):(dn(s,i,"encType",g.encType,g,null),dn(s,i,"method",g.method,g,null),dn(s,i,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(c);break}u=md(""+u),s.setAttribute(c,u);break;case"onClick":u!=null&&(s.onclick=Yb);break;case"onScroll":u!=null&&Bt("scroll",s);break;case"onScrollEnd":u!=null&&Bt("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(c=u.__html,c!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}c=md(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(c,""+u):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":u===!0?s.setAttribute(c,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(c,u):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(c,u):s.removeAttribute(c);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(c):s.setAttribute(c,u);break;case"popover":Bt("beforetoggle",s),Bt("toggle",s),aa(s,"popover",u);break;case"xlinkActuate":ia(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ia(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ia(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ia(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ia(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ia(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ia(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ia(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ia(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":aa(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=VE.get(c)||c,aa(s,c,u))}}function NT(s,i,c,u,g,y){switch(c){case"style":J_(s,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(c=u.__html,c!=null){if(g.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"children":typeof u=="string"?zc(s,u):(typeof u=="number"||typeof u=="bigint")&&zc(s,""+u);break;case"onScroll":u!=null&&Bt("scroll",s);break;case"onScrollEnd":u!=null&&Bt("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Yb);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Da.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),i=c.slice(2,g?c.length-7:void 0),y=s[$e]||null,y=y!=null?y[c]:null,typeof y=="function"&&s.removeEventListener(i,y,g),typeof u=="function")){typeof y!="function"&&y!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(i,u,g);break e}c in s?s[c]=u:u===!0?s.setAttribute(c,""):aa(s,c,u)}}}function ns(s,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bt("error",s),Bt("load",s);var u=!1,g=!1,y;for(y in c)if(c.hasOwnProperty(y)){var k=c[y];if(k!=null)switch(y){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:dn(s,i,y,k,c,null)}}g&&dn(s,i,"srcSet",c.srcSet,c,null),u&&dn(s,i,"src",c.src,c,null);return;case"input":Bt("invalid",s);var L=y=k=g=null,B=null,X=null;for(u in c)if(c.hasOwnProperty(u)){var ue=c[u];if(ue!=null)switch(u){case"name":g=ue;break;case"type":k=ue;break;case"checked":B=ue;break;case"defaultChecked":X=ue;break;case"value":y=ue;break;case"defaultValue":L=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,i));break;default:dn(s,i,u,ue,c,null)}}G_(s,y,L,B,X,k,g,!1),dd(s);return;case"select":Bt("invalid",s),u=k=y=null;for(g in c)if(c.hasOwnProperty(g)&&(L=c[g],L!=null))switch(g){case"value":y=L;break;case"defaultValue":k=L;break;case"multiple":u=L;default:dn(s,i,g,L,c,null)}i=y,c=k,s.multiple=!!u,i!=null?Fc(s,!!u,i,!1):c!=null&&Fc(s,!!u,c,!0);return;case"textarea":Bt("invalid",s),y=g=u=null;for(k in c)if(c.hasOwnProperty(k)&&(L=c[k],L!=null))switch(k){case"value":u=L;break;case"defaultValue":g=L;break;case"children":y=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(91));break;default:dn(s,i,k,L,c,null)}Y_(s,u,g,y),dd(s);return;case"option":for(B in c)if(c.hasOwnProperty(B)&&(u=c[B],u!=null))switch(B){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:dn(s,i,B,u,c,null)}return;case"dialog":Bt("cancel",s),Bt("close",s);break;case"iframe":case"object":Bt("load",s);break;case"video":case"audio":for(u=0;u<Ug.length;u++)Bt(Ug[u],s);break;case"image":Bt("error",s),Bt("load",s);break;case"details":Bt("toggle",s);break;case"embed":case"source":case"link":Bt("error",s),Bt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in c)if(c.hasOwnProperty(X)&&(u=c[X],u!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:dn(s,i,X,u,c,null)}return;default:if(Jm(i)){for(ue in c)c.hasOwnProperty(ue)&&(u=c[ue],u!==void 0&&NT(s,i,ue,u,c,void 0));return}}for(L in c)c.hasOwnProperty(L)&&(u=c[L],u!=null&&dn(s,i,L,u,c,null))}function S7(s,i,c,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,k=null,L=null,B=null,X=null,ue=null;for(le in c){var ye=c[le];if(c.hasOwnProperty(le)&&ye!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":B=ye;default:u.hasOwnProperty(le)||dn(s,i,le,null,u,ye)}}for(var re in u){var le=u[re];if(ye=c[re],u.hasOwnProperty(re)&&(le!=null||ye!=null))switch(re){case"type":y=le;break;case"name":g=le;break;case"checked":X=le;break;case"defaultChecked":ue=le;break;case"value":k=le;break;case"defaultValue":L=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,i));break;default:le!==ye&&dn(s,i,re,le,u,ye)}}fu(s,k,L,B,X,ue,y,g);return;case"select":le=k=L=re=null;for(y in c)if(B=c[y],c.hasOwnProperty(y)&&B!=null)switch(y){case"value":break;case"multiple":le=B;default:u.hasOwnProperty(y)||dn(s,i,y,null,u,B)}for(g in u)if(y=u[g],B=c[g],u.hasOwnProperty(g)&&(y!=null||B!=null))switch(g){case"value":re=y;break;case"defaultValue":L=y;break;case"multiple":k=y;default:y!==B&&dn(s,i,g,y,u,B)}i=L,c=k,u=le,re!=null?Fc(s,!!c,re,!1):!!u!=!!c&&(i!=null?Fc(s,!!c,i,!0):Fc(s,!!c,c?[]:"",!1));return;case"textarea":le=re=null;for(L in c)if(g=c[L],c.hasOwnProperty(L)&&g!=null&&!u.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:dn(s,i,L,null,u,g)}for(k in u)if(g=u[k],y=c[k],u.hasOwnProperty(k)&&(g!=null||y!=null))switch(k){case"value":re=g;break;case"defaultValue":le=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==y&&dn(s,i,k,g,u,y)}Q_(s,re,le);return;case"option":for(var We in c)if(re=c[We],c.hasOwnProperty(We)&&re!=null&&!u.hasOwnProperty(We))switch(We){case"selected":s.selected=!1;break;default:dn(s,i,We,null,u,re)}for(B in u)if(re=u[B],le=c[B],u.hasOwnProperty(B)&&re!==le&&(re!=null||le!=null))switch(B){case"selected":s.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:dn(s,i,B,re,u,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Rt in c)re=c[Rt],c.hasOwnProperty(Rt)&&re!=null&&!u.hasOwnProperty(Rt)&&dn(s,i,Rt,null,u,re);for(X in u)if(re=u[X],le=c[X],u.hasOwnProperty(X)&&re!==le&&(re!=null||le!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,i));break;default:dn(s,i,X,re,u,le)}return;default:if(Jm(i)){for(var ar in c)re=c[ar],c.hasOwnProperty(ar)&&re!==void 0&&!u.hasOwnProperty(ar)&&NT(s,i,ar,void 0,u,re);for(ue in u)re=u[ue],le=c[ue],!u.hasOwnProperty(ue)||re===le||re===void 0&&le===void 0||NT(s,i,ue,re,u,le);return}}for(var ee in c)re=c[ee],c.hasOwnProperty(ee)&&re!=null&&!u.hasOwnProperty(ee)&&dn(s,i,ee,null,u,re);for(ye in u)re=u[ye],le=c[ye],!u.hasOwnProperty(ye)||re===le||re==null&&le==null||dn(s,i,ye,re,u,le)}var MT=null,IT=null;function Wb(s){return s.nodeType===9?s:s.ownerDocument}function kq(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Aq(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function LT(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var FT=null;function v7(){var s=window.event;return s&&s.type==="popstate"?s===FT?!1:(FT=s,!0):(FT=null,!1)}var Oq=typeof setTimeout=="function"?setTimeout:void 0,w7=typeof clearTimeout=="function"?clearTimeout:void 0,Dq=typeof Promise=="function"?Promise:void 0,E7=typeof queueMicrotask=="function"?queueMicrotask:typeof Dq<"u"?function(s){return Dq.resolve(null).then(s).catch(T7)}:Oq;function T7(s){setTimeout(function(){throw s})}function zT(s,i){var c=i,u=0;do{var g=c.nextSibling;if(s.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(u===0){s.removeChild(g),Yg(i);return}u--}else c!=="$"&&c!=="$?"&&c!=="$!"||u++;c=g}while(c);Yg(i)}function UT(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":UT(c),mi(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function R7(s,i,c,u){for(;s.nodeType===1;){var g=c;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[Tt])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==g.rel||s.getAttribute("href")!==(g.href==null?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=_i(s.nextSibling),s===null)break}return null}function C7(s,i,c){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=_i(s.nextSibling),s===null))return null;return s}function _i(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return s}function xq(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return s;i--}else c==="/$"&&i++}s=s.previousSibling}return null}function $q(s,i,c){switch(i=Wb(c),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}var Ua=new Map,qq=new Set;function Jb(s){return typeof s.getRootNode=="function"?s.getRootNode():s.ownerDocument}var Wo=ve.d;ve.d={f:k7,r:A7,D:O7,C:D7,L:x7,m:$7,X:N7,S:q7,M:M7};function k7(){var s=Wo.f(),i=Hb();return s||i}function A7(s){var i=Vs(s);i!==null&&i.tag===5&&i.type==="form"?i$(i):Wo.r(s)}var Bd=typeof document>"u"?null:document;function Nq(s,i,c){var u=Bd;if(u&&typeof i=="string"&&i){var g=Ys(i);g='link[rel="'+s+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),qq.has(g)||(qq.add(g),s={rel:s,crossOrigin:c,href:i},u.querySelector(g)===null&&(i=u.createElement("link"),ns(i,"link",s),Rn(i),u.head.appendChild(i)))}}function O7(s){Wo.D(s),Nq("dns-prefetch",s,null)}function D7(s,i){Wo.C(s,i),Nq("preconnect",s,i)}function x7(s,i,c){Wo.L(s,i,c);var u=Bd;if(u&&s&&i){var g='link[rel="preload"][as="'+Ys(i)+'"]';i==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+Ys(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+Ys(c.imageSizes)+'"]')):g+='[href="'+Ys(s)+'"]';var y=g;switch(i){case"style":y=Vd(s);break;case"script":y=Kd(s)}Ua.has(y)||(s=j({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:s,as:i},c),Ua.set(y,s),u.querySelector(g)!==null||i==="style"&&u.querySelector(jg(y))||i==="script"&&u.querySelector(Hg(y))||(i=u.createElement("link"),ns(i,"link",s),Rn(i),u.head.appendChild(i)))}}function $7(s,i){Wo.m(s,i);var c=Bd;if(c&&s){var u=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+Ys(u)+'"][href="'+Ys(s)+'"]',y=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Kd(s)}if(!Ua.has(y)&&(s=j({rel:"modulepreload",href:s},i),Ua.set(y,s),c.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Hg(y)))return}u=c.createElement("link"),ns(u,"link",s),Rn(u),c.head.appendChild(u)}}}function q7(s,i,c){Wo.S(s,i,c);var u=Bd;if(u&&s){var g=Ks(u).hoistableStyles,y=Vd(s);i=i||"default";var k=g.get(y);if(!k){var L={loading:0,preload:null};if(k=u.querySelector(jg(y)))L.loading=5;else{s=j({rel:"stylesheet",href:s,"data-precedence":i},c),(c=Ua.get(y))&&PT(s,c);var B=k=u.createElement("link");Rn(B),ns(B,"link",s),B._p=new Promise(function(X,ue){B.onload=X,B.onerror=ue}),B.addEventListener("load",function(){L.loading|=1}),B.addEventListener("error",function(){L.loading|=2}),L.loading|=4,Xb(k,i,u)}k={type:"stylesheet",instance:k,count:1,state:L},g.set(y,k)}}}function N7(s,i){Wo.X(s,i);var c=Bd;if(c&&s){var u=Ks(c).hoistableScripts,g=Kd(s),y=u.get(g);y||(y=c.querySelector(Hg(g)),y||(s=j({src:s,async:!0},i),(i=Ua.get(g))&&jT(s,i),y=c.createElement("script"),Rn(y),ns(y,"link",s),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function M7(s,i){Wo.M(s,i);var c=Bd;if(c&&s){var u=Ks(c).hoistableScripts,g=Kd(s),y=u.get(g);y||(y=c.querySelector(Hg(g)),y||(s=j({src:s,async:!0,type:"module"},i),(i=Ua.get(g))&&jT(s,i),y=c.createElement("script"),Rn(y),ns(y,"link",s),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function Mq(s,i,c,u){var g=(g=na.current)?Jb(g):null;if(!g)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=Vd(c.href),c=Ks(g).hoistableStyles,u=c.get(i),u||(u={type:"style",instance:null,count:0,state:null},c.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=Vd(c.href);var y=Ks(g).hoistableStyles,k=y.get(s);if(k||(g=g.ownerDocument||g,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,k),(y=g.querySelector(jg(s)))&&!y._p&&(k.instance=y,k.state.loading=5),Ua.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ua.set(s,c),y||I7(g,s,c,k.state))),i&&u===null)throw Error(r(528,""));return k}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Kd(c),c=Ks(g).hoistableScripts,u=c.get(i),u||(u={type:"script",instance:null,count:0,state:null},c.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Vd(s){return'href="'+Ys(s)+'"'}function jg(s){return'link[rel="stylesheet"]['+s+"]"}function Iq(s){return j({},s,{"data-precedence":s.precedence,precedence:null})}function I7(s,i,c,u){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=s.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),ns(i,"link",c),Rn(i),s.head.appendChild(i))}function Kd(s){return'[src="'+Ys(s)+'"]'}function Hg(s){return"script[async]"+s}function Lq(s,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var u=s.querySelector('style[data-href~="'+Ys(c.href)+'"]');if(u)return i.instance=u,Rn(u),u;var g=j({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),Rn(u),ns(u,"style",g),Xb(u,c.precedence,s),i.instance=u;case"stylesheet":g=Vd(c.href);var y=s.querySelector(jg(g));if(y)return i.state.loading|=4,i.instance=y,Rn(y),y;u=Iq(c),(g=Ua.get(g))&&PT(u,g),y=(s.ownerDocument||s).createElement("link"),Rn(y);var k=y;return k._p=new Promise(function(L,B){k.onload=L,k.onerror=B}),ns(y,"link",u),i.state.loading|=4,Xb(y,c.precedence,s),i.instance=y;case"script":return y=Kd(c.src),(g=s.querySelector(Hg(y)))?(i.instance=g,Rn(g),g):(u=c,(g=Ua.get(y))&&(u=j({},c),jT(u,g)),s=s.ownerDocument||s,g=s.createElement("script"),Rn(g),ns(g,"link",u),s.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Xb(u,c.precedence,s));return i.instance}function Xb(s,i,c){for(var u=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,y=g,k=0;k<u.length;k++){var L=u[k];if(L.dataset.precedence===i)y=L;else if(y!==g)break}y?y.parentNode.insertBefore(s,y.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(s,i.firstChild))}function PT(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function jT(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var Zb=null;function Fq(s,i,c){if(Zb===null){var u=new Map,g=Zb=new Map;g.set(c,u)}else g=Zb,u=g.get(c),u||(u=new Map,g.set(c,u));if(u.has(s))return u;for(u.set(s,null),c=c.getElementsByTagName(s),g=0;g<c.length;g++){var y=c[g];if(!(y[Tt]||y[He]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var k=y.getAttribute(i)||"";k=s+k;var L=u.get(k);L?L.push(y):u.set(k,[y])}}return u}function zq(s,i,c){s=s.ownerDocument||s,s.head.insertBefore(c,i==="title"?s.querySelector("head > title"):null)}function L7(s,i,c){if(c===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Uq(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Bg=null;function F7(){}function z7(s,i,c){if(Bg===null)throw Error(r(475));var u=Bg;if(i.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var g=Vd(c.href),y=s.querySelector(jg(g));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(u.count++,u=eS.bind(u),s.then(u,u)),i.state.loading|=4,i.instance=y,Rn(y);return}y=s.ownerDocument||s,c=Iq(c),(g=Ua.get(g))&&PT(c,g),y=y.createElement("link"),Rn(y);var k=y;k._p=new Promise(function(L,B){k.onload=L,k.onerror=B}),ns(y,"link",c),i.instance=y}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,s),(s=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=eS.bind(u),s.addEventListener("load",i),s.addEventListener("error",i))}}function U7(){if(Bg===null)throw Error(r(475));var s=Bg;return s.stylesheets&&s.count===0&&HT(s,s.stylesheets),0<s.count?function(i){var c=setTimeout(function(){if(s.stylesheets&&HT(s,s.stylesheets),s.unsuspend){var u=s.unsuspend;s.unsuspend=null,u()}},6e4);return s.unsuspend=i,function(){s.unsuspend=null,clearTimeout(c)}}:null}function eS(){if(this.count--,this.count===0){if(this.stylesheets)HT(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var tS=null;function HT(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,tS=new Map,i.forEach(P7,s),tS=null,eS.call(s))}function P7(s,i){if(!(i.state.loading&4)){var c=tS.get(s);if(c)var u=c.get(null);else{c=new Map,tS.set(s,c);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var k=g[y];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(c.set(k.dataset.precedence,k),u=k)}u&&c.set(null,u)}g=i.instance,k=g.getAttribute("data-precedence"),y=c.get(k)||u,y===u&&c.set(null,g),c.set(k,g),this.count++,u=eS.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),y?y.parentNode.insertBefore(g,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),i.state.loading|=4}}var Vg={$$typeof:O,Provider:null,Consumer:null,_currentValue:ht,_currentValue2:ht,_threadCount:0};function j7(s,i,c,u,g,y,k,L){this.tag=1,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Z(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Z(0),this.hiddenUpdates=Z(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function Pq(s,i,c,u,g,y,k,L,B,X,ue,ye){return s=new j7(s,i,c,k,L,B,X,ye),i=1,y===!0&&(i|=24),y=Fa(3,null,null,i),s.current=y,y.stateNode=s,i=v1(),i.refCount++,s.pooledCache=i,i.refCount++,y.memoizedState={element:u,isDehydrated:c,cache:i},tT(y),s}function jq(s){return s?(s=Td,s):Td}function Hq(s,i,c,u,g,y){g=jq(g),u.context===null?u.context=g:u.pendingContext=g,u=el(i),u.payload={element:c},y=y===void 0?null:y,y!==null&&(u.callback=y),c=tl(s,u,i),c!==null&&(ks(c,s,i),Ag(c,s,i))}function Bq(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<i?c:i}}function BT(s,i){Bq(s,i),(s=s.alternate)&&Bq(s,i)}function Vq(s){if(s.tag===13){var i=Gc(s,67108864);i!==null&&ks(i,s,67108864),BT(s,67108864)}}var nS=!0;function H7(s,i,c,u){var g=V.T;V.T=null;var y=ve.p;try{ve.p=2,VT(s,i,c,u)}finally{ve.p=y,V.T=g}}function B7(s,i,c,u){var g=V.T;V.T=null;var y=ve.p;try{ve.p=8,VT(s,i,c,u)}finally{ve.p=y,V.T=g}}function VT(s,i,c,u){if(nS){var g=KT(u);if(g===null)qT(s,i,u,rS,c),Gq(s,u);else if(K7(g,s,i,c,u))u.stopPropagation();else if(Gq(s,u),i&4&&-1<V7.indexOf(s)){for(;g!==null;){var y=Vs(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var k=Vr(y.pendingLanes);if(k!==0){var L=y;for(L.pendingLanes|=2,L.entangledLanes|=2;k;){var B=1<<31-pn(k);L.entanglements[1]|=B,k&=~B}Ji(y),(Yn&6)===0&&(Ub=ds()+500,zg(0))}}break;case 13:L=Gc(y,2),L!==null&&ks(L,y,2),Hb(),BT(y,2)}if(y=KT(u),y===null&&qT(s,i,u,rS,c),y===g)break;g=y}g!==null&&u.stopPropagation()}else qT(s,i,u,null,c)}}function KT(s){return s=Xm(s),GT(s)}var rS=null;function GT(s){if(rS=null,s=Fn(s),s!==null){var i=Re(s);if(i===null)s=null;else{var c=i.tag;if(c===13){if(s=Xe(i),s!==null)return s;s=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return rS=s,null}function Kq(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ji()){case Hs:return 2;case qr:return 8;case Do:case cu:return 32;case lu:return 268435456;default:return 32}default:return 32}}var QT=!1,cl=null,ll=null,ul=null,Kg=new Map,Gg=new Map,fl=[],V7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gq(s,i){switch(s){case"focusin":case"focusout":cl=null;break;case"dragenter":case"dragleave":ll=null;break;case"mouseover":case"mouseout":ul=null;break;case"pointerover":case"pointerout":Kg.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gg.delete(i.pointerId)}}function Qg(s,i,c,u,g,y){return s===null||s.nativeEvent!==y?(s={blockedOn:i,domEventName:c,eventSystemFlags:u,nativeEvent:y,targetContainers:[g]},i!==null&&(i=Vs(i),i!==null&&Vq(i)),s):(s.eventSystemFlags|=u,i=s.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),s)}function K7(s,i,c,u,g){switch(i){case"focusin":return cl=Qg(cl,s,i,c,u,g),!0;case"dragenter":return ll=Qg(ll,s,i,c,u,g),!0;case"mouseover":return ul=Qg(ul,s,i,c,u,g),!0;case"pointerover":var y=g.pointerId;return Kg.set(y,Qg(Kg.get(y)||null,s,i,c,u,g)),!0;case"gotpointercapture":return y=g.pointerId,Gg.set(y,Qg(Gg.get(y)||null,s,i,c,u,g)),!0}return!1}function Qq(s){var i=Fn(s.target);if(i!==null){var c=Re(i);if(c!==null){if(i=c.tag,i===13){if(i=Xe(c),i!==null){s.blockedOn=i,we(s.priority,function(){if(c.tag===13){var u=fa(),g=Gc(c,u);g!==null&&ks(g,c,u),BT(c,u)}});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function sS(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var c=KT(s.nativeEvent);if(c===null){c=s.nativeEvent;var u=new c.constructor(c.type,c);qt=u,c.target.dispatchEvent(u),qt=null}else return i=Vs(c),i!==null&&Vq(i),s.blockedOn=c,!1;i.shift()}return!0}function Yq(s,i,c){sS(s)&&c.delete(i)}function G7(){QT=!1,cl!==null&&sS(cl)&&(cl=null),ll!==null&&sS(ll)&&(ll=null),ul!==null&&sS(ul)&&(ul=null),Kg.forEach(Yq),Gg.forEach(Yq)}function aS(s,i){s.blockedOn===i&&(s.blockedOn=null,QT||(QT=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,G7)))}var iS=null;function Wq(s){iS!==s&&(iS=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){iS===s&&(iS=null);for(var i=0;i<s.length;i+=3){var c=s[i],u=s[i+1],g=s[i+2];if(typeof u!="function"){if(GT(u||c)===null)continue;break}var y=Vs(c);y!==null&&(s.splice(i,3),i-=3,L1(y,{pending:!0,data:g,method:c.method,action:u},u,g))}}))}function Yg(s){function i(B){return aS(B,s)}cl!==null&&aS(cl,s),ll!==null&&aS(ll,s),ul!==null&&aS(ul,s),Kg.forEach(i),Gg.forEach(i);for(var c=0;c<fl.length;c++){var u=fl[c];u.blockedOn===s&&(u.blockedOn=null)}for(;0<fl.length&&(c=fl[0],c.blockedOn===null);)Qq(c),c.blockedOn===null&&fl.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(u=0;u<c.length;u+=3){var g=c[u],y=c[u+1],k=g[$e]||null;if(typeof y=="function")k||Wq(c);else if(k){var L=null;if(y&&y.hasAttribute("formAction")){if(g=y,k=y[$e]||null)L=k.formAction;else if(GT(g)!==null)continue}else L=k.action;typeof L=="function"?c[u+1]=L:(c.splice(u,3),u-=3),Wq(c)}}}function YT(s){this._internalRoot=s}oS.prototype.render=YT.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var c=i.current,u=fa();Hq(c,u,s,i,null,null)},oS.prototype.unmount=YT.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;s.tag===0&&Pd(),Hq(s.current,2,null,s,null,null),Hb(),i[mt]=null}};function oS(s){this._internalRoot=s}oS.prototype.unstable_scheduleHydration=function(s){if(s){var i=C();s={blockedOn:null,target:s,priority:i};for(var c=0;c<fl.length&&i!==0&&i<fl[c].priority;c++);fl.splice(c,0,s),c===0&&Qq(s)}};var Jq=t.version;if(Jq!=="19.0.0")throw Error(r(527,Jq,"19.0.0"));ve.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=de(i),s=s!==null?Le(s):null,s=s===null?null:s.stateNode,s};var Q7={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:V,findFiberByHostInstance:Fn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cS.isDisabled&&cS.supportsFiber)try{Hi=cS.inject(Q7),vt=cS}catch{}}return Jg.createRoot=function(s,i){if(!a(s))throw Error(r(299));var c=!1,u="",g=m$,y=g$,k=p$,L=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(k=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(L=i.unstable_transitionCallbacks)),i=Pq(s,1,!1,null,null,c,u,g,y,k,L,null),s[mt]=i.current,$T(s.nodeType===8?s.parentNode:s),new YT(i)},Jg.hydrateRoot=function(s,i,c){if(!a(s))throw Error(r(299));var u=!1,g="",y=m$,k=g$,L=p$,B=null,X=null;return c!=null&&(c.unstable_strictMode===!0&&(u=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(k=c.onCaughtError),c.onRecoverableError!==void 0&&(L=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(B=c.unstable_transitionCallbacks),c.formState!==void 0&&(X=c.formState)),i=Pq(s,1,!0,i,c??null,u,g,y,k,L,B,X),i.context=jq(null),c=i.current,u=fa(),g=el(u),g.callback=null,tl(c,g,u),i.current.lanes=u,se(i,u),Ji(i),s[mt]=i.current,$T(s),new oS(i)},Jg.version="19.0.0",Jg}var c3;function a9(){if(c3)return XT.exports;c3=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),XT.exports=s9(),XT.exports}var i9=a9();const o9=bz(i9);var oe=cA();const Pr=bz(oe);var Xg={},l3;function c9(){if(l3)return Xg;l3=1,Object.defineProperty(Xg,"__esModule",{value:!0}),Xg.parse=l,Xg.serialize=p;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const R=function(){};return R.prototype=Object.create(null),R})();function l(R,O){const x=new o,z=R.length;if(z<2)return x;const A=(O==null?void 0:O.decode)||S;let E=0;do{const T=R.indexOf("=",E);if(T===-1)break;const q=R.indexOf(";",E),D=q===-1?z:q;if(T>D){E=R.lastIndexOf(";",T-1)+1;continue}const I=d(R,E,T),$=h(R,T,I),H=R.slice(I,$);if(x[H]===void 0){let K=d(R,T+1,D),V=h(R,D,K);const j=A(R.slice(K,V));x[H]=j}E=D+1}while(E<z);return x}function d(R,O,x){do{const z=R.charCodeAt(O);if(z!==32&&z!==9)return O}while(++O<x);return x}function h(R,O,x){for(;O>x;){const z=R.charCodeAt(--O);if(z!==32&&z!==9)return O+1}return x}function p(R,O,x){const z=(x==null?void 0:x.encode)||encodeURIComponent;if(!e.test(R))throw new TypeError(`argument name is invalid: ${R}`);const A=z(O);if(!t.test(A))throw new TypeError(`argument val is invalid: ${O}`);let E=R+"="+A;if(!x)return E;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);E+="; Max-Age="+x.maxAge}if(x.domain){if(!n.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);E+="; Domain="+x.domain}if(x.path){if(!r.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);E+="; Path="+x.path}if(x.expires){if(!v(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);E+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(E+="; HttpOnly"),x.secure&&(E+="; Secure"),x.partitioned&&(E+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":E+="; Priority=Low";break;case"medium":E+="; Priority=Medium";break;case"high":E+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":E+="; SameSite=Strict";break;case"lax":E+="; SameSite=Lax";break;case"none":E+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return E}function S(R){if(R.indexOf("%")===-1)return R;try{return decodeURIComponent(R)}catch{return R}}function v(R){return a.call(R)==="[object Date]"}return Xg}c9();/**
 * react-router v7.6.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var vz=e=>{throw TypeError(e)},l9=(e,t,n)=>t.has(e)||vz("Cannot "+n),rR=(e,t,n)=>(l9(e,t,"read from private field"),n?n.call(e):t.get(e)),u9=(e,t,n)=>t.has(e)?vz("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),u3="popstate";function f9(e={}){function t(r,a){let{pathname:o,search:l,hash:d}=r.location;return Jp("",{pathname:o,search:l,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Il(a)}return h9(t,n,null,e)}function zt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Dr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function d9(){return Math.random().toString(36).substring(2,10)}function f3(e,t){return{usr:e.state,key:e.key,idx:t}}function Jp(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Yl(t):t,state:n,key:t&&t.key||r||d9()}}function Il({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Yl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function h9(e,t,n,r={}){let{window:a=document.defaultView,v5Compat:o=!1}=r,l=a.history,d="POP",h=null,p=S();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function S(){return(l.state||{idx:null}).idx}function v(){d="POP";let A=S(),E=A==null?null:A-p;p=A,h&&h({action:d,location:z.location,delta:E})}function R(A,E){d="PUSH";let T=Jp(z.location,A,E);p=S()+1;let q=f3(T,p),D=z.createHref(T);try{l.pushState(q,"",D)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;a.location.assign(D)}o&&h&&h({action:d,location:z.location,delta:1})}function O(A,E){d="REPLACE";let T=Jp(z.location,A,E);p=S();let q=f3(T,p),D=z.createHref(T);l.replaceState(q,"",D),o&&h&&h({action:d,location:z.location,delta:0})}function x(A){return wz(A)}let z={get action(){return d},get location(){return e(a,l)},listen(A){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(u3,v),h=A,()=>{a.removeEventListener(u3,v),h=null}},createHref(A){return t(a,A)},createURL:x,encodeLocation(A){let E=x(A);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:R,replace:O,go(A){return l.go(A)}};return z}function wz(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),zt(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Il(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}var pp,d3=class{constructor(e){if(u9(this,pp,new Map),e)for(let[t,n]of e)this.set(t,n)}get(e){if(rR(this,pp).has(e))return rR(this,pp).get(e);if(e.defaultValue!==void 0)return e.defaultValue;throw new Error("No value found for context")}set(e,t){rR(this,pp).set(e,t)}};pp=new WeakMap;var m9=new Set(["lazy","caseSensitive","path","id","index","children"]);function g9(e){return m9.has(e)}var p9=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function y9(e){return p9.has(e)}function _9(e){return e.index===!0}function av(e,t,n=[],r={}){return e.map((a,o)=>{let l=[...n,String(o)],d=typeof a.id=="string"?a.id:l.join("-");if(zt(a.index!==!0||!a.children,"Cannot specify children on an index route"),zt(!r[d],`Found a route id collision on id "${d}".  Route id's must be globally unique within Data Router usages`),_9(a)){let h={...a,...t(a),id:d};return r[d]=h,h}else{let h={...a,...t(a),id:d,children:void 0};return r[d]=h,a.children&&(h.children=av(a.children,t,l,r)),h}})}function Sl(e,t,n="/"){return xS(e,t,n,!1)}function xS(e,t,n,r){let a=typeof t=="string"?Yl(t):t,o=ci(a.pathname||"/",n);if(o==null)return null;let l=Ez(e);S9(l);let d=null;for(let h=0;d==null&&h<l.length;++h){let p=x9(o);d=O9(l[h],p,r)}return d}function b9(e,t){let{route:n,pathname:r,params:a}=e;return{id:n.id,pathname:r,params:a,data:t[n.id],handle:n.handle}}function Ez(e,t=[],n=[],r=""){let a=(o,l,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(zt(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length));let p=fo([r,h.relativePath]),S=n.concat(h);o.children&&o.children.length>0&&(zt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Ez(o.children,t,S,p)),!(o.path==null&&!o.index)&&t.push({path:p,score:k9(p,o.index),routesMeta:S})};return e.forEach((o,l)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))a(o,l);else for(let h of Tz(o.path))a(o,l,h)}),t}function Tz(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return a?[o,""]:[o];let l=Tz(r.join("/")),d=[];return d.push(...l.map(h=>h===""?o:[o,h].join("/"))),a&&d.push(...l),d.map(h=>e.startsWith("/")&&h===""?"/":h)}function S9(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:A9(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var v9=/^:[\w-]+$/,w9=3,E9=2,T9=1,R9=10,C9=-2,h3=e=>e==="*";function k9(e,t){let n=e.split("/"),r=n.length;return n.some(h3)&&(r+=C9),t&&(r+=E9),n.filter(a=>!h3(a)).reduce((a,o)=>a+(v9.test(o)?w9:o===""?T9:R9),r)}function A9(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function O9(e,t,n=!1){let{routesMeta:r}=e,a={},o="/",l=[];for(let d=0;d<r.length;++d){let h=r[d],p=d===r.length-1,S=o==="/"?t:t.slice(o.length)||"/",v=iv({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},S),R=h.route;if(!v&&p&&n&&!r[r.length-1].route.index&&(v=iv({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},S)),!v)return null;Object.assign(a,v.params),l.push({params:a,pathname:fo([o,v.pathname]),pathnameBase:N9(fo([o,v.pathnameBase])),route:R}),v.pathnameBase!=="/"&&(o=fo([o,v.pathnameBase]))}return l}function iv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=D9(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((p,{paramName:S,isOptional:v},R)=>{if(S==="*"){let x=d[R]||"";l=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const O=d[R];return v&&!O?p[S]=void 0:p[S]=(O||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:e}}function D9(e,t=!1,n=!0){Dr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,h)=>(r.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function x9(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Dr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ci(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function $9(e,t="/"){let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?Yl(e):e;return{pathname:n?n.startsWith("/")?n:q9(n,t):t,search:M9(r),hash:I9(a)}}function q9(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function sR(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Rz(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function lA(e){let t=Rz(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function uA(e,t,n,r=!1){let a;typeof e=="string"?a=Yl(e):(a={...e},zt(!a.pathname||!a.pathname.includes("?"),sR("?","pathname","search",a)),zt(!a.pathname||!a.pathname.includes("#"),sR("#","pathname","hash",a)),zt(!a.search||!a.search.includes("#"),sR("#","search","hash",a)));let o=e===""||a.pathname==="",l=o?"/":a.pathname,d;if(l==null)d=n;else{let v=t.length-1;if(!r&&l.startsWith("..")){let R=l.split("/");for(;R[0]==="..";)R.shift(),v-=1;a.pathname=R.join("/")}d=v>=0?t[v]:"/"}let h=$9(a,d),p=l&&l!=="/"&&l.endsWith("/"),S=(o||l===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(p||S)&&(h.pathname+="/"),h}var fo=e=>e.join("/").replace(/\/\/+/g,"/"),N9=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),M9=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,I9=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,ov=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Xp(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Cz=["POST","PUT","PATCH","DELETE"],L9=new Set(Cz),F9=["GET",...Cz],z9=new Set(F9),U9=new Set([301,302,303,307,308]),P9=new Set([307,308]),aR={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},j9={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Zg={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},fA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,H9=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),kz="remix-router-transitions",Az=Symbol("ResetLoaderData");function B9(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";zt(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=e.hydrationRouteProperties||[],a=e.mapRouteProperties||H9,o={},l=av(e.routes,a,void 0,o),d,h=e.basename||"/",p=e.dataStrategy||Y9,S={unstable_middleware:!1,...e.future},v=null,R=new Set,O=null,x=null,z=null,A=e.hydrationData!=null,E=Sl(l,e.history.location,h),T=!1,q=null,D;if(E==null&&!e.patchRoutesOnNavigation){let Y=Ba(404,{pathname:e.history.location.pathname}),{matches:Z,route:se}=R3(l);D=!0,E=Z,q={[se.id]:Y}}else if(E&&!e.hydrationData&&hi(E,l,e.history.location.pathname).active&&(E=null),E)if(E.some(Y=>Y.route.lazy))D=!1;else if(!E.some(Y=>Y.route.loader))D=!0;else{let Y=e.hydrationData?e.hydrationData.loaderData:null,Z=e.hydrationData?e.hydrationData.errors:null;if(Z){let se=E.findIndex(Se=>Z[Se.route.id]!==void 0);D=E.slice(0,se+1).every(Se=>!XR(Se.route,Y,Z))}else D=E.every(se=>!XR(se.route,Y,Z))}else{D=!1,E=[];let Y=hi(null,l,e.history.location.pathname);Y.active&&Y.matches&&(T=!0,E=Y.matches)}let I,$={historyAction:e.history.action,location:e.history.location,matches:E,initialized:D,navigation:aR,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||q,fetchers:new Map,blockers:new Map},H="POP",K=!1,V,j=!1,te=new Map,Ee=null,xe=!1,fe=!1,De=new Set,ae=new Map,Te=0,Re=-1,Xe=new Map,Q=new Set,de=new Map,Le=new Map,ge=new Set,ve=new Map,ht,tt=null;function Kn(){if(v=e.history.listen(({action:Y,location:Z,delta:se})=>{if(ht){ht(),ht=void 0;return}Dr(ve.size===0||se!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Se=Nc({currentLocation:$.location,nextLocation:Z,historyAction:Y});if(Se&&se!=null){let Oe=new Promise(Ve=>{ht=Ve});e.history.go(se*-1),pn(Se,{state:"blocked",location:Z,proceed(){pn(Se,{state:"proceeding",proceed:void 0,reset:void 0,location:Z}),Oe.then(()=>e.history.go(se))},reset(){let Ve=new Map($.blockers);Ve.set(Se,Zg),St({blockers:Ve})}});return}return js(Y,Z)}),n){iK(t,te);let Y=()=>oK(t,te);t.addEventListener("pagehide",Y),Ee=()=>t.removeEventListener("pagehide",Y)}return $.initialized||js("POP",$.location,{initialHydration:!0}),I}function Gt(){v&&v(),Ee&&Ee(),R.clear(),V&&V.abort(),$.fetchers.forEach((Y,Z)=>cu(Z)),$.blockers.forEach((Y,Z)=>Bs(Z))}function En(Y){return R.add(Y),()=>R.delete(Y)}function St(Y,Z={}){$={...$,...Y};let se=[],Se=[];$.fetchers.forEach((Oe,Ve)=>{Oe.state==="idle"&&(ge.has(Ve)?se.push(Ve):Se.push(Ve))}),ge.forEach(Oe=>{!$.fetchers.has(Oe)&&!ae.has(Oe)&&se.push(Oe)}),[...R].forEach(Oe=>Oe($,{deletedFetchers:se,viewTransitionOpts:Z.viewTransitionOpts,flushSync:Z.flushSync===!0})),se.forEach(Oe=>cu(Oe)),Se.forEach(Oe=>$.fetchers.delete(Oe))}function Tn(Y,Z,{flushSync:se}={}){var Ue,He;let Se=$.actionData!=null&&$.navigation.formMethod!=null&&ya($.navigation.formMethod)&&$.navigation.state==="loading"&&((Ue=Y.state)==null?void 0:Ue._isRedirect)!==!0,Oe;Z.actionData?Object.keys(Z.actionData).length>0?Oe=Z.actionData:Oe=null:Se?Oe=$.actionData:Oe=null;let Ve=Z.loaderData?E3($.loaderData,Z.loaderData,Z.matches||[],Z.errors):$.loaderData,st=$.blockers;st.size>0&&(st=new Map(st),st.forEach(($e,mt)=>st.set(mt,Zg)));let C=K===!0||$.navigation.formMethod!=null&&ya($.navigation.formMethod)&&((He=Y.state)==null?void 0:He._isRedirect)!==!0;d&&(l=d,d=void 0),xe||H==="POP"||(H==="PUSH"?e.history.push(Y,Y.state):H==="REPLACE"&&e.history.replace(Y,Y.state));let we;if(H==="POP"){let $e=te.get($.location.pathname);$e&&$e.has(Y.pathname)?we={currentLocation:$.location,nextLocation:Y}:te.has(Y.pathname)&&(we={currentLocation:Y,nextLocation:$.location})}else if(j){let $e=te.get($.location.pathname);$e?$e.add(Y.pathname):($e=new Set([Y.pathname]),te.set($.location.pathname,$e)),we={currentLocation:$.location,nextLocation:Y}}St({...Z,actionData:Oe,loaderData:Ve,historyAction:H,location:Y,initialized:!0,navigation:aR,revalidation:"idle",restoreScrollPosition:Vr(Y,Z.matches||$.matches),preventScrollReset:C,blockers:st},{viewTransitionOpts:we,flushSync:se===!0}),H="POP",K=!1,j=!1,xe=!1,fe=!1,tt==null||tt.resolve(),tt=null}async function Ui(Y,Z){if(typeof Y=="number"){e.history.go(Y);return}let se=JR($.location,$.matches,h,Y,Z==null?void 0:Z.fromRouteId,Z==null?void 0:Z.relative),{path:Se,submission:Oe,error:Ve}=m3(!1,se,Z),st=$.location,C=Jp($.location,Se,Z&&Z.state);C={...C,...e.history.encodeLocation(C)};let we=Z&&Z.replace!=null?Z.replace:void 0,Ue="PUSH";we===!0?Ue="REPLACE":we===!1||Oe!=null&&ya(Oe.formMethod)&&Oe.formAction===$.location.pathname+$.location.search&&(Ue="REPLACE");let He=Z&&"preventScrollReset"in Z?Z.preventScrollReset===!0:void 0,$e=(Z&&Z.flushSync)===!0,mt=Nc({currentLocation:st,nextLocation:C,historyAction:Ue});if(mt){pn(mt,{state:"blocked",location:C,proceed(){pn(mt,{state:"proceeding",proceed:void 0,reset:void 0,location:C}),Ui(Y,Z)},reset(){let Ht=new Map($.blockers);Ht.set(mt,Zg),St({blockers:Ht})}});return}await js(Ue,C,{submission:Oe,pendingError:Ve,preventScrollReset:He,replace:Z&&Z.replace,enableViewTransition:Z&&Z.viewTransition,flushSync:$e})}function na(){tt||(tt=cK()),ji(),St({revalidation:"loading"});let Y=tt.promise;return $.navigation.state==="submitting"?Y:$.navigation.state==="idle"?(js($.historyAction,$.location,{startUninterruptedRevalidation:!0}),Y):(js(H||$.historyAction,$.navigation.location,{overrideNavigation:$.navigation,enableViewTransition:j===!0}),Y)}async function js(Y,Z,se){V&&V.abort(),V=null,H=Y,xe=(se&&se.startUninterruptedRevalidation)===!0,Mc($.location,$.matches),K=(se&&se.preventScrollReset)===!0,j=(se&&se.enableViewTransition)===!0;let Se=d||l,Oe=se&&se.overrideNavigation,Ve=se!=null&&se.initialHydration&&$.matches&&$.matches.length>0&&!T?$.matches:Sl(Se,Z,h),st=(se&&se.flushSync)===!0;if(Ve&&$.initialized&&!fe&&tK($.location,Z)&&!(se&&se.submission&&ya(se.submission.formMethod))){Tn(Z,{matches:Ve},{flushSync:st});return}let C=hi(Ve,Se,Z.pathname);if(C.active&&C.matches&&(Ve=C.matches),!Ve){let{error:wr,notFoundMatches:Kr,route:Tt}=Oa(Z.pathname);Tn(Z,{matches:Kr,loaderData:{},errors:{[Tt.id]:wr}},{flushSync:st});return}V=new AbortController;let we=eh(e.history,Z,V.signal,se&&se.submission),Ue=new d3(e.unstable_getContext?await e.unstable_getContext():void 0),He;if(se&&se.pendingError)He=[Hu(Ve).route.id,{type:"error",error:se.pendingError}];else if(se&&se.submission&&ya(se.submission.formMethod)){let wr=await Pi(we,Z,se.submission,Ve,Ue,C.active,se&&se.initialHydration===!0,{replace:se.replace,flushSync:st});if(wr.shortCircuited)return;if(wr.pendingActionResult){let[Kr,Tt]=wr.pendingActionResult;if(pa(Tt)&&Xp(Tt.error)&&Tt.error.status===404){V=null,Tn(Z,{matches:wr.matches,loaderData:{},errors:{[Kr]:Tt.error}});return}}Ve=wr.matches||Ve,He=wr.pendingActionResult,Oe=iR(Z,se.submission),st=!1,C.active=!1,we=eh(e.history,we.url,we.signal)}let{shortCircuited:$e,matches:mt,loaderData:Ht,errors:Gn}=await fi(we,Z,Ve,Ue,C.active,Oe,se&&se.submission,se&&se.fetcherSubmission,se&&se.replace,se&&se.initialHydration===!0,st,He);$e||(V=null,Tn(Z,{matches:mt||Ve,...T3(He),loaderData:Ht,errors:Gn}))}async function Pi(Y,Z,se,Se,Oe,Ve,st,C={}){ji();let we=sK(Z,se);if(St({navigation:we},{flushSync:C.flushSync===!0}),Ve){let $e=await ra(Se,Z.pathname,Y.signal);if($e.type==="aborted")return{shortCircuited:!0};if($e.type==="error"){let mt=Hu($e.partialMatches).route.id;return{matches:$e.partialMatches,pendingActionResult:[mt,{type:"error",error:$e.error}]}}else if($e.matches)Se=$e.matches;else{let{notFoundMatches:mt,error:Ht,route:Gn}=Oa(Z.pathname);return{matches:mt,pendingActionResult:[Gn.id,{type:"error",error:Ht}]}}}let Ue,He=yp(Se,Z);if(!He.route.action&&!He.route.lazy)Ue={type:"error",error:Ba(405,{method:Y.method,pathname:Z.pathname,routeId:He.route.id})};else{let $e=mh(a,o,Y,Se,He,st?[]:r,Oe),mt=await Wt(Y,$e,Oe,null);if(Ue=mt[He.route.id],!Ue){for(let Ht of Se)if(mt[Ht.route.id]){Ue=mt[Ht.route.id];break}}if(Y.signal.aborted)return{shortCircuited:!0}}if(Gu(Ue)){let $e;return C&&C.replace!=null?$e=C.replace:$e=S3(Ue.response.headers.get("Location"),new URL(Y.url),h)===$.location.pathname+$.location.search,await Je(Y,Ue,!0,{submission:se,replace:$e}),{shortCircuited:!0}}if(pa(Ue)){let $e=Hu(Se,He.route.id);return(C&&C.replace)!==!0&&(H="PUSH"),{matches:Se,pendingActionResult:[$e.route.id,Ue,He.route.id]}}return{matches:Se,pendingActionResult:[He.route.id,Ue]}}async function fi(Y,Z,se,Se,Oe,Ve,st,C,we,Ue,He,$e){let mt=Ve||iR(Z,st),Ht=st||C||k3(mt),Gn=!xe&&!Ue;if(Oe){if(Gn){let zn=qc($e);St({navigation:mt,...zn!==void 0?{actionData:zn}:{}},{flushSync:He})}let It=await ra(se,Z.pathname,Y.signal);if(It.type==="aborted")return{shortCircuited:!0};if(It.type==="error"){let zn=Hu(It.partialMatches).route.id;return{matches:It.partialMatches,loaderData:{},errors:{[zn]:It.error}}}else if(It.matches)se=It.matches;else{let{error:zn,notFoundMatches:sa,route:xo}=Oa(Z.pathname);return{matches:sa,loaderData:{},errors:{[xo.id]:zn}}}}let wr=d||l,{dsMatches:Kr,revalidatingFetchers:Tt}=g3(Y,Se,a,o,e.history,$,se,Ht,Z,Ue?[]:r,Ue===!0,fe,De,ge,de,Q,wr,h,e.patchRoutesOnNavigation!=null,$e);if(Re=++Te,!e.dataStrategy&&!Kr.some(It=>It.shouldLoad)&&Tt.length===0){let It=Hi();return Tn(Z,{matches:se,loaderData:{},errors:$e&&pa($e[1])?{[$e[0]]:$e[1].error}:null,...T3($e),...It?{fetchers:new Map($.fetchers)}:{}},{flushSync:He}),{shortCircuited:!0}}if(Gn){let It={};if(!Oe){It.navigation=mt;let zn=qc($e);zn!==void 0&&(It.actionData=zn)}Tt.length>0&&(It.fetchers=Oo(Tt)),St(It,{flushSync:He})}Tt.forEach(It=>{Zr(It.key),It.controller&&ae.set(It.key,It.controller)});let mi=()=>Tt.forEach(It=>Zr(It.key));V&&V.signal.addEventListener("abort",mi);let{loaderResults:Fn,fetcherResults:Vs}=await ds(Kr,Tt,Y,Se);if(Y.signal.aborted)return{shortCircuited:!0};V&&V.signal.removeEventListener("abort",mi),Tt.forEach(It=>ae.delete(It.key));let Er=lS(Fn);if(Er)return await Je(Y,Er.result,!0,{replace:we}),{shortCircuited:!0};if(Er=lS(Vs),Er)return Q.add(Er.key),await Je(Y,Er.result,!0,{replace:we}),{shortCircuited:!0};let{loaderData:Ks,errors:Rn}=w3($,se,Fn,$e,Tt,Vs);Ue&&$.errors&&(Rn={...$.errors,...Rn});let Ic=Hi(),Da=vt(Re),Gs=Ic||Da||Tt.length>0;return{matches:se,loaderData:Ks,errors:Rn,...Gs?{fetchers:new Map($.fetchers)}:{}}}function qc(Y){if(Y&&!pa(Y[1]))return{[Y[0]]:Y[1].data};if($.actionData)return Object.keys($.actionData).length===0?null:$.actionData}function Oo(Y){return Y.forEach(Z=>{let se=$.fetchers.get(Z.key),Se=ep(void 0,se?se.data:void 0);$.fetchers.set(Z.key,Se)}),new Map($.fetchers)}async function au(Y,Z,se,Se){Zr(Y);let Oe=(Se&&Se.flushSync)===!0,Ve=d||l,st=JR($.location,$.matches,h,se,Z,Se==null?void 0:Se.relative),C=Sl(Ve,st,h),we=hi(C,Ve,st);if(we.active&&we.matches&&(C=we.matches),!C){qr(Y,Z,Ba(404,{pathname:st}),{flushSync:Oe});return}let{path:Ue,submission:He,error:$e}=m3(!0,st,Se);if($e){qr(Y,Z,$e,{flushSync:Oe});return}let mt=yp(C,Ue),Ht=new d3(e.unstable_getContext?await e.unstable_getContext():void 0),Gn=(Se&&Se.preventScrollReset)===!0;if(He&&ya(He.formMethod)){await iu(Y,Z,Ue,mt,C,Ht,we.active,Oe,Gn,He);return}de.set(Y,{routeId:Z,path:Ue}),await ou(Y,Z,Ue,mt,C,Ht,we.active,Oe,Gn,He)}async function iu(Y,Z,se,Se,Oe,Ve,st,C,we,Ue){ji(),de.delete(Y);function He(Un){if(!Un.route.action&&!Un.route.lazy){let aa=Ba(405,{method:Ue.formMethod,pathname:se,routeId:Z});return qr(Y,Z,aa,{flushSync:C}),!0}return!1}if(!st&&He(Se))return;let $e=$.fetchers.get(Y);Hs(Y,aK(Ue,$e),{flushSync:C});let mt=new AbortController,Ht=eh(e.history,se,mt.signal,Ue);if(st){let Un=await ra(Oe,se,Ht.signal,Y);if(Un.type==="aborted")return;if(Un.type==="error"){qr(Y,Z,Un.error,{flushSync:C});return}else if(Un.matches){if(Oe=Un.matches,Se=yp(Oe,se),He(Se))return}else{qr(Y,Z,Ba(404,{pathname:se}),{flushSync:C});return}}ae.set(Y,mt);let Gn=Te,wr=mh(a,o,Ht,Oe,Se,r,Ve),Tt=(await Wt(Ht,wr,Ve,Y))[Se.route.id];if(Ht.signal.aborted){ae.get(Y)===mt&&ae.delete(Y);return}if(ge.has(Y)){if(Gu(Tt)||pa(Tt)){Hs(Y,gl(void 0));return}}else{if(Gu(Tt))if(ae.delete(Y),Re>Gn){Hs(Y,gl(void 0));return}else return Q.add(Y),Hs(Y,ep(Ue)),Je(Ht,Tt,!1,{fetcherSubmission:Ue,preventScrollReset:we});if(pa(Tt)){qr(Y,Z,Tt.error);return}}let mi=$.navigation.location||$.location,Fn=eh(e.history,mi,mt.signal),Vs=d||l,Er=$.navigation.state!=="idle"?Sl(Vs,$.navigation.location,h):$.matches;zt(Er,"Didn't find any matches after fetcher action");let Ks=++Te;Xe.set(Y,Ks);let Rn=ep(Ue,Tt.data);$.fetchers.set(Y,Rn);let{dsMatches:Ic,revalidatingFetchers:Da}=g3(Fn,Ve,a,o,e.history,$,Er,Ue,mi,r,!1,fe,De,ge,de,Q,Vs,h,e.patchRoutesOnNavigation!=null,[Se.route.id,Tt]);Da.filter(Un=>Un.key!==Y).forEach(Un=>{let aa=Un.key,$o=$.fetchers.get(aa),ia=ep(void 0,$o?$o.data:void 0);$.fetchers.set(aa,ia),Zr(aa),Un.controller&&ae.set(aa,Un.controller)}),St({fetchers:new Map($.fetchers)});let Gs=()=>Da.forEach(Un=>Zr(Un.key));mt.signal.addEventListener("abort",Gs);let{loaderResults:It,fetcherResults:zn}=await ds(Ic,Da,Fn,Ve);if(mt.signal.aborted)return;if(mt.signal.removeEventListener("abort",Gs),Xe.delete(Y),ae.delete(Y),Da.forEach(Un=>ae.delete(Un.key)),$.fetchers.has(Y)){let Un=gl(Tt.data);$.fetchers.set(Y,Un)}let sa=lS(It);if(sa)return Je(Fn,sa.result,!1,{preventScrollReset:we});if(sa=lS(zn),sa)return Q.add(sa.key),Je(Fn,sa.result,!1,{preventScrollReset:we});let{loaderData:xo,errors:Lc}=w3($,Er,It,void 0,Da,zn);vt(Ks),$.navigation.state==="loading"&&Ks>Re?(zt(H,"Expected pending action"),V&&V.abort(),Tn($.navigation.location,{matches:Er,loaderData:xo,errors:Lc,fetchers:new Map($.fetchers)})):(St({errors:Lc,loaderData:E3($.loaderData,xo,Er,Lc),fetchers:new Map($.fetchers)}),fe=!1)}async function ou(Y,Z,se,Se,Oe,Ve,st,C,we,Ue){let He=$.fetchers.get(Y);Hs(Y,ep(Ue,He?He.data:void 0),{flushSync:C});let $e=new AbortController,mt=eh(e.history,se,$e.signal);if(st){let Tt=await ra(Oe,se,mt.signal,Y);if(Tt.type==="aborted")return;if(Tt.type==="error"){qr(Y,Z,Tt.error,{flushSync:C});return}else if(Tt.matches)Oe=Tt.matches,Se=yp(Oe,se);else{qr(Y,Z,Ba(404,{pathname:se}),{flushSync:C});return}}ae.set(Y,$e);let Ht=Te,Gn=mh(a,o,mt,Oe,Se,r,Ve),Kr=(await Wt(mt,Gn,Ve,Y))[Se.route.id];if(ae.get(Y)===$e&&ae.delete(Y),!mt.signal.aborted){if(ge.has(Y)){Hs(Y,gl(void 0));return}if(Gu(Kr))if(Re>Ht){Hs(Y,gl(void 0));return}else{Q.add(Y),await Je(mt,Kr,!1,{preventScrollReset:we});return}if(pa(Kr)){qr(Y,Z,Kr.error);return}Hs(Y,gl(Kr.data))}}async function Je(Y,Z,se,{submission:Se,fetcherSubmission:Oe,preventScrollReset:Ve,replace:st}={}){Z.response.headers.has("X-Remix-Revalidate")&&(fe=!0);let C=Z.response.headers.get("Location");zt(C,"Expected a Location header on the redirect Response"),C=S3(C,new URL(Y.url),h);let we=Jp($.location,C,{_isRedirect:!0});if(n){let Gn=!1;if(Z.response.headers.has("X-Remix-Reload-Document"))Gn=!0;else if(fA.test(C)){const wr=wz(C,!0);Gn=wr.origin!==t.location.origin||ci(wr.pathname,h)==null}if(Gn){st?t.location.replace(C):t.location.assign(C);return}}V=null;let Ue=st===!0||Z.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:He,formAction:$e,formEncType:mt}=$.navigation;!Se&&!Oe&&He&&$e&&mt&&(Se=k3($.navigation));let Ht=Se||Oe;if(P9.has(Z.response.status)&&Ht&&ya(Ht.formMethod))await js(Ue,we,{submission:{...Ht,formAction:C},preventScrollReset:Ve||K,enableViewTransition:se?j:void 0});else{let Gn=iR(we,Se);await js(Ue,we,{overrideNavigation:Gn,fetcherSubmission:Oe,preventScrollReset:Ve||K,enableViewTransition:se?j:void 0})}}async function Wt(Y,Z,se,Se){let Oe,Ve={};try{Oe=await W9(p,Y,Z,Se,se,!1)}catch(st){return Z.filter(C=>C.shouldLoad).forEach(C=>{Ve[C.route.id]={type:"error",error:st}}),Ve}if(Y.signal.aborted)return Ve;for(let[st,C]of Object.entries(Oe))if(nK(C)){let we=C.result;Ve[st]={type:"redirect",response:Z9(we,Y,st,Z,h)}}else Ve[st]=await X9(C);return Ve}async function ds(Y,Z,se,Se){let Oe=Wt(se,Y,Se,null),Ve=Promise.all(Z.map(async we=>{if(we.matches&&we.match&&we.request&&we.controller){let He=(await Wt(we.request,we.matches,Se,we.key))[we.match.route.id];return{[we.key]:He}}else return Promise.resolve({[we.key]:{type:"error",error:Ba(404,{pathname:we.path})}})})),st=await Oe,C=(await Ve).reduce((we,Ue)=>Object.assign(we,Ue),{});return{loaderResults:st,fetcherResults:C}}function ji(){fe=!0,de.forEach((Y,Z)=>{ae.has(Z)&&De.add(Z),Zr(Z)})}function Hs(Y,Z,se={}){$.fetchers.set(Y,Z),St({fetchers:new Map($.fetchers)},{flushSync:(se&&se.flushSync)===!0})}function qr(Y,Z,se,Se={}){let Oe=Hu($.matches,Z);cu(Y),St({errors:{[Oe.route.id]:se},fetchers:new Map($.fetchers)},{flushSync:(Se&&Se.flushSync)===!0})}function Do(Y){return Le.set(Y,(Le.get(Y)||0)+1),ge.has(Y)&&ge.delete(Y),$.fetchers.get(Y)||j9}function cu(Y){let Z=$.fetchers.get(Y);ae.has(Y)&&!(Z&&Z.state==="loading"&&Xe.has(Y))&&Zr(Y),de.delete(Y),Xe.delete(Y),Q.delete(Y),ge.delete(Y),De.delete(Y),$.fetchers.delete(Y)}function lu(Y){let Z=(Le.get(Y)||0)-1;Z<=0?(Le.delete(Y),ge.add(Y)):Le.set(Y,Z),St({fetchers:new Map($.fetchers)})}function Zr(Y){let Z=ae.get(Y);Z&&(Z.abort(),ae.delete(Y))}function Aa(Y){for(let Z of Y){let se=Do(Z),Se=gl(se.data);$.fetchers.set(Z,Se)}}function Hi(){let Y=[],Z=!1;for(let se of Q){let Se=$.fetchers.get(se);zt(Se,`Expected fetcher: ${se}`),Se.state==="loading"&&(Q.delete(se),Y.push(se),Z=!0)}return Aa(Y),Z}function vt(Y){let Z=[];for(let[se,Se]of Xe)if(Se<Y){let Oe=$.fetchers.get(se);zt(Oe,`Expected fetcher: ${se}`),Oe.state==="loading"&&(Zr(se),Xe.delete(se),Z.push(se))}return Aa(Z),Z.length>0}function Wm(Y,Z){let se=$.blockers.get(Y)||Zg;return ve.get(Y)!==Z&&ve.set(Y,Z),se}function Bs(Y){$.blockers.delete(Y),ve.delete(Y)}function pn(Y,Z){let se=$.blockers.get(Y)||Zg;zt(se.state==="unblocked"&&Z.state==="blocked"||se.state==="blocked"&&Z.state==="blocked"||se.state==="blocked"&&Z.state==="proceeding"||se.state==="blocked"&&Z.state==="unblocked"||se.state==="proceeding"&&Z.state==="unblocked",`Invalid blocker state transition: ${se.state} -> ${Z.state}`);let Se=new Map($.blockers);Se.set(Y,Z),St({blockers:Se})}function Nc({currentLocation:Y,nextLocation:Z,historyAction:se}){if(ve.size===0)return;ve.size>1&&Dr(!1,"A router only supports one blocker at a time");let Se=Array.from(ve.entries()),[Oe,Ve]=Se[Se.length-1],st=$.blockers.get(Oe);if(!(st&&st.state==="proceeding")&&Ve({currentLocation:Y,nextLocation:Z,historyAction:se}))return Oe}function Oa(Y){let Z=Ba(404,{pathname:Y}),se=d||l,{matches:Se,route:Oe}=R3(se);return{notFoundMatches:Se,route:Oe,error:Z}}function uu(Y,Z,se){if(O=Y,z=Z,x=se||null,!A&&$.navigation===aR){A=!0;let Se=Vr($.location,$.matches);Se!=null&&St({restoreScrollPosition:Se})}return()=>{O=null,z=null,x=null}}function di(Y,Z){return x&&x(Y,Z.map(Se=>b9(Se,$.loaderData)))||Y.key}function Mc(Y,Z){if(O&&z){let se=di(Y,Z);O[se]=z()}}function Vr(Y,Z){if(O){let se=di(Y,Z),Se=O[se];if(typeof Se=="number")return Se}return null}function hi(Y,Z,se){if(e.patchRoutesOnNavigation)if(Y){if(Object.keys(Y[0].params).length>0)return{active:!0,matches:xS(Z,se,h,!0)}}else return{active:!0,matches:xS(Z,se,h,!0)||[]};return{active:!1,matches:null}}async function ra(Y,Z,se,Se){if(!e.patchRoutesOnNavigation)return{type:"success",matches:Y};let Oe=Y;for(;;){let Ve=d==null,st=d||l,C=o;try{await e.patchRoutesOnNavigation({signal:se,path:Z,matches:Oe,fetcherKey:Se,patch:(He,$e)=>{se.aborted||p3(He,$e,st,C,a)}})}catch(He){return{type:"error",error:He,partialMatches:Oe}}finally{Ve&&!se.aborted&&(l=[...l])}if(se.aborted)return{type:"aborted"};let we=Sl(st,Z,h);if(we)return{type:"success",matches:we};let Ue=xS(st,Z,h,!0);if(!Ue||Oe.length===Ue.length&&Oe.every((He,$e)=>He.route.id===Ue[$e].route.id))return{type:"success",matches:null};Oe=Ue}}function fd(Y){o={},d=av(Y,a,void 0,o)}function lt(Y,Z){let se=d==null;p3(Y,Z,d||l,o,a),se&&(l=[...l],St({}))}return I={get basename(){return h},get future(){return S},get state(){return $},get routes(){return l},get window(){return t},initialize:Kn,subscribe:En,enableScrollRestoration:uu,navigate:Ui,fetch:au,revalidate:na,createHref:Y=>e.history.createHref(Y),encodeLocation:Y=>e.history.encodeLocation(Y),getFetcher:Do,deleteFetcher:lu,dispose:Gt,getBlocker:Wm,deleteBlocker:Bs,patchRoutes:lt,_internalFetchControllers:ae,_internalSetRoutes:fd},I}function V9(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function JR(e,t,n,r,a,o){let l,d;if(a){l=[];for(let p of t)if(l.push(p),p.route.id===a){d=p;break}}else l=t,d=t[t.length-1];let h=uA(r||".",lA(l),ci(e.pathname,n)||e.pathname,o==="path");if(r==null&&(h.search=e.search,h.hash=e.hash),(r==null||r===""||r===".")&&d){let p=dA(h.search);if(d.route.index&&!p)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&p){let S=new URLSearchParams(h.search),v=S.getAll("index");S.delete("index"),v.filter(O=>O).forEach(O=>S.append("index",O));let R=S.toString();h.search=R?`?${R}`:""}}return n!=="/"&&(h.pathname=h.pathname==="/"?n:fo([n,h.pathname])),Il(h)}function m3(e,t,n){if(!n||!V9(n))return{path:t};if(n.formMethod&&!rK(n.formMethod))return{path:t,error:Ba(405,{method:n.formMethod})};let r=()=>({path:t,error:Ba(400,{type:"invalid-body"})}),o=(n.formMethod||"get").toUpperCase(),l=Nz(t);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!ya(o))return r();let v=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((R,[O,x])=>`${R}${O}=${x}
`,""):String(n.body);return{path:t,submission:{formMethod:o,formAction:l,formEncType:n.formEncType,formData:void 0,json:void 0,text:v}}}else if(n.formEncType==="application/json"){if(!ya(o))return r();try{let v=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:t,submission:{formMethod:o,formAction:l,formEncType:n.formEncType,formData:void 0,json:v,text:void 0}}}catch{return r()}}}zt(typeof FormData=="function","FormData is not available in this environment");let d,h;if(n.formData)d=eC(n.formData),h=n.formData;else if(n.body instanceof FormData)d=eC(n.body),h=n.body;else if(n.body instanceof URLSearchParams)d=n.body,h=v3(d);else if(n.body==null)d=new URLSearchParams,h=new FormData;else try{d=new URLSearchParams(n.body),h=v3(d)}catch{return r()}let p={formMethod:o,formAction:l,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:h,json:void 0,text:void 0};if(ya(p.formMethod))return{path:t,submission:p};let S=Yl(t);return e&&S.search&&dA(S.search)&&d.append("index",""),S.search=`?${d}`,{path:Il(S),submission:p}}function g3(e,t,n,r,a,o,l,d,h,p,S,v,R,O,x,z,A,E,T,q){var xe;let D=q?pa(q[1])?q[1].error:q[1].data:void 0,I=a.createURL(o.location),$=a.createURL(h),H;if(S&&o.errors){let fe=Object.keys(o.errors)[0];H=l.findIndex(De=>De.route.id===fe)}else if(q&&pa(q[1])){let fe=q[0];H=l.findIndex(De=>De.route.id===fe)-1}let K=q?q[1].statusCode:void 0,V=K&&K>=400,j={currentUrl:I,currentParams:((xe=o.matches[0])==null?void 0:xe.params)||{},nextUrl:$,nextParams:l[0].params,...d,actionResult:D,actionStatus:K},te=l.map((fe,De)=>{let{route:ae}=fe,Te=null;if(H!=null&&De>H?Te=!1:ae.lazy?Te=!0:ae.loader==null?Te=!1:S?Te=XR(ae,o.loaderData,o.errors):K9(o.loaderData,o.matches[De],fe)&&(Te=!0),Te!==null)return ZR(n,r,e,fe,p,t,Te);let Re=V?!1:v||I.pathname+I.search===$.pathname+$.search||I.search!==$.search||G9(o.matches[De],fe),Xe={...j,defaultShouldRevalidate:Re},Q=cv(fe,Xe);return ZR(n,r,e,fe,p,t,Q,Xe)}),Ee=[];return x.forEach((fe,De)=>{if(S||!l.some(ge=>ge.route.id===fe.routeId)||O.has(De))return;let ae=o.fetchers.get(De),Te=ae&&ae.state!=="idle"&&ae.data===void 0,Re=Sl(A,fe.path,E);if(!Re){if(T&&Te)return;Ee.push({key:De,routeId:fe.routeId,path:fe.path,matches:null,match:null,request:null,controller:null});return}if(z.has(De))return;let Xe=yp(Re,fe.path),Q=new AbortController,de=eh(a,fe.path,Q.signal),Le=null;if(R.has(De))R.delete(De),Le=mh(n,r,de,Re,Xe,p,t);else if(Te)v&&(Le=mh(n,r,de,Re,Xe,p,t));else{let ge={...j,defaultShouldRevalidate:V?!1:v};cv(Xe,ge)&&(Le=mh(n,r,de,Re,Xe,p,t,ge))}Le&&Ee.push({key:De,routeId:fe.routeId,path:fe.path,matches:Le,match:Xe,request:de,controller:Q})}),{dsMatches:te,revalidatingFetchers:Ee}}function XR(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let r=t!=null&&e.id in t,a=n!=null&&n[e.id]!==void 0;return!r&&a?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!r&&!a}function K9(e,t,n){let r=!t||n.route.id!==t.route.id,a=!e.hasOwnProperty(n.route.id);return r||a}function G9(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function cv(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}function p3(e,t,n,r,a){let o;if(e){let h=r[e];zt(h,`No route found to patch children into: routeId = ${e}`),h.children||(h.children=[]),o=h.children}else o=n;let l=t.filter(h=>!o.some(p=>Oz(h,p))),d=av(l,a,[e||"_","patch",String((o==null?void 0:o.length)||"0")],r);o.push(...d)}function Oz(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((n,r)=>{var a;return(a=t.children)==null?void 0:a.some(o=>Oz(n,o))}):!1}var y3=new WeakMap,Dz=({key:e,route:t,manifest:n,mapRouteProperties:r})=>{let a=n[t.id];if(zt(a,"No route found in manifest"),!a.lazy||typeof a.lazy!="object")return;let o=a.lazy[e];if(!o)return;let l=y3.get(a);l||(l={},y3.set(a,l));let d=l[e];if(d)return d;let h=(async()=>{let p=g9(e),v=a[e]!==void 0&&e!=="hasErrorBoundary";if(p)Dr(!p,"Route property "+e+" is not a supported lazy route property. This property will be ignored."),l[e]=Promise.resolve();else if(v)Dr(!1,`Route "${a.id}" has a static property "${e}" defined. The lazy property will be ignored.`);else{let R=await o();R!=null&&(Object.assign(a,{[e]:R}),Object.assign(a,r(a)))}typeof a.lazy=="object"&&(a.lazy[e]=void 0,Object.values(a.lazy).every(R=>R===void 0)&&(a.lazy=void 0))})();return l[e]=h,h},_3=new WeakMap;function Q9(e,t,n,r,a){let o=n[e.id];if(zt(o,"No route found in manifest"),!e.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof e.lazy=="function"){let S=_3.get(o);if(S)return{lazyRoutePromise:S,lazyHandlerPromise:S};let v=(async()=>{zt(typeof e.lazy=="function","No lazy route function found");let R=await e.lazy(),O={};for(let x in R){let z=R[x];if(z===void 0)continue;let A=y9(x),T=o[x]!==void 0&&x!=="hasErrorBoundary";A?Dr(!A,"Route property "+x+" is not a supported property to be returned from a lazy route function. This property will be ignored."):T?Dr(!T,`Route "${o.id}" has a static property "${x}" defined but its lazy function is also returning a value for this property. The lazy route property "${x}" will be ignored.`):O[x]=z}Object.assign(o,O),Object.assign(o,{...r(o),lazy:void 0})})();return _3.set(o,v),v.catch(()=>{}),{lazyRoutePromise:v,lazyHandlerPromise:v}}let l=Object.keys(e.lazy),d=[],h;for(let S of l){if(a&&a.includes(S))continue;let v=Dz({key:S,route:e,manifest:n,mapRouteProperties:r});v&&(d.push(v),S===t&&(h=v))}let p=d.length>0?Promise.all(d).then(()=>{}):void 0;return p==null||p.catch(()=>{}),h==null||h.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:h}}async function b3(e){let t=e.matches.filter(a=>a.shouldLoad),n={};return(await Promise.all(t.map(a=>a.resolve()))).forEach((a,o)=>{n[t[o].route.id]=a}),n}async function Y9(e){return e.matches.some(t=>t.route.unstable_middleware)?xz(e,!1,()=>b3(e),(t,n)=>({[n]:{type:"error",result:t}})):b3(e)}async function xz(e,t,n,r){let{matches:a,request:o,params:l,context:d}=e,h={handlerResult:void 0};try{let p=a.flatMap(v=>v.route.unstable_middleware?v.route.unstable_middleware.map(R=>[v.route.id,R]):[]),S=await $z({request:o,params:l,context:d},p,t,h,n);return t?S:h.handlerResult}catch(p){if(!h.middlewareError)throw p;let S=await r(h.middlewareError.error,h.middlewareError.routeId);return h.handlerResult?Object.assign(h.handlerResult,S):S}}async function $z(e,t,n,r,a,o=0){let{request:l}=e;if(l.signal.aborted)throw l.signal.reason?l.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${l.method} ${l.url}`);let d=t[o];if(!d)return r.handlerResult=await a(),r.handlerResult;let[h,p]=d,S=!1,v,R=async()=>{if(S)throw new Error("You may only call `next()` once per middleware");S=!0,await $z(e,t,n,r,a,o+1)};try{let O=await p({request:e.request,params:e.params,context:e.context},R);return S?O===void 0?v:O:R()}catch(O){throw r.middlewareError?r.middlewareError.error!==O&&(r.middlewareError={routeId:h,error:O}):r.middlewareError={routeId:h,error:O},O}}function qz(e,t,n,r,a){let o=Dz({key:"unstable_middleware",route:r.route,manifest:t,mapRouteProperties:e}),l=Q9(r.route,ya(n.method)?"action":"loader",t,e,a);return{middleware:o,route:l.lazyRoutePromise,handler:l.lazyHandlerPromise}}function ZR(e,t,n,r,a,o,l,d=null){let h=!1,p=qz(e,t,n,r,a);return{...r,_lazyPromises:p,shouldLoad:l,unstable_shouldRevalidateArgs:d,unstable_shouldCallHandler(S){return h=!0,d?typeof S=="boolean"?cv(r,{...d,defaultShouldRevalidate:S}):cv(r,d):l},resolve(S){return h||l||S&&n.method==="GET"&&(r.route.lazy||r.route.loader)?J9({request:n,match:r,lazyHandlerPromise:p==null?void 0:p.handler,lazyRoutePromise:p==null?void 0:p.route,handlerOverride:S,scopedContext:o}):Promise.resolve({type:"data",result:void 0})}}}function mh(e,t,n,r,a,o,l,d=null){return r.map(h=>h.route.id!==a.route.id?{...h,shouldLoad:!1,unstable_shouldRevalidateArgs:d,unstable_shouldCallHandler:()=>!1,_lazyPromises:qz(e,t,n,h,o),resolve:()=>Promise.resolve({type:"data",result:void 0})}:ZR(e,t,n,h,o,l,!0,d))}async function W9(e,t,n,r,a,o){n.some(p=>{var S;return(S=p._lazyPromises)==null?void 0:S.middleware})&&await Promise.all(n.map(p=>{var S;return(S=p._lazyPromises)==null?void 0:S.middleware}));let l={request:t,params:n[0].params,context:a,matches:n},h=await e({...l,fetcherKey:r,unstable_runClientMiddleware:p=>{let S=l;return xz(S,!1,()=>p({...S,fetcherKey:r,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(v,R)=>({[R]:{type:"error",result:v}}))}});try{await Promise.all(n.flatMap(p=>{var S,v;return[(S=p._lazyPromises)==null?void 0:S.handler,(v=p._lazyPromises)==null?void 0:v.route]}))}catch{}return h}async function J9({request:e,match:t,lazyHandlerPromise:n,lazyRoutePromise:r,handlerOverride:a,scopedContext:o}){let l,d,h=ya(e.method),p=h?"action":"loader",S=v=>{let R,O=new Promise((A,E)=>R=E);d=()=>R(),e.signal.addEventListener("abort",d);let x=A=>typeof v!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${p}" [routeId: ${t.route.id}]`)):v({request:e,params:t.params,context:o},...A!==void 0?[A]:[]),z=(async()=>{try{return{type:"data",result:await(a?a(E=>x(E)):x())}}catch(A){return{type:"error",result:A}}})();return Promise.race([z,O])};try{let v=h?t.route.action:t.route.loader;if(n||r)if(v){let R,[O]=await Promise.all([S(v).catch(x=>{R=x}),n,r]);if(R!==void 0)throw R;l=O}else{await n;let R=h?t.route.action:t.route.loader;if(R)[l]=await Promise.all([S(R),r]);else if(p==="action"){let O=new URL(e.url),x=O.pathname+O.search;throw Ba(405,{method:e.method,pathname:x,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(v)l=await S(v);else{let R=new URL(e.url),O=R.pathname+R.search;throw Ba(404,{pathname:O})}}catch(v){return{type:"error",result:v}}finally{d&&e.signal.removeEventListener("abort",d)}return l}async function X9(e){var r,a,o,l,d,h;let{result:t,type:n}=e;if(Mz(t)){let p;try{let S=t.headers.get("Content-Type");S&&/\bapplication\/json\b/.test(S)?t.body==null?p=null:p=await t.json():p=await t.text()}catch(S){return{type:"error",error:S}}return n==="error"?{type:"error",error:new ov(t.status,t.statusText,p),statusCode:t.status,headers:t.headers}:{type:"data",data:p,statusCode:t.status,headers:t.headers}}return n==="error"?C3(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:(r=t.init)==null?void 0:r.status,headers:(a=t.init)!=null&&a.headers?new Headers(t.init.headers):void 0}:{type:"error",error:new ov(((o=t.init)==null?void 0:o.status)||500,void 0,t.data),statusCode:Xp(t)?t.status:void 0,headers:(l=t.init)!=null&&l.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:Xp(t)?t.status:void 0}:C3(t)?{type:"data",data:t.data,statusCode:(d=t.init)==null?void 0:d.status,headers:(h=t.init)!=null&&h.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function Z9(e,t,n,r,a){let o=e.headers.get("Location");if(zt(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!fA.test(o)){let l=r.slice(0,r.findIndex(d=>d.route.id===n)+1);o=JR(new URL(t.url),l,a,o),e.headers.set("Location",o)}return e}function S3(e,t,n){if(fA.test(e)){let r=e,a=r.startsWith("//")?new URL(t.protocol+r):new URL(r),o=ci(a.pathname,n)!=null;if(a.origin===t.origin&&o)return a.pathname+a.search+a.hash}return e}function eh(e,t,n,r){let a=e.createURL(Nz(t)).toString(),o={signal:n};if(r&&ya(r.formMethod)){let{formMethod:l,formEncType:d}=r;o.method=l.toUpperCase(),d==="application/json"?(o.headers=new Headers({"Content-Type":d}),o.body=JSON.stringify(r.json)):d==="text/plain"?o.body=r.text:d==="application/x-www-form-urlencoded"&&r.formData?o.body=eC(r.formData):o.body=r.formData}return new Request(a,o)}function eC(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function v3(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function eK(e,t,n,r=!1,a=!1){let o={},l=null,d,h=!1,p={},S=n&&pa(n[1])?n[1].error:void 0;return e.forEach(v=>{if(!(v.route.id in t))return;let R=v.route.id,O=t[R];if(zt(!Gu(O),"Cannot handle redirect results in processLoaderData"),pa(O)){let x=O.error;if(S!==void 0&&(x=S,S=void 0),l=l||{},a)l[R]=x;else{let z=Hu(e,R);l[z.route.id]==null&&(l[z.route.id]=x)}r||(o[R]=Az),h||(h=!0,d=Xp(O.error)?O.error.status:500),O.headers&&(p[R]=O.headers)}else o[R]=O.data,O.statusCode&&O.statusCode!==200&&!h&&(d=O.statusCode),O.headers&&(p[R]=O.headers)}),S!==void 0&&n&&(l={[n[0]]:S},n[2]&&(o[n[2]]=void 0)),{loaderData:o,errors:l,statusCode:d||200,loaderHeaders:p}}function w3(e,t,n,r,a,o){let{loaderData:l,errors:d}=eK(t,n,r);return a.filter(h=>!h.matches||h.matches.some(p=>p.shouldLoad)).forEach(h=>{let{key:p,match:S,controller:v}=h,R=o[p];if(zt(R,"Did not find corresponding fetcher result"),!(v&&v.signal.aborted))if(pa(R)){let O=Hu(e.matches,S==null?void 0:S.route.id);d&&d[O.route.id]||(d={...d,[O.route.id]:R.error}),e.fetchers.delete(p)}else if(Gu(R))zt(!1,"Unhandled fetcher revalidation redirect");else{let O=gl(R.data);e.fetchers.set(p,O)}}),{loaderData:l,errors:d}}function E3(e,t,n,r){let a=Object.entries(t).filter(([,o])=>o!==Az).reduce((o,[l,d])=>(o[l]=d,o),{});for(let o of n){let l=o.route.id;if(!t.hasOwnProperty(l)&&e.hasOwnProperty(l)&&o.route.loader&&(a[l]=e[l]),r&&r.hasOwnProperty(l))break}return a}function T3(e){return e?pa(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Hu(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function R3(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Ba(e,{pathname:t,routeId:n,method:r,type:a,message:o}={}){let l="Unknown Server Error",d="Unknown @remix-run/router error";return e===400?(l="Bad Request",r&&t&&n?d=`You made a ${r} request to "${t}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:a==="invalid-body"&&(d="Unable to encode submission body")):e===403?(l="Forbidden",d=`Route "${n}" does not match URL "${t}"`):e===404?(l="Not Found",d=`No route matches URL "${t}"`):e===405&&(l="Method Not Allowed",r&&t&&n?d=`You made a ${r.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(d=`Invalid request method "${r.toUpperCase()}"`)),new ov(e||500,l,new Error(d),!0)}function lS(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[r,a]=t[n];if(Gu(a))return{key:r,result:a}}}function Nz(e){let t=typeof e=="string"?Yl(e):e;return Il({...t,hash:""})}function tK(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function nK(e){return Mz(e.result)&&U9.has(e.result.status)}function pa(e){return e.type==="error"}function Gu(e){return(e&&e.type)==="redirect"}function C3(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function Mz(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function rK(e){return z9.has(e.toUpperCase())}function ya(e){return L9.has(e.toUpperCase())}function dA(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function yp(e,t){let n=typeof t=="string"?Yl(t).search:t.search;if(e[e.length-1].route.index&&dA(n||""))return e[e.length-1];let r=Rz(e);return r[r.length-1]}function k3(e){let{formMethod:t,formAction:n,formEncType:r,text:a,formData:o,json:l}=e;if(!(!t||!n||!r)){if(a!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:a};if(o!=null)return{formMethod:t,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(l!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:l,text:void 0}}}function iR(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function sK(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function ep(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function aK(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function gl(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function iK(e,t){try{let n=e.sessionStorage.getItem(kz);if(n){let r=JSON.parse(n);for(let[a,o]of Object.entries(r||{}))o&&Array.isArray(o)&&t.set(a,new Set(o||[]))}}catch{}}function oK(e,t){if(t.size>0){let n={};for(let[r,a]of t)n[r]=[...a];try{e.sessionStorage.setItem(kz,JSON.stringify(n))}catch(r){Dr(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function cK(){let e,t,n=new Promise((r,a)=>{e=async o=>{r(o);try{await n}catch{}},t=async o=>{a(o);try{await n}catch{}}});return{promise:n,resolve:e,reject:t}}var Gf=oe.createContext(null);Gf.displayName="DataRouter";var Vy=oe.createContext(null);Vy.displayName="DataRouterState";var hA=oe.createContext({isTransitioning:!1});hA.displayName="ViewTransition";var Iz=oe.createContext(new Map);Iz.displayName="Fetchers";var lK=oe.createContext(null);lK.displayName="Await";var wo=oe.createContext(null);wo.displayName="Navigation";var z0=oe.createContext(null);z0.displayName="Location";var Eo=oe.createContext({outlet:null,matches:[],isDataRoute:!1});Eo.displayName="Route";var mA=oe.createContext(null);mA.displayName="RouteError";function uK(e,{relative:t}={}){zt(Ky(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=oe.useContext(wo),{hash:a,pathname:o,search:l}=Gy(e,{relative:t}),d=o;return n!=="/"&&(d=o==="/"?n:fo([n,o])),r.createHref({pathname:d,search:l,hash:a})}function Ky(){return oe.useContext(z0)!=null}function Qf(){return zt(Ky(),"useLocation() may be used only in the context of a <Router> component."),oe.useContext(z0).location}var Lz="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Fz(e){oe.useContext(wo).static||oe.useLayoutEffect(e)}function fK(){let{isDataRoute:e}=oe.useContext(Eo);return e?RK():dK()}function dK(){zt(Ky(),"useNavigate() may be used only in the context of a <Router> component.");let e=oe.useContext(Gf),{basename:t,navigator:n}=oe.useContext(wo),{matches:r}=oe.useContext(Eo),{pathname:a}=Qf(),o=JSON.stringify(lA(r)),l=oe.useRef(!1);return Fz(()=>{l.current=!0}),oe.useCallback((h,p={})=>{if(Dr(l.current,Lz),!l.current)return;if(typeof h=="number"){n.go(h);return}let S=uA(h,JSON.parse(o),a,p.relative==="path");e==null&&t!=="/"&&(S.pathname=S.pathname==="/"?t:fo([t,S.pathname])),(p.replace?n.replace:n.push)(S,p.state,p)},[t,n,o,a,e])}var hK=oe.createContext(null);function mK(e){let t=oe.useContext(Eo).outlet;return t&&oe.createElement(hK.Provider,{value:e},t)}function Gy(e,{relative:t}={}){let{matches:n}=oe.useContext(Eo),{pathname:r}=Qf(),a=JSON.stringify(lA(n));return oe.useMemo(()=>uA(e,JSON.parse(a),r,t==="path"),[e,a,r,t])}function gK(e,t,n,r){zt(Ky(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=oe.useContext(wo),{matches:o}=oe.useContext(Eo),l=o[o.length-1],d=l?l.params:{},h=l?l.pathname:"/",p=l?l.pathnameBase:"/",S=l&&l.route;{let E=S&&S.path||"";Pz(h,!S||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let v=Qf(),R;R=v;let O=R.pathname||"/",x=O;if(p!=="/"){let E=p.replace(/^\//,"").split("/");x="/"+O.replace(/^\//,"").split("/").slice(E.length).join("/")}let z=Sl(e,{pathname:x});return Dr(S||z!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),Dr(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),SK(z&&z.map(E=>Object.assign({},E,{params:Object.assign({},d,E.params),pathname:fo([p,a.encodeLocation?a.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?p:fo([p,a.encodeLocation?a.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,n,r)}function pK(){let e=TK(),t=Xp(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=oe.createElement(oe.Fragment,null,oe.createElement("p",null,"💿 Hey developer 👋"),oe.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",oe.createElement("code",{style:o},"ErrorBoundary")," or"," ",oe.createElement("code",{style:o},"errorElement")," prop on your route.")),oe.createElement(oe.Fragment,null,oe.createElement("h2",null,"Unexpected Application Error!"),oe.createElement("h3",{style:{fontStyle:"italic"}},t),n?oe.createElement("pre",{style:a},n):null,l)}var yK=oe.createElement(pK,null),_K=class extends oe.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?oe.createElement(Eo.Provider,{value:this.props.routeContext},oe.createElement(mA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function bK({routeContext:e,match:t,children:n}){let r=oe.useContext(Gf);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),oe.createElement(Eo.Provider,{value:e},n)}function SK(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n==null?void 0:n.errors;if(o!=null){let h=a.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);zt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,d=-1;if(n)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:S,errors:v}=n,R=p.route.loader&&!S.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||R){l=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((h,p,S)=>{let v,R=!1,O=null,x=null;n&&(v=o&&p.route.id?o[p.route.id]:void 0,O=p.route.errorElement||yK,l&&(d<0&&S===0?(Pz("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,x=null):d===S&&(R=!0,x=p.route.hydrateFallbackElement||null)));let z=t.concat(a.slice(0,S+1)),A=()=>{let E;return v?E=O:R?E=x:p.route.Component?E=oe.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=h,oe.createElement(bK,{match:p,routeContext:{outlet:h,matches:z,isDataRoute:n!=null},children:E})};return n&&(p.route.ErrorBoundary||p.route.errorElement||S===0)?oe.createElement(_K,{location:n.location,revalidation:n.revalidation,component:O,error:v,children:A(),routeContext:{outlet:null,matches:z,isDataRoute:!0}}):A()},null)}function gA(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vK(e){let t=oe.useContext(Gf);return zt(t,gA(e)),t}function zz(e){let t=oe.useContext(Vy);return zt(t,gA(e)),t}function wK(e){let t=oe.useContext(Eo);return zt(t,gA(e)),t}function U0(e){let t=wK(e),n=t.matches[t.matches.length-1];return zt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function EK(){return U0("useRouteId")}function Uz(){let e=zz("useLoaderData"),t=U0("useLoaderData");return e.loaderData[t]}function TK(){var r;let e=oe.useContext(mA),t=zz("useRouteError"),n=U0("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function RK(){let{router:e}=vK("useNavigate"),t=U0("useNavigate"),n=oe.useRef(!1);return Fz(()=>{n.current=!0}),oe.useCallback(async(a,o={})=>{Dr(n.current,Lz),n.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...o}))},[e,t])}var A3={};function Pz(e,t,n){!t&&!A3[e]&&(A3[e]=!0,Dr(!1,n))}var O3={};function D3(e,t){!e&&!O3[t]&&(O3[t]=!0,console.warn(t))}function CK(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&Dr(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:oe.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&Dr(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:oe.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&Dr(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:oe.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var kK=["HydrateFallback","hydrateFallbackElement"],AK=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",t(n))}})}};function OK({router:e,flushSync:t}){let[n,r]=oe.useState(e.state),[a,o]=oe.useState(),[l,d]=oe.useState({isTransitioning:!1}),[h,p]=oe.useState(),[S,v]=oe.useState(),[R,O]=oe.useState(),x=oe.useRef(new Map),z=oe.useCallback((q,{deletedFetchers:D,flushSync:I,viewTransitionOpts:$})=>{q.fetchers.forEach((K,V)=>{K.data!==void 0&&x.current.set(V,K.data)}),D.forEach(K=>x.current.delete(K)),D3(I===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let H=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(D3($==null||H,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!$||!H){t&&I?t(()=>r(q)):oe.startTransition(()=>r(q));return}if(t&&I){t(()=>{S&&(h&&h.resolve(),S.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:$.currentLocation,nextLocation:$.nextLocation})});let K=e.window.document.startViewTransition(()=>{t(()=>r(q))});K.finished.finally(()=>{t(()=>{p(void 0),v(void 0),o(void 0),d({isTransitioning:!1})})}),t(()=>v(K));return}S?(h&&h.resolve(),S.skipTransition(),O({state:q,currentLocation:$.currentLocation,nextLocation:$.nextLocation})):(o(q),d({isTransitioning:!0,flushSync:!1,currentLocation:$.currentLocation,nextLocation:$.nextLocation}))},[e.window,t,S,h]);oe.useLayoutEffect(()=>e.subscribe(z),[e,z]),oe.useEffect(()=>{l.isTransitioning&&!l.flushSync&&p(new AK)},[l]),oe.useEffect(()=>{if(h&&a&&e.window){let q=a,D=h.promise,I=e.window.document.startViewTransition(async()=>{oe.startTransition(()=>r(q)),await D});I.finished.finally(()=>{p(void 0),v(void 0),o(void 0),d({isTransitioning:!1})}),v(I)}},[a,h,e.window]),oe.useEffect(()=>{h&&a&&n.location.key===a.location.key&&h.resolve()},[h,S,n.location,a]),oe.useEffect(()=>{!l.isTransitioning&&R&&(o(R.state),d({isTransitioning:!0,flushSync:!1,currentLocation:R.currentLocation,nextLocation:R.nextLocation}),O(void 0))},[l.isTransitioning,R]);let A=oe.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:q=>e.navigate(q),push:(q,D,I)=>e.navigate(q,{state:D,preventScrollReset:I==null?void 0:I.preventScrollReset}),replace:(q,D,I)=>e.navigate(q,{replace:!0,state:D,preventScrollReset:I==null?void 0:I.preventScrollReset})}),[e]),E=e.basename||"/",T=oe.useMemo(()=>({router:e,navigator:A,static:!1,basename:E}),[e,A,E]);return oe.createElement(oe.Fragment,null,oe.createElement(Gf.Provider,{value:T},oe.createElement(Vy.Provider,{value:n},oe.createElement(Iz.Provider,{value:x.current},oe.createElement(hA.Provider,{value:l},oe.createElement(qK,{basename:E,location:n.location,navigationType:n.historyAction,navigator:A},oe.createElement(DK,{routes:e.routes,future:e.future,state:n})))))),null)}var DK=oe.memo(xK);function xK({routes:e,future:t,state:n}){return gK(e,void 0,n,t)}function $K(e){return mK(e.context)}function qK({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:a,static:o=!1}){zt(!Ky(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),d=oe.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);typeof n=="string"&&(n=Yl(n));let{pathname:h="/",search:p="",hash:S="",state:v=null,key:R="default"}=n,O=oe.useMemo(()=>{let x=ci(h,l);return x==null?null:{location:{pathname:x,search:p,hash:S,state:v,key:R},navigationType:r}},[l,h,p,S,v,R,r]);return Dr(O!=null,`<Router basename="${l}"> is not able to match the URL "${h}${p}${S}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:oe.createElement(wo.Provider,{value:d},oe.createElement(z0.Provider,{children:t,value:O}))}var $S="get",qS="application/x-www-form-urlencoded";function P0(e){return e!=null&&typeof e.tagName=="string"}function NK(e){return P0(e)&&e.tagName.toLowerCase()==="button"}function MK(e){return P0(e)&&e.tagName.toLowerCase()==="form"}function IK(e){return P0(e)&&e.tagName.toLowerCase()==="input"}function LK(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function FK(e,t){return e.button===0&&(!t||t==="_self")&&!LK(e)}var uS=null;function zK(){if(uS===null)try{new FormData(document.createElement("form"),0),uS=!1}catch{uS=!0}return uS}var UK=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function oR(e){return e!=null&&!UK.has(e)?(Dr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qS}"`),null):e}function PK(e,t){let n,r,a,o,l;if(MK(e)){let d=e.getAttribute("action");r=d?ci(d,t):null,n=e.getAttribute("method")||$S,a=oR(e.getAttribute("enctype"))||qS,o=new FormData(e)}else if(NK(e)||IK(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=e.getAttribute("formaction")||d.getAttribute("action");if(r=h?ci(h,t):null,n=e.getAttribute("formmethod")||d.getAttribute("method")||$S,a=oR(e.getAttribute("formenctype"))||oR(d.getAttribute("enctype"))||qS,o=new FormData(d,e),!zK()){let{name:p,type:S,value:v}=e;if(S==="image"){let R=p?`${p}.`:"";o.append(`${R}x`,"0"),o.append(`${R}y`,"0")}else p&&o.append(p,v)}}else{if(P0(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=$S,r=null,a=qS,l=e}return o&&a==="text/plain"&&(l=o,o=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:o,body:l}}function pA(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function jK(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function HK(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function BK(e,t,n){let r=await Promise.all(e.map(async a=>{let o=t.routes[a.route.id];if(o){let l=await jK(o,n);return l.links?l.links():[]}return[]}));return QK(r.flat(1).filter(HK).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function x3(e,t,n,r,a,o){let l=(h,p)=>n[p]?h.route.id!==n[p].route.id:!0,d=(h,p)=>{var S;return n[p].pathname!==h.pathname||((S=n[p].route.path)==null?void 0:S.endsWith("*"))&&n[p].params["*"]!==h.params["*"]};return o==="assets"?t.filter((h,p)=>l(h,p)||d(h,p)):o==="data"?t.filter((h,p)=>{var v;let S=r.routes[h.route.id];if(!S||!S.hasLoader)return!1;if(l(h,p)||d(h,p))return!0;if(h.route.shouldRevalidate){let R=h.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=n[0])==null?void 0:v.params)||{},nextUrl:new URL(e,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function VK(e,t,{includeHydrateFallback:n}={}){return KK(e.map(r=>{let a=t.routes[r.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function KK(e){return[...new Set(e)]}function GK(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function QK(e,t){let n=new Set;return new Set(t),e.reduce((r,a)=>{let o=JSON.stringify(GK(a));return n.has(o)||(n.add(o),r.push({key:o,link:a})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var YK=new Set([100,101,204,205]);function WK(e,t){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname="_root.data":t&&ci(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function jz(){let e=oe.useContext(Gf);return pA(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function JK(){let e=oe.useContext(Vy);return pA(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var yA=oe.createContext(void 0);yA.displayName="FrameworkContext";function Hz(){let e=oe.useContext(yA);return pA(e,"You must render this element inside a <HydratedRouter> element"),e}function XK(e,t){let n=oe.useContext(yA),[r,a]=oe.useState(!1),[o,l]=oe.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:p,onMouseLeave:S,onTouchStart:v}=t,R=oe.useRef(null);oe.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let z=E=>{E.forEach(T=>{l(T.isIntersecting)})},A=new IntersectionObserver(z,{threshold:.5});return R.current&&A.observe(R.current),()=>{A.disconnect()}}},[e]),oe.useEffect(()=>{if(r){let z=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(z)}}},[r]);let O=()=>{a(!0)},x=()=>{a(!1),l(!1)};return n?e!=="intent"?[o,R,{}]:[o,R,{onFocus:tp(d,O),onBlur:tp(h,x),onMouseEnter:tp(p,O),onMouseLeave:tp(S,x),onTouchStart:tp(v,O)}]:[!1,R,{}]}function tp(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function ZK({page:e,...t}){let{router:n}=jz(),r=oe.useMemo(()=>Sl(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?oe.createElement(tG,{page:e,matches:r,...t}):null}function eG(e){let{manifest:t,routeModules:n}=Hz(),[r,a]=oe.useState([]);return oe.useEffect(()=>{let o=!1;return BK(e,t,n).then(l=>{o||a(l)}),()=>{o=!0}},[e,t,n]),r}function tG({page:e,matches:t,...n}){let r=Qf(),{manifest:a,routeModules:o}=Hz(),{basename:l}=jz(),{loaderData:d,matches:h}=JK(),p=oe.useMemo(()=>x3(e,t,h,a,r,"data"),[e,t,h,a,r]),S=oe.useMemo(()=>x3(e,t,h,a,r,"assets"),[e,t,h,a,r]),v=oe.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let x=new Set,z=!1;if(t.forEach(E=>{var q;let T=a.routes[E.route.id];!T||!T.hasLoader||(!p.some(D=>D.route.id===E.route.id)&&E.route.id in d&&((q=o[E.route.id])!=null&&q.shouldRevalidate)||T.hasClientLoader?z=!0:x.add(E.route.id))}),x.size===0)return[];let A=WK(e,l);return z&&x.size>0&&A.searchParams.set("_routes",t.filter(E=>x.has(E.route.id)).map(E=>E.route.id).join(",")),[A.pathname+A.search]},[l,d,r,a,p,t,e,o]),R=oe.useMemo(()=>VK(S,a),[S,a]),O=eG(S);return oe.createElement(oe.Fragment,null,v.map(x=>oe.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),R.map(x=>oe.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),O.map(({key:x,link:z})=>oe.createElement("link",{key:x,...z})))}function nG(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Bz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Bz&&(window.__reactRouterVersion="7.6.2")}catch{}function rG(e,t){return B9({basename:t==null?void 0:t.basename,unstable_getContext:t==null?void 0:t.unstable_getContext,future:t==null?void 0:t.future,history:f9({window:t==null?void 0:t.window}),hydrationData:sG(),routes:e,mapRouteProperties:CK,hydrationRouteProperties:kK,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function sG(){let e=window==null?void 0:window.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:aG(e.errors)}),e}function aG(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,a]of t)if(a&&a.__type==="RouteErrorResponse")n[r]=new ov(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let o=window[a.__subType];if(typeof o=="function")try{let l=new o(a.message);l.stack="",n[r]=l}catch{}}if(n[r]==null){let o=new Error(a.message);o.stack="",n[r]=o}}else n[r]=a;return n}var Vz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kz=oe.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:a,reloadDocument:o,replace:l,state:d,target:h,to:p,preventScrollReset:S,viewTransition:v,...R},O){let{basename:x}=oe.useContext(wo),z=typeof p=="string"&&Vz.test(p),A,E=!1;if(typeof p=="string"&&z&&(A=p,Bz))try{let V=new URL(window.location.href),j=p.startsWith("//")?new URL(V.protocol+p):new URL(p),te=ci(j.pathname,x);j.origin===V.origin&&te!=null?p=te+j.search+j.hash:E=!0}catch{Dr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=uK(p,{relative:a}),[q,D,I]=XK(r,R),$=lG(p,{replace:l,state:d,target:h,preventScrollReset:S,relative:a,viewTransition:v});function H(V){t&&t(V),V.defaultPrevented||$(V)}let K=oe.createElement("a",{...R,...I,href:A||T,onClick:E||o?t:H,ref:nG(O,D),target:h,"data-discover":!z&&n==="render"?"true":void 0});return q&&!z?oe.createElement(oe.Fragment,null,K,oe.createElement(ZK,{page:T})):K});Kz.displayName="Link";var iG=oe.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:a=!1,style:o,to:l,viewTransition:d,children:h,...p},S){let v=Gy(l,{relative:p.relative}),R=Qf(),O=oe.useContext(Vy),{navigator:x,basename:z}=oe.useContext(wo),A=O!=null&&mG(v)&&d===!0,E=x.encodeLocation?x.encodeLocation(v).pathname:v.pathname,T=R.pathname,q=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(T=T.toLowerCase(),q=q?q.toLowerCase():null,E=E.toLowerCase()),q&&z&&(q=ci(q,z)||q);const D=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let I=T===E||!a&&T.startsWith(E)&&T.charAt(D)==="/",$=q!=null&&(q===E||!a&&q.startsWith(E)&&q.charAt(E.length)==="/"),H={isActive:I,isPending:$,isTransitioning:A},K=I?t:void 0,V;typeof r=="function"?V=r(H):V=[r,I?"active":null,$?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let j=typeof o=="function"?o(H):o;return oe.createElement(Kz,{...p,"aria-current":K,className:V,ref:S,style:j,to:l,viewTransition:d},typeof h=="function"?h(H):h)});iG.displayName="NavLink";var oG=oe.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:a,state:o,method:l=$S,action:d,onSubmit:h,relative:p,preventScrollReset:S,viewTransition:v,...R},O)=>{let x=dG(),z=hG(d,{relative:p}),A=l.toLowerCase()==="get"?"get":"post",E=typeof d=="string"&&Vz.test(d),T=q=>{if(h&&h(q),q.defaultPrevented)return;q.preventDefault();let D=q.nativeEvent.submitter,I=(D==null?void 0:D.getAttribute("formmethod"))||l;x(D||q.currentTarget,{fetcherKey:t,method:I,navigate:n,replace:a,state:o,relative:p,preventScrollReset:S,viewTransition:v})};return oe.createElement("form",{ref:O,method:A,action:z,onSubmit:r?h:T,...R,"data-discover":!E&&e==="render"?"true":void 0})});oG.displayName="Form";function cG(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Gz(e){let t=oe.useContext(Gf);return zt(t,cG(e)),t}function lG(e,{target:t,replace:n,state:r,preventScrollReset:a,relative:o,viewTransition:l}={}){let d=fK(),h=Qf(),p=Gy(e,{relative:o});return oe.useCallback(S=>{if(FK(S,t)){S.preventDefault();let v=n!==void 0?n:Il(h)===Il(p);d(e,{replace:v,state:r,preventScrollReset:a,relative:o,viewTransition:l})}},[h,d,p,n,r,t,e,a,o,l])}var uG=0,fG=()=>`__${String(++uG)}__`;function dG(){let{router:e}=Gz("useSubmit"),{basename:t}=oe.useContext(wo),n=EK();return oe.useCallback(async(r,a={})=>{let{action:o,method:l,encType:d,formData:h,body:p}=PK(r,t);if(a.navigate===!1){let S=a.fetcherKey||fG();await e.fetch(S,n,a.action||o,{preventScrollReset:a.preventScrollReset,formData:h,body:p,formMethod:a.method||l,formEncType:a.encType||d,flushSync:a.flushSync})}else await e.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:h,body:p,formMethod:a.method||l,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,n])}function hG(e,{relative:t}={}){let{basename:n}=oe.useContext(wo),r=oe.useContext(Eo);zt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),o={...Gy(e||".",{relative:t})},l=Qf();if(e==null){o.search=l.search;let d=new URLSearchParams(o.search),h=d.getAll("index");if(h.some(S=>S==="")){d.delete("index"),h.filter(v=>v).forEach(v=>d.append("index",v));let S=d.toString();o.search=S?`?${S}`:""}}return(!e||e===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:fo([n,o.pathname])),Il(o)}function mG(e,t={}){let n=oe.useContext(hA);zt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Gz("useViewTransitionState"),a=Gy(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=ci(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=ci(n.nextLocation.pathname,r)||n.nextLocation.pathname;return iv(a.pathname,l)!=null||iv(a.pathname,o)!=null}[...YK];var Qz=Sz();/**
 * react-router v7.6.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gG(e){return oe.createElement(OK,{flushSync:Qz.flushSync,...e})}const pG="https://config-server-ytyo.onrender.com";class yG{constructor(t){b(this,"baseUrl");this.baseUrl=t}async get(t){try{const n=await fetch(`${this.baseUrl}/${t}`);if(!n.ok)throw new Error(`HTTP error ${n.status}`);return await n.json()}catch(n){throw console.error(`Error fetching ${t}:`,n),n}}async getItems(){return this.get("items")}async getTables(){return this.get("tables")}}const Yz=new yG(pG),_G="Menu",bG="Selected Items",SG=e=>{const{id:t,name:n,price:r}=e;return{id:t,name:n,price:r,quantity:0}},vG=e=>{const{id:t,name:n,price:r,quantity:a}=e;return{id:t,name:n,price:r,quantity:a}},wG="_contentContainer_15p4f_1",EG="_menuContainer_15p4f_7",TG="_selectedItems_15p4f_11",RG="_inputContainer_15p4f_15",fS={contentContainer:wG,menuContainer:EG,selectedItems:TG,inputContainer:RG},CG="_card_y6wnu_1",kG={card:CG};function $3({children:e}){return Pe.jsx("div",{className:kG.card,children:e})}const AG="_menuList_6mgog_1",OG="_menuItem_6mgog_10",DG="_quantityControls_6mgog_30",cR={menuList:AG,menuItem:OG,quantityControls:DG},xG="_button_nr5fw_1",$G={button:xG};function tC({children:e,onClick:t,type:n}){return Pe.jsx("button",{type:n,className:$G.button,onClick:t,children:e})}const j0=Pr.createContext(void 0),qG=e=>typeof e=="function",M=function(e,t){if(typeof e=="function")return function(){return e(arguments)?t.apply(this,arguments):n=>t(n,...arguments)};switch(e){case 0:case 1:throw new RangeError(`Invalid arity ${e}`);case 2:return function(n,r){return arguments.length>=2?t(n,r):function(a){return t(a,n)}};case 3:return function(n,r,a){return arguments.length>=3?t(n,r,a):function(o){return t(o,n,r)}};case 4:return function(n,r,a,o){return arguments.length>=4?t(n,r,a,o):function(l){return t(l,n,r,a)}};case 5:return function(n,r,a,o,l){return arguments.length>=5?t(n,r,a,o,l):function(d){return t(d,n,r,a,o)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);const n=arguments;return function(r){return t(r,...n)}}}},Ge=e=>e,H0=e=>()=>e,q3=H0(!0),ho=H0(!1),Wz=H0(void 0),Zp=Wz;function F(e,t,n,r,a,o,l,d,h){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return a(r(n(t(e))));case 6:return o(a(r(n(t(e)))));case 7:return l(o(a(r(n(t(e))))));case 8:return d(l(o(a(r(n(t(e)))))));case 9:return h(d(l(o(a(r(n(t(e))))))));default:{let p=arguments[0];for(let S=1;S<arguments.length;S++)p=arguments[S](p);return p}}}const Ol=e=>(t,n)=>t===n||e(t,n),NG=(e,t)=>e===t,MG=()=>NG,IG=MG(),Jz=M(2,(e,t)=>Ol((n,r)=>e(t(n),t(r)))),LG=Jz(IG,e=>e.getTime()),FG=e=>Ol((t,n)=>{if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0});let zG="3.15.5";const B0=()=>zG,dS=`effect/GlobalValue/globalStoreId/${B0()}`;let np;const xt=(e,t)=>(np||(globalThis[dS]??(globalThis[dS]=new Map),np=globalThis[dS]),np.has(e)||np.set(e,t()),np.get(e)),UG=e=>e instanceof Set,Fs=e=>typeof e=="string",pc=e=>typeof e=="number",mf=e=>typeof e=="boolean",V0=e=>typeof e=="bigint",lv=e=>typeof e=="symbol",um=qG,PG=e=>e===void 0,jG=e=>!1,K0=e=>typeof e=="object"&&e!==null,To=e=>K0(e)||um(e),Me=M(2,(e,t)=>To(e)&&t in e),_A=M(2,(e,t)=>Me(e,"_tag")&&e._tag===t),Gd=e=>e==null,HG=e=>e!=null,BG=e=>e instanceof Uint8Array,Xz=e=>e instanceof Date,bA=e=>Me(e,Symbol.iterator),VG=e=>K0(e)&&!Array.isArray(e),Zz=e=>Me(e,"then")&&um(e.then),G0=e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`;let eU=class tU{constructor(t){b(this,"self");b(this,"called",!1);this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new tU(this.self)}};const KG=335903614,GG=4150755663,QG=1481765933,YG=1284865837,WG=9007199254740992,JG=134217728;class XG{constructor(t,n,r,a){b(this,"_state");return Gd(n)&&Gd(t)?(n=Math.random()*4294967295>>>0,t=0):Gd(n)&&(n=t,t=0),Gd(a)&&Gd(r)?(a=this._state?this._state[3]:GG,r=this._state?this._state[2]:KG):Gd(a)&&(a=r,r=0),this._state=new Int32Array([0,0,r>>>0,((a||0)|1)>>>0]),this._next(),N3(this._state,this._state[0],this._state[1],t>>>0,n>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}integer(t){return Math.round(this.number()*Number.MAX_SAFE_INTEGER)%t}number(){const t=(this._next()&67108863)*1,n=(this._next()&134217727)*1;return(t*JG+n)/WG}_next(){const t=this._state[0]>>>0,n=this._state[1]>>>0;ZG(this._state,t,n,QG,YG),N3(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let r=t>>>18,a=(n>>>18|t<<14)>>>0;r=(r^t)>>>0,a=(a^n)>>>0;const o=(a>>>27|r<<5)>>>0,l=t>>>27,d=(-l>>>0&31)>>>0;return(o>>>l|o<<d)>>>0}}function ZG(e,t,n,r,a){let o=(n>>>16)*(a&65535)>>>0,l=(n&65535)*(a>>>16)>>>0,d=(n&65535)*(a&65535)>>>0,h=(n>>>16)*(a>>>16)+((l>>>16)+(o>>>16))>>>0;l=l<<16>>>0,d=d+l>>>0,d>>>0<l>>>0&&(h=h+1>>>0),o=o<<16>>>0,d=d+o>>>0,d>>>0<o>>>0&&(h=h+1>>>0),h=h+Math.imul(n,r)>>>0,h=h+Math.imul(t,a)>>>0,e[0]=h,e[1]=d}function N3(e,t,n,r,a){let o=t+r>>>0;const l=n+a>>>0;l>>>0<n>>>0&&(o=o+1|0),e[0]=o,e[1]=l}const nC=Symbol.for("effect/Utils/YieldWrap");var jy;class fm{constructor(t){Ir(this,jy);Mu(this,jy,t)}[nC](){return Ne(this,jy)}}jy=new WeakMap;function nU(e){if(typeof e=="object"&&e!==null&&nC in e)return e[nC]();throw new Error(G0("yieldWrapGet"))}const ja=xt("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),rU={effect_internal_function:e=>e()},eQ={effect_internal_function:e=>{try{return e()}finally{}}};var CL;const tQ=((CL=rU.effect_internal_function(()=>new Error().stack))==null?void 0:CL.includes("effect_internal_function"))===!0,_n=tQ?rU.effect_internal_function:eQ.effect_internal_function,nQ=(function*(){}).constructor,rQ=e=>To(e)&&e.constructor===nQ,lR=xt(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),gt=Symbol.for("effect/Hash"),Ae=e=>{if(ja.enabled===!0)return 0;switch(typeof e){case"number":return SA(e);case"bigint":return Xn(e.toString(10));case"boolean":return Xn(String(e));case"symbol":return Xn(String(e));case"string":return Xn(e);case"undefined":return Xn("undefined");case"function":case"object":return e===null?Xn("null"):e instanceof Date?Ae(e.toISOString()):e instanceof URL?Ae(e.href):sQ(e)?e[gt]():Q0(e);default:throw new Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},Q0=e=>(lR.has(e)||lR.set(e,SA(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),lR.get(e)),ot=e=>t=>t*53^e,Y0=e=>e&3221225471|e>>>1&1073741824,sQ=e=>Me(e,gt),SA=e=>{if(e!==e||e===1/0)return 0;let t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)t^=e/=4294967295;return Y0(t)},Xn=e=>{let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return Y0(t)},aQ=(e,t)=>{let n=12289;for(let r=0;r<t.length;r++)n^=F(Xn(t[r]),ot(Ae(e[t[r]])));return Y0(n)},sU=e=>aQ(e,Object.keys(e)),Qy=e=>{let t=6151;for(let n=0;n<e.length;n++)t=F(t,ot(Ae(e[n])));return Y0(t)},un=function(){if(arguments.length===1){const n=arguments[0];return function(r){return Object.defineProperty(n,gt,{value(){return r},enumerable:!1}),r}}const e=arguments[0],t=arguments[1];return Object.defineProperty(e,gt,{value(){return t},enumerable:!1}),t},dt=Symbol.for("effect/Equal");function at(){return arguments.length===1?e=>uv(e,arguments[0]):uv(arguments[0],arguments[1])}function uv(e,t){if(e===t)return!0;const n=typeof e;if(n!==typeof t)return!1;if(n==="object"||n==="function"){if(e!==null&&t!==null){if(fv(e)&&fv(t))return Ae(e)===Ae(t)&&e[dt](t)?!0:ja.enabled&&ja.tester?ja.tester(e,t):!1;if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString();if(e instanceof URL&&t instanceof URL)return e.href===t.href}if(ja.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((r,a)=>uv(r,t[a]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const r=Object.keys(e),a=Object.keys(t);if(r.length===a.length){for(const o of r)if(!(o in t&&uv(e[o],t[o])))return ja.tester?ja.tester(e,t):!1;return!0}}return ja.tester?ja.tester(e,t):!1}}return ja.enabled&&ja.tester?ja.tester(e,t):!1}const fv=e=>Me(e,dt),vA=()=>at,cn=Symbol.for("nodejs.util.inspect.custom"),Vn=e=>{try{if(Me(e,"toJSON")&&um(e.toJSON)&&e.toJSON.length===0)return e.toJSON();if(Array.isArray(e))return e.map(Vn)}catch{return{}}return ey(e)},xn=e=>JSON.stringify(e,null,2);let iQ=class{[cn](){return this.toJSON()}toString(){return xn(this.toJSON())}};const gf=(e,t=2)=>{if(typeof e=="string")return e;try{return typeof e=="object"?aU(e,t):String(e)}catch{return String(e)}},aU=(e,t)=>{let n=[];const r=JSON.stringify(e,(a,o)=>typeof o=="object"&&o!==null?n.includes(o)?void 0:n.push(o)&&(nf.fiberRefs!==void 0&&iU(o)?o[wA](nf.fiberRefs):o):o,t);return n=void 0,r},wA=Symbol.for("effect/Inspectable/Redactable"),iU=e=>typeof e=="object"&&e!==null&&wA in e,nf=xt("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),oQ=(e,t)=>{const n=nf.fiberRefs;nf.fiberRefs=e;try{return t()}finally{nf.fiberRefs=n}},ey=e=>iU(e)&&nf.fiberRefs!==void 0?e[wA](nf.fiberRefs):e,Fe=(e,t)=>{switch(t.length){case 0:return e;case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let n=e;for(let r=0,a=t.length;r<a;r++)n=t[r](n);return n}}},qp="Async",Yy="Commit",jr="Failure",NS="OnFailure",dv="OnSuccess",hv="OnSuccessAndFailure",Hr="Success",oU="Sync",cQ="Tag",dm="UpdateRuntimeFlags",mv="While",Np="Iterator",cU="WithRuntime",MS="Yield",EA="RevertFlags",lQ=Symbol.for("effect/Effect"),rC=Symbol.for("effect/Stream"),uQ=Symbol.for("effect/Sink"),fQ=Symbol.for("effect/Channel"),pf={_R:e=>e,_E:e=>e,_A:e=>e,_V:B0()},dQ={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},hQ={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},Wy={[lQ]:pf,[rC]:pf,[uQ]:dQ,[fQ]:hQ,[dt](e){return this===e},[gt](){return un(this,Q0(this))},[Symbol.iterator](){return new eU(new fm(this))},pipe(){return Fe(this,arguments)}},TA={[gt](){return un(this,sU(this))},[dt](e){const t=Object.keys(this),n=Object.keys(e);if(t.length!==n.length)return!1;for(const r of t)if(!(r in e&&at(this[r],e[r])))return!1;return!0}},Jy={...Wy,_op:Yy},mQ={...Jy,...TA},gQ=function(){function e(){}return e.prototype=Jy,e}(),lU=Symbol.for("effect/Option"),uU={...Wy,[lU]:{_A:e=>e},[cn](){return this.toJSON()},toString(){return xn(this.toJSON())}},pQ=Object.assign(Object.create(uU),{_tag:"Some",_op:"Some",[dt](e){return RA(e)&&dU(e)&&at(this.value,e.value)},[gt](){return un(this,ot(Ae(this._tag))(Ae(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:Vn(this.value)}}}),yQ=Ae("None"),_Q=Object.assign(Object.create(uU),{_tag:"None",_op:"None",[dt](e){return RA(e)&&fU(e)},[gt](){return yQ},toJSON(){return{_id:"Option",_tag:this._tag}}}),RA=e=>Me(e,lU),fU=e=>e._tag==="None",dU=e=>e._tag==="Some",CA=Object.create(_Q),gv=e=>{const t=Object.create(pQ);return t.value=e,t},hU=Symbol.for("effect/Either"),mU={...Wy,[hU]:{_R:e=>e},[cn](){return this.toJSON()},toString(){return xn(this.toJSON())}},bQ=Object.assign(Object.create(mU),{_tag:"Right",_op:"Right",[dt](e){return kA(e)&&pU(e)&&at(this.right,e.right)},[gt](){return ot(Ae(this._tag))(Ae(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:Vn(this.right)}}}),SQ=Object.assign(Object.create(mU),{_tag:"Left",_op:"Left",[dt](e){return kA(e)&&gU(e)&&at(this.left,e.left)},[gt](){return ot(Ae(this._tag))(Ae(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:Vn(this.left)}}}),kA=e=>Me(e,hU),gU=e=>e._tag==="Left",pU=e=>e._tag==="Right",vQ=e=>{const t=Object.create(SQ);return t.left=e,t},wQ=e=>{const t=Object.create(bQ);return t.right=e,t},rt=wQ,et=vQ,EQ=e=>{if(um(e))try{return rt(e())}catch(t){return et(t)}else try{return rt(e.try())}catch(t){return et(e.catch(t))}},yU=kA,Lr=gU,so=pU,TQ=M(2,(e,{onLeft:t,onRight:n})=>Lr(e)?et(t(e.left)):rt(n(e.right))),Xy=M(2,(e,t)=>Lr(e)?et(t(e.left)):rt(e.right)),RQ=M(2,(e,t)=>so(e)?rt(t(e.right)):et(e.left)),as=M(2,(e,{onLeft:t,onRight:n})=>Lr(e)?t(e.left):n(e.right)),CQ=as({onLeft:Ge,onRight:Ge}),_U=M(2,(e,t)=>{if(so(e))return e.right;throw t(e.left)}),kQ=_U(()=>new Error("getOrThrow called on a Left")),bU=e=>e.length>0,SU=e=>(t,n)=>t===n?0:e(t,n),AQ=SU((e,t)=>e<t?-1:1),vU=M(2,(e,t)=>SU((n,r)=>e(t(n),t(r)))),OQ=e=>M(2,(t,n)=>e(t,n)===1),be=()=>CA,Ce=gv,DQ=RA,Mn=fU,mn=dU,on=M(2,(e,{onNone:t,onSome:n})=>Mn(e)?t():n(e.value)),Dn=M(2,(e,t)=>Mn(e)?t():e.value),lc=M(2,(e,t)=>Mn(e)?t():e),xQ=M(2,(e,t)=>Mn(e)?Ce(t()):e),Yf=e=>e==null?be():Ce(e),Qa=Dn(Wz),wU=e=>(...t)=>{try{return Ce(e(...t))}catch{return be()}},rf=M(2,(e,t)=>Mn(e)?be():Ce(t(e.value))),hm=M(2,(e,t)=>Mn(e)?be():t(e.value)),$Q=M(2,(e,t)=>Mn(e)?be():Yf(t(e.value))),qQ=hm,NQ=M(2,(e,t)=>qQ(e,n=>t(n)?gv(n):CA)),MQ=e=>Ol((t,n)=>Mn(t)?Mn(n):Mn(n)?!1:e(t.value,n.value)),IQ=e=>M(2,(t,n)=>Mn(t)?!1:e(t.value,n)),LQ=vA(),FQ=IQ(LQ),zQ=M(2,(e,t)=>Mn(e)?!1:t(e.value)),pv=e=>(t,n)=>Mn(t)?n:Mn(n)?t:Ce(e(t.value,n.value)),UQ=(...e)=>e,PQ=e=>{const n=e[Symbol.iterator]().next();return n.done?be():Ce(n.value)},sC=e=>{const n=e[Symbol.iterator]().next();if(n.done)throw new Error("unsafeHead: empty iterable");return n.value},jQ=M(2,(e,t)=>{let n=0;for(const r of e){const a=t(r,n);if(mf(a)){if(a)return Ce(r)}else if(mn(a))return a;n++}return be()}),HQ={[Symbol.iterator](){return BQ}},BQ={next(){return{done:!0,value:void 0}}},VQ=()=>HQ,KQ=M(2,(e,t)=>({[Symbol.iterator](){const n=e[Symbol.iterator]();let r=0;return{next(){let a=n.next();for(;!a.done;){if(t(a.value,r++))return{done:!1,value:a.value};a=n.next()}return{done:!0,value:void 0}}}}})),W0=e=>new Array(e),GQ=M(2,(e,t)=>{const n=Math.max(1,Math.floor(e)),r=new Array(n);for(let a=0;a<n;a++)r[a]=t(a);return r}),an=e=>Array.isArray(e)?e:Array.from(e),AA=e=>Array.isArray(e)?e:[e],QQ=M(2,(e,{onEmpty:t,onNonEmpty:n})=>In(e)?n(e):t()),YQ=M(2,(e,{onEmpty:t,onNonEmpty:n})=>In(e)?n(Ms(e),yf(e)):t()),yv=M(2,(e,t)=>[t,...e]),WQ=M(2,(e,t)=>[...e,t]),OA=M(2,(e,t)=>an(e).concat(an(t))),JQ=Array.isArray,XQ=e=>e.length===0,ZQ=XQ,IS=bU,In=bU,EU=(e,t)=>e<0||e>=t.length,eY=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),tY=M(2,(e,t)=>{const n=Math.floor(t);return EU(n,e)?be():Ce(e[n])}),TU=M(2,(e,t)=>{const n=Math.floor(t);if(EU(n,e))throw new Error(`Index ${n} out of bounds`);return e[n]}),Mp=tY(0),Ms=TU(0),nY=e=>In(e)?Ce(RU(e)):be(),RU=e=>e[e.length-1],yf=e=>e.slice(1),rY=(e,t)=>{let n=0;for(const r of e){if(!t(r,n))break;n++}return n},CU=M(2,(e,t)=>AU(e,rY(e,t))),sY=M(2,(e,t)=>{const n=an(e);return n.slice(eY(t,n),n.length)}),aY=jQ,M3=e=>Array.from(e).reverse(),ty=M(2,(e,t)=>{const n=Array.from(e);return n.sort(t),n}),I3=M(2,(e,t)=>iY(e,t,UQ)),iY=M(3,(e,t,n)=>{const r=an(e),a=an(t);if(In(r)&&In(a)){const o=[n(Ms(r),Ms(a))],l=Math.min(r.length,a.length);for(let d=1;d<l;d++)o[d]=n(r[d],a[d]);return o}return[]}),oY=e=>M(2,(t,n)=>{for(const r of t)if(e(n,r))return!0;return!1}),kU=vA(),AU=M(2,(e,t)=>{const n=Array.from(e),r=Math.floor(t);return In(n)?r>=1?cY(n,r):[[],n]:[n,[]]}),cY=M(2,(e,t)=>{const n=Math.max(1,Math.floor(t));return n>=e.length?[_p(e),[]]:[yv(e.slice(1,n),Ms(e)),e.slice(n)]}),lY=M(2,(e,t)=>CU(e,(n,r)=>!t(n,r))),_p=e=>e.slice(),uY=M(3,(e,t,n)=>{const r=an(e),a=an(t);return In(r)?In(a)?DU(n)(OA(r,a)):r:a}),LS=M(2,(e,t)=>uY(e,t,kU)),fY=e=>{const t=oY(e);return M(2,(n,r)=>an(n).filter(a=>t(r,a)))},dY=fY(kU),Ll=()=>[],Va=e=>[e],sf=M(2,(e,t)=>e.map(t)),_v=M(2,(e,t)=>{if(ZQ(e))return[];const n=[];for(let r=0;r<e.length;r++){const a=t(e[r],r);for(let o=0;o<a.length;o++)n.push(a[o])}return n}),hY=_v(Ge),OU=M(2,(e,t)=>{const n=an(e),r=[];for(let a=0;a<n.length;a++){const o=t(n[a],a);mn(o)&&r.push(o.value)}return r}),mY=M(2,(e,t)=>{const n=an(e),r=[];for(let a=0;a<n.length;a++)t(n[a],a)&&r.push(n[a]);return r}),DA=M(3,(e,t,n)=>an(e).reduce((r,a,o)=>n(r,a,o),t)),L3=(e,t)=>{const n=[];let r=e,a;for(;mn(a=t(r));){const[o,l]=a.value;n.push(o),r=l}return n},Zy=FG,DU=M(2,(e,t)=>{const n=an(e);if(In(n)){const r=[Ms(n)],a=yf(n);for(const o of a)r.every(l=>!t(o,l))&&r.push(o);return r}return[]}),gY=e=>DU(e,vA()),mm=M(2,(e,t)=>an(e).join(t)),xU=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return xU(e,t.from)}},Ai=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),xA=e=>{let t=!1,n;return()=>(t||(n=e(),t=!0),n)},$U=e=>{try{return e.toISOString()}catch{return String(e)}},ni=(e,t=!0)=>{if(Array.isArray(e))return`[${e.map(n=>ni(n,t)).join(",")}]`;if(Xz(e))return $U(e);if(Me(e,"toString")&&um(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();if(Fs(e))return JSON.stringify(e);if(pc(e)||e==null||mf(e)||lv(e))return String(e);if(V0(e))return String(e)+"n";if(bA(e))return`${e.constructor.name}(${ni(Array.from(e),t)})`;try{t&&JSON.stringify(e);const n=`{${Ai(e).map(a=>`${Fs(a)?JSON.stringify(a):String(a)}:${ni(e[a],!1)}`).join(",")}}`,r=e.constructor.name;return e.constructor!==Object.prototype.constructor?`${r}(${n})`:n}catch{return"<circular structure>"}},$A=e=>typeof e=="string"?JSON.stringify(e):String(e),qU=e=>Array.isArray(e),pY=e=>!Array.isArray(e),F3=e=>`[${$A(e)}]`,NU=e=>qU(e)?e.map(F3).join(""):F3(e),Ac=(e,t,n,r)=>{let a=e;return n&&In(n)&&(a+=`
at path: ${NU(n)}`),t!==void 0&&(a+=`
details: ${t}`),r&&(a+=`
schema (${r._tag}): ${r}`),a},MU=(e,t,n)=>Ac("Unsupported schema",e,t,n),yY=(e,t)=>MU("Cannot build an Equivalence",t,e),IU=(e,t,n)=>Ac("Unsupported schema or overlapping types",`cannot extend ${e} with ${t}`,n),ny=e=>MU(void 0,void 0,e),_Y=e=>Ac("Unsupported key schema",void 0,void 0,e),bY=e=>Ac("Unsupported literal",`literal value: ${ni(e)}`),z3=e=>Ac("Duplicate index signature",`${e} index signature`),SY=Ac("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),vY=Ac("Invalid element","A required element cannot follow an optional element. ts(1257)"),U3=e=>Ac("Duplicate property signature transformation",`Duplicate key ${ni(e)}`),LU=e=>Ac("Duplicate property signature",`Duplicate key ${ni(e)}`),wY=Symbol.for("effect/SchemaId/DateFromSelf"),EY=Symbol.for("effect/SchemaId/Int"),TY=Symbol.for("effect/SchemaId/Between"),xh=AQ,bv=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),FU=Symbol.for("effect/annotation/Brand"),RY=Symbol.for("effect/annotation/SchemaId"),zU=Symbol.for("effect/annotation/Message"),qA=Symbol.for("effect/annotation/MissingMessage"),NA=Symbol.for("effect/annotation/Identifier"),Ro=Symbol.for("effect/annotation/Title"),gh=Symbol.for("effect/annotation/AutoTitle"),e_=Symbol.for("effect/annotation/Description"),UU=Symbol.for("effect/annotation/Examples"),PU=Symbol.for("effect/annotation/Default"),jU=Symbol.for("effect/annotation/JSONSchema"),HU=Symbol.for("effect/annotation/Arbitrary"),BU=Symbol.for("effect/annotation/Pretty"),MA=Symbol.for("effect/annotation/Equivalence"),CY=Symbol.for("effect/annotation/Documentation"),VU=Symbol.for("effect/annotation/Concurrency"),KU=Symbol.for("effect/annotation/Batching"),GU=Symbol.for("effect/annotation/ParseIssueTitle"),QU=Symbol.for("effect/annotation/ParseOptions"),YU=Symbol.for("effect/annotation/DecodingFallback"),Sv=Symbol.for("effect/annotation/Surrogate"),kY=Symbol.for("effect/annotation/StableFilter"),Es=M(2,(e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?Ce(e.annotations[t]):be()),WU=Es(FU),AY=Es(zU),OY=Es(qA),JU=Es(Ro),XU=Es(gh),J0=Es(NA),ZU=Es(e_),DY=Es(VU),xY=Es(KU),$Y=Es(GU),qY=Es(QU),NY=Es(YU),gm=Es(Sv),MY=Es(kY),IY=e=>zQ(MY(e),t=>t===!0),X0=Symbol.for("effect/annotation/JSONIdentifier"),LY=Es(X0),FY=e=>lc(LY(e),()=>J0(e)),zY=Symbol.for("effect/schema/ParseJson");class Z0{constructor(t,n,r,a={}){b(this,"typeParameters");b(this,"decodeUnknown");b(this,"encodeUnknown");b(this,"annotations");b(this,"_tag","Declaration");this.typeParameters=t,this.decodeUnknown=n,this.encodeUnknown=r,this.annotations=a}toString(){return Dn(qi(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(t=>t.toJSON()),annotations:vr(this.annotations)}}}const Co=e=>t=>t._tag===e;let vv=class{constructor(t,n={}){b(this,"literal");b(this,"annotations");b(this,"_tag","Literal");this.literal=t,this.annotations=n}toString(){return Dn(qi(this),()=>ni(this.literal))}toJSON(){return{_tag:this._tag,literal:V0(this.literal)?String(this.literal):this.literal,annotations:vr(this.annotations)}}};const Ip=Co("Literal"),UY=new vv(null);class eP{constructor(t,n={}){b(this,"symbol");b(this,"annotations");b(this,"_tag","UniqueSymbol");this.symbol=t,this.annotations=n}toString(){return Dn(qi(this),()=>ni(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:vr(this.annotations)}}}class PY{constructor(t={}){b(this,"annotations");b(this,"_tag","UndefinedKeyword");this.annotations=t}toString(){return Jl(this)}toJSON(){return{_tag:this._tag,annotations:vr(this.annotations)}}}const $h=new PY({[Ro]:"undefined"});class jY{constructor(t={}){b(this,"annotations");b(this,"_tag","VoidKeyword");this.annotations=t}toString(){return Jl(this)}toJSON(){return{_tag:this._tag,annotations:vr(this.annotations)}}}const HY=new jY({[Ro]:"void"});class BY{constructor(t={}){b(this,"annotations");b(this,"_tag","NeverKeyword");this.annotations=t}toString(){return Jl(this)}toJSON(){return{_tag:this._tag,annotations:vr(this.annotations)}}}const ew=new BY({[Ro]:"never"}),VY=Co("NeverKeyword");class KY{constructor(t={}){b(this,"annotations");b(this,"_tag","UnknownKeyword");this.annotations=t}toString(){return Jl(this)}toJSON(){return{_tag:this._tag,annotations:vr(this.annotations)}}}const tP=new KY({[Ro]:"unknown"});class GY{constructor(t={}){b(this,"annotations");b(this,"_tag","AnyKeyword");this.annotations=t}toString(){return Jl(this)}toJSON(){return{_tag:this._tag,annotations:vr(this.annotations)}}}const nP=new GY({[Ro]:"any"});class QY{constructor(t={}){b(this,"annotations");b(this,"_tag","StringKeyword");this.annotations=t}toString(){return Jl(this)}toJSON(){return{_tag:this._tag,annotations:vr(this.annotations)}}}const aC=new QY({[Ro]:"string",[e_]:"a string"}),iC=Co("StringKeyword");class YY{constructor(t={}){b(this,"annotations");b(this,"_tag","NumberKeyword");this.annotations=t}toString(){return Jl(this)}toJSON(){return{_tag:this._tag,annotations:vr(this.annotations)}}}const oC=new YY({[Ro]:"number",[e_]:"a number"}),P3=Co("NumberKeyword");class WY{constructor(t={}){b(this,"annotations");b(this,"_tag","BooleanKeyword");this.annotations=t}toString(){return Jl(this)}toJSON(){return{_tag:this._tag,annotations:vr(this.annotations)}}}const cC=new WY({[Ro]:"boolean",[e_]:"a boolean"}),j3=Co("BooleanKeyword"),IA=Co("SymbolKeyword");let JY=class{constructor(t,n={}){b(this,"enums");b(this,"annotations");b(this,"_tag","Enums");this.enums=t,this.annotations=n}toString(){return Dn(qi(this),()=>`<enum ${this.enums.length} value(s): ${this.enums.map(([t,n])=>JSON.stringify(n)).join(" | ")}>`)}toJSON(){return{_tag:this._tag,enums:this.enums,annotations:vr(this.annotations)}}},t_=class{constructor(t,n={}){b(this,"type");b(this,"annotations");this.type=t,this.annotations=n}toJSON(){return{type:this.type.toJSON(),annotations:vr(this.annotations)}}toString(){return String(this.type)}};class Wl extends t_{constructor(n,r,a={}){super(n,a);b(this,"isOptional");this.isOptional=r}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:vr(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}}const tw=e=>e.map(t=>t.type);class n_{constructor(t,n,r,a={}){b(this,"elements");b(this,"rest");b(this,"isReadonly");b(this,"annotations");b(this,"_tag","TupleType");this.elements=t,this.rest=n,this.isReadonly=r,this.annotations=a;let o=!1,l=!1;for(const d of t)if(d.isOptional)o=!0;else if(o){l=!0;break}if(l||o&&n.length>1)throw new Error(vY)}toString(){return Dn(qi(this),()=>XY(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(t=>t.toJSON()),rest:this.rest.map(t=>t.toJSON()),isReadonly:this.isReadonly,annotations:vr(this.annotations)}}}const XY=e=>{const t=e.elements.map(String).join(", ");return YQ(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(n,r)=>{const a=String(n),o=a.includes(" | ")?`(${a})`:a;if(r.length>0){const l=r.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${o}[], ${l}]`:`readonly [...${o}[], ${l}]`}else return e.elements.length>0?`readonly [${t}, ...${o}[]]`:`ReadonlyArray<${a}>`}})};class Wn extends Wl{constructor(n,r,a,o,l){super(r,a,l);b(this,"name");b(this,"isReadonly");this.name=n,this.isReadonly=o}toString(){return(this.isReadonly?"readonly ":"")+String(this.name)+(this.isOptional?"?":"")+": "+this.type}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:vr(this.annotations)}}}const rP=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return rP(e.from)}return!1};class pm{constructor(t,n,r){b(this,"type");b(this,"isReadonly");b(this,"parameter");if(this.type=n,this.isReadonly=r,rP(t))this.parameter=t;else throw new Error(SY)}toString(){return(this.isReadonly?"readonly ":"")+`[x: ${this.parameter}]: ${this.type}`}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}}class ri{constructor(t,n,r={}){b(this,"annotations");b(this,"_tag","TypeLiteral");b(this,"propertySignatures");b(this,"indexSignatures");this.annotations=r;const a={};for(let l=0;l<t.length;l++){const d=t[l].name;if(Object.prototype.hasOwnProperty.call(a,d))throw new Error(LU(d));a[d]=null}const o={string:!1,symbol:!1};for(let l=0;l<n.length;l++){const d=ry(n[l].parameter);if(iC(d)){if(o.string)throw new Error(z3("string"));o.string=!0}else if(IA(d)){if(o.symbol)throw new Error(z3("symbol"));o.symbol=!0}}this.propertySignatures=t,this.indexSignatures=n}toString(){return Dn(qi(this),()=>ZY(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(t=>t.toJSON()),indexSignatures:this.indexSignatures.map(t=>t.toJSON()),annotations:vr(this.annotations)}}}const H3=e=>e.map(String).join("; "),ZY=e=>{if(e.propertySignatures.length>0){const t=e.propertySignatures.map(String).join("; ");return e.indexSignatures.length>0?`{ ${t}; ${H3(e.indexSignatures)} }`:`{ ${t} }`}else return e.indexSignatures.length>0?`{ ${H3(e.indexSignatures)} }`:"{}"},B3=Co("TypeLiteral"),eW=ty(vU(xh,e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),tW={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},sP=e=>_v(e,t=>FA(t)?sP(t.types):[t]),nW=e=>{const t=eW(e),n=[],r={},a=[];for(const o of t)switch(o._tag){case"NeverKeyword":break;case"AnyKeyword":return[nP];case"UnknownKeyword":return[tP];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":{r[o._tag]||(r[o._tag]=o,n.push(o));break}case"Literal":{const l=typeof o.literal;switch(l){case"string":case"number":case"bigint":case"boolean":{const d=tW[l];!r[d]&&!a.includes(o.literal)&&(a.push(o.literal),n.push(o));break}case"object":{a.includes(o.literal)||(a.push(o.literal),n.push(o));break}}break}case"UniqueSymbol":{!r.SymbolKeyword&&!a.includes(o.symbol)&&(a.push(o.symbol),n.push(o));break}case"TupleType":{r.ObjectKeyword||n.push(o);break}case"TypeLiteral":{o.propertySignatures.length===0&&o.indexSignatures.length===0?r["{}"]||(r["{}"]=o,n.push(o)):r.ObjectKeyword||n.push(o);break}default:n.push(o)}return n};var ac;let zr=(ac=class{constructor(t,n={}){b(this,"types");b(this,"annotations");b(this,"_tag","Union");this.types=t,this.annotations=n}toString(){return Dn(qi(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(t=>t.toJSON()),annotations:vr(this.annotations)}}},b(ac,"make",(t,n)=>LA(t)?new ac(t,n):t.length===1?t[0]:ew),b(ac,"unify",(t,n)=>ac.make(nW(sP(t)),n)),ac);const rW=(e,t)=>e.map(t),LA=e=>e.length>1,FA=Co("Union"),uR=xt(Symbol.for("effect/Schema/AST/toJSONMemoMap"),()=>new WeakMap);class _f{constructor(t,n={}){b(this,"f");b(this,"annotations");b(this,"_tag","Suspend");this.f=t,this.annotations=n,this.f=xA(t)}toString(){return qi(this).pipe(lc(()=>hm(wU(this.f)(),t=>qi(t))),Dn(()=>"<suspended schema>"))}toJSON(){const t=this.f();let n=uR.get(t);return n||(uR.set(t,{_tag:this._tag}),n={_tag:this._tag,ast:t.toJSON(),annotations:vr(this.annotations)},uR.set(t,n),n)}}let r_=class{constructor(t,n,r={}){b(this,"from");b(this,"filter");b(this,"annotations");b(this,"_tag","Refinement");this.from=t,this.filter=n,this.annotations=r}toString(){return J0(this).pipe(Dn(()=>on(fP(this),{onNone:()=>`{ ${this.from} | filter }`,onSome:t=>ph(this.from)?String(this.from)+" & "+t:t})))}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:vr(this.annotations)}}};const ph=Co("Refinement"),fR={};let Xa=class{constructor(t,n,r,a={}){b(this,"from");b(this,"to");b(this,"transformation");b(this,"annotations");b(this,"_tag","Transformation");this.from=t,this.to=n,this.transformation=r,this.annotations=a}toString(){return Dn(qi(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:vr(this.annotations)}}};const sW=Co("Transformation");class aP{constructor(t,n){b(this,"decode");b(this,"encode");b(this,"_tag","FinalTransformation");this.decode=t,this.encode=n}}const aW=e=>t=>t._tag===e;class iW{constructor(){b(this,"_tag","ComposeTransformation")}}const zA=new iW;let oW=class{constructor(t,n,r,a){b(this,"from");b(this,"to");b(this,"decode");b(this,"encode");this.from=t,this.to=n,this.decode=r,this.encode=a}};const cW=e=>e.decode===Ge&&e.encode===Ge;class wv{constructor(t){b(this,"propertySignatureTransformations");b(this,"_tag","TypeLiteralTransformation");this.propertySignatureTransformations=t;const n={},r={};for(const a of t){const o=a.from;if(n[o])throw new Error(U3(o));n[o]=!0;const l=a.to;if(r[l])throw new Error(U3(l));r[l]=!0}}}const lC=aW("TypeLiteralTransformation"),bf=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={...e.annotations,...t},a=gm(e);return mn(a)&&(r[Sv]=bf(a.value,t)),n.annotations.value=r,Object.create(Object.getPrototypeOf(e),n)},lW="[\\s\\S]*",uW="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?",iP=(e,t)=>{switch(e._tag){case"Literal":return bv(String(e.literal));case"StringKeyword":return lW;case"NumberKeyword":return uW;case"TemplateLiteral":return oP(e);case"Union":return e.types.map(n=>iP(n)).join("|")}},fW=(e,t,n,r)=>FA(e)?`(${t})`:t,oP=(e,t,n)=>{let r="";if(e.head!==""){const a=bv(e.head);r+=a}for(const a of e.spans){const o=iP(a.type);if(r+=fW(a.type,o),a.literal!==""){const l=bv(a.literal);r+=l}}return r},cP=e=>new RegExp(`^${oP(e)}$`),FS=e=>{const t=gm(e);if(mn(t))return FS(t.value);switch(e._tag){case"TypeLiteral":return e.propertySignatures.slice();case"Suspend":return FS(e.f());case"Refinement":return FS(e.from)}return Pu(e).map(n=>Qu(e,n))},zS=e=>{switch(e._tag){case"TupleType":{let t=!1,n=[];for(const r of e.elements)r.isOptional&&(t=!0),n.push(r.type);return t&&n.push($h),n=n.concat(tw(e.rest)),zr.make(n)}case"Refinement":return zS(e.from);case"Union":return zr.make(e.types.map(zS));case"Suspend":return zS(e.f())}throw new Error(ny(e))},lP=(e,t)=>{const n=aY(e.propertySignatures,r=>r.name===t);if(mn(n))return n.value;if(Fs(t)){let r;for(const a of e.indexSignatures){const o=ry(a.parameter);switch(o._tag){case"TemplateLiteral":{if(cP(o).test(t))return new Wn(t,a.type,!1,!0);break}case"StringKeyword":r===void 0&&(r=new Wn(t,a.type,!1,!0))}}if(r)return r}else if(lv(t))for(const r of e.indexSignatures){const a=ry(r.parameter);if(IA(a))return new Wn(t,r.type,!1,!0)}},Qu=(e,t)=>{const n=gm(e);if(mn(n))return Qu(n.value,t);switch(e._tag){case"TypeLiteral":{const r=lP(e,t);if(r)return r;break}case"Union":return new Wn(t,zr.make(e.types.map(r=>Qu(r,t).type)),!1,!0);case"Suspend":return Qu(e.f(),t);case"Refinement":return Qu(e.from,t)}throw new Error(ny(e))},Pu=e=>{const t=gm(e);if(mn(t))return Pu(t.value);switch(e._tag){case"TypeLiteral":return e.propertySignatures.map(n=>n.name);case"Union":return e.types.slice(1).reduce((n,r)=>dY(n,Pu(r)),Pu(e.types[0]));case"Suspend":return Pu(e.f());case"Refinement":return Pu(e.from);case"Transformation":return Pu(e.to)}return[]},V3=(e,t)=>{const n=[],r=[],a=o=>{switch(o._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":r.push(new pm(o,t,!0));break;case"Literal":if(Fs(o.literal)||pc(o.literal))n.push(new Wn(o.literal,t,!1,!0));else throw new Error(bY(o.literal));break;case"Enums":{for(const[l,d]of o.enums)n.push(new Wn(d,t,!1,!0));break}case"UniqueSymbol":n.push(new Wn(o.symbol,t,!1,!0));break;case"Union":o.types.forEach(a);break;default:throw new Error(_Y(o))}};return a(e),{propertySignatures:n,indexSignatures:r}},nc=(e,t)=>{const n=gm(e);if(mn(n))return nc(n.value,t);switch(e._tag){case"TypeLiteral":{const r=[],a={};for(const o of e.propertySignatures)a[o.name]=null,t.includes(o.name)&&r.push(o);for(const o of t)if(!(o in a)){const l=lP(e,o);l&&r.push(l)}return new ri(r,[])}case"Union":return new ri(t.map(r=>Qu(e,r)),[]);case"Suspend":return nc(e.f(),t);case"Refinement":return nc(e.from,t);case"Transformation":switch(e.transformation._tag){case"ComposeTransformation":return new Xa(nc(e.from,t),nc(e.to,t),zA);case"TypeLiteralTransformation":{const r=[],a=[];for(const o of t){const l=e.transformation.propertySignatureTransformations.find(d=>d.to===o);l?(r.push(l),a.push(l.from)):a.push(o)}return In(r)?new Xa(nc(e.from,a),nc(e.to,t),new wv(r)):nc(e.from,a)}}}throw new Error(ny(e))},US=e=>zr.make([e,$h]),bp=(e,t)=>{switch(e._tag){case"TupleType":return new n_(e.elements.map(n=>new Wl(US(n.type),!0)),QQ(e.rest,{onEmpty:()=>e.rest,onNonEmpty:n=>[new t_(zr.make([...tw(n),$h]))]}),e.isReadonly);case"TypeLiteral":return new ri(e.propertySignatures.map(n=>new Wn(n.name,US(n.type),!0,n.isReadonly,n.annotations)),e.indexSignatures.map(n=>new pm(n.parameter,US(n.type),n.isReadonly)));case"Union":return zr.make(e.types.map(n=>bp(n)));case"Suspend":return new _f(()=>bp(e.f()));case"Declaration":case"Refinement":throw new Error(ny(e));case"Transformation":{if(lC(e.transformation)&&e.transformation.propertySignatureTransformations.every(cW))return new Xa(bp(e.from),bp(e.to),e.transformation);throw new Error(ny(e))}}return e},th=e=>{switch(e._tag){case"TupleType":return e.isReadonly===!1?e:new n_(e.elements,e.rest,!1,e.annotations);case"TypeLiteral":{const t=qs(e.propertySignatures,r=>r.isReadonly===!1?r:new Wn(r.name,r.type,r.isOptional,!1,r.annotations)),n=qs(e.indexSignatures,r=>r.isReadonly===!1?r:new pm(r.parameter,r.type,!1));return t===e.propertySignatures&&n===e.indexSignatures?e:new ri(t,n,e.annotations)}case"Union":{const t=qs(e.types,th);return t===e.types?e:zr.make(t,e.annotations)}case"Suspend":return new _f(()=>th(e.f()),e.annotations);case"Refinement":{const t=th(e.from);return t===e.from?e:new r_(t,e.filter,e.annotations)}case"Transformation":{const t=th(e.from),n=th(e.to);return t===e.from&&n===e.to?e:new Xa(t,n,e.transformation,e.annotations)}}return e},uP=e=>t=>{let n;for(const r of e)Object.prototype.hasOwnProperty.call(t.annotations,r)&&(n===void 0&&(n={}),n[r]=t.annotations[r]);return n},dW=e=>t=>{const n={...t.annotations};for(const r of e)delete n[r];return n},hW=uP([UU,PU,jU,HU,BU,MA]),Jn=e=>{switch(e._tag){case"Declaration":{const t=qs(e.typeParameters,Jn);return t===e.typeParameters?e:new Z0(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const t=qs(e.elements,a=>{const o=Jn(a.type);return o===a.type?a:new Wl(o,a.isOptional)}),n=tw(e.rest),r=qs(n,Jn);return t===e.elements&&r===n?e:new n_(t,r.map(a=>new t_(a)),e.isReadonly,e.annotations)}case"TypeLiteral":{const t=qs(e.propertySignatures,r=>{const a=Jn(r.type);return a===r.type?r:new Wn(r.name,a,r.isOptional,r.isReadonly)}),n=qs(e.indexSignatures,r=>{const a=Jn(r.type);return a===r.type?r:new pm(r.parameter,a,r.isReadonly)});return t===e.propertySignatures&&n===e.indexSignatures?e:new ri(t,n,e.annotations)}case"Union":{const t=qs(e.types,Jn);return t===e.types?e:zr.make(t,e.annotations)}case"Suspend":return new _f(()=>Jn(e.f()),e.annotations);case"Refinement":{const t=Jn(e.from);return t===e.from?e:new r_(t,e.filter,e.annotations)}case"Transformation":{const t=hW(e);return Jn(t!==void 0?bf(e.to,t):e.to)}}return e},Qd=e=>on(FY(e),{onNone:()=>{},onSome:t=>({[X0]:t})});function qs(e,t){let n=!1;const r=W0(e.length);for(let a=0;a<e.length;a++){const o=e[a],l=t(o);l!==o&&(n=!0),r[a]=l}return n?r:e}const Xi=(e,t)=>{switch(e._tag){case"Declaration":{const n=qs(e.typeParameters,r=>Xi(r));return n===e.typeParameters?e:new Z0(n,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{const n=qs(e.elements,o=>{const l=Xi(o.type);return l===o.type?o:new Wl(l,o.isOptional)}),r=tw(e.rest),a=qs(r,o=>Xi(o));return n===e.elements&&a===r?e:new n_(n,a.map(o=>new t_(o)),e.isReadonly,Qd(e))}case"TypeLiteral":{const n=qs(e.propertySignatures,a=>{const o=Xi(a.type);return o===a.type?a:new Wn(a.name,o,a.isOptional,a.isReadonly)}),r=qs(e.indexSignatures,a=>{const o=Xi(a.type);return o===a.type?a:new pm(a.parameter,o,a.isReadonly)});return n===e.propertySignatures&&r===e.indexSignatures?e:new ri(n,r,Qd(e))}case"Union":{const n=qs(e.types,r=>Xi(r));return n===e.types?e:zr.make(n,Qd(e))}case"Suspend":return new _f(()=>Xi(e.f()),Qd(e));case"Refinement":{const n=Xi(e.from),r=Qd(e);return r?bf(n,r):n}case"Transformation":{const n=Qd(e);return Xi(n?bf(e.from,n):e.from)}}return e},uC=e=>Xi(e),vr=e=>{const t={};for(const n of Object.getOwnPropertySymbols(e))t[String(n)]=e[n];return t},ry=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return ry(e.from)}},mW=(e,t)=>new Xa(e,t,zA),Jl=e=>Dn(qi(e),()=>e._tag);function gW(e){return on(WU(e),{onNone:()=>"",onSome:t=>t.map(n=>` & Brand<${ni(n)}>`).join("")})}const fP=e=>JU(e).pipe(lc(()=>ZU(e)),lc(()=>XU(e)),rf(t=>t+gW(e))),qi=e=>lc(J0(e),()=>fP(e)),pW=(e,t,n)=>{switch(e._tag){case"UndefinedKeyword":return ew;case"Union":{const r=[];let a=!1;for(const o of e.types){const l=t(o);l?(a=!0,VY(l)||r.push(l)):r.push(o)}if(a)return zr.make(r);break}case"Suspend":return t(e.f());case"Transformation":return n(e)}},K3=Symbol.for("effect/Brand/Refined"),dP=()=>Object.assign(e=>e,{[K3]:K3,option:e=>Ce(e),either:e=>rt(e),is:e=>!0}),hP=Symbol.for("effect/Context/Tag"),Ev=Symbol.for("effect/Context/Reference"),yW="effect/STM",_W=Symbol.for(yW),UA={...Wy,_op:"Tag",[_W]:pf,[hP]:{_Service:e=>e,_Identifier:e=>e},toString(){return xn(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[cn](){return this.toJSON()},of(e){return e},context(e){return pP(this,e)}},bW={...UA,[Ev]:Ev},SW=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=t;const r=Object.create(UA);return Object.defineProperty(r,"stack",{get(){return n.stack}}),r.key=e,r},vW=e=>()=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=t;function r(){}return Object.setPrototypeOf(r,UA),r.key=e,Object.defineProperty(r,"stack",{get(){return n.stack}}),r},wW=()=>(e,t)=>{const n=Error.stackTraceLimit;Error.stackTraceLimit=2;const r=new Error;Error.stackTraceLimit=n;function a(){}return Object.setPrototypeOf(a,bW),a.key=e,a.defaultValue=t.defaultValue,Object.defineProperty(a,"stack",{get(){return r.stack}}),a},mP=Symbol.for("effect/Context"),EW={[mP]:{_Services:e=>e},[dt](e){if(gP(e)&&this.unsafeMap.size===e.unsafeMap.size){for(const t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!at(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[gt](){return un(this,SA(this.unsafeMap.size))},pipe(){return Fe(this,arguments)},toString(){return xn(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(Vn)}},[cn](){return this.toJSON()}},Sf=e=>{const t=Object.create(EW);return t.unsafeMap=e,t},TW=e=>{const t=new Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){const n=e.stack.split(`
`);if(n.length>2){const r=n[2].match(/at (.*)/);r&&(t.message=t.message+` (defined at ${r[1]})`)}}if(t.stack){const n=t.stack.split(`
`);n.splice(1,3),t.stack=n.join(`
`)}return t},gP=e=>Me(e,mP),RW=e=>Me(e,hP),CW=e=>Me(e,Ev),kW=Sf(new Map),AW=()=>kW,pP=(e,t)=>Sf(new Map([[e.key,t]])),OW=M(3,(e,t,n)=>{const r=new Map(e.unsafeMap);return r.set(t.key,n),Sf(r)}),dR=xt("effect/Context/defaultValueCache",()=>new Map),PA=e=>{if(dR.has(e.key))return dR.get(e.key);const t=e.defaultValue();return dR.set(e.key,t),t},DW=(e,t)=>e.unsafeMap.has(t.key)?e.unsafeMap.get(t.key):PA(t),yP=M(2,(e,t)=>{if(!e.unsafeMap.has(t.key)){if(Ev in t)return PA(t);throw TW(t)}return e.unsafeMap.get(t.key)}),xW=yP,$W=M(2,(e,t)=>e.unsafeMap.has(t.key)?gv(e.unsafeMap.get(t.key)):CW(t)?gv(PA(t)):CA),qW=M(2,(e,t)=>{const n=new Map(e.unsafeMap);for(const[r,a]of t.unsafeMap)n.set(r,a);return Sf(n)}),NW=(...e)=>t=>{const n=new Map(t.unsafeMap);for(const r of e)n.delete(r.key);return Sf(n)},Ps=SW,MW=gP,jA=RW,vf=AW,nw=pP,_a=OW,va=xW,rw=yP,Ea=$W,Xl=qW,IW=NW,HA=vW,sw=wW,_P=Symbol.for("effect/Chunk");function LW(e,t,n,r,a){for(let o=t;o<Math.min(e.length,t+a);o++)n[r+o-t]=e[o];return n}const bP=[],FW=e=>Ol((t,n)=>t.length===n.length&&si(t).every((r,a)=>e(r,uc(n,a)))),zW=FW(at),UW={[_P]:{_A:e=>e},toString(){return xn(this.toJSON())},toJSON(){return{_id:"Chunk",values:si(this).map(Vn)}},[cn](){return this.toJSON()},[dt](e){return aw(e)&&zW(this,e)},[gt](){return un(this,Qy(si(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return bP[Symbol.iterator]();default:return si(this)[Symbol.iterator]()}},pipe(){return Fe(this,arguments)}},or=e=>{const t=Object.create(UW);switch(t.backing=e,e._tag){case"IEmpty":{t.length=0,t.depth=0,t.left=t,t.right=t;break}case"IConcat":{t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break}case"IArray":{t.length=e.array.length,t.depth=0,t.left=Ti,t.right=Ti;break}case"ISingleton":{t.length=1,t.depth=0,t.left=Ti,t.right=Ti;break}case"ISlice":{t.length=e.length,t.depth=e.chunk.depth+1,t.left=Ti,t.right=Ti;break}}return t},aw=e=>Me(e,_P),Ti=or({_tag:"IEmpty"}),vn=()=>Ti,hR=(...e)=>BW(e),Ln=e=>or({_tag:"ISingleton",a:e}),wf=e=>aw(e)?e:lr(an(e)),fC=(e,t,n)=>{switch(e.backing._tag){case"IArray":{LW(e.backing.array,0,t,n,e.length);break}case"IConcat":{fC(e.left,t,n),fC(e.right,t,n+e.left.length);break}case"ISingleton":{t[n]=e.backing.a;break}case"ISlice":{let r=0,a=n;for(;r<e.length;)t[a]=uc(e,r),r+=1,a+=1;break}}},PW=e=>{switch(e.backing._tag){case"IEmpty":return bP;case"IArray":return e.backing.array;default:{const t=new Array(e.length);return fC(e,t,0),e.backing={_tag:"IArray",array:t},e.left=Ti,e.right=Ti,e.depth=0,t}}},si=PW,jW=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return or({_tag:"IArray",array:M3(e.backing.array)});case"IConcat":return or({_tag:"IConcat",left:yc(e.backing.right),right:yc(e.backing.left)});case"ISlice":return lr(M3(si(e)))}},yc=jW,HW=M(2,(e,t)=>t<0||t>=e.length?be():Ce(uc(e,t))),lr=e=>e.length===0?vn():e.length===1?Ln(e[0]):or({_tag:"IArray",array:e}),BW=e=>lr(e),uc=M(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(t!==0)throw new Error("Index out of bounds");return e.backing.a}case"IArray":{if(t>=e.length||t<0)throw new Error("Index out of bounds");return e.backing.array[t]}case"IConcat":return t<e.left.length?uc(e.left,t):uc(e.right,t-e.left.length);case"ISlice":return uc(e.backing.chunk,t+e.backing.offset)}}),sy=M(2,(e,t)=>Nn(e,Ln(t))),us=M(2,(e,t)=>Nn(Ln(t),e)),qh=M(2,(e,t)=>{if(t<=0)return Ti;if(t>=e.length)return e;switch(e.backing._tag){case"ISlice":return or({_tag:"ISlice",chunk:e.backing.chunk,length:t,offset:e.backing.offset});case"IConcat":return t>e.left.length?or({_tag:"IConcat",left:e.left,right:qh(e.right,t-e.left.length)}):qh(e.left,t);default:return or({_tag:"ISlice",chunk:e,offset:0,length:t})}}),ao=M(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return Ti;switch(e.backing._tag){case"ISlice":return or({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":return t>e.left.length?ao(e.right,t-e.left.length):or({_tag:"IConcat",left:ao(e.left,t),right:e.right});default:return or({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}}),Nn=M(2,(e,t)=>{if(e.backing._tag==="IEmpty")return t;if(t.backing._tag==="IEmpty")return e;const n=t.depth-e.depth;if(Math.abs(n)<=1)return or({_tag:"IConcat",left:e,right:t});if(n<-1)if(e.left.depth>=e.right.depth){const r=Nn(e.right,t);return or({_tag:"IConcat",left:e.left,right:r})}else{const r=Nn(e.right.right,t);if(r.depth===e.depth-3){const a=or({_tag:"IConcat",left:e.right.left,right:r});return or({_tag:"IConcat",left:e.left,right:a})}else{const a=or({_tag:"IConcat",left:e.left,right:e.right.left});return or({_tag:"IConcat",left:a,right:r})}}else if(t.right.depth>=t.left.depth){const r=Nn(e,t.left);return or({_tag:"IConcat",left:r,right:t.right})}else{const r=Nn(e,t.left.left);if(r.depth===t.depth-3){const a=or({_tag:"IConcat",left:r,right:t.left.right});return or({_tag:"IConcat",left:a,right:t.right})}else{const a=or({_tag:"IConcat",left:t.left.right,right:t.right});return or({_tag:"IConcat",left:r,right:a})}}}),SP=M(2,(e,t)=>lr(OU(e,t))),iw=M(2,(e,t)=>lr(mY(e,t))),ow=e=>e.length===0,mo=e=>e.length>0,cw=HW(0),lw=e=>uc(e,0),io=lw,vP=M(2,(e,t)=>e.backing._tag==="ISingleton"?Ln(t(e.backing.a,0)):lr(F(si(e),sf((n,r)=>t(n,r))))),wP=M(2,(e,t)=>[qh(e,t),ao(e,t)]),VW=M(2,(e,t)=>{let n=0;for(const r of si(e)){if(t(r))break;n++}return wP(e,n)}),ic=e=>ao(e,1),KW=M(2,(e,t)=>ao(e,e.length-t)),GW=DA,dC=Symbol.for("effect/Duration"),EP=BigInt(0),G3=BigInt(24),hS=BigInt(60),hC=BigInt(1e3),Q3=BigInt(1e6),Y3=BigInt(1e9),QW=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,Ta=e=>{if(TP(e))return e;if(pc(e))return Ef(e);if(V0(e))return mR(e);if(Array.isArray(e)&&e.length===2&&e.every(pc))return e[0]===-1/0||e[1]===-1/0||Number.isNaN(e[0])||Number.isNaN(e[1])?BA:e[0]===1/0||e[1]===1/0?XW:mR(BigInt(Math.round(e[0]*1e9))+BigInt(Math.round(e[1])));if(Fs(e)){const t=QW.exec(e);if(t){const[n,r,a]=t,o=Number(r);switch(a){case"nano":case"nanos":return mR(BigInt(r));case"micro":case"micros":return ZW(BigInt(r));case"milli":case"millis":return Ef(o);case"second":case"seconds":return Tv(o);case"minute":case"minutes":return RP(o);case"hour":case"hours":return eJ(o);case"day":case"days":return tJ(o);case"week":case"weeks":return nJ(o)}}}throw new Error("Invalid DurationInput")},W3={_tag:"Millis",millis:0},YW={_tag:"Infinity"},WW={[dC]:dC,[gt](){return un(this,sU(this.value))},[dt](e){return TP(e)&&lJ(this,e)},toString(){return`Duration(${AP(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:sJ(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[cn](){return this.toJSON()},pipe(){return Fe(this,arguments)}},ta=e=>{const t=Object.create(WW);return pc(e)?isNaN(e)||e<=0?t.value=W3:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(e*1e6))}:t.value=YW:e<=EP?t.value=W3:t.value={_tag:"Nanos",nanos:e},t},TP=e=>Me(e,dC),JW=e=>{switch(e.value._tag){case"Millis":return e.value.millis===0;case"Nanos":return e.value.nanos===EP;case"Infinity":return!1}},BA=ta(0),XW=ta(1/0),mR=e=>ta(e),ZW=e=>ta(e*hC),Ef=e=>ta(e),Tv=e=>ta(e*1e3),RP=e=>ta(e*6e4),eJ=e=>ta(e*36e5),tJ=e=>ta(e*864e5),nJ=e=>ta(e*6048e5),Nh=e=>CP(e,{onMillis:t=>t,onNanos:t=>Number(t)/1e6}),rJ=e=>{const t=Ta(e);switch(t.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(t.value.millis*1e6))}},sJ=e=>{const t=Ta(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/Y3),Number(t.value.nanos%Y3)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},CP=M(2,(e,t)=>{const n=Ta(e);switch(n.value._tag){case"Nanos":return t.onNanos(n.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(n.value.millis)}}),uw=M(3,(e,t,n)=>{const r=Ta(e),a=Ta(t);if(r.value._tag==="Infinity"||a.value._tag==="Infinity")return n.onMillis(Nh(r),Nh(a));if(r.value._tag==="Nanos"||a.value._tag==="Nanos"){const o=r.value._tag==="Nanos"?r.value.nanos:BigInt(Math.round(r.value.millis*1e6)),l=a.value._tag==="Nanos"?a.value.nanos:BigInt(Math.round(a.value.millis*1e6));return n.onNanos(o,l)}return n.onMillis(r.value.millis,a.value.millis)}),aJ=(e,t)=>uw(e,t,{onMillis:(n,r)=>n===r,onNanos:(n,r)=>n===r}),iJ=M(2,(e,t)=>CP(e,{onMillis:n=>ta(n*t),onNanos:n=>ta(n*BigInt(t))})),oJ=M(2,(e,t)=>uw(e,t,{onMillis:(n,r)=>ta(n+r),onNanos:(n,r)=>ta(n+r)})),kP=M(2,(e,t)=>uw(e,t,{onMillis:(n,r)=>n<=r,onNanos:(n,r)=>n<=r})),cJ=M(2,(e,t)=>uw(e,t,{onMillis:(n,r)=>n>=r,onNanos:(n,r)=>n>=r})),lJ=M(2,(e,t)=>aJ(Ta(e),Ta(t))),uJ=e=>{const t=Ta(e);if(t.value._tag==="Infinity")return{days:1/0,hours:1/0,minutes:1/0,seconds:1/0,millis:1/0,nanos:1/0};const n=rJ(t),r=n/Q3,a=r/hC,o=a/hS,l=o/hS,d=l/G3;return{days:Number(d),hours:Number(l%G3),minutes:Number(o%hS),seconds:Number(a%hS),millis:Number(r%hC),nanos:Number(n%Q3)}},AP=e=>{const t=Ta(e);if(t.value._tag==="Infinity")return"Infinity";if(JW(t))return"0";const n=uJ(t),r=[];return n.days!==0&&r.push(`${n.days}d`),n.hours!==0&&r.push(`${n.hours}h`),n.minutes!==0&&r.push(`${n.minutes}m`),n.seconds!==0&&r.push(`${n.seconds}s`),n.millis!==0&&r.push(`${n.millis}ms`),n.nanos!==0&&r.push(`${n.nanos}ns`),r.join(" ")},Tf=5,VA=Math.pow(2,Tf),fJ=VA-1,dJ=VA/2,hJ=VA/4;function mJ(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Mh(e,t){return t>>>e&fJ}function oh(e){return 1<<e}function OP(e,t){return mJ(e&t-1)}const gJ=(e,t)=>({value:e,previous:t});function yh(e,t,n,r){let a=r;if(!e){const o=r.length;a=new Array(o);for(let l=0;l<o;++l)a[l]=r[l]}return a[t]=n,a}function DP(e,t,n){const r=n.length-1;let a=0,o=0,l=n;if(e)a=o=t;else for(l=new Array(r);a<t;)l[o++]=n[a++];for(++a;a<=r;)l[o++]=n[a++];return e&&(l.length=r),l}function pJ(e,t,n,r){const a=r.length;if(e){let h=a;for(;h>=t;)r[h--]=r[h];return r[t]=n,r}let o=0,l=0;const d=new Array(a+1);for(;o<t;)d[l++]=r[o++];for(d[t]=n;o<a;)d[++l]=r[o++];return d}class Fl{constructor(){b(this,"_tag","EmptyNode")}modify(t,n,r,a,o,l){const d=r(be());return Mn(d)?new Fl:(++l.value,new af(t,a,o,d))}}function Ci(e){return _A(e,"EmptyNode")}function yJ(e){return Ci(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function fw(e,t){return Ci(e)?!1:t===e.edit}class af{constructor(t,n,r,a){b(this,"edit");b(this,"hash");b(this,"key");b(this,"value");b(this,"_tag","LeafNode");this.edit=t,this.hash=n,this.key=r,this.value=a}modify(t,n,r,a,o,l){if(at(o,this.key)){const h=r(this.value);return h===this.value?this:Mn(h)?(--l.value,new Fl):fw(this,t)?(this.value=h,this):new af(t,a,o,h)}const d=r(be());return Mn(d)?this:(++l.value,xP(t,n,this.hash,this,a,new af(t,a,o,d)))}}class KA{constructor(t,n,r){b(this,"edit");b(this,"hash");b(this,"children");b(this,"_tag","CollisionNode");this.edit=t,this.hash=n,this.children=r}modify(t,n,r,a,o,l){if(a===this.hash){const h=fw(this,t),p=this.updateCollisionList(h,t,this.hash,this.children,r,o,l);return p===this.children?this:p.length>1?new KA(t,this.hash,p):p[0]}const d=r(be());return Mn(d)?this:(++l.value,xP(t,n,this.hash,this,a,new af(t,a,o,d)))}updateCollisionList(t,n,r,a,o,l,d){const h=a.length;for(let S=0;S<h;++S){const v=a[S];if("key"in v&&at(l,v.key)){const R=v.value,O=o(R);return O===R?a:Mn(O)?(--d.value,DP(t,S,a)):yh(t,S,new af(n,r,l,O),a)}}const p=o(be());return Mn(p)?a:(++d.value,yh(t,h,new af(n,r,l,p),a))}}class Ih{constructor(t,n,r){b(this,"edit");b(this,"mask");b(this,"children");b(this,"_tag","IndexedNode");this.edit=t,this.mask=n,this.children=r}modify(t,n,r,a,o,l){const d=this.mask,h=this.children,p=Mh(n,a),S=oh(p),v=OP(d,S),R=d&S,O=fw(this,t);if(!R){const T=new Fl().modify(t,n+Tf,r,a,o,l);return T?h.length>=dJ?bJ(t,p,T,d,h):new Ih(t,d|S,pJ(O,v,T,h)):this}const x=h[v],z=x.modify(t,n+Tf,r,a,o,l);if(x===z)return this;let A=d,E;if(Ci(z)){if(A&=~S,!A)return new Fl;if(h.length<=2&&yJ(h[v^1]))return h[v^1];E=DP(O,v,h)}else E=yh(O,v,z,h);return O?(this.mask=A,this.children=E,this):new Ih(t,A,E)}}class GA{constructor(t,n,r){b(this,"edit");b(this,"size");b(this,"children");b(this,"_tag","ArrayNode");this.edit=t,this.size=n,this.children=r}modify(t,n,r,a,o,l){let d=this.size;const h=this.children,p=Mh(n,a),S=h[p],v=(S||new Fl).modify(t,n+Tf,r,a,o,l);if(S===v)return this;const R=fw(this,t);let O;if(Ci(S)&&!Ci(v))++d,O=yh(R,p,v,h);else if(!Ci(S)&&Ci(v)){if(--d,d<=hJ)return _J(t,d,p,h);O=yh(R,p,new Fl,h)}else O=yh(R,p,v,h);return R?(this.size=d,this.children=O,this):new GA(t,d,O)}}function _J(e,t,n,r){const a=new Array(t-1);let o=0,l=0;for(let d=0,h=r.length;d<h;++d)if(d!==n){const p=r[d];p&&!Ci(p)&&(a[o++]=p,l|=1<<d)}return new Ih(e,l,a)}function bJ(e,t,n,r,a){const o=[];let l=r,d=0;for(let h=0;l;++h)l&1&&(o[h]=a[d++]),l>>>=1;return o[t]=n,new GA(e,d+1,o)}function SJ(e,t,n,r,a,o){if(n===a)return new KA(e,n,[o,r]);const l=Mh(t,n),d=Mh(t,a);if(l===d)return h=>new Ih(e,oh(l)|oh(d),[h]);{const h=l<d?[r,o]:[o,r];return new Ih(e,oh(l)|oh(d),h)}}function xP(e,t,n,r,a,o){let l,d=t;for(;;){const h=SJ(e,d,n,r,a,o);if(typeof h=="function")l=gJ(h,l),d=d+Tf;else{let p=h;for(;l!=null;)p=l.value(p),l=l.previous;return p}}}const $P="effect/HashMap",mC=Symbol.for($P),vJ={[mC]:mC,[Symbol.iterator](){return new dw(this,(e,t)=>[e,t])},[gt](){let e=Ae($P);for(const t of this)e^=F(Ae(t[0]),ot(Ae(t[1])));return un(this,e)},[dt](e){if(TJ(e)){if(e._size!==this._size)return!1;for(const t of this){const n=F(e,YA(t[0],Ae(t[0])));if(Mn(n))return!1;if(!at(t[1],n.value))return!1}return!0}return!1},toString(){return xn(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(Vn)}},[cn](){return this.toJSON()},pipe(){return Fe(this,arguments)}},QA=(e,t,n,r)=>{const a=Object.create(vJ);return a._editable=e,a._edit=t,a._root=n,a._size=r,a};class dw{constructor(t,n){b(this,"map");b(this,"f");b(this,"v");this.map=t,this.f=n,this.v=qP(this.map._root,this.f,void 0)}next(){if(Mn(this.v))return{done:!0,value:void 0};const t=this.v.value;return this.v=Rv(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new dw(this.map,this.f)}}const Rv=e=>e?NP(e[0],e[1],e[2],e[3],e[4]):be(),qP=(e,t,n=void 0)=>{switch(e._tag){case"LeafNode":return mn(e.value)?Ce({value:t(e.key,e.value.value),cont:n}):Rv(n);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const r=e.children;return NP(r.length,r,0,t,n)}default:return Rv(n)}},NP=(e,t,n,r,a)=>{for(;n<e;){const o=t[n++];if(o&&!Ci(o))return qP(o,r,[e,t,n,r,a])}return Rv(a)},wJ=QA(!1,0,new Fl,0),hw=()=>wJ,EJ=e=>{const t=IP(hw());for(const n of e)ay(t,n[0],n[1]);return OJ(t)},TJ=e=>Me(e,mC),RJ=e=>e&&Ci(e._root),CJ=M(2,(e,t)=>YA(e,t,Ae(t))),YA=M(3,(e,t,n)=>{let r=e._root,a=0;for(;;)switch(r._tag){case"LeafNode":return at(t,r.key)?r.value:be();case"CollisionNode":{if(n===r.hash){const o=r.children;for(let l=0,d=o.length;l<d;++l){const h=o[l];if("key"in h&&at(t,h.key))return h.value}}return be()}case"IndexedNode":{const o=Mh(a,n),l=oh(o);if(r.mask&l){r=r.children[OP(r.mask,l)],a+=Tf;break}return be()}case"ArrayNode":{if(r=r.children[Mh(a,n)],r){a+=Tf;break}return be()}default:return be()}}),kJ=M(2,(e,t)=>mn(YA(e,t,Ae(t)))),ay=M(3,(e,t,n)=>WA(e,t,()=>Ce(n))),AJ=M(3,(e,t,n)=>e._editable?(e._root=t,e._size=n,e):t===e._root?e:QA(e._editable,e._edit,t,n)),MP=e=>new dw(e,t=>t),Cv=e=>e._size,IP=e=>QA(!0,e._edit+1,e._root,e._size),OJ=e=>(e._editable=!1,e),WA=M(3,(e,t,n)=>DJ(e,t,Ae(t),n)),DJ=M(4,(e,t,n,r)=>{const a={value:e._size},o=e._root.modify(e._editable?e._edit:NaN,0,r,n,t,a);return F(e,AJ(o,a.value))}),J3=M(2,(e,t)=>WA(e,t,be)),xJ=M(2,(e,t)=>mw(e,hw(),(n,r,a)=>ay(n,a,t(r,a)))),LP=M(2,(e,t)=>mw(e,void 0,(n,r,a)=>t(r,a))),mw=M(3,(e,t,n)=>{const r=e._root;if(r._tag==="LeafNode")return mn(r.value)?n(t,r.value.value,r.key):t;if(r._tag==="EmptyNode")return t;const a=[r.children];let o;for(;o=a.pop();)for(let l=0,d=o.length;l<d;){const h=o[l++];h&&!Ci(h)&&(h._tag==="LeafNode"?mn(h.value)&&(t=n(t,h.value.value,h.key)):a.push(h.children))}return t}),FP="effect/HashSet",gC=Symbol.for(FP),$J={[gC]:gC,[Symbol.iterator](){return MP(this._keyMap)},[gt](){return un(this,ot(Ae(this._keyMap))(Ae(FP)))},[dt](e){return qJ(e)?Cv(this._keyMap)===Cv(e._keyMap)&&at(this._keyMap,e._keyMap):!1},toString(){return xn(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(Vn)}},[cn](){return this.toJSON()},pipe(){return Fe(this,arguments)}},gw=e=>{const t=Object.create($J);return t._keyMap=e,t},qJ=e=>Me(e,gC),NJ=gw(hw()),pw=()=>NJ,MJ=e=>{const t=JA(pw());for(const n of e)iy(t,n);return XA(t)},IJ=(...e)=>{const t=JA(pw());for(const n of e)iy(t,n);return XA(t)},LJ=M(2,(e,t)=>kJ(e._keyMap,t)),FJ=e=>Cv(e._keyMap),JA=e=>gw(IP(e._keyMap)),XA=e=>(e._keyMap._editable=!1,e),zP=M(2,(e,t)=>{const n=JA(e);return t(n),XA(n)}),iy=M(2,(e,t)=>e._keyMap._editable?(ay(t,!0)(e._keyMap),e):gw(ay(t,!0)(e._keyMap))),UP=M(2,(e,t)=>e._keyMap._editable?(J3(t)(e._keyMap),e):gw(J3(t)(e._keyMap))),zJ=M(2,(e,t)=>zP(e,n=>{for(const r of t)UP(n,r)})),UJ=M(2,(e,t)=>zP(pw(),n=>{PJ(e,r=>iy(n,r));for(const r of t)iy(n,r)})),PJ=M(2,(e,t)=>LP(e._keyMap,(n,r)=>t(r))),jJ=M(3,(e,t,n)=>mw(e._keyMap,t,(r,a,o)=>n(r,o))),Rf=pw,HJ=MJ,yw=IJ,ZA=LJ,e2=FJ,_h=iy,t2=UP,X3=zJ,oy=UJ,cy=jJ,Z3=Symbol.for("effect/MutableRef"),BJ={[Z3]:Z3,toString(){return xn(this.toJSON())},toJSON(){return{_id:"MutableRef",current:Vn(this.current)}},[cn](){return this.toJSON()},pipe(){return Fe(this,arguments)}},Wf=e=>{const t=Object.create(BJ);return t.current=e,t},VJ=M(3,(e,t,n)=>at(t,e.current)?(e.current=n,!0):!1),Vt=e=>e.current,Jf=M(2,(e,t)=>(e.current=t,e)),_w="effect/FiberId",Cf=Symbol.for(_w),Lh="None",pC="Runtime",yC="Composite",KJ=Xn(`${_w}-${Lh}`);var kL;let GJ=class{constructor(){b(this,kL,Cf);b(this,"_tag",Lh);b(this,"id",-1);b(this,"startTimeMillis",-1)}[(kL=Cf,gt)](){return KJ}[dt](t){return r2(t)&&t._tag===Lh}toString(){return xn(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[cn](){return this.toJSON()}};var AL;class n2{constructor(t,n){b(this,"id");b(this,"startTimeMillis");b(this,AL,Cf);b(this,"_tag",pC);this.id=t,this.startTimeMillis=n}[(AL=Cf,gt)](){return un(this,Xn(`${_w}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[dt](t){return r2(t)&&t._tag===pC&&this.id===t.id&&this.startTimeMillis===t.startTimeMillis}toString(){return xn(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[cn](){return this.toJSON()}}var OL;let PP=class{constructor(t,n){b(this,"left");b(this,"right");b(this,OL,Cf);b(this,"_tag",yC);b(this,"_hash");this.left=t,this.right=n}[(OL=Cf,gt)](){return F(Xn(`${_w}-${this._tag}`),ot(Ae(this.left)),ot(Ae(this.right)),un(this))}[dt](t){return r2(t)&&t._tag===yC&&at(this.left,t.left)&&at(this.right,t.right)}toString(){return xn(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:Vn(this.left),right:Vn(this.right)}}[cn](){return this.toJSON()}};const jP=new GJ,QJ=(e,t)=>new n2(e,t),YJ=(e,t)=>new PP(e,t),r2=e=>Me(e,Cf),HP=M(2,(e,t)=>e._tag===Lh?t:t._tag===Lh?e:new PP(e,t)),WJ=e=>F(e,cy(jP,(t,n)=>HP(n)(t))),kv=e=>{switch(e._tag){case Lh:return Rf();case pC:return yw(e.id);case yC:return F(kv(e.left),oy(kv(e.right)))}},eN=xt(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>Wf(0)),JJ=(e,t)=>new n2(e,t),bw=e=>Array.from(kv(e)).map(n=>`#${n}`).join(","),XJ=()=>{const e=Vt(eN);return F(eN,Jf(e+1)),new n2(e,Date.now())},ai=jP,ZJ=QJ,eX=YJ,Dl=HP,tX=WJ,s2=kv,BP=JJ,nX=bw,VP=XJ,Sw=hw,rX=EJ,sX=RJ,KP=CJ,Av=ay,GP=MP,QP=Cv,aX=WA,iX=xJ,oX=LP,YP=mw,ly=Symbol.for("effect/List"),_C=e=>an(e),cX=e=>Jz(Zy(e),_C),lX=cX(at),uX={[ly]:ly,_tag:"Cons",toString(){return xn(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:_C(this).map(Vn)}},[cn](){return this.toJSON()},[dt](e){return JP(e)&&this._tag===e._tag&&lX(this,e)},[gt](){return un(this,Qy(_C(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if(t._tag==="Nil")return e=!0,this.return();const n=t.head;return t=t.tail,{done:e,value:n}},return(n){return e||(e=!0),{done:!0,value:n}}}},pipe(){return Fe(this,arguments)}},Ov=(e,t)=>{const n=Object.create(uX);return n.head=e,n.tail=t,n},fX=Xn("Nil"),dX={[ly]:ly,_tag:"Nil",toString(){return xn(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[cn](){return this.toJSON()},[gt](){return fX},[dt](e){return JP(e)&&this._tag===e._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return Fe(this,arguments)}},WP=Object.create(dX),JP=e=>Me(e,ly),fc=e=>e._tag==="Nil",a2=e=>e._tag==="Cons",hX=()=>WP,kf=(e,t)=>Ov(e,t),Fh=hX,i2=e=>Ov(e,WP),mX=M(2,(e,t)=>pX(t,e)),gX=M(2,(e,t)=>kf(t,e)),pX=M(2,(e,t)=>{if(fc(e))return t;if(fc(t))return e;{const n=Ov(t.head,e);let r=n,a=t.tail;for(;!fc(a);){const o=Ov(a.head,e);r.tail=o,r=o,a=a.tail}return n}}),yX=M(3,(e,t,n)=>{let r=t,a=e;for(;!fc(a);)r=n(r,a.head),a=a.tail;return r}),_X=e=>{let t=Fh(),n=e;for(;!fc(n);)t=gX(t,n.head),n=n.tail;return t},vw=function(){function e(t){t&&Object.assign(this,t)}return e.prototype=TA,e}(),bX=Symbol.for("effect/DifferContextPatch");function tN(e){return e}const s_={...vw.prototype,[bX]:{_Value:tN,_Patch:tN}},SX=Object.assign(Object.create(s_),{_tag:"Empty"}),vX=Object.create(SX),XP=()=>vX,wX=Object.assign(Object.create(s_),{_tag:"AndThen"}),EX=(e,t)=>{const n=Object.create(wX);return n.first=e,n.second=t,n},TX=Object.assign(Object.create(s_),{_tag:"AddService"}),RX=(e,t)=>{const n=Object.create(TX);return n.key=e,n.service=t,n},CX=Object.assign(Object.create(s_),{_tag:"RemoveService"}),kX=e=>{const t=Object.create(CX);return t.key=e,t},AX=Object.assign(Object.create(s_),{_tag:"UpdateService"}),OX=(e,t)=>{const n=Object.create(AX);return n.key=e,n.update=t,n},DX=(e,t)=>{const n=new Map(e.unsafeMap);let r=XP();for(const[a,o]of t.unsafeMap.entries())if(n.has(a)){const l=n.get(a);n.delete(a),at(l,o)||(r=PS(OX(a,()=>o))(r))}else n.delete(a),r=PS(RX(a,o))(r);for(const[a]of n.entries())r=PS(kX(a))(r);return r},PS=M(2,(e,t)=>EX(e,t)),xX=M(2,(e,t)=>{if(e._tag==="Empty")return t;let n=!1,r=Ln(e);const a=new Map(t.unsafeMap);for(;mo(r);){const l=io(r),d=ic(r);switch(l._tag){case"Empty":{r=d;break}case"AddService":{a.set(l.key,l.service),r=d;break}case"AndThen":{r=us(us(d,l.second),l.first);break}case"RemoveService":{a.delete(l.key),r=d;break}case"UpdateService":{a.set(l.key,l.update(a.get(l.key))),n=!0,r=d;break}}}if(!n)return Sf(a);const o=new Map;for(const[l]of t.unsafeMap)a.has(l)&&(o.set(l,a.get(l)),a.delete(l));for(const[l,d]of a)o.set(l,d);return Sf(o)}),$X=Symbol.for("effect/DifferHashSetPatch");function gR(e){return e}const ww={...vw.prototype,[$X]:{_Value:gR,_Key:gR,_Patch:gR}},qX=Object.assign(Object.create(ww),{_tag:"Empty"}),NX=Object.create(qX),ZP=()=>NX,MX=Object.assign(Object.create(ww),{_tag:"AndThen"}),IX=(e,t)=>{const n=Object.create(MX);return n.first=e,n.second=t,n},LX=Object.assign(Object.create(ww),{_tag:"Add"}),FX=e=>{const t=Object.create(LX);return t.value=e,t},zX=Object.assign(Object.create(ww),{_tag:"Remove"}),UX=e=>{const t=Object.create(zX);return t.value=e,t},PX=(e,t)=>{const[n,r]=cy([e,ZP()],([a,o],l)=>ZA(l)(a)?[t2(l)(a),o]:[a,bC(FX(l))(o)])(t);return cy(r,(a,o)=>bC(UX(o))(a))(n)},bC=M(2,(e,t)=>IX(e,t)),jX=M(2,(e,t)=>{if(e._tag==="Empty")return t;let n=t,r=Ln(e);for(;mo(r);){const a=io(r),o=ic(r);switch(a._tag){case"Empty":{r=o;break}case"AndThen":{r=us(a.first)(us(a.second)(o));break}case"Add":{n=_h(a.value)(n),r=o;break}case"Remove":n=t2(a.value)(n),r=o}}return n}),HX=Symbol.for("effect/DifferReadonlyArrayPatch");function nN(e){return e}const a_={...vw.prototype,[HX]:{_Value:nN,_Patch:nN}},BX=Object.assign(Object.create(a_),{_tag:"Empty"}),VX=Object.create(BX),e4=()=>VX,KX=Object.assign(Object.create(a_),{_tag:"AndThen"}),GX=(e,t)=>{const n=Object.create(KX);return n.first=e,n.second=t,n},QX=Object.assign(Object.create(a_),{_tag:"Append"}),YX=e=>{const t=Object.create(QX);return t.values=e,t},WX=Object.assign(Object.create(a_),{_tag:"Slice"}),JX=(e,t)=>{const n=Object.create(WX);return n.from=e,n.until=t,n},XX=Object.assign(Object.create(a_),{_tag:"Update"}),ZX=(e,t)=>{const n=Object.create(XX);return n.index=e,n.patch=t,n},eZ=e=>{let t=0,n=e4();for(;t<e.oldValue.length&&t<e.newValue.length;){const r=e.oldValue[t],a=e.newValue[t],o=e.differ.diff(r,a);at(o,e.differ.empty)||(n=jS(n,ZX(t,o))),t=t+1}return t<e.oldValue.length&&(n=jS(n,JX(0,t))),t<e.newValue.length&&(n=jS(n,YX(sY(t)(e.newValue)))),n},jS=M(2,(e,t)=>GX(e,t)),tZ=M(3,(e,t,n)=>{if(e._tag==="Empty")return t;let r=t.slice(),a=Va(e);for(;IS(a);){const o=Ms(a),l=yf(a);switch(o._tag){case"Empty":{a=l;break}case"AndThen":{l.unshift(o.first,o.second),a=l;break}case"Append":{for(const d of o.values)r.push(d);a=l;break}case"Slice":{r=r.slice(o.from,o.until),a=l;break}case"Update":{r[o.index]=n.patch(o.patch,r[o.index]),a=l;break}}}return r}),nZ=Symbol.for("effect/Differ"),rZ={[nZ]:{_P:Ge,_V:Ge},pipe(){return Fe(this,arguments)}},ym=e=>{const t=Object.create(rZ);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},sZ=()=>ym({empty:XP(),combine:(e,t)=>PS(t)(e),diff:(e,t)=>DX(e,t),patch:(e,t)=>xX(t)(e)}),aZ=()=>ym({empty:ZP(),combine:(e,t)=>bC(t)(e),diff:(e,t)=>PX(e,t),patch:(e,t)=>jX(t)(e)}),iZ=e=>ym({empty:e4(),combine:(t,n)=>jS(t,n),diff:(t,n)=>eZ({oldValue:t,newValue:n,differ:e}),patch:(t,n)=>tZ(t,n,e)}),t4=()=>oZ((e,t)=>t),oZ=e=>ym({empty:Ge,combine:(t,n)=>t===Ge?n:n===Ge?t:r=>n(t(r)),diff:(t,n)=>at(t,n)?Ge:H0(n),patch:(t,n)=>e(n,t(n))}),uy=255,n4=8,SC=e=>e&uy,vC=e=>e>>n4&uy,i_=(e,t)=>(e&uy)+((t&e&uy)<<n4),cZ=i_(0,0),lZ=e=>i_(e,e),uZ=e=>i_(e,0),fZ=M(2,(e,t)=>i_(SC(e)&~t,vC(e))),dZ=M(2,(e,t)=>e|t),hZ=e=>~e>>>0&uy,mZ=0,_m=1,gZ=2,r4=4,wC=16,s4=32,pZ=e=>Ew(e,s4),yZ=M(2,(e,t)=>e|t),yl=e=>a4(e)&&!bZ(e),a4=e=>Ew(e,_m),Ew=M(2,(e,t)=>(e&t)!==0),i4=(...e)=>e.reduce((t,n)=>t|n,0),_Z=i4(mZ),rN=e=>Ew(e,r4),bZ=e=>Ew(e,wC),of=M(2,(e,t)=>i_(e^t,t)),bh=M(2,(e,t)=>e&(hZ(SC(t))|vC(t))|SC(t)&vC(t)),sN=ym({empty:cZ,diff:(e,t)=>of(e,t),combine:(e,t)=>dZ(t)(e),patch:(e,t)=>bh(t,e)}),SZ=lZ,o4=uZ,aN=fZ,c4=(e,t)=>({_tag:"Par",left:e,right:t}),mS=(e,t)=>({_tag:"Seq",left:e,right:t}),vZ=e=>{let t=i2(e),n=Fh();for(;;){const[r,a]=yX(t,[l4(),Fh()],([o,l],d)=>{const[h,p]=wZ(d);return[kZ(o,h),mX(l,p)]});if(n=EZ(n,r),fc(a))return _X(n);t=a}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},wZ=e=>{let t=e,n=l4(),r=Fh(),a=Fh();for(;;)switch(t._tag){case"Empty":{if(fc(r))return[n,a];t=r.head,r=r.tail;break}case"Par":{r=kf(t.right,r),t=t.left;break}case"Seq":{const o=t.left,l=t.right;switch(o._tag){case"Empty":{t=l;break}case"Par":{const d=o.left,h=o.right;t=c4(mS(d,l),mS(h,l));break}case"Seq":{const d=o.left,h=o.right;t=mS(d,mS(h,l));break}case"Single":{t=o,a=kf(l,a);break}}break}case"Single":{if(n=CZ(n,t),fc(r))return[n,a];t=r.head,r=r.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},EZ=(e,t)=>{if(fc(e))return i2(pR(t));if(AZ(t))return e;const n=NZ(e.head),r=OZ(t);return n.length===1&&r.length===1&&at(n[0],r[0])?kf(qZ(e.head,pR(t)),e.tail):kf(pR(t),e)},TZ=Symbol.for("effect/RequestBlock/RequestBlockParallel"),RZ={_R:e=>e};var DL;DL=TZ;class o2{constructor(t){b(this,"map");b(this,DL,RZ);this.map=t}}const l4=()=>new o2(Sw()),CZ=(e,t)=>new o2(aX(e.map,t.dataSource,n=>xQ(rf(n,sy(t.blockedRequest)),()=>Ln(t.blockedRequest)))),kZ=(e,t)=>new o2(YP(e.map,t.map,(n,r,a)=>Av(n,a,on(KP(n,a),{onNone:()=>r,onSome:o=>Nn(r,o)})))),AZ=e=>sX(e.map),OZ=e=>Array.from(GP(e.map)),pR=e=>$Z(iX(e.map,t=>Ln(t))),DZ=Symbol.for("effect/RequestBlock/RequestBlockSequential"),xZ={_R:e=>e};var xL;xL=DZ;class u4{constructor(t){b(this,"map");b(this,xL,xZ);this.map=t}}const $Z=e=>new u4(e),qZ=(e,t)=>new u4(YP(t.map,e.map,(n,r,a)=>Av(n,a,on(KP(n,a),{onNone:()=>vn(),onSome:o=>Nn(o,r)})))),NZ=e=>Array.from(GP(e.map)),MZ=e=>Array.from(e.map),bm="Die",Af="Empty",Xf="Fail",Sm="Interrupt",zh="Parallel",Uh="Sequential",f4="effect/Cause",d4=Symbol.for(f4),IZ={_E:e=>e},vm={[d4]:IZ,[gt](){return F(Ae(f4),ot(Ae(GZ(this))),un(this))},[dt](e){return c2(e)&&KZ(this,e)},pipe(){return Fe(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:Vn(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:Vn(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:Vn(this.left),right:Vn(this.right)}}},toString(){return Zl(this)},[cn](){return this.toJSON()}},_c=(()=>{const e=Object.create(vm);return e._tag=Af,e})(),Of=e=>{const t=Object.create(vm);return t._tag=Xf,t.error=e,t},bs=e=>{const t=Object.create(vm);return t._tag=bm,t.defect=e,t},Ya=e=>{const t=Object.create(vm);return t._tag=Sm,t.fiberId=e,t},go=(e,t)=>{const n=Object.create(vm);return n._tag=zh,n.left=e,n.right=t,n},yr=(e,t)=>{const n=Object.create(vm);return n._tag=Uh,n.left=e,n.right=t,n},c2=e=>Me(e,d4),LZ=e=>e._tag===Af,FZ=e=>e._tag===Xf,l2=e=>e._tag===bm,u2=e=>e._tag===Af?!0:Ph(e,!0,(t,n)=>{switch(n._tag){case Af:return Ce(t);case bm:case Xf:case Sm:return Ce(!1);default:return be()}}),f2=e=>mn(PZ(e)),Tw=e=>kw(void 0,YZ)(e),zZ=e=>yc(Ph(e,vn(),(t,n)=>n._tag===Xf?Ce(F(t,us(n.error))):be())),h4=e=>yc(Ph(e,vn(),(t,n)=>n._tag===bm?Ce(F(t,us(n.defect))):be())),d2=e=>Ph(e,Rf(),(t,n)=>n._tag===Sm?Ce(F(t,_h(n.fiberId))):be()),m4=e=>Cw(e,t=>t._tag===Xf?Ce(t.error):be()),Rw=e=>{const t=m4(e);switch(t._tag){case"None":return rt(e);case"Some":return et(t.value)}},UZ=e=>o_(e,{onEmpty:Ce(_c),onFail:rf(Of),onDie:t=>Ce(bs(t)),onInterrupt:t=>Ce(Ya(t)),onSequential:pv(yr),onParallel:pv(go)}),PZ=e=>Cw(e,t=>t._tag===Sm?Ce(t.fiberId):be()),jZ=e=>o_(e,{onEmpty:be(),onFail:()=>be(),onDie:t=>Ce(bs(t)),onInterrupt:()=>be(),onSequential:pv(yr),onParallel:pv(go)}),iN=e=>o_(e,{onEmpty:_c,onFail:()=>_c,onDie:bs,onInterrupt:Ya,onSequential:yr,onParallel:go}),HZ=e=>o_(e,{onEmpty:_c,onFail:bs,onDie:bs,onInterrupt:Ya,onSequential:yr,onParallel:go}),BZ=M(2,(e,t)=>VZ(e,n=>Of(t(n)))),VZ=M(2,(e,t)=>o_(e,{onEmpty:_c,onFail:n=>t(n),onDie:n=>bs(n),onInterrupt:n=>Ya(n),onSequential:(n,r)=>yr(n,r),onParallel:(n,r)=>go(n,r)})),KZ=(e,t)=>{let n=Ln(e),r=Ln(t);for(;mo(n)&&mo(r);){const[a,o]=F(io(n),Ph([Rf(),vn()],([h,p],S)=>{const[v,R]=EC(S);return Ce([F(h,oy(v)),F(p,Nn(R))])})),[l,d]=F(io(r),Ph([Rf(),vn()],([h,p],S)=>{const[v,R]=EC(S);return Ce([F(h,oy(v)),F(p,Nn(R))])}));if(!at(a,l))return!1;n=o,r=d}return!0},GZ=e=>QZ(Ln(e),vn()),QZ=(e,t)=>{for(;;){const[n,r]=F(e,DA([Rf(),vn()],([o,l],d)=>{const[h,p]=EC(d);return[F(o,oy(h)),F(l,Nn(p))]})),a=e2(n)>0?F(t,us(n)):t;if(ow(r))return yc(a);e=r,t=a}throw new Error(G0("Cause.flattenCauseLoop"))},Cw=M(2,(e,t)=>{const n=[e];for(;n.length>0;){const r=n.pop(),a=t(r);switch(a._tag){case"None":{switch(r._tag){case Uh:case zh:{n.push(r.right),n.push(r.left);break}}break}case"Some":return a}}return be()}),EC=e=>{let t=e;const n=[];let r=Rf(),a=vn();for(;t!==void 0;)switch(t._tag){case Af:{if(n.length===0)return[r,a];t=n.pop();break}case Xf:{if(r=_h(r,hR(t._tag,t.error)),n.length===0)return[r,a];t=n.pop();break}case bm:{if(r=_h(r,hR(t._tag,t.defect)),n.length===0)return[r,a];t=n.pop();break}case Sm:{if(r=_h(r,hR(t._tag,t.fiberId)),n.length===0)return[r,a];t=n.pop();break}case Uh:{switch(t.left._tag){case Af:{t=t.right;break}case Uh:{t=yr(t.left.left,yr(t.left.right,t.right));break}case zh:{t=go(yr(t.left.left,t.right),yr(t.left.right,t.right));break}default:{a=us(a,t.right),t=t.left;break}}break}case zh:{n.push(t.right),t=t.left;break}}throw new Error(G0("Cause.evaluateCauseLoop"))},YZ={emptyCase:q3,failCase:ho,dieCase:ho,interruptCase:q3,sequentialCase:(e,t,n)=>t&&n,parallelCase:(e,t,n)=>t&&n},oN="SequentialCase",cN="ParallelCase",o_=M(2,(e,{onDie:t,onEmpty:n,onFail:r,onInterrupt:a,onParallel:o,onSequential:l})=>kw(e,void 0,{emptyCase:()=>n,failCase:(d,h)=>r(h),dieCase:(d,h)=>t(h),interruptCase:(d,h)=>a(h),sequentialCase:(d,h,p)=>l(h,p),parallelCase:(d,h,p)=>o(h,p)})),Ph=M(3,(e,t,n)=>{let r=t,a=e;const o=[];for(;a!==void 0;){const l=n(r,a);switch(r=mn(l)?l.value:r,a._tag){case Uh:{o.push(a.right),a=a.left;break}case zh:{o.push(a.right),a=a.left;break}default:{a=void 0;break}}a===void 0&&o.length>0&&(a=o.pop())}return r}),kw=M(3,(e,t,n)=>{const r=[e],a=[];for(;r.length>0;){const l=r.pop();switch(l._tag){case Af:{a.push(rt(n.emptyCase(t)));break}case Xf:{a.push(rt(n.failCase(t,l.error)));break}case bm:{a.push(rt(n.dieCase(t,l.defect)));break}case Sm:{a.push(rt(n.interruptCase(t,l.fiberId)));break}case Uh:{r.push(l.right),r.push(l.left),a.push(et({_tag:oN}));break}case zh:{r.push(l.right),r.push(l.left),a.push(et({_tag:cN}));break}}}const o=[];for(;a.length>0;){const l=a.pop();switch(l._tag){case"Left":{switch(l.left._tag){case oN:{const d=o.pop(),h=o.pop(),p=n.sequentialCase(t,d,h);o.push(p);break}case cN:{const d=o.pop(),h=o.pop(),p=n.parallelCase(t,d,h);o.push(p);break}}break}case"Right":{o.push(l.right);break}}}if(o.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return o.pop()}),Zl=(e,t)=>Tw(e)?"All fibers interrupted without errors.":h2(e).map(function(n){return(t==null?void 0:t.renderErrorCause)!==!0||n.cause===void 0?n.stack:`${n.stack} {
${g4(n.cause,"  ")}
}`}).join(`
`),g4=(e,t)=>{const n=e.stack.split(`
`);let r=`${t}[cause]: ${n[0]}`;for(let a=1,o=n.length;a<o;a++)r+=`
${t}${n[a]}`;return e.cause&&(r+=` {
${g4(e.cause,`${t}  `)}
${t}}`),r};class Dv extends globalThis.Error{constructor(n){const r=typeof n=="object"&&n!==null,a=Error.stackTraceLimit;Error.stackTraceLimit=1;super(p4(n),r&&"cause"in n&&typeof n.cause<"u"?{cause:new Dv(n.cause)}:void 0);b(this,"span");this.message===""&&(this.message="An error has occurred"),Error.stackTraceLimit=a,this.name=n instanceof Error?n.name:"Error",r&&(jh in n&&(this.span=n[jh]),Object.keys(n).forEach(o=>{o in this||(this[o]=n[o])})),this.stack=JZ(`${this.name}: ${this.message}`,n instanceof Error&&n.stack?n.stack:"",this.span)}}const p4=e=>{if(typeof e=="string")return e;if(typeof e=="object"&&e!==null&&e instanceof Error)return e.message;try{if(Me(e,"toString")&&um(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return aU(e)},WZ=/\((.*)\)/g,xv=xt("effect/Tracer/spanToTrace",()=>new WeakMap),JZ=(e,t,n)=>{const r=[e],a=t.startsWith(e)?t.slice(e.length).split(`
`):t.split(`
`);for(let o=1;o<a.length;o++){if(a[o].includes(" at new BaseEffectError")||a[o].includes(" at new YieldableError")){o++;continue}if(a[o].includes("Generator.next")||a[o].includes("effect_internal_function"))break;r.push(a[o].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(n){let o=n,l=0;for(;o&&o._tag==="Span"&&l<10;){const d=xv.get(o);if(typeof d=="function"){const h=d();if(typeof h=="string"){const p=h.matchAll(WZ);let S=!1;for(const[,v]of p)S=!0,r.push(`    at ${o.name} (${v})`);S||r.push(`    at ${o.name} (${h.replace(/^at /,"")})`)}else r.push(`    at ${o.name}`)}else r.push(`    at ${o.name}`);o=Qa(o.parent),l++}}return r.join(`
`)},jh=Symbol.for("effect/SpanAnnotation"),h2=e=>kw(e,void 0,{emptyCase:()=>[],dieCase:(t,n)=>[new Dv(n)],failCase:(t,n)=>[new Dv(n)],interruptCase:()=>[],parallelCase:(t,n,r)=>[...n,...r],sequentialCase:(t,n,r)=>[...n,...r]}),c_="Pending",Aw="Done",XZ="effect/Deferred",y4=Symbol.for(XZ),ZZ={_E:e=>e,_A:e=>e},eee=e=>({_tag:c_,joiners:e}),_4=e=>({_tag:Aw,effect:e});class wm{constructor(t){b(this,"self");b(this,"called",!1);this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new wm(this.self)}}const b4=(e,t)=>{const n=new xr("Blocked");return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n},tee=e=>{const t=new xr("RunBlocked");return t.effect_instruction_i0=e,t},Df=Symbol.for("effect/Effect");class nee{constructor(t,n){b(this,"patch");b(this,"op");b(this,"_op",EA);this.patch=t,this.op=n}}var $L;class xr{constructor(t){b(this,"_op");b(this,"effect_instruction_i0");b(this,"effect_instruction_i1");b(this,"effect_instruction_i2");b(this,"trace");b(this,$L,pf);this._op=t}[($L=Df,dt)](t){return this===t}[gt](){return un(this,Q0(this))}pipe(){return Fe(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:Vn(this.effect_instruction_i0),effect_instruction_i1:Vn(this.effect_instruction_i1),effect_instruction_i2:Vn(this.effect_instruction_i2)}}toString(){return xn(this.toJSON())}[cn](){return this.toJSON()}[Symbol.iterator](){return new wm(new fm(this))}}var qL;class S4{constructor(t){b(this,"_op");b(this,"effect_instruction_i0");b(this,"effect_instruction_i1");b(this,"effect_instruction_i2");b(this,"trace");b(this,qL,pf);this._op=t,this._tag=t}[(qL=Df,dt)](t){return Nw(t)&&t._op==="Failure"&&at(this.effect_instruction_i0,t.effect_instruction_i0)}[gt](){return F(Xn(this._tag),ot(Ae(this.effect_instruction_i0)),un(this))}get cause(){return this.effect_instruction_i0}pipe(){return Fe(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return xn(this.toJSON())}[cn](){return this.toJSON()}[Symbol.iterator](){return new wm(new fm(this))}}var NL;class v4{constructor(t){b(this,"_op");b(this,"effect_instruction_i0");b(this,"effect_instruction_i1");b(this,"effect_instruction_i2");b(this,"trace");b(this,NL,pf);this._op=t,this._tag=t}[(NL=Df,dt)](t){return Nw(t)&&t._op==="Success"&&at(this.effect_instruction_i0,t.effect_instruction_i0)}[gt](){return F(Xn(this._tag),ot(Ae(this.effect_instruction_i0)),un(this))}get value(){return this.effect_instruction_i0}pipe(){return Fe(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:Vn(this.value)}}toString(){return xn(this.toJSON())}[cn](){return this.toJSON()}[Symbol.iterator](){return new wm(new fm(this))}}const Ca=e=>Me(e,Df),Dt=e=>{const t=new xr(cU);return t.effect_instruction_i0=e,t},m2=M(3,(e,t,n)=>Us(r=>ce(e,a=>ce(Oi(Be(()=>r(t(a)))),o=>Be(()=>n(a,o)).pipe(zs({onFailure:l=>{switch(o._tag){case jr:return gn(yr(o.effect_instruction_i0,l));case Hr:return gn(l)}},onSuccess:()=>o})))))),_r=M(2,(e,t)=>ce(e,()=>pe(t))),ka=e=>_r(e,void 0),w4=function(){const e=new xr(Yy);switch(arguments.length){case 2:{e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break}case 3:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break}case 4:{e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break}default:throw new Error(G0("you're not supposed to end up here"))}return e},fy=(e,t=ai)=>{const n=new xr(qp);let r;return n.effect_instruction_i0=a=>{r=e(a)},n.effect_instruction_i1=t,eu(n,a=>Ca(r)?r:_t)},El=(e,t=ai)=>Be(()=>fy(e,t)),bc=(e,t=ai)=>w4(e,function(){let n,r;function a(h){n?n(h):r===void 0&&(r=h)}const o=new xr(qp);o.effect_instruction_i0=h=>{n=h,r&&h(r)},o.effect_instruction_i1=t;let l,d;return this.effect_instruction_i0.length!==1?(d=new AbortController,l=_n(()=>this.effect_instruction_i0(a,d.signal))):l=_n(()=>this.effect_instruction_i0(a)),l||d?eu(o,h=>(d&&d.abort(),l??_t)):o}),Em=M(2,(e,t)=>{const n=new xr(NS);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n}),Hh=M(2,(e,t)=>po(e,{onFailure:t,onSuccess:pe})),ree=M(3,(e,t,n)=>Em(e,r=>{const a=Rw(r);switch(a._tag){case"Left":return t(a.left)?n(a.left):gn(r);case"Right":return gn(a.right)}})),lN=Symbol.for("effect/OriginalAnnotation"),g2=(e,t)=>mn(t)?new Proxy(e,{has(n,r){return r===jh||r===lN||r in n},get(n,r){return r===jh?t.value:r===lN?e:n[r]}}):e,dy=e=>To(e)&&!(jh in e)?Dt(t=>gn(bs(g2(e,O2(t))))):gn(bs(e)),TC=e=>E4(()=>bs(new Fee(e))),Bh=e=>po(e,{onFailure:t=>pe(et(t)),onSuccess:t=>pe(rt(t))}),Oi=e=>T4(e,{onFailure:rn,onSuccess:sn}),$n=e=>To(e)&&!(jh in e)?Dt(t=>gn(Of(g2(e,O2(t))))):gn(Of(e)),Ow=e=>ce(_e(e),$n),gn=e=>{const t=new S4(jr);return t.effect_instruction_i0=e,t},E4=e=>ce(_e(e),gn),l_=Dt(e=>pe(e.id())),Zf=e=>Dt(t=>e(t.id())),ce=M(2,(e,t)=>{const n=new xr(dv);return n.effect_instruction_i0=e,n.effect_instruction_i1=t,n}),see=M(2,(e,t)=>ce(e,n=>{const r=typeof t=="function"?t(n):t;return Ca(r)?r:Zz(r)?fy(a=>{r.then(o=>a(pe(o)),o=>a($n(new E2(o,"An unknown error occurred in Effect.andThen"))))}):pe(r)})),aee=e=>{const t=new xr("OnStep");return t.effect_instruction_i0=e,t},Tm=e=>ce(e,Ge),T4=M(2,(e,t)=>zs(e,{onFailure:n=>pe(t.onFailure(n)),onSuccess:n=>pe(t.onSuccess(n))})),zs=M(2,(e,t)=>{const n=new xr(hv);return n.effect_instruction_i0=e,n.effect_instruction_i1=t.onFailure,n.effect_instruction_i2=t.onSuccess,n}),po=M(2,(e,t)=>zs(e,{onFailure:n=>{if(h4(n).length>0)return gn(HZ(n));const a=zZ(n);return a.length>0?t.onFailure(lw(a)):gn(n)},onSuccess:t.onSuccess})),oc=M(2,(e,t)=>Be(()=>{const n=an(e),r=W0(n.length);let a=0;return _r(b2({while:()=>a<n.length,body:()=>t(n[a],a),step:o=>{r[a++]=o}}),r)})),xf=M(2,(e,t)=>Be(()=>{const n=an(e);let r=0;return b2({while:()=>r<n.length,body:()=>t(n[r],r),step:()=>{r++}})})),mr=ce(l_,e=>p2(e)),p2=e=>gn(Ya(e)),Vh=e=>{const t=new xr(dm);return t.effect_instruction_i0=SZ(_m),t.effect_instruction_i1=()=>e,t},R4=M(2,(e,t)=>Us(n=>ce(Oi(n(e)),r=>L4(t,r)))),ct=M(2,(e,t)=>ce(e,n=>_e(()=>t(n)))),y2=M(2,(e,t)=>po(e,{onFailure:n=>Ow(()=>t.onFailure(n)),onSuccess:n=>_e(()=>t.onSuccess(n))})),Dw=M(2,(e,t)=>zs(e,{onFailure:n=>{const r=Rw(n);switch(r._tag){case"Left":return Ow(()=>t(r.left));case"Right":return gn(r.right)}},onSuccess:pe})),iee=M(2,(e,t)=>Sc(e,n=>M4(n)?_t:t(n.effect_instruction_i0))),Sc=M(2,(e,t)=>Us(n=>zs(n(e),{onFailure:r=>{const a=rn(r);return zs(t(a),{onFailure:o=>rn(yr(r,o)),onSuccess:()=>a})},onSuccess:r=>{const a=sn(r);return Qt(t(a),a)}}))),eu=M(2,(e,t)=>Sc(e,Mw({onFailure:n=>Tw(n)?ka(t(d2(n))):_t,onSuccess:()=>_t}))),_2=e=>oee(e,Ge),oee=M(2,(e,t)=>po(e,{onFailure:n=>dy(t(n)),onSuccess:pe})),pe=e=>{const t=new v4(Hr);return t.effect_instruction_i0=e,t},Be=e=>{const t=new xr(Yy);return t.commit=e,t},_e=e=>{const t=new xr(oU);return t.effect_instruction_i0=e,t},vc=M(e=>e.length===3||e.length===2&&!(To(e[1])&&"onlyEffect"in e[1]),(e,t)=>ce(e,n=>{const r=typeof t=="function"?t(n):t;return Ca(r)?_r(r,n):Zz(r)?fy(a=>{r.then(o=>a(pe(n)),o=>a($n(new E2(o,"An unknown error occurred in Effect.tap"))))}):pe(n)})),cee=e=>Dt(t=>{const n=t.getFiberRef(CC),r=F(n,Dn(()=>t.scope()));return e(ed(CC,Ce(r)))}),Oc=e=>{const t=new xr(dm);return t.effect_instruction_i0=o4(_m),t.effect_instruction_i1=()=>e,t},Us=e=>w4(e,function(){const t=new xr(dm);return t.effect_instruction_i0=o4(_m),t.effect_instruction_i1=n=>a4(n)?_n(()=>this.effect_instruction_i0(Vh)):_n(()=>this.effect_instruction_i0(Oc)),t}),_t=pe(void 0),lee=e=>{const t=new xr(dm);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},xw=M(2,(e,t)=>ce(t,n=>n?F(e,ct(Ce)):pe(be()))),b2=e=>{const t=new xr(mv);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},$v=e=>Be(()=>{const t=new xr(Np);return t.effect_instruction_i0=e(),t}),uee=function(){const e=arguments.length===1?arguments[0]:arguments[1].bind(arguments[0]);return $v(()=>e(F))},fee=(e,...t)=>Object.defineProperty(t.length===0?function(...n){return $v(()=>e.apply(this,n))}:function(...n){let r=$v(()=>e.apply(this,n));for(const a of t)r=a(r,...n);return r},"length",{value:e.length,configurable:!0}),dee=M(2,(e,t)=>{const n=new xr(dm);return n.effect_instruction_i0=t,n.effect_instruction_i1=()=>e,n}),u_=e=>{const t=new xr(MS);return typeof(e==null?void 0:e.priority)<"u"?Oee(t,e.priority):t},C4=M(2,(e,t)=>ce(e,n=>ct(t,r=>[n,r]))),xl=M(2,(e,t)=>ce(e,n=>_r(t,n))),Qt=M(2,(e,t)=>ce(e,()=>t)),k4=M(3,(e,t,n)=>ce(e,r=>ct(t,a=>n(r,a)))),hee=El(()=>{const e=setInterval(()=>{},2147483647);return _e(()=>clearInterval(e))}),hy=e=>ce(l_,t=>F(e,cc(t))),cc=M(2,(e,t)=>ce(e.interruptAsFork(t),()=>e.await)),mee={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return Fe(this,arguments)}},gee={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return Fe(this,arguments)}},pee={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return Fe(this,arguments)}},yee={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return Fe(this,arguments)}},A4={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return Fe(this,arguments)}},O4={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return Fe(this,arguments)}},_ee={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return Fe(this,arguments)}},bee={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return Fe(this,arguments)}},See="effect/FiberRef",vee=Symbol.for(See),wee={_A:e=>e},f_=e=>Dt(t=>sn(t.getFiberRef(e))),Rm=M(2,(e,t)=>ce(f_(e),t)),qv=M(2,(e,t)=>Eee(e,()=>[void 0,t])),Eee=M(2,(e,t)=>Dt(n=>{const[r,a]=t(n.getFiberRef(e));return n.setFiberRef(e,a),pe(r)})),ed=M(3,(e,t,n)=>m2(xl(f_(t),qv(t,n)),()=>e,r=>qv(t,r))),S2=M(3,(e,t,n)=>Rm(t,r=>ed(e,t,n(r)))),fs=(e,t)=>Cm(e,{differ:t4(),fork:(t==null?void 0:t.fork)??Ge,join:t==null?void 0:t.join}),Tee=e=>{const t=aZ();return Cm(e,{differ:t,fork:t.empty})},Ree=e=>{const t=iZ(t4());return Cm(e,{differ:t,fork:t.empty})},D4=e=>{const t=sZ();return Cm(e,{differ:t,fork:t.empty})},Cm=(e,t)=>({...Jy,[vee]:wee,initial:e,commit(){return f_(this)},diff:(r,a)=>t.differ.diff(r,a),combine:(r,a)=>t.differ.combine(r,a),patch:r=>a=>t.differ.patch(r,a),fork:t.fork,join:t.join??((r,a)=>a)}),Cee=e=>Cm(e,{differ:sN,fork:sN.empty}),Mi=xt(Symbol.for("effect/FiberRef/currentContext"),()=>D4(vf())),td=xt(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>fs(0)),x4=xt(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>fs(2048)),$4=xt(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>fs(Sw())),kee=xt(Symbol.for("effect/FiberRef/currentLogLevel"),()=>fs(A4)),Aee=xt(Symbol.for("effect/FiberRef/currentLogSpan"),()=>fs(Fh())),Oee=M(2,(e,t)=>ed(e,td,t)),Dee=xt(Symbol.for("effect/FiberRef/currentConcurrency"),()=>fs("unbounded")),xee=xt(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>fs(!0)),v2=xt(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>fs(Ce(O4))),$ee=M(2,(e,t)=>ed(e,v2,t)),RC=xt(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>Ree(Ll())),CC=xt(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>fs(be(),{fork:()=>be(),join:(e,t)=>e})),gS=xt(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>fs(_c,{fork:()=>_c,join:(e,t)=>e})),qee=xt(Symbol.for("effect/FiberRef/currentTracerEnabled"),()=>fs(!0)),$w=xt(Symbol.for("effect/FiberRef/currentTracerTiming"),()=>fs(!0)),Nee=xt(Symbol.for("effect/FiberRef/currentTracerSpanAnnotations"),()=>fs(Sw())),Mee=xt(Symbol.for("effect/FiberRef/currentTracerSpanLinks"),()=>fs(vn())),uN=Symbol.for("effect/Scope"),fN=Symbol.for("effect/CloseableScope"),q4=(e,t)=>e.addFinalizer(()=>ka(t)),my=(e,t)=>e.addFinalizer(t),kC=(e,t)=>e.close(t),qw=(e,t)=>e.fork(t),Iee=e=>Lee(Ge)(e),Lee=M(2,(e,t)=>{const n=F(e,m4,rf(t));switch(n._tag){case"None":return F(h4(e),cw,on({onNone:()=>{const r=an(d2(e)).flatMap(a=>an(s2(a)).map(o=>`#${o}`));return new zee(r?`Interrupted by fibers: ${r.join(", ")}`:void 0)},onSome:Ge}));case"Some":return n.value}}),w2=function(){class e extends globalThis.Error{commit(){return $n(this)}toJSON(){const n={...this};return this.message&&(n.message=this.message),this.cause&&(n.cause=this.cause),n}[cn](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}
${this.stack.split(`
`).slice(1).join(`
`)}`:this.toString():"Bun"in globalThis?Zl(Of(this),{renderErrorCause:!0}):this}}return Object.assign(e.prototype,mQ),e}(),d_=(e,t)=>{class n extends w2{constructor(){super(...arguments);b(this,"_tag",t)}}return Object.assign(n.prototype,e),n.prototype.name=t,n},dN=Symbol.for("effect/Cause/errors/RuntimeException"),Fee=d_({[dN]:dN},"RuntimeException"),AC=Symbol.for("effect/Cause/errors/InterruptedException"),zee=d_({[AC]:AC},"InterruptedException"),Uee=e=>Me(e,AC),hN=Symbol.for("effect/Cause/errors/IllegalArgument"),Pee=d_({[hN]:hN},"IllegalArgumentException"),mN=Symbol.for("effect/Cause/errors/NoSuchElement"),h_=d_({[mN]:mN},"NoSuchElementException"),gN=Symbol.for("effect/Cause/errors/Timeout"),jee=d_({[gN]:gN},"TimeoutException"),Hee=e=>new jee(`Operation timed out after '${AP(e)}'`),pN=Symbol.for("effect/Cause/errors/UnknownException"),E2=function(){class e extends w2{constructor(r,a){super(a??"An unknown error occurred",{cause:r});b(this,"_tag","UnknownException");b(this,"error");this.error=r}}return Object.assign(e.prototype,{[pN]:pN,name:"UnknownException"}),e}(),Nw=e=>Ca(e)&&"_tag"in e&&(e._tag==="Success"||e._tag==="Failure"),N4=e=>e._tag==="Failure",M4=e=>e._tag==="Success",Bee=e=>{switch(e._tag){case jr:return f2(e.effect_instruction_i0);case Hr:return!1}},HS=M(2,(e,t)=>{switch(e._tag){case jr:return rn(e.effect_instruction_i0);case Hr:return sn(t)}}),yR=e=>HS(e,void 0),Sh=(e,t)=>Qee(e,t!=null&&t.parallel?go:yr),ch=e=>rn(bs(e)),gy=e=>rn(Of(e)),rn=e=>{const t=new S4(jr);return t.effect_instruction_i0=e,t},Vee=M(2,(e,t)=>{switch(e._tag){case jr:return rn(e.effect_instruction_i0);case Hr:return t(e.effect_instruction_i0)}}),Kee=e=>F(e,Vee(Ge)),T2=e=>rn(Ya(e)),BS=M(2,(e,t)=>{switch(e._tag){case jr:return rn(e.effect_instruction_i0);case Hr:return sn(t(e.effect_instruction_i0))}}),Mw=M(2,(e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case jr:return t(e.effect_instruction_i0);case Hr:return n(e.effect_instruction_i0)}}),OC=M(2,(e,{onFailure:t,onSuccess:n})=>{switch(e._tag){case jr:return t(e.effect_instruction_i0);case Hr:return n(e.effect_instruction_i0)}}),sn=e=>{const t=new v4(Hr);return t.effect_instruction_i0=e,t},is=sn(void 0),Gee=M(2,(e,t)=>R2(e,t,{onSuccess:(n,r)=>[n,r],onFailure:yr})),I4=M(2,(e,t)=>R2(e,t,{onSuccess:(n,r)=>r,onFailure:yr})),R2=M(3,(e,t,{onFailure:n,onSuccess:r})=>{switch(e._tag){case jr:switch(t._tag){case Hr:return rn(e.effect_instruction_i0);case jr:return rn(n(e.effect_instruction_i0,t.effect_instruction_i0))}case Hr:switch(t._tag){case Hr:return sn(r(e.effect_instruction_i0,t.effect_instruction_i0));case jr:return rn(t.effect_instruction_i0)}}}),Qee=(e,t)=>{const n=wf(e);return mo(n)?F(ic(n),DA(F(io(n),BS(Ln)),(r,a)=>F(r,R2(a,{onSuccess:(o,l)=>F(o,us(l)),onFailure:t}))),BS(yc),BS(r=>si(r)),Ce):be()},m_=e=>({...Jy,[y4]:ZZ,state:Wf(eee([])),commit(){return yo(this)},blockingOn:e}),g_=()=>ce(l_,e=>Yee(e)),Yee=e=>_e(()=>m_(e)),yo=e=>El(t=>{const n=Vt(e.state);switch(n._tag){case Aw:return t(n.effect);case c_:return n.joiners.push(t),ete(e,t)}},e.blockingOn),Wee=M(2,(e,t)=>R4(t,e)),km=M(2,(e,t)=>_e(()=>{const n=Vt(e.state);switch(n._tag){case Aw:return!1;case c_:{Jf(e.state,_4(t));for(let r=0,a=n.joiners.length;r<a;r++)n.joiners[r](t);return!0}}})),L4=M(2,(e,t)=>km(e,t)),Jee=M(2,(e,t)=>km(e,$n(t))),F4=M(2,(e,t)=>km(e,gn(t))),Xee=e=>ce(l_,t=>km(e,p2(t))),C2=M(2,(e,t)=>km(e,p2(t))),Zee=e=>_e(()=>Vt(e.state)._tag===Aw),p_=M(2,(e,t)=>km(e,pe(t))),y_=(e,t)=>{const n=Vt(e.state);if(n._tag===c_){Jf(e.state,_4(t));for(let r=0,a=n.joiners.length;r<a;r++)n.joiners[r](t)}},ete=(e,t)=>_e(()=>{const n=Vt(e.state);if(n._tag===c_){const r=n.joiners.indexOf(t);r>=0&&n.joiners.splice(r,1)}}),tte=Dt(e=>sn(e.currentContext)),Am=()=>tte,Om=e=>ce(Am(),e),k2=M(2,(e,t)=>ed(Mi,t)(e)),A2=M(2,(e,t)=>S2(Mi,n=>Xl(n,t))(e)),z4=M(2,(e,t)=>Om(n=>k2(e,t(n)))),O2=e=>{const t=e.currentSpan;return t!==void 0&&t._tag==="Span"?Ce(t):be()},nte={_tag:"Span",spanId:"noop",traceId:"noop",sampled:!1,status:{_tag:"Ended",startTime:BigInt(0),endTime:BigInt(0),exit:is},attributes:new Map,links:[],kind:"internal",attribute(){},event(){},end(){},addLinks(){}},rte=e=>Object.assign(Object.create(nte),e),Iu=y4,jt=g_,qn=yo,ste=Wee,tu=L4,D2=Jee,cf=F4,yN=Xee,DC=Zee,On=p_,x2=y_,ate=Nw,Dm=N4,Nv=M4,ite=Bee,ote=Sh,Mv=ch,xm=gy,Or=rn,cte=Kee,lte=T2,ute=BS,oo=Mw,er=sn,Ra=is,_N=Gee,py=I4,bN=Symbol.for("effect/MutableHashMap"),fte={[bN]:bN,[Symbol.iterator](){return new $2(this)},toString(){return xn(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(Vn)}},[cn](){return this.toJSON()},pipe(){return Fe(this,arguments)}};class $2{constructor(t){b(this,"self");b(this,"referentialIterator");b(this,"bucketIterator");this.self=t,this.referentialIterator=t.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();const t=this.referentialIterator.next();return t.done?(this.bucketIterator=new dte(this.self.buckets.values()),this.next()):t}[Symbol.iterator](){return new $2(this.self)}}class dte{constructor(t){b(this,"backing");b(this,"currentBucket");this.backing=t}next(){if(this.currentBucket===void 0){const n=this.backing.next();if(n.done)return n;this.currentBucket=n.value[Symbol.iterator]()}const t=this.currentBucket.next();return t.done?(this.currentBucket=void 0,this.next()):t}}const hte=()=>{const e=Object.create(fte);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},ju=M(2,(e,t)=>{if(fv(t)===!1)return e.referential.has(t)?Ce(e.referential.get(t)):be();const n=t[gt](),r=e.buckets.get(n);return r===void 0?be():mte(e,r,t)}),mte=(e,t,n,r=!1)=>{for(let a=0,o=t.length;a<o;a++)if(n[dt](t[a][0])){const l=t[a][1];return r&&(t.splice(a,1),e.bucketsSize--),Ce(l)}return be()},rp=M(2,(e,t)=>mn(ju(e,t))),sp=M(3,(e,t,n)=>{if(fv(t)===!1)return e.referential.set(t,n),e;const r=t[gt](),a=e.buckets.get(r);return a===void 0?(e.buckets.set(r,[[t,n]]),e.bucketsSize++,e):(gte(e,a,t),a.push([t,n]),e.bucketsSize++,e)}),gte=(e,t,n)=>{for(let r=0,a=t.length;r<a;r++)if(n[dt](t[r][0])){t.splice(r,1),e.bucketsSize--;return}},SN=Symbol.for("effect/MutableList"),pte={[SN]:SN,[Symbol.iterator](){let e=!1,t=this.head;return{next(){if(e)return this.return();if(t==null)return e=!0,this.return();const n=t.value;return t=t.next,{done:e,value:n}},return(n){return e||(e=!0),{done:!0,value:n}}}},toString(){return xn(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(Vn)}},[cn](){return this.toJSON()},pipe(){return Fe(this,arguments)}},yte=e=>({value:e,removed:!1,prev:void 0,next:void 0}),_te=()=>{const e=Object.create(pte);return e.head=void 0,e.tail=void 0,e._length=0,e},U4=e=>q2(e)===0,q2=e=>e._length,bte=M(2,(e,t)=>{const n=yte(t);return e.head===void 0&&(e.head=n),e.tail===void 0||(e.tail.next=n,n.prev=e.tail),e.tail=n,e._length+=1,e}),Ste=e=>{const t=e.head;if(t!==void 0)return vte(e,t),t.value},vte=(e,t)=>{t.removed||(t.removed=!0,t.prev!==void 0&&t.next!==void 0?(t.prev.next=t.next,t.next.prev=t.prev):t.prev!==void 0?(e.tail=t.prev,t.prev.next=void 0):t.next!==void 0?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))},vN=Symbol.for("effect/MutableQueue"),ur=Symbol.for("effect/mutable/MutableQueue/Empty"),wte={[vN]:vN,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return xn(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(Vn)}},[cn](){return this.toJSON()},pipe(){return Fe(this,arguments)}},P4=e=>{const t=Object.create(wte);return t.queue=_te(),t.capacity=e,t},N2=e=>P4(e),Iw=()=>P4(void 0),M2=e=>q2(e.queue),lf=e=>U4(e.queue),Ete=e=>e.capacity===void 0?1/0:e.capacity,Kh=M(2,(e,t)=>{const n=q2(e.queue);return e.capacity!==void 0&&n===e.capacity?!1:(bte(t)(e.queue),!0)}),I2=M(2,(e,t)=>{const n=t[Symbol.iterator]();let r,a=vn(),o=!0;for(;o&&(r=n.next())&&!r.done;)o=Kh(r.value)(e);for(;r!=null&&!r.done;)a=us(r.value)(a),r=n.next();return yc(a)}),dc=M(2,(e,t)=>U4(e.queue)?t:Ste(e.queue)),Lw=M(2,(e,t)=>{let n=vn(),r=0;for(;r<t;){const a=dc(ur)(e);if(a===ur)break;n=us(a)(n),r+=1}return yc(n)}),Tte="effect/Clock",wN=Symbol.for(Tte),nd=Ps("effect/Clock"),Rte=2**31-1,EN={unsafeSchedule(e,t){const n=Nh(t);if(n>Rte)return ho;let r=!1;const a=setTimeout(()=>{r=!0,e()},n);return()=>(clearTimeout(a),!r)}},TN=function(){const e=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*e;let t;return()=>(t===void 0&&(t=BigInt(Date.now())*e-BigInt(Math.round(performance.now()*1e6))),t+BigInt(Math.round(performance.now()*1e6)))}(),Cte=function(){const e=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!e)return TN;const t=TN()-e.bigint();return()=>t+e.bigint()}();var ML;ML=wN;class kte{constructor(){b(this,ML,wN);b(this,"currentTimeMillis",_e(()=>this.unsafeCurrentTimeMillis()));b(this,"currentTimeNanos",_e(()=>this.unsafeCurrentTimeNanos()))}unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return Cte()}scheduler(){return pe(EN)}sleep(t){return bc(n=>{const r=EN.unsafeSchedule(()=>n(_t),t);return ka(_e(r))})}}const Ate=()=>new kte,j4="And",H4="Or",B4="InvalidData",V4="MissingData",K4="SourceUnavailable",G4="Unsupported",Ote="effect/ConfigError",RN=Symbol.for(Ote),$m={_tag:"ConfigError",[RN]:RN},Q4=(e,t)=>{const n=Object.create($m);return n._op=j4,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),Object.defineProperty(n,"message",{enumerable:!1,get(){return this.toString()}}),n},Y4=(e,t)=>{const n=Object.create($m);return n._op=H4,n.left=e,n.right=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),Object.defineProperty(n,"message",{enumerable:!1,get(){return this.toString()}}),n},Dte=(e,t,n={pathDelim:"."})=>{const r=Object.create($m);return r._op=B4,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Invalid data at ${F(this.path,mm(n.pathDelim))}: "${this.message}")`}}),r},$f=(e,t,n={pathDelim:"."})=>{const r=Object.create($m);return r._op=V4,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Missing data at ${F(this.path,mm(n.pathDelim))}: "${this.message}")`}}),r},xte=(e,t,n,r={pathDelim:"."})=>{const a=Object.create($m);return a._op=K4,a.path=e,a.message=t,a.cause=n,Object.defineProperty(a,"toString",{enumerable:!1,value(){return`(Source unavailable at ${F(this.path,mm(r.pathDelim))}: "${this.message}")`}}),a},$te=(e,t,n={pathDelim:"."})=>{const r=Object.create($m);return r._op=G4,r.path=e,r.message=t,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${F(this.path,mm(n.pathDelim))}: "${this.message}")`}}),r},Yu=M(2,(e,t)=>{switch(e._op){case j4:return Q4(Yu(e.left,t),Yu(e.right,t));case H4:return Y4(Yu(e.left,t),Yu(e.right,t));case B4:return Dte([...t,...e.path],e.message);case V4:return $f([...t,...e.path],e.message);case K4:return xte([...t,...e.path],e.message,e.cause);case G4:return $te([...t,...e.path],e.message)}}),qte={_tag:"Empty"},_R=M(2,(e,t)=>{let n=i2(t),r=e;for(;a2(n);){const a=n.head;switch(a._tag){case"Empty":{n=n.tail;break}case"AndThen":{n=kf(a.first,kf(a.second,n.tail));break}case"MapName":{r=sf(r,a.f),n=n.tail;break}case"Nested":{r=yv(r,a.name),n=n.tail;break}case"Unnested":{if(F(Mp(r),FQ(a.name)))r=yf(r),n=n.tail;else return et($f(r,`Expected ${a.name} to be in path in ConfigProvider#unnested`));break}}}return rt(r)}),Nte="Constant",Mte="Fail",Ite="Fallback",Lte="Described",Fte="Lazy",zte="MapOrFail",Ute="Nested",Pte="Primitive",jte="Sequence",Hte="HashMap",Bte="ZipWith";var CN={};const Iv=(e,t)=>[...e,...t],Vte="effect/ConfigProvider",kN=Symbol.for(Vte),Kte=Ps("effect/ConfigProvider"),Gte="effect/ConfigProviderFlat",AN=Symbol.for(Gte),Qte=e=>({[kN]:kN,pipe(){return Fe(this,arguments)},...e}),Yte=e=>({[AN]:AN,patch:e.patch,load:(t,n,r=!0)=>e.load(t,n,r),enumerateChildren:e.enumerateChildren}),Wte=e=>Qte({load:t=>ce(Ha(e,Ll(),t,!1),n=>on(Mp(n),{onNone:()=>$n($f(Ll(),`Expected a single value having structure: ${t}`)),onSome:pe})),flattened:e}),Jte=e=>{const{pathDelim:t,seqDelim:n}=Object.assign({},{pathDelim:"_",seqDelim:","},e),r=h=>F(h,mm(t)),a=h=>h.split(t),o=()=>typeof process<"u"&&"env"in process&&typeof CN=="object"?CN:{};return Wte(Yte({load:(h,p,S=!0)=>{const v=r(h),R=o(),O=v in R?Ce(R[v]):be();return F(O,Dw(()=>$f(h,`Expected ${v} to exist in the process context`)),ce(x=>nne(x,h,p,n,S)))},enumerateChildren:h=>_e(()=>{const p=o(),R=Object.keys(p).map(O=>a(O.toUpperCase())).filter(O=>{for(let x=0;x<h.length;x++){const z=F(h,TU(x)),A=O[x];if(A===void 0||z!==A)return!1}return!0}).flatMap(O=>O.slice(h.length,h.length+1));return HJ(R)}),patch:qte}))},Xte=(e,t,n,r)=>{const a=L3(n.length,h=>h>=r.length?be():Ce([e(h),h+1])),o=L3(r.length,h=>h>=n.length?be():Ce([t(h),h+1])),l=Iv(n,a),d=Iv(r,o);return[l,d]},Zte=(e,t)=>{let n=t;if(n._tag==="Nested"){const r=e.slice();for(;n._tag==="Nested";)r.push(n.name),n=n.config;return r}return e},Ha=(e,t,n,r)=>{const a=n;switch(a._tag){case Nte:return pe(Va(a.value));case Lte:return Be(()=>Ha(e,t,a.config,r));case Mte:return $n($f(t,a.message));case Ite:return F(Be(()=>Ha(e,t,a.first,r)),Hh(o=>a.condition(o)?F(Ha(e,t,a.second,r),Hh(l=>$n(Y4(o,l)))):$n(o)));case Fte:return Be(()=>Ha(e,t,a.config(),r));case zte:return Be(()=>F(Ha(e,t,a.original,r),ce(oc(o=>F(a.mapOrFail(o),Dw(Yu(Zte(t,a.original))))))));case Ute:return Be(()=>Ha(e,Iv(t,Va(a.name)),a.config,r));case Pte:return F(_R(t,e.patch),ce(o=>F(e.load(o,a,r),ce(l=>{if(l.length===0){const d=F(nY(o),Dn(()=>"<n/a>"));return $n($f([],`Expected ${a.description} with name ${d}`))}return pe(l)}))));case jte:return F(_R(t,e.patch),ce(o=>F(e.enumerateChildren(o),ce(sne),ce(l=>l.length===0?Be(()=>ct(Ha(e,t,a.config,!0),Va)):F(oc(l,d=>Ha(e,WQ(t,`[${d}]`),a.config,!0)),ct(d=>{const h=hY(d);return h.length===0?Va(Ll()):Va(h)}))))));case Hte:return Be(()=>F(_R(t,e.patch),ce(o=>F(e.enumerateChildren(o),ce(l=>F(l,oc(d=>Ha(e,Iv(o,Va(d)),a.valueConfig,r)),ct(d=>d.length===0?Va(Sw()):F(rne(d),sf(h=>rX(I3(an(l),h)))))))))));case Bte:return Be(()=>F(Ha(e,t,a.left,r),Bh,ce(o=>F(Ha(e,t,a.right,r),Bh,ce(l=>{if(Lr(o)&&Lr(l))return $n(Q4(o.left,l.left));if(Lr(o)&&so(l))return $n(o.left);if(so(o)&&Lr(l))return $n(l.left);if(so(o)&&so(l)){const d=F(t,mm(".")),h=ene(t,d),[p,S]=Xte(h,h,F(o.right,sf(rt)),F(l.right,sf(rt)));return F(p,I3(S),oc(([v,R])=>F(C4(v,R),ct(([O,x])=>a.zip(O,x)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},ene=(e,t)=>n=>et($f(e,`The element at index ${n} in a sequence at path "${t}" was missing`)),tne=(e,t)=>e.split(new RegExp(`\\s*${bv(t)}\\s*`)),nne=(e,t,n,r,a)=>a?F(tne(e,r),oc(o=>n.parse(o.trim())),Dw(Yu(t))):F(n.parse(e),y2({onFailure:Yu(t),onSuccess:Va})),rne=e=>Object.keys(e[0]).map(t=>e.map(n=>n[t])),sne=e=>F(oc(e,ine),y2({onFailure:()=>Ll(),onSuccess:ty(xh)}),Bh,ct(CQ)),ane=/^(\[(\d+)\])$/,ine=e=>{const t=e.match(ane);if(t!==null){const n=t[2];return F(n!==void 0&&n.length>0?Ce(n):be(),hm(one))}return be()},one=e=>{const t=Number.parseInt(e);return Number.isNaN(t)?be():Ce(t)},ON=Symbol.for("effect/Console"),Fw=Ps("effect/Console"),cne={[ON]:ON,assert(e,...t){return _e(()=>{console.assert(e,...t)})},clear:_e(()=>{console.clear()}),count(e){return _e(()=>{console.count(e)})},countReset(e){return _e(()=>{console.countReset(e)})},debug(...e){return _e(()=>{console.debug(...e)})},dir(e,t){return _e(()=>{console.dir(e,t)})},dirxml(...e){return _e(()=>{console.dirxml(...e)})},error(...e){return _e(()=>{console.error(...e)})},group(e){return e!=null&&e.collapsed?_e(()=>console.groupCollapsed(e==null?void 0:e.label)):_e(()=>console.group(e==null?void 0:e.label))},groupEnd:_e(()=>{console.groupEnd()}),info(...e){return _e(()=>{console.info(...e)})},log(...e){return _e(()=>{console.log(...e)})},table(e,t){return _e(()=>{console.table(e,t)})},time(e){return _e(()=>console.time(e))},timeEnd(e){return _e(()=>console.timeEnd(e))},timeLog(e,...t){return _e(()=>{console.timeLog(e,...t)})},trace(...e){return _e(()=>{console.trace(...e)})},warn(...e){return _e(()=>{console.warn(...e)})},unsafe:console},lne="effect/Random",DN=Symbol.for(lne),une=Ps("effect/Random");var IL;IL=DN;class fne{constructor(t){b(this,"seed");b(this,IL,DN);b(this,"PRNG");this.seed=t,this.PRNG=new XG(t)}get next(){return _e(()=>this.PRNG.number())}get nextBoolean(){return ct(this.next,t=>t>.5)}get nextInt(){return _e(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(t,n){return ct(this.next,r=>(n-t)*r+t)}nextIntBetween(t,n){return _e(()=>this.PRNG.integer(n-t)+t)}shuffle(t){return dne(t,n=>this.nextIntBetween(0,n))}}const dne=(e,t)=>Be(()=>F(_e(()=>Array.from(e)),ce(n=>{const r=[];for(let a=n.length;a>=2;a=a-1)r.push(a);return F(r,xf(a=>F(t(a),ct(o=>hne(n,a-1,o)))),_r(wf(n)))}))),hne=(e,t,n)=>{const r=e[t];return e[t]=e[n],e[n]=r,e},mne=e=>new fne(Ae(e)),xN=Symbol.for("effect/Tracer"),W4=e=>({[xN]:xN,...e}),__=Ps("effect/Tracer"),_o=Ps("effect/ParentSpan"),$N=function(){const e="abcdef0123456789",t=e.length;return function(n){let r="";for(let a=0;a<n;a++)r+=e.charAt(Math.floor(Math.random()*t));return r}}();class gne{constructor(t,n,r,a,o,l){b(this,"name");b(this,"parent");b(this,"context");b(this,"startTime");b(this,"kind");b(this,"_tag","Span");b(this,"spanId");b(this,"traceId","native");b(this,"sampled",!0);b(this,"status");b(this,"attributes");b(this,"events",[]);b(this,"links");this.name=t,this.parent=n,this.context=r,this.startTime=o,this.kind=l,this.status={_tag:"Started",startTime:o},this.attributes=new Map,this.traceId=n._tag==="Some"?n.value.traceId:$N(32),this.spanId=$N(16),this.links=Array.from(a)}end(t,n){this.status={_tag:"Ended",endTime:t,exit:n,startTime:this.status.startTime}}attribute(t,n){this.attributes.set(t,n)}event(t,n,r){this.events.push([t,n,r??{}])}addLinks(t){this.links.push(...t)}}const pne=W4({span:(e,t,n,r,a,o)=>new gne(e,t,n,r,a,o),context:e=>e()}),hc=e=>{if((e==null?void 0:e.captureStackTrace)===!1)return e;if((e==null?void 0:e.captureStackTrace)!==void 0&&typeof e.captureStackTrace!="boolean")return e;const t=Error.stackTraceLimit;Error.stackTraceLimit=3;const n=new Error;Error.stackTraceLimit=t;let r=!1;return{...e,captureStackTrace:()=>{if(r!==!1)return r;if(n.stack!==void 0){const a=n.stack.split(`
`);if(a[3]!==void 0)return r=a[3].trim(),r}}}},Lv=sw()("effect/Tracer/DisablePropagation",{defaultValue:ho}),yne=F(vf(),_a(nd,Ate()),_a(Fw,cne),_a(une,mne(Math.random())),_a(Kte,Jte()),_a(__,pne)),bo=xt(Symbol.for("effect/DefaultServices/currentServices"),()=>D4(yne)),_ne=e=>{const t=Ta(e);return zw(n=>n.sleep(t))},J4=e=>Dt(t=>e(t.currentDefaultServices)),zw=e=>J4(t=>e(t.unsafeMap.get(nd.key))),bne=zw(e=>e.currentTimeMillis),Sne=e=>J4(t=>e(t.unsafeMap.get(__.key))),X4=_ne,vne=bne,wne=zw,Ene=nd;function Tne(e){return new zl(e)}function Rne(){return Tne(new Map)}const qN=Symbol.for("effect/FiberRefs");var LL;LL=qN;class zl{constructor(t){b(this,"locals");b(this,LL,qN);this.locals=t}pipe(){return Fe(this,arguments)}}const Cne=(e,t,n,r=!1)=>{const a=e;let o=t,l=n,d=r,h;for(;h===void 0;)if(In(o)&&In(l)){const p=Ms(o)[0],S=yf(o),v=Ms(l)[0],R=Ms(l)[1],O=yf(l);p.startTimeMillis<v.startTimeMillis?(l=O,d=!0):p.startTimeMillis>v.startTimeMillis?o=S:p.id<v.id?(l=O,d=!0):p.id>v.id?o=S:h=[R,d]}else h=[a.initial,!0];return h},kne=M(3,(e,t,n)=>{const r=new Map(e.locals);return n.locals.forEach((a,o)=>{const l=a[0][1];if(!a[0][0][dt](t)){if(!r.has(o)){if(at(l,o.initial))return;r.set(o,[[t,o.join(o.initial,l)]]);return}const d=r.get(o),[h,p]=Cne(o,d,a);if(p){const S=o.diff(h,l),v=d[0][1],R=o.join(v,o.patch(S)(v));if(!at(v,R)){let O;const x=d[0][0];x[dt](t)?O=[[x,R],...d.slice(1)]:O=[[t,R],...d],r.set(o,O)}}}}),new zl(r)}),Ane=M(2,(e,t)=>{const n=new Map;return Z4(e,n,t),new zl(n)}),Z4=(e,t,n)=>{e.locals.forEach((r,a)=>{const o=r[0][1],l=a.patch(a.fork)(o);at(o,l)?t.set(a,r):t.set(a,[[n,l],...r])})},ej=M(2,(e,t)=>{const n=new Map(e.locals);return n.delete(t),new zl(n)}),tj=M(2,(e,t)=>e.locals.has(t)?Ce(Ms(e.locals.get(t))[1]):be()),yy=M(2,(e,t)=>F(tj(e,t),Dn(()=>t.initial))),xC=M(2,(e,{fiberId:t,fiberRef:n,value:r})=>{if(e.locals.size===0)return new zl(new Map([[n,[[t,r]]]]));const a=new Map(e.locals);return $C(a,t,n,r),new zl(a)}),$C=(e,t,n,r)=>{const a=e.get(n)??[];let o;if(In(a)){const[l,d]=Ms(a);if(l[dt](t)){if(at(d,r))return;o=[[t,r],...a.slice(1)]}else o=[[t,r],...a]}else o=[[t,r]];e.set(n,o)},One=M(2,(e,{entries:t,forkAs:n})=>{if(e.locals.size===0)return new zl(new Map(t));const r=new Map(e.locals);return n!==void 0&&Z4(e,r,n),t.forEach(([a,o])=>{o.length===1?$C(r,o[0][0],a,o[0][1]):o.forEach(([l,d])=>{$C(r,l,a,d)})}),new zl(r)}),NN=tj,L2=yy,Dne=One,xne=Rne,$ne=mee,qne=gee,nj=pee,rj=yee,Nne=A4,F2=O4,Mne=_ee,Ine=bee,Lne=F(xh,vU(e=>e.ordinal)),Fne=OQ(Lne),zne=e=>{switch(e){case"All":return $ne;case"Debug":return F2;case"Error":return nj;case"Fatal":return qne;case"Info":return Nne;case"Trace":return Mne;case"None":return Ine;case"Warning":return rj}},sj=e=>e.replace(/[\s="]/g,"_"),z2=e=>t=>`${sj(t.label)}=${e-t.startTime}ms`,Une=Wy,Pne=gQ;let ko=class extends Pne{};const Ul=Symbol.for("effect/Readable"),U2=Symbol.for("effect/Ref"),P2={_A:e=>e};var FL,zL,UL;class jne extends(UL=ko,zL=U2,FL=Ul,UL){constructor(n){super();b(this,"ref");b(this,zL,P2);b(this,FL,Ul);b(this,"get");this.ref=n,this.get=_e(()=>Vt(this.ref))}commit(){return this.get}modify(n){return _e(()=>{const r=Vt(this.ref),[a,o]=n(r);return r!==o&&Jf(o)(this.ref),a})}}const aj=e=>new jne(Wf(e)),Fv=e=>_e(()=>aj(e)),$l=e=>e.get,_y=M(2,(e,t)=>e.modify(()=>[void 0,t])),ij=M(2,(e,t)=>e.modify(t)),qC=M(2,(e,t)=>e.modify(n=>[void 0,t(n)])),Hne=U2,Uw=Fv,Lp=$l,ap=ij,j2=_y,Bne=qC,oj=_o,cj=W4,Vne=Sne,lj="Empty",uj="Add",fj="Remove",dj="Update",hj="AndThen",Kne={_tag:lj},mj=(e,t)=>{const n=new Map(e.locals);let r=Kne;for(const[a,o]of t.locals.entries()){const l=Ms(o)[1],d=n.get(a);if(d!==void 0){const h=Ms(d)[1];at(h,l)||(r=bR({_tag:dj,fiberRef:a,patch:a.diff(h,l)})(r))}else r=bR({_tag:uj,fiberRef:a,value:l})(r);n.delete(a)}for(const[a]of n.entries())r=bR({_tag:fj,fiberRef:a})(r);return r},bR=M(2,(e,t)=>({_tag:hj,first:e,second:t})),gj=M(3,(e,t,n)=>{let r=n,a=Va(e);for(;In(a);){const o=Ms(a),l=yf(a);switch(o._tag){case lj:{a=l;break}case uj:{r=xC(r,{fiberId:t,fiberRef:o.fiberRef,value:o.value}),a=l;break}case fj:{r=ej(r,o.fiberRef),a=l;break}case dj:{const d=yy(r,o.fiberRef);r=xC(r,{fiberId:t,fiberRef:o.fiberRef,value:o.fiberRef.patch(o.patch)(d)}),a=l;break}case hj:{a=yv(o.first)(yv(o.second)(l));break}}}return r}),pj="effect/MetricLabel",NC=Symbol.for(pj);var PL;class Gne{constructor(t,n){b(this,"key");b(this,"value");b(this,PL,NC);b(this,"_hash");this.key=t,this.value=n,this._hash=Xn(pj+this.key+this.value)}[(PL=NC,gt)](){return this._hash}[dt](t){return Yne(t)&&this.key===t.key&&this.value===t.value}pipe(){return Fe(this,arguments)}}const Qne=(e,t)=>new Gne(e,t),Yne=e=>Me(e,NC),Wne=M(e=>Ca(e[0]),function(){const e=arguments;return S2(e[0],$4,typeof e[1]=="string"?Av(e[1],e[2]):t=>Object.entries(e[1]).reduce((n,[r,a])=>Av(n,r,a),t))}),Jne=e=>ct(e,Ce),Xne=e=>{let t,n;return typeof e=="function"?t=e:(t=e.try,n=e.catch),Be(()=>{try{return pe(_n(t))}catch(r){return $n(n?_n(()=>n(r)):new E2(r,"An unknown error occurred in Effect.try"))}})},Zne=M(2,(e,t)=>Em(e,n=>{const r=Cw(n,a=>l2(a)?Ce(a):be());switch(r._tag){case"None":return gn(n);case"Some":return t(r.value.defect)}})),ere=M(2,(e,t)=>zs(e,{onFailure:n=>{const r=t(n);switch(r._tag){case"None":return gn(n);case"Some":return r.value}},onSuccess:pe})),tre=M(e=>Ca(e[0]),(e,...t)=>{const n=t[t.length-1];let r;return t.length===2?r=_A(t[0]):r=a=>{const o=Me(a,"_tag")?a._tag:void 0;if(!o)return!1;for(let l=0;l<t.length-1;l++)if(t[l]===o)return!0;return!1},ree(e,r,n)}),nre=wne,rre=nre(pe),yj=M(2,(e,t)=>Qt(X4(t),e)),sre=e=>hre(e,are,mj),_j=M(2,(e,t)=>po(e,{onFailure:n=>pe(t.onFailure(n)),onSuccess:n=>pe(t.onSuccess(n))})),H2=e=>{const t=ce(ce(e,()=>u_()),()=>t);return t},are=Dt(e=>pe(e.getFiberRefs())),bj=e=>_j(e,{onFailure:Zp,onSuccess:Zp}),ire=e=>zs(e,{onFailure:t=>Sj(t,"An error was silently ignored because it is not anticipated to be useful"),onSuccess:()=>_t}),Pw=e=>(...t)=>{const n=Yf(e);let r;for(let a=0,o=t.length;a<o;a++){const l=t[a];c2(l)&&(r!==void 0?r=yr(r,l):r=l,t=[...t.slice(0,a),...t.slice(a+1)],a--)}return r===void 0&&(r=_c),Dt(a=>(a.log(t,r,n),_t))},ore=Pw(),Sj=Pw(F2),cre=Pw(rj),lre=Pw(nj),MN=M(2,(e,t)=>zs(e,{onFailure:n=>E4(()=>t(n)),onSuccess:pe})),ure=e=>ct(e,t=>!t),fre=e=>bre((t,n)=>F(e,gj(t,n))),dre=e=>e.length>=1?bc((t,n)=>{try{e(n).then(r=>t(sn(r)),r=>t(ch(r)))}catch(r){t(ch(r))}}):bc(t=>{try{e().then(n=>t(sn(n)),n=>t(ch(n)))}catch(n){t(ch(n))}}),by=M(3,(e,t,n)=>Om(r=>k2(e,_a(r,t,n)))),B2=X4,Sy=pe(be()),hre=M(3,(e,t,n)=>ce(t,r=>ce(e,a=>ct(t,o=>[n(r,o),a])))),mre=M(2,(e,t)=>Em(e,n=>on(jZ(n),{onNone:()=>gn(n),onSome:r=>Qt(t(r),gn(n))}))),gre=M(2,(e,t)=>zs(e,{onFailure:n=>{const r=Rw(n);switch(r._tag){case"Left":return Qt(t(r.left),gn(n));case"Right":return gn(n)}},onSuccess:pe})),pre=M(2,(e,t)=>zs(e,{onFailure:n=>Qt(t(n),gn(n)),onSuccess:pe})),yre=Vne,_re=yre(pe),bre=e=>Dt(t=>(t.setFiberRefs(e(t.id(),t.getFiberRefs())),_t)),Sre=M(2,(e,t)=>Be(()=>t()?ct(e,Ce):pe(be()))),vre=e=>ct(Am(),Ea(e)),wre=function(){const e=arguments;return bj(ce(vj,t=>_e(()=>{if(typeof e[0]=="string")t.attribute(e[0],e[1]);else for(const n in e[0])t.attribute(n,e[0][n])})))},vj=ce(Am(),e=>{const t=e.unsafeMap.get(_o.key);return t!==void 0&&t._tag==="Span"?pe(t):$n(new h_)}),wj=BigInt(0),Ej=hm(e=>va(e.context,Lv)?e._tag==="Span"?Ej(e.parent):be():Ce(e)),V2=(e,t,n)=>{const r=!e.getFiberRef(qee)||n.context&&va(n.context,Lv),a=e.getFiberRef(Mi),o=n.parent?Ce(n.parent):n.root?be():Ej(Ea(a,_o));let l;if(r)l=rte({name:t,parent:o,context:_a(n.context??vf(),Lv,!0)});else{const d=e.getFiberRef(bo),h=va(d,__),p=va(d,Ene),S=e.getFiberRef($w),v=e.getFiberRefs(),R=NN(v,Nee),O=NN(v,Mee),x=O._tag==="Some"?n.links!==void 0?[...si(O.value),...n.links??[]]:si(O.value):n.links??Ll();l=h.span(t,o,n.context??vf(),x,S?p.unsafeCurrentTimeNanos():wj,n.kind??"internal"),R._tag==="Some"&&oX(R.value,(z,A)=>l.attribute(A,z)),n.attributes!==void 0&&Object.entries(n.attributes).forEach(([z,A])=>l.attribute(z,A))}return typeof n.captureStackTrace=="function"&&xv.set(l,n.captureStackTrace),l},Ere=(e,t)=>(t=hc(t),Dt(n=>pe(V2(n,e,t)))),zv=(e,t,n,r)=>_e(()=>{e.status._tag!=="Ended"&&(N4(t)&&xv.has(e)&&e.attribute("code.stacktrace",xv.get(e)()),e.end(r?n.unsafeCurrentTimeNanos():wj,t))}),IN=(e,...t)=>{const n=hc(t.length===1?void 0:t[0]),r=t[t.length-1];return Dt(a=>{const o=V2(a,e,n),l=a.getFiberRef($w),d=va(a.getFiberRef(bo),nd);return Sc(r(o),h=>zv(o,h,d,l))})},MC=M(2,(e,t)=>by(e,_o,t)),Tre=function(){const e=typeof arguments[0]!="string",t=e?arguments[1]:arguments[0],n=hc(e?arguments[2]:arguments[1]);if(e){const r=arguments[0];return IN(t,n,a=>MC(r,a))}return r=>IN(t,n,a=>MC(r,a))},Tj="Sequential",Rj="Parallel",Rre="ParallelN",b_={_tag:Tj},Cre={_tag:Rj},kre=e=>({_tag:Rre,parallelism:e}),Are=e=>e._tag===Tj,Ore=e=>e._tag===Rj,Uv=b_,IC=Cre,LC=kre,vy=mj,wy=gj,jw="effect/FiberStatus",qf=Symbol.for(jw),Pv="Done",LN="Running",FN="Suspended",Dre=Xn(`${jw}-${Pv}`);var jL;let xre=class{constructor(){b(this,jL,qf);b(this,"_tag",Pv)}[(jL=qf,gt)](){return Dre}[dt](t){return K2(t)&&t._tag===Pv}};var HL;class $re{constructor(t){b(this,"runtimeFlags");b(this,HL,qf);b(this,"_tag",LN);this.runtimeFlags=t}[(HL=qf,gt)](){return F(Ae(jw),ot(Ae(this._tag)),ot(Ae(this.runtimeFlags)),un(this))}[dt](t){return K2(t)&&t._tag===LN&&this.runtimeFlags===t.runtimeFlags}}var BL;class qre{constructor(t,n){b(this,"runtimeFlags");b(this,"blockingOn");b(this,BL,qf);b(this,"_tag",FN);this.runtimeFlags=t,this.blockingOn=n}[(BL=qf,gt)](){return F(Ae(jw),ot(Ae(this._tag)),ot(Ae(this.runtimeFlags)),ot(Ae(this.blockingOn)),un(this))}[dt](t){return K2(t)&&t._tag===FN&&this.runtimeFlags===t.runtimeFlags&&at(this.blockingOn,t.blockingOn)}}const Nre=new xre,Mre=e=>new $re(e),Ire=(e,t)=>new qre(e,t),K2=e=>Me(e,qf),Lre=e=>e._tag===Pv,Fre=Nre,Cj=Mre,zre=Ire,Ure=Lre,Pre=Symbol.for("effect/Micro"),jv=Symbol.for("effect/Micro/MicroExit"),zN=Symbol.for("effect/Micro/MicroCause"),jre={_E:Ge};var VL;class kj extends globalThis.Error{constructor(n,r,a){const o=`MicroCause.${n}`;let l,d,h;if(r instanceof globalThis.Error){l=`(${o}) ${r.name}`,d=r.message;const p=d.split(`
`).length;h=r.stack?`(${o}) ${r.stack.split(`
`).slice(0,p+3).join(`
`)}`:`${l}: ${d}`}else l=o,d=gf(r,0),h=`${l}: ${d}`;a.length>0&&(h+=`
    ${a.join(`
    `)}`);super(d);b(this,"_tag");b(this,"traces");b(this,VL);this._tag=n,this.traces=a,this[zN]=jre,this.name=l,this.stack=h}pipe(){return Fe(this,arguments)}toString(){return this.stack}[(VL=zN,cn)](){return this.stack}}class Hre extends kj{constructor(n,r=[]){super("Die",n,r);b(this,"defect");this.defect=n}}const Bre=(e,t=[])=>new Hre(e,t);class Vre extends kj{constructor(t=[]){super("Interrupt","interrupted",t)}}const Kre=(e=[])=>new Vre(e),Gre=e=>e._tag==="Interrupt",UN=Symbol.for("effect/Micro/MicroFiber"),Qre={_A:Ge,_E:Ge};var KL;KL=UN;class Yre{constructor(t,n=!0){b(this,"context");b(this,"interruptible");b(this,KL);b(this,"_stack",[]);b(this,"_observers",[]);b(this,"_exit");b(this,"_children");b(this,"currentOpCount",0);b(this,"_interrupted",!1);b(this,"_yielded");this.context=t,this.interruptible=n,this[UN]=Qre}getRef(t){return DW(this.context,t)}addObserver(t){return this._exit?(t(this._exit),Zp):(this._observers.push(t),()=>{const n=this._observers.indexOf(t);n>=0&&this._observers.splice(n,1)})}unsafeInterrupt(){this._exit||(this._interrupted=!0,this.interruptible&&this.evaluate(J2))}unsafePoll(){return this._exit}evaluate(t){if(this._exit)return;if(this._yielded!==void 0){const a=this._yielded;this._yielded=void 0,a()}const n=this.runLoop(t);if(n===pS)return;const r=PN.interruptChildren&&PN.interruptChildren(this);if(r!==void 0)return this.evaluate(Bv(r,()=>n));this._exit=n;for(let a=0;a<this._observers.length;a++)this._observers[a](n);this._observers.length=0}runLoop(t){let n=!1,r=t;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!n&&this.getRef(X2).shouldYield(this)){n=!0;const a=r;r=Bv(ese,()=>a)}if(r=r[FC](this),r===pS){const a=this._yielded;return jv in a?(this._yielded=void 0,a):pS}}}catch(a){return Me(r,FC)?zC(a):zC(`MicroFiber.runLoop: Not a valid effect: ${String(r)}`)}}getCont(t){for(;;){const n=this._stack.pop();if(!n)return;const r=n[Hv]&&n[Hv](this);if(r)return{[t]:r};if(n[t])return n}}yieldWith(t){return this._yielded=t,pS}children(){return this._children??(this._children=new Set)}}const PN=xt("effect/Micro/fiberMiddleware",()=>({interruptChildren:void 0})),Aj=Symbol.for("effect/Micro/identifier"),Ur=Symbol.for("effect/Micro/args"),FC=Symbol.for("effect/Micro/evaluate"),Gh=Symbol.for("effect/Micro/successCont"),vh=Symbol.for("effect/Micro/failureCont"),Hv=Symbol.for("effect/Micro/ensureCont"),pS=Symbol.for("effect/Micro/Yield"),Wre={_A:Ge,_E:Ge,_R:Ge},Jre={...Une,_op:"Micro",[Pre]:Wre,pipe(){return Fe(this,arguments)},[Symbol.iterator](){return new eU(new fm(this))},toJSON(){return{_id:"Micro",op:this[Aj],...Ur in this?{args:this[Ur]}:void 0}},toString(){return xn(this)},[cn](){return xn(this)}};function Xre(e){return zC("Micro.evaluate: Not implemented")}const Hw=e=>({...Jre,[Aj]:e.op,[FC]:e.eval??Xre,[Gh]:e.contA,[vh]:e.contE,[Hv]:e.ensure}),G2=e=>{const t=Hw(e);return function(){const n=Object.create(t);return n[Ur]=e.single===!1?arguments:arguments[0],n}},Oj=e=>{const t={...Hw(e),[jv]:jv,_tag:e.op,get[e.prop](){return this[Ur]},toJSON(){return{_id:"MicroExit",_tag:e.op,[e.prop]:this[Ur]}},[dt](n){return rse(n)&&n._tag===e.op&&at(this[Ur],n[Ur])},[gt](){return un(this,ot(Xn(e.op))(Ae(this[Ur])))}};return function(n){const r=Object.create(t);return r[Ur]=n,r[Gh]=void 0,r[vh]=void 0,r[Hv]=void 0,r}},Q2=Oj({op:"Success",prop:"value",eval(e){const t=e.getCont(Gh);return t?t[Gh](this[Ur],e):e.yieldWith(this)}}),Dj=Oj({op:"Failure",prop:"cause",eval(e){let t=e.getCont(vh);for(;Gre(this[Ur])&&t&&e.interruptible;)t=e.getCont(vh);return t?t[vh](this[Ur],e):e.yieldWith(this)}}),Zre=G2({op:"Yield",eval(e){let t=!1;return e.getRef(X2).scheduleTask(()=>{t||e.evaluate(sse)},this[Ur]??0),e.yieldWith(()=>{t=!0})}}),ese=Zre(0),tse=Q2(void 0),Y2=G2({op:"WithMicroFiber",eval(e){return this[Ur](e)}}),Bv=M(2,(e,t)=>{const n=Object.create(nse);return n[Ur]=e,n[Gh]=t,n}),nse=Hw({op:"OnSuccess",eval(e){return e._stack.push(this),this[Ur]}}),rse=e=>Me(e,jv),xj=Q2,W2=Dj,J2=W2(Kre()),zC=e=>W2(Bre(e)),sse=xj(void 0),ase="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0);class $j{constructor(){b(this,"tasks",[]);b(this,"running",!1);b(this,"afterScheduled",()=>{this.running=!1,this.runTasks()})}scheduleTask(t,n){this.tasks.push(t),this.running||(this.running=!0,ase(this.afterScheduled))}runTasks(){const t=this.tasks;this.tasks=[];for(let n=0,r=t.length;n<r;n++)t[n]()}shouldYield(t){return t.currentOpCount>=t.getRef(cse)}flush(){for(;this.tasks.length>0;)this.runTasks()}}const ise=M(2,(e,t)=>Y2(n=>{const r=n.context;return n.context=t(r),fse(e,()=>(n.context=r,tse))})),ose=M(2,(e,t)=>ise(e,Xl(t)));class cse extends sw()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:()=>2048}){}class X2 extends sw()("effect/Micro/currentScheduler",{defaultValue:()=>new $j}){}const lse=M(2,(e,t)=>{const n=Object.create(use);return n[Ur]=e,n[Gh]=t.onSuccess,n[vh]=t.onFailure,n}),use=Hw({op:"OnSuccessAndFailure",eval(e){return e._stack.push(this),this[Ur]}}),fse=M(2,(e,t)=>hse(n=>lse(n(e),{onFailure:r=>Bv(t(W2(r)),()=>Dj(r)),onSuccess:r=>Bv(t(xj(r)),()=>Q2(r))}))),qj=G2({op:"SetInterruptible",ensure(e){if(e.interruptible=this[Ur],e._interrupted&&e.interruptible)return()=>J2}}),dse=e=>Y2(t=>t.interruptible?e:(t.interruptible=!0,t._stack.push(qj(!1)),t._interrupted?J2:e)),hse=e=>Y2(t=>t.interruptible?(t.interruptible=!1,t._stack.push(qj(!0)),e(dse)):e(Ge)),mse=(e,t)=>{const n=new Yre(X2.context(new $j));return n.evaluate(e),n};class Nj{constructor(){b(this,"buckets",[])}scheduleTask(t,n){const r=this.buckets.length;let a,o=0;for(;o<r&&this.buckets[o][0]<=n;o++)a=this.buckets[o];a&&a[0]===n?a[1].push(t):o===r?this.buckets.push([n,[t]]):this.buckets.splice(o,0,[n,[t]])}}class gse{constructor(t){b(this,"maxNextTickBeforeTimer");b(this,"running",!1);b(this,"tasks",new Nj);this.maxNextTickBeforeTimer=t}starveInternal(t){const n=this.tasks.buckets;this.tasks.buckets=[];for(const[r,a]of n)for(let o=0;o<a.length;o++)a[o]();this.tasks.buckets.length===0?this.running=!1:this.starve(t)}starve(t=0){t>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(t+1))}shouldYield(t){return t.currentOpCount>t.getFiberRef(x4)?t.getFiberRef(td):!1}scheduleTask(t,n){this.tasks.scheduleTask(t,n),this.running||(this.running=!0,this.starve())}}const Mj=xt(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new gse(2048));class Ij{constructor(){b(this,"tasks",new Nj);b(this,"deferred",!1)}scheduleTask(t,n){this.deferred?Mj.scheduleTask(t,n):this.tasks.scheduleTask(t,n)}shouldYield(t){return t.currentOpCount>t.getFiberRef(x4)?t.getFiberRef(td):!1}flush(){for(;this.tasks.buckets.length>0;){const t=this.tasks.buckets;this.tasks.buckets=[];for(const[n,r]of t)for(let a=0;a<r.length;a++)r[a]()}this.deferred=!0}}const Bw=xt(Symbol.for("effect/FiberRef/currentScheduler"),()=>fs(Mj)),Lj=xt(Symbol.for("effect/FiberRef/currentRequestMap"),()=>fs(new Map)),jN=(e,t,n,r)=>{switch(e){case void 0:return t();case"unbounded":return n();case"inherit":return Rm(Dee,a=>a==="unbounded"?n():a>1?r(a):t());default:return e>1?r(e):t()}},Z2="InterruptSignal",eO="Stateful",tO="Resume",nO="YieldNow",SR=e=>({_tag:Z2,cause:e}),VS=e=>({_tag:eO,onFiber:e}),Yd=e=>({_tag:tO,effect:e}),pse=()=>({_tag:nO}),yse="effect/FiberScope",Vv=Symbol.for(yse);var GL;GL=Vv;class _se{constructor(){b(this,GL,Vv);b(this,"fiberId",ai);b(this,"roots",new Set)}add(t,n){this.roots.add(n),n.addObserver(()=>{this.roots.delete(n)})}}var QL;QL=Vv;class bse{constructor(t,n){b(this,"fiberId");b(this,"parent");b(this,QL,Vv);this.fiberId=t,this.parent=n}add(t,n){this.parent.tell(VS(r=>{r.addChild(n),n.addObserver(()=>{r.removeChild(n)})}))}}const Sse=e=>new bse(e.id(),e),S_=xt(Symbol.for("effect/FiberScope/Global"),()=>new _se),vse="effect/Fiber",wse=Symbol.for(vse),Ese={_E:e=>e,_A:e=>e},Tse="effect/Fiber",Rse=Symbol.for(Tse),Fj=e=>e.await,Cse=e=>e.inheritAll,kse=M(2,(e,t)=>F(xf(e,zj(t)),Qt(F(e,xf(Fj))))),zj=M(2,(e,t)=>e.interruptAsFork(t)),Qh=e=>xl(Tm(e.await),e.inheritAll);({...Jy});const pl="effect/FiberCurrent",Ase=()=>Yf(globalThis[pl]),Ose="effect/Logger",Dse=Symbol.for(Ose),xse={_Message:e=>e,_Output:e=>e},v_=e=>({[Dse]:xse,log:e,pipe(){return Fe(this,arguments)}}),$se=/^[^\s"=]*$/,qse=(e,t)=>({annotations:n,cause:r,date:a,fiberId:o,logLevel:l,message:d,spans:h})=>{const p=x=>x.match($se)?x:e(x),S=(x,z)=>`${sj(x)}=${p(z)}`,v=(x,z)=>" "+S(x,z);let R=S("timestamp",a.toISOString());R+=v("level",l.label),R+=v("fiber",bw(o));const O=AA(d);for(let x=0;x<O.length;x++)R+=v("message",gf(O[x],t));LZ(r)||(R+=v("cause",Zl(r,{renderErrorCause:!0})));for(const x of h)R+=" "+z2(a.getTime())(x);for(const[x,z]of n)R+=v(x,gf(z,t));return R},Nse=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,Mse=v_(qse(Nse)),Uj=e=>{switch(typeof e){case"bigint":case"function":case"symbol":return String(e);default:return Vn(e)}},Ise=(e,...t)=>{let n="";for(let r=0;r<t.length;r++)n+=`\x1B[${t[r]}m`;return n+e+"\x1B[0m"},Lse=(e,...t)=>e,Ka={bold:"1",red:"31",green:"32",yellow:"33",blue:"34",cyan:"36",white:"37",gray:"90",black:"30",bgBrightRed:"101"},Fse={None:[],All:[],Trace:[Ka.gray],Debug:[Ka.blue],Info:[Ka.green],Warning:[Ka.yellow],Error:[Ka.red],Fatal:[Ka.bgBrightRed,Ka.black]},zse={None:"",All:"",Trace:"color:gray",Debug:"color:blue",Info:"color:green",Warning:"color:orange",Error:"color:red",Fatal:"background-color:red;color:white"},Use=e=>`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}.${e.getMilliseconds().toString().padStart(3,"0")}`,Pj=typeof process=="object"&&process!==null&&typeof process.stdout=="object"&&process.stdout!==null,Pse=Pj&&process.stdout.isTTY===!0,jse=Pj||"Deno"in globalThis,Hse=e=>{const t=(e==null?void 0:e.mode)??"auto",r=(t==="auto"?jse?"tty":"browser":t)==="browser",a=typeof(e==null?void 0:e.colors)=="boolean"?e.colors:Pse||r,o=(e==null?void 0:e.formatDate)??Use;return r?Vse({colors:a,formatDate:o}):Bse({colors:a,formatDate:o,stderr:(e==null?void 0:e.stderr)===!0})},Bse=e=>{const t=typeof process=="object"&&"isBun"in process&&process.isBun===!0,n=e.colors?Ise:Lse;return v_(({annotations:r,cause:a,context:o,date:l,fiberId:d,logLevel:h,message:p,spans:S})=>{const v=L2(o,bo),R=va(v,Fw).unsafe,O=e.stderr===!0?R.error:R.log,x=AA(p);let z=n(`[${e.formatDate(l)}]`,Ka.white)+` ${n(h.label,...Fse[h._tag])} (${bw(d)})`;if(a2(S)){const E=l.getTime(),T=z2(E);for(const q of S)z+=" "+T(q)}z+=":";let A=0;if(x.length>0){const E=Uj(x[0]);typeof E=="string"&&(z+=" "+n(E,Ka.bold,Ka.cyan),A++)}if(O(z),t||R.group(),u2(a)||O(Zl(a,{renderErrorCause:!0})),A<x.length)for(;A<x.length;A++)O(ey(x[A]));if(QP(r)>0)for(const[E,T]of r)O(n(`${E}:`,Ka.bold,Ka.white),ey(T));t||R.groupEnd()})},Vse=e=>{const t=e.colors?"%c":"";return v_(({annotations:n,cause:r,context:a,date:o,fiberId:l,logLevel:d,message:h,spans:p})=>{const S=L2(a,bo),v=va(S,Fw).unsafe,R=AA(h);let O=`${t}[${e.formatDate(o)}]`;const x=[];if(e.colors&&x.push("color:gray"),O+=` ${t}${d.label}${t} (${bw(l)})`,e.colors&&x.push(zse[d._tag],""),a2(p)){const A=o.getTime(),E=z2(A);for(const T of p)O+=" "+E(T)}O+=":";let z=0;if(R.length>0){const A=Uj(R[0]);typeof A=="string"&&(O+=` ${t}${A}`,e.colors&&x.push("color:deepskyblue"),z++)}if(v.groupCollapsed(O,...x),u2(r)||v.error(Zl(r,{renderErrorCause:!0})),z<R.length)for(;z<R.length;z++)v.log(ey(R[z]));if(QP(n)>0)for(const[A,E]of n){const T=ey(E);e.colors?v.log(`%c${A}:`,"color:gray",T):v.log(`${A}:`,T)}v.groupEnd()})},jj="effect/MetricBoundaries",UC=Symbol.for(jj);var YL;class Kse{constructor(t){b(this,"values");b(this,YL,UC);b(this,"_hash");this.values=t,this._hash=F(Xn(jj),ot(Qy(this.values)))}[(YL=UC,gt)](){return this._hash}[dt](t){return Gse(t)&&at(this.values,t.values)}pipe(){return Fe(this,arguments)}}const Gse=e=>Me(e,UC),Qse=e=>{const t=F(e,OA(Ln(Number.POSITIVE_INFINITY)),gY);return new Kse(t)},Yse=e=>F(GQ(e.count-1,t=>e.start*Math.pow(e.factor,t)),lr,Qse),Wse="effect/MetricKeyType",Hj=Symbol.for(Wse),Bj="effect/MetricKeyType/Counter",PC=Symbol.for(Bj),Jse="effect/MetricKeyType/Frequency",Xse=Symbol.for(Jse),Zse="effect/MetricKeyType/Gauge",eae=Symbol.for(Zse),Vj="effect/MetricKeyType/Histogram",jC=Symbol.for(Vj),tae="effect/MetricKeyType/Summary",nae=Symbol.for(tae),Kj={_In:e=>e,_Out:e=>e};var WL,JL;class rae{constructor(t,n){b(this,"incremental");b(this,"bigint");b(this,JL,Kj);b(this,WL,PC);b(this,"_hash");this.incremental=t,this.bigint=n,this._hash=Xn(Bj)}[(JL=Hj,WL=PC,gt)](){return this._hash}[dt](t){return Gj(t)}pipe(){return Fe(this,arguments)}}var XL,ZL;class sae{constructor(t){b(this,"boundaries");b(this,ZL,Kj);b(this,XL,jC);b(this,"_hash");this.boundaries=t,this._hash=F(Xn(Vj),ot(Ae(this.boundaries)))}[(ZL=Hj,XL=jC,gt)](){return this._hash}[dt](t){return Qj(t)&&at(this.boundaries,t.boundaries)}pipe(){return Fe(this,arguments)}}const aae=e=>new rae((e==null?void 0:e.incremental)??!1,(e==null?void 0:e.bigint)??!1),iae=e=>new sae(e),Gj=e=>Me(e,PC),oae=e=>Me(e,Xse),cae=e=>Me(e,eae),Qj=e=>Me(e,jC),lae=e=>Me(e,nae),uae="effect/MetricKey",Yj=Symbol.for(uae),fae={_Type:e=>e},dae=Zy(at);var eF;class rO{constructor(t,n,r,a=[]){b(this,"name");b(this,"keyType");b(this,"description");b(this,"tags");b(this,eF,fae);b(this,"_hash");this.name=t,this.keyType=n,this.description=r,this.tags=a,this._hash=F(Xn(this.name+this.description),ot(Ae(this.keyType)),ot(Qy(this.tags)))}[(eF=Yj,gt)](){return this._hash}[dt](t){return hae(t)&&this.name===t.name&&at(this.keyType,t.keyType)&&at(this.description,t.description)&&dae(this.tags,t.tags)}pipe(){return Fe(this,arguments)}}const hae=e=>Me(e,Yj),mae=(e,t)=>new rO(e,aae(t),Yf(t==null?void 0:t.description)),gae=(e,t,n)=>new rO(e,iae(t),Yf(n)),pae=M(2,(e,t)=>t.length===0?e:new rO(e.name,e.keyType,e.description,LS(e.tags,t))),yae="effect/MetricState",w_=Symbol.for(yae),Wj="effect/MetricState/Counter",HC=Symbol.for(Wj),Jj="effect/MetricState/Frequency",BC=Symbol.for(Jj),Xj="effect/MetricState/Gauge",VC=Symbol.for(Xj),Zj="effect/MetricState/Histogram",KC=Symbol.for(Zj),e6="effect/MetricState/Summary",GC=Symbol.for(e6),E_={_A:e=>e};var tF,nF;class _ae{constructor(t){b(this,"count");b(this,nF,E_);b(this,tF,HC);this.count=t}[(nF=w_,tF=HC,gt)](){return F(Ae(Wj),ot(Ae(this.count)),un(this))}[dt](t){return Oae(t)&&this.count===t.count}pipe(){return Fe(this,arguments)}}const bae=Zy(at);var rF,sF;class Sae{constructor(t){b(this,"occurrences");b(this,sF,E_);b(this,rF,BC);b(this,"_hash");this.occurrences=t}[(sF=w_,rF=BC,gt)](){return F(Xn(Jj),ot(Qy(an(this.occurrences.entries()))),un(this))}[dt](t){return Dae(t)&&bae(an(this.occurrences.entries()),an(t.occurrences.entries()))}pipe(){return Fe(this,arguments)}}var aF,iF;class vae{constructor(t){b(this,"value");b(this,iF,E_);b(this,aF,VC);this.value=t}[(iF=w_,aF=VC,gt)](){return F(Ae(Xj),ot(Ae(this.value)),un(this))}[dt](t){return xae(t)&&this.value===t.value}pipe(){return Fe(this,arguments)}}var oF,cF;class wae{constructor(t,n,r,a,o){b(this,"buckets");b(this,"count");b(this,"min");b(this,"max");b(this,"sum");b(this,cF,E_);b(this,oF,KC);this.buckets=t,this.count=n,this.min=r,this.max=a,this.sum=o}[(cF=w_,oF=KC,gt)](){return F(Ae(Zj),ot(Ae(this.buckets)),ot(Ae(this.count)),ot(Ae(this.min)),ot(Ae(this.max)),ot(Ae(this.sum)),un(this))}[dt](t){return $ae(t)&&at(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return Fe(this,arguments)}}var lF,uF;class Eae{constructor(t,n,r,a,o,l){b(this,"error");b(this,"quantiles");b(this,"count");b(this,"min");b(this,"max");b(this,"sum");b(this,uF,E_);b(this,lF,GC);this.error=t,this.quantiles=n,this.count=r,this.min=a,this.max=o,this.sum=l}[(uF=w_,lF=GC,gt)](){return F(Ae(e6),ot(Ae(this.error)),ot(Ae(this.quantiles)),ot(Ae(this.count)),ot(Ae(this.min)),ot(Ae(this.max)),ot(Ae(this.sum)),un(this))}[dt](t){return qae(t)&&this.error===t.error&&at(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}pipe(){return Fe(this,arguments)}}const Tae=e=>new _ae(e),Rae=e=>new Sae(e),Cae=e=>new vae(e),kae=e=>new wae(e.buckets,e.count,e.min,e.max,e.sum),Aae=e=>new Eae(e.error,e.quantiles,e.count,e.min,e.max,e.sum),Oae=e=>Me(e,HC),Dae=e=>Me(e,BC),xae=e=>Me(e,VC),$ae=e=>Me(e,KC),qae=e=>Me(e,GC),Nae="effect/MetricHook",Mae=Symbol.for(Nae),Iae={_In:e=>e,_Out:e=>e},T_=e=>({[Mae]:Iae,pipe(){return Fe(this,arguments)},...e}),HN=BigInt(0),Lae=e=>{let t=e.keyType.bigint?HN:0;const n=e.keyType.incremental?e.keyType.bigint?a=>a>=HN:a=>a>=0:a=>!0,r=a=>{n(a)&&(t=t+a)};return T_({get:()=>Tae(t),update:r,modify:r})},Fae=e=>{const t=new Map;for(const r of e.keyType.preregisteredWords)t.set(r,0);const n=r=>{const a=t.get(r)??0;t.set(r,a+1)};return T_({get:()=>Rae(t),update:n,modify:n})},zae=(e,t)=>{let n=t;return T_({get:()=>Cae(n),update:r=>{n=r},modify:r=>{n=n+r}})},Uae=e=>{const t=e.keyType.boundaries.values,n=t.length,r=new Uint32Array(n+1),a=new Float32Array(n);let o=0,l=0,d=Number.MAX_VALUE,h=Number.MIN_VALUE;F(t,ty(xh),sf((v,R)=>{a[R]=v}));const p=v=>{let R=0,O=n;for(;R!==O;){const x=Math.floor(R+(O-R)/2),z=a[x];v<=z?O=x:R=x,O===R+1&&(v<=a[R]?O=R:R=O)}r[R]=r[R]+1,o=o+1,l=l+v,v<d&&(d=v),v>h&&(h=v)},S=()=>{const v=W0(n);let R=0;for(let O=0;O<n;O++){const x=a[O],z=r[O];R=R+z,v[O]=[x,R]}return v};return T_({get:()=>kae({buckets:S(),count:o,min:d,max:h,sum:l}),update:p,modify:p})},Pae=e=>{const{error:t,maxAge:n,maxSize:r,quantiles:a}=e.keyType,o=F(a,ty(xh)),l=W0(r);let d=0,h=0,p=0,S=0,v=0;const R=x=>{const z=[];let A=0;for(;A!==r-1;){const E=l[A];if(E!=null){const[T,q]=E,D=Ef(x-T);cJ(D,BA)&&kP(D,n)&&z.push(q)}A=A+1}return jae(t,o,ty(z,xh))},O=(x,z)=>{if(r>0){d=d+1;const A=d%r;l[A]=[z,x]}S=h===0?x:Math.min(S,x),v=h===0?x:Math.max(v,x),h=h+1,p=p+x};return T_({get:()=>Aae({error:t,quantiles:R(Date.now()),count:h,min:S,max:v,sum:p}),update:([x,z])=>O(x,z),modify:([x,z])=>O(x,z)})},jae=(e,t,n)=>{const r=n.length;if(!In(t))return Ll();const a=t[0],o=t.slice(1),l=BN(e,r,be(),0,a,n),d=Va(l);return o.forEach(h=>{d.push(BN(e,r,l.value,l.consumed,h,l.rest))}),sf(d,h=>[h.quantile,h.value])},BN=(e,t,n,r,a,o)=>{let l=e,d=t,h=n,p=r,S=a,v=o,R=e,O=t,x=n,z=r,A=a,E=o;for(;;){if(!In(v))return{quantile:S,value:be(),consumed:p,rest:[]};if(S===1)return{quantile:S,value:Ce(RU(v)),consumed:p+v.length,rest:[]};const T=Ms(v),q=CU(v,K=>K===T),D=S*d,I=l/2*D,$=p+q[0].length,H=Math.abs($-D);if($<D-I){R=l,O=d,x=Mp(v),z=$,A=S,E=q[1],l=R,d=O,h=x,p=z,S=A,v=E;continue}if($>D+I){const K=Mn(h)?Ce(T):h;return{quantile:S,value:K,consumed:p,rest:v}}switch(h._tag){case"None":{R=l,O=d,x=Mp(v),z=$,A=S,E=q[1],l=R,d=O,h=x,p=z,S=A,v=E;continue}case"Some":{const K=Math.abs(D-h.value);if(H<K){R=l,O=d,x=Mp(v),z=$,A=S,E=q[1],l=R,d=O,h=x,p=z,S=A,v=E;continue}return{quantile:S,value:Ce(h.value),consumed:p,rest:v}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},Hae="effect/MetricPair",Bae=Symbol.for(Hae),Vae={_Type:e=>e},Kae=(e,t)=>({[Bae]:Vae,metricKey:e,metricState:t,pipe(){return Fe(this,arguments)}}),Gae="effect/MetricRegistry",VN=Symbol.for(Gae);var fF;fF=VN;class Qae{constructor(){b(this,fF,VN);b(this,"map",hte())}snapshot(){const t=[];for(const[n,r]of this.map)t.push(Kae(n,r.get()));return t}get(t){const n=F(this.map,ju(t),Qa);if(n==null){if(Gj(t.keyType))return this.getCounter(t);if(cae(t.keyType))return this.getGauge(t);if(oae(t.keyType))return this.getFrequency(t);if(Qj(t.keyType))return this.getHistogram(t);if(lae(t.keyType))return this.getSummary(t);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return n}getCounter(t){let n=F(this.map,ju(t),Qa);if(n==null){const r=Lae(t);F(this.map,rp(t))||F(this.map,sp(t,r)),n=r}return n}getFrequency(t){let n=F(this.map,ju(t),Qa);if(n==null){const r=Fae(t);F(this.map,rp(t))||F(this.map,sp(t,r)),n=r}return n}getGauge(t){let n=F(this.map,ju(t),Qa);if(n==null){const r=zae(t,t.keyType.bigint?BigInt(0):0);F(this.map,rp(t))||F(this.map,sp(t,r)),n=r}return n}getHistogram(t){let n=F(this.map,ju(t),Qa);if(n==null){const r=Uae(t);F(this.map,rp(t))||F(this.map,sp(t,r)),n=r}return n}getSummary(t){let n=F(this.map,ju(t),Qa);if(n==null){const r=Pae(t);F(this.map,rp(t))||F(this.map,sp(t,r)),n=r}return n}}const Yae=()=>new Qae,Wae="effect/Metric",Jae=Symbol.for(Wae),Xae={_Type:e=>e,_In:e=>e,_Out:e=>e},KN=xt(Symbol.for("effect/Metric/globalMetricRegistry"),()=>Yae()),t6=function(e,t,n,r){const a=Object.assign(o=>vc(o,l=>nie(a,l)),{[Jae]:Xae,keyType:e,unsafeUpdate:t,unsafeValue:n,unsafeModify:r,register(){return this.unsafeValue([]),this},pipe(){return Fe(this,arguments)}});return a},Vw=(e,t)=>n6(mae(e,t)),n6=e=>{let t;const n=new WeakMap,r=a=>{if(a.length===0)return t!==void 0||(t=KN.get(e)),t;let o=n.get(a);return o!==void 0||(o=KN.get(pae(e,a)),n.set(a,o)),o};return t6(e.keyType,(a,o)=>r(o).update(a),a=>r(a).get(),(a,o)=>r(o).modify(a))},Zae=(e,t,n)=>n6(gae(e,t,n)),eie=M(3,(e,t,n)=>tie(e,[Qne(t,n)])),tie=M(2,(e,t)=>t6(e.keyType,(n,r)=>e.unsafeUpdate(n,LS(t,r)),n=>e.unsafeValue(LS(t,n)),(n,r)=>e.unsafeModify(n,LS(t,r)))),nie=M(2,(e,t)=>Rm(RC,n=>_e(()=>e.unsafeUpdate(t,n)))),rie="effect/Request",sie=Symbol.for(rie),aie={_E:e=>e,_A:e=>e},iie={...TA,[sie]:aie},oie=function(){function e(t){t&&Object.assign(this,t)}return e.prototype=iie,e}(),cie=M(2,(e,t)=>Rm(Lj,n=>_e(()=>{if(n.has(e)){const r=n.get(e);r.state.completed||(r.state.completed=!0,y_(r.result,t))}}))),lie="effect/Supervisor",Kw=Symbol.for(lie),sO={_T:e=>e};var dF;dF=Kw;const rx=class rx{constructor(t,n){b(this,"underlying");b(this,"value0");b(this,dF,sO);this.underlying=t,this.value0=n}get value(){return this.value0}onStart(t,n,r,a){this.underlying.onStart(t,n,r,a)}onEnd(t,n){this.underlying.onEnd(t,n)}onEffect(t,n){this.underlying.onEffect(t,n)}onSuspend(t){this.underlying.onSuspend(t)}onResume(t){this.underlying.onResume(t)}map(t){return new rx(this,F(this.value,ct(t)))}zip(t){return new Gv(this,t)}};let Kv=rx;var hF;hF=Kw;const sx=class sx{constructor(t,n){b(this,"left");b(this,"right");b(this,"_tag","Zip");b(this,hF,sO);this.left=t,this.right=n}get value(){return C4(this.left.value,this.right.value)}onStart(t,n,r,a){this.left.onStart(t,n,r,a),this.right.onStart(t,n,r,a)}onEnd(t,n){this.left.onEnd(t,n),this.right.onEnd(t,n)}onEffect(t,n){this.left.onEffect(t,n),this.right.onEffect(t,n)}onSuspend(t){this.left.onSuspend(t),this.right.onSuspend(t)}onResume(t){this.left.onResume(t),this.right.onResume(t)}map(t){return new Kv(this,F(this.value,ct(t)))}zip(t){return new sx(this,t)}};let Gv=sx;const r6=e=>Me(e,Kw)&&_A(e,"Zip");var mF;mF=Kw;class uie{constructor(t){b(this,"effect");b(this,mF,sO);this.effect=t}get value(){return this.effect}onStart(t,n,r,a){}onEnd(t,n){}onEffect(t,n){}onSuspend(t){}onResume(t){}map(t){return new Kv(this,F(this.value,ct(t)))}zip(t){return new Gv(this,t)}onRun(t,n){return t()}}const fie=e=>new uie(e),Gw=xt("effect/Supervisor/none",()=>fie(_t)),die=ym,s6="Empty",a6="AddSupervisor",i6="RemoveSupervisor",o6="AndThen",Fp={_tag:s6},KS=(e,t)=>({_tag:o6,first:e,second:t}),hie=(e,t)=>mie(t,Ln(e)),mie=(e,t)=>{let n=e,r=t;for(;mo(r);){const a=io(r);switch(a._tag){case s6:{r=ic(r);break}case a6:{n=n.zip(a.supervisor),r=ic(r);break}case i6:{n=QC(n,a.supervisor),r=ic(r);break}case o6:{r=us(a.first)(us(a.second)(ic(r)));break}}}return n},QC=(e,t)=>at(e,t)?Gw:r6(e)?QC(e.left,t).zip(QC(e.right,t)):e,Qv=e=>at(e,Gw)?Rf():r6(e)?F(Qv(e.left),oy(Qv(e.right))):yw(e),gie=(e,t)=>{if(at(e,t))return Fp;const n=Qv(e),r=Qv(t),a=F(r,X3(n),cy(Fp,(l,d)=>KS(l,{_tag:a6,supervisor:d}))),o=F(n,X3(r),cy(Fp,(l,d)=>KS(l,{_tag:i6,supervisor:d})));return KS(a,o)},pie=die({empty:Fp,patch:hie,combine:KS,diff:gie}),yie=Vw("effect_fiber_started",{incremental:!0}),GN=Vw("effect_fiber_active"),_ie=Vw("effect_fiber_successes",{incremental:!0}),bie=Vw("effect_fiber_failures",{incremental:!0}),Sie=eie(Zae("effect_fiber_lifetimes",Yse({start:.5,factor:2,count:35})),"time_unit","milliseconds"),ip="Continue",vie="Done",QN="Yield",wie={_E:e=>e,_A:e=>e},yS=e=>{throw new Error(`BUG: FiberRuntime - ${gf(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},Jo=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),Xo=xt("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),op={[dv]:(e,t,n)=>_n(()=>t.effect_instruction_i1(n)),OnStep:(e,t,n)=>sn(sn(n)),[hv]:(e,t,n)=>_n(()=>t.effect_instruction_i2(n)),[EA]:(e,t,n)=>(e.patchRuntimeFlags(e.currentRuntimeFlags,t.patch),yl(e.currentRuntimeFlags)&&e.isInterrupted()?rn(e.getInterruptedCause()):sn(n)),[mv]:(e,t,n)=>(_n(()=>t.effect_instruction_i2(n)),_n(()=>t.effect_instruction_i0())?(e.pushStack(t),_n(()=>t.effect_instruction_i1())):_t),[Np]:(e,t,n)=>{const r=_n(()=>t.effect_instruction_i0.next(n));return r.done?sn(r.value):(e.pushStack(t),nU(r.value))}},Eie={[Z2]:(e,t,n,r)=>(e.processNewInterruptSignal(r.cause),yl(t)?rn(r.cause):n),[tO]:(e,t,n,r)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[eO]:(e,t,n,r)=>(r.onFiber(e,Cj(t)),n),[nO]:(e,t,n,r)=>ce(u_(),()=>n)},Tie=e=>xf(vZ(e),t=>mc(MZ(t),([n,r])=>{const a=new Map,o=[];for(const d of r){o.push(si(d));for(const h of d)a.set(h.request,h)}const l=o.flat();return ed(Kie(n.runAll(o),l,()=>l.forEach(d=>{d.listeners.interrupted=!0})),Lj,a)},!1,!1)),Rie=B0();var gF,pF;class c6 extends ko{constructor(n,r,a){super();b(this,pF,Ese);b(this,gF,wie);b(this,"_fiberRefs");b(this,"_fiberId");b(this,"_queue",new Array);b(this,"_children",null);b(this,"_observers",new Array);b(this,"_running",!1);b(this,"_stack",[]);b(this,"_asyncInterruptor",null);b(this,"_asyncBlockingOn",null);b(this,"_exitValue",null);b(this,"_steps",[]);b(this,"_isYielding",!1);b(this,"currentRuntimeFlags");b(this,"currentOpCount",0);b(this,"currentSupervisor");b(this,"currentScheduler");b(this,"currentTracer");b(this,"currentSpan");b(this,"currentContext");b(this,"currentDefaultServices");b(this,"run",()=>{this.drainQueueOnCurrentThread()});if(this.currentRuntimeFlags=a,this._fiberId=n,this._fiberRefs=r,rN(a)){const o=this.getFiberRef(RC);yie.unsafeUpdate(1,o),GN.unsafeUpdate(1,o)}this.refreshRefCache()}commit(){return Qh(this)}id(){return this._fiberId}resume(n){this.tell(Yd(n))}get status(){return this.ask((n,r)=>r)}get runtimeFlags(){return this.ask((n,r)=>Ure(r)?n.currentRuntimeFlags:r.runtimeFlags)}scope(){return Sse(this)}get children(){return this.ask(n=>Array.from(n.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(gS)}fiberRefs(){return this.ask(n=>n.getFiberRefs())}ask(n){return Be(()=>{const r=m_(this._fiberId);return this.tell(VS((a,o)=>{y_(r,_e(()=>n(a,o)))})),yo(r)})}tell(n){this._queue.push(n),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return bc(n=>{const r=a=>n(pe(a));return this.tell(VS((a,o)=>{a._exitValue!==null?r(this._exitValue):a.addObserver(r)})),_e(()=>this.tell(VS((a,o)=>{a.removeObserver(r)})))},this.id())}get inheritAll(){return Dt((n,r)=>{const a=n.id(),o=n.getFiberRefs(),l=r.runtimeFlags,d=this.getFiberRefs(),h=kne(o,a,d);n.setFiberRefs(h);const p=n.getFiberRef(XN),S=F(of(l,p),aN(_m),aN(wC));return lee(S)})}get poll(){return _e(()=>Yf(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(n){return _e(()=>this.tell(SR(Ya(n))))}unsafeInterruptAsFork(n){this.tell(SR(Ya(n)))}addObserver(n){this._exitValue!==null?n(this._exitValue):this._observers.push(n)}removeObserver(n){this._observers=this._observers.filter(r=>r!==n)}getFiberRefs(){return this.setFiberRef(XN,this.currentRuntimeFlags),this._fiberRefs}unsafeDeleteFiberRef(n){this._fiberRefs=ej(this._fiberRefs,n)}getFiberRef(n){return this._fiberRefs.locals.has(n)?this._fiberRefs.locals.get(n)[0][1]:n.initial}setFiberRef(n,r){this._fiberRefs=xC(this._fiberRefs,{fiberId:this._fiberId,fiberRef:n,value:r}),this.refreshRefCache()}refreshRefCache(){this.currentDefaultServices=this.getFiberRef(bo),this.currentTracer=this.currentDefaultServices.unsafeMap.get(__.key),this.currentSupervisor=this.getFiberRef(Bie),this.currentScheduler=this.getFiberRef(Bw),this.currentContext=this.getFiberRef(Mi),this.currentSpan=this.currentContext.unsafeMap.get(_o.key)}setFiberRefs(n){this._fiberRefs=n,this.refreshRefCache()}addChild(n){this.getChildren().add(n)}removeChild(n){this.getChildren().delete(n)}transferChildren(n){const r=this._children;if(this._children=null,r!==null&&r.size>0)for(const a of r)a._exitValue===null&&n.add(this.currentRuntimeFlags,a)}drainQueueOnCurrentThread(){let n=!0;for(;n;){let r=ip;const a=globalThis[pl];globalThis[pl]=this;try{for(;r===ip;)r=this._queue.length===0?vie:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[pl]=a}this._queue.length>0&&!this._running?(this._running=!0,r===QN?(this.drainQueueLaterOnExecutor(),n=!1):n=!0):n=!1}}drainQueueLaterOnExecutor(){this.currentScheduler.scheduleTask(this.run,this.getFiberRef(td))}drainQueueWhileRunning(n,r){let a=r;for(;this._queue.length>0;){const o=this._queue.splice(0,1)[0];a=Eie[o._tag](this,n,a,o)}return a}isInterrupted(){return!u2(this.getFiberRef(gS))}addInterruptedCause(n){const r=this.getFiberRef(gS);this.setFiberRef(gS,yr(r,n))}processNewInterruptSignal(n){this.addInterruptedCause(n),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let n=!1;for(const r of this._children)r.tell(SR(Ya(this.id()))),n=!0;return n}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){const n=this._children.values();this._children=null;let r=!1;return b2({while:()=>!r,body:()=>{const o=n.next();return o.done?_e(()=>{r=!0}):ka(o.value.await)},step:()=>{}})}return null}reportExitValue(n){if(rN(this.currentRuntimeFlags)){const r=this.getFiberRef(RC),a=this.id().startTimeMillis,o=Date.now();switch(Sie.unsafeUpdate(o-a,r),GN.unsafeUpdate(-1,r),n._tag){case Hr:{_ie.unsafeUpdate(1,r);break}case jr:{bie.unsafeUpdate(1,r);break}}}if(n._tag==="Failure"){const r=this.getFiberRef(v2);!Tw(n.cause)&&r._tag==="Some"&&this.log("Fiber terminated with an unhandled error",n.cause,r)}}setExitValue(n){this._exitValue=n,this.reportExitValue(n);for(let r=this._observers.length-1;r>=0;r--)this._observers[r](n);this._observers=[]}getLoggers(){return this.getFiberRef(Qw)}log(n,r,a){const o=mn(a)?a.value:this.getFiberRef(kee),l=this.getFiberRef(l6);if(Fne(l,o))return;const d=this.getFiberRef(Aee),h=this.getFiberRef($4),p=this.getLoggers(),S=this.getFiberRefs();if(e2(p)>0){const v=va(this.getFiberRef(bo),nd),R=new Date(v.unsafeCurrentTimeMillis());oQ(S,()=>{for(const O of p)O.log({fiberId:this.id(),logLevel:o,message:n,cause:r,context:S,spans:d,annotations:h,date:R})})}}evaluateMessageWhileSuspended(n){switch(n._tag){case nO:return QN;case Z2:return this.processNewInterruptSignal(n.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(rn(n.cause)),this._asyncInterruptor=null),ip;case tO:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(n.effect),ip;case eO:return n.onFiber(this,this._exitValue!==null?Fre:zre(this.currentRuntimeFlags,this._asyncBlockingOn)),ip;default:return yS(n)}}evaluateEffect(n){this.currentSupervisor.onResume(this);try{let r=yl(this.currentRuntimeFlags)&&this.isInterrupted()?rn(this.getInterruptedCause()):n;for(;r!==null;){const a=r,o=this.runLoop(a);if(o===Jo){const l=Xo.currentOp;Xo.currentOp=null,l._op===MS?pZ(this.currentRuntimeFlags)?(this.tell(pse()),this.tell(Yd(is)),r=null):r=is:l._op===qp&&(r=null)}else{this.currentRuntimeFlags=F(this.currentRuntimeFlags,yZ(wC));const l=this.interruptAllChildren();l!==null?r=ce(l,()=>o):(this._queue.length===0?this.setExitValue(o):this.tell(Yd(o)),r=null)}}}finally{this.currentSupervisor.onSuspend(this)}}start(n){if(this._running)this.tell(Yd(n));else{this._running=!0;const r=globalThis[pl];globalThis[pl]=this;try{this.evaluateEffect(n)}finally{this._running=!1,globalThis[pl]=r,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(n){this.tell(Yd(n))}patchRuntimeFlags(n,r){const a=bh(n,r);return globalThis[pl]=this,this.currentRuntimeFlags=a,a}initiateAsync(n,r){let a=!1;const o=l=>{a||(a=!0,this.tell(Yd(l)))};yl(n)&&(this._asyncInterruptor=o);try{r(o)}catch(l){o(gn(bs(l)))}}pushStack(n){this._stack.push(n),n._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this.currentRuntimeFlags})}popStack(){const n=this._stack.pop();if(n)return n._op==="OnStep"&&this._steps.pop(),n}getNextSuccessCont(){let n=this.popStack();for(;n;){if(n._op!==NS)return n;n=this.popStack()}}getNextFailCont(){let n=this.popStack();for(;n;){if(n._op!==dv&&n._op!==mv&&n._op!==Np)return n;n=this.popStack()}}[(pF=wse,gF=Rse,cQ)](n){return _e(()=>rw(this.currentContext,n))}Left(n){return $n(n.left)}None(n){return $n(new h_)}Right(n){return sn(n.right)}Some(n){return sn(n.value)}Micro(n){return fy(r=>{let a=r;const o=mse(ose(n,this.currentContext));return o.addObserver(l=>{if(l._tag==="Success")return a(sn(l.value));switch(l.cause._tag){case"Interrupt":return a(rn(Ya(ai)));case"Fail":return a($n(l.cause.error));case"Die":return a(dy(l.cause.defect))}}),fy(l=>{a=d=>{l(_t)},o.unsafeInterrupt()})})}[oU](n){const r=_n(()=>n.effect_instruction_i0()),a=this.getNextSuccessCont();return a!==void 0?(a._op in op||yS(a),op[a._op](this,a,r)):(Xo.currentOp=sn(r),Jo)}[Hr](n){const r=n,a=this.getNextSuccessCont();return a!==void 0?(a._op in op||yS(a),op[a._op](this,a,r.effect_instruction_i0)):(Xo.currentOp=r,Jo)}[jr](n){const r=n.effect_instruction_i0,a=this.getNextFailCont();if(a!==void 0)switch(a._op){case NS:case hv:return yl(this.currentRuntimeFlags)&&this.isInterrupted()?rn(iN(r)):_n(()=>a.effect_instruction_i1(r));case"OnStep":return yl(this.currentRuntimeFlags)&&this.isInterrupted()?rn(iN(r)):sn(rn(r));case EA:return this.patchRuntimeFlags(this.currentRuntimeFlags,a.patch),yl(this.currentRuntimeFlags)&&this.isInterrupted()?rn(yr(r,this.getInterruptedCause())):rn(r);default:yS(a)}else return Xo.currentOp=rn(r),Jo}[cU](n){return _n(()=>n.effect_instruction_i0(this,Cj(this.currentRuntimeFlags)))}Blocked(n){const r=this.getFiberRefs(),a=this.currentRuntimeFlags;if(this._steps.length>0){const o=[],l=this._steps[this._steps.length-1];let d=this.popStack();for(;d&&d._op!=="OnStep";)o.push(d),d=this.popStack();this.setFiberRefs(l.refs),this.currentRuntimeFlags=l.flags;const h=vy(l.refs,r),p=of(l.flags,a);return sn(b4(n.effect_instruction_i0,Dt(S=>{for(;o.length>0;)S.pushStack(o.pop());return S.setFiberRefs(wy(S.id(),S.getFiberRefs())(h)),S.currentRuntimeFlags=bh(p)(S.currentRuntimeFlags),n.effect_instruction_i1})))}return Us(o=>ce(Wh(tee(n.effect_instruction_i0)),()=>o(n.effect_instruction_i1)))}RunBlocked(n){return Tie(n.effect_instruction_i0)}[dm](n){const r=n.effect_instruction_i0,a=this.currentRuntimeFlags,o=bh(a,r);if(yl(o)&&this.isInterrupted())return rn(this.getInterruptedCause());if(this.patchRuntimeFlags(this.currentRuntimeFlags,r),n.effect_instruction_i1){const l=of(o,a);return this.pushStack(new nee(l,n)),_n(()=>n.effect_instruction_i1(a))}else return is}[dv](n){return this.pushStack(n),n.effect_instruction_i0}OnStep(n){return this.pushStack(n),n.effect_instruction_i0}[NS](n){return this.pushStack(n),n.effect_instruction_i0}[hv](n){return this.pushStack(n),n.effect_instruction_i0}[qp](n){return this._asyncBlockingOn=n.effect_instruction_i1,this.initiateAsync(this.currentRuntimeFlags,n.effect_instruction_i0),Xo.currentOp=n,Jo}[MS](n){return this._isYielding=!1,Xo.currentOp=n,Jo}[mv](n){const r=n.effect_instruction_i0,a=n.effect_instruction_i1;return r()?(this.pushStack(n),a()):is}[Np](n){return op[Np](this,n,void 0)}[Yy](n){return _n(()=>n.commit())}runLoop(n){let r=n;for(this.currentOpCount=0;;){if((this.currentRuntimeFlags&gZ)!==0&&this.currentSupervisor.onEffect(this,r),this._queue.length>0&&(r=this.drainQueueWhileRunning(this.currentRuntimeFlags,r)),!this._isYielding){this.currentOpCount+=1;const a=this.currentScheduler.shouldYield(this);if(a!==!1){this._isYielding=!0,this.currentOpCount=0;const o=r;r=ce(u_({priority:a}),()=>o)}}try{if(r=this.currentTracer.context(()=>Rie!==r[Df]._V?TC(`Cannot execute an Effect versioned ${r[Df]._V} with a Runtime of version ${B0()}`):this[r._op](r),this),r===Jo){const a=Xo.currentOp;return a._op===MS||a._op===qp?Jo:(Xo.currentOp=null,a._op===Hr||a._op===jr?a:rn(bs(a)))}}catch(a){r!==Jo&&!Me(r,"_op")||!(r._op in this)?r=TC(`Not a valid effect: ${gf(r)}`):Uee(a)?r=rn(yr(bs(a),Ya(ai))):r=dy(a)}}}}const l6=xt("effect/FiberRef/currentMinimumLogLevel",()=>fs(zne("Info"))),Cie=e=>v_(t=>{const n=L2(t.context,bo);va(n,Fw).unsafe.log(e.log(t))}),u6=xt(Symbol.for("effect/Logger/defaultLogger"),()=>Cie(Mse)),f6=xt(Symbol.for("effect/Logger/tracerLogger"),()=>v_(({annotations:e,cause:t,context:n,fiberId:r,logLevel:a,message:o})=>{const l=Ea(yy(n,Mi),_o);if(l._tag==="None"||l.value._tag==="ExternalSpan")return;const d=rw(yy(n,bo),nd),h={};for(const[p,S]of e)h[p]=S;h["effect.fiberId"]=nX(r),h["effect.logLevel"]=a.label,t!==null&&t._tag!=="Empty"&&(h["effect.cause"]=Zl(t,{renderErrorCause:!0})),l.value.event(gf(Array.isArray(o)?o[0]:o),d.unsafeCurrentTimeNanos(),h)})),Qw=xt(Symbol.for("effect/FiberRef/currentLoggers"),()=>Tee(yw(u6,f6))),aO=M(e=>Ca(e[0]),(e,t)=>Oc(vc(e,n=>d6(r=>t(n,r))))),d6=e=>Dt(t=>{const n=t.getFiberRefs(),r=t.currentRuntimeFlags;return ce(g6,a=>my(a,o=>Dt(l=>{const d=l.getFiberRefs(),h=l.currentRuntimeFlags,p=vy(d,n),S=of(h,r),v=vy(n,d);return l.setFiberRefs(wy(p,l.id(),n)),Jh(dee(e(o),S),_e(()=>{l.setFiberRefs(wy(v,l.id(),l.getFiberRefs()))}))})))}),kie=e=>{if(Array.isArray(e)||bA(e))return[e,be()];const t=Object.keys(e),n=t.length;return[t.map(r=>e[r]),Ce(r=>{const a={};for(let o=0;o<n;o++)a[t[o]]=r[o];return a})]},Aie=(e,t,n)=>{const r=[];for(const a of e)r.push(Bh(a));return ce(Yh(r,Ge,{concurrency:n==null?void 0:n.concurrency,batching:n==null?void 0:n.batching,concurrentFinalizers:n==null?void 0:n.concurrentFinalizers}),a=>{const o=be(),l=a.length,d=new Array(l),h=new Array(l);let p=!1;for(let S=0;S<l;S++){const v=a[S];v._tag==="Left"?(d[S]=Ce(v.left),p=!0):(h[S]=v.right,d[S]=o)}return p?t._tag==="Some"?$n(t.value(d)):$n(d):n!=null&&n.discard?_t:t._tag==="Some"?pe(t.value(h)):pe(h)})},Oie=(e,t,n)=>{const r=[];for(const a of e)r.push(Bh(a));return n!=null&&n.discard?Yh(r,Ge,{concurrency:n==null?void 0:n.concurrency,batching:n==null?void 0:n.batching,discard:!0,concurrentFinalizers:n==null?void 0:n.concurrentFinalizers}):ct(Yh(r,Ge,{concurrency:n==null?void 0:n.concurrency,batching:n==null?void 0:n.batching,concurrentFinalizers:n==null?void 0:n.concurrentFinalizers}),a=>t._tag==="Some"?t.value(a):a)},Yw=(e,t)=>{const[n,r]=kie(e);return(t==null?void 0:t.mode)==="validate"?Aie(n,r,t):(t==null?void 0:t.mode)==="either"?Oie(n,r,t):(t==null?void 0:t.discard)!==!0&&r._tag==="Some"?ct(Yh(n,Ge,t),r.value):Yh(n,Ge,t)},Die=M(2,(e,t)=>Array.from({length:t},()=>e)),xie=M(e=>Ca(e[0]),(e,t,n)=>Yw(Die(e,t),n)),Yh=M(e=>bA(e[0]),(e,t,n)=>Dt(r=>{const a=(n==null?void 0:n.batching)===!0||(n==null?void 0:n.batching)==="inherit"&&r.getFiberRef(xee);return n!=null&&n.discard?jN(n.concurrency,()=>Wd(Uv,n==null?void 0:n.concurrentFinalizers)(o=>a?mc(e,(l,d)=>o(t(l,d)),!0,!1,1):xf(e,(l,d)=>o(t(l,d)))),()=>Wd(IC,n==null?void 0:n.concurrentFinalizers)(o=>mc(e,(l,d)=>o(t(l,d)),a,!1)),o=>Wd(LC(o),n==null?void 0:n.concurrentFinalizers)(l=>mc(e,(d,h)=>l(t(d,h)),a,!1,o))):jN(n==null?void 0:n.concurrency,()=>Wd(Uv,n==null?void 0:n.concurrentFinalizers)(o=>a?YC(e,1,(l,d)=>o(t(l,d)),!0):oc(e,(l,d)=>o(t(l,d)))),()=>Wd(IC,n==null?void 0:n.concurrentFinalizers)(o=>iO(e,(l,d)=>o(t(l,d)),a)),o=>Wd(LC(o),n==null?void 0:n.concurrentFinalizers)(l=>YC(e,o,(d,h)=>l(t(d,h)),a)))})),iO=(e,t,n)=>Be(()=>{const r=an(e),a=new Array(r.length);return Qt(mc(r,(l,d)=>ce(t(l,d),h=>_e(()=>a[d]=h)),n,!1),pe(a))}),mc=(e,t,n,r,a)=>Us(o=>cee(l=>Dt(d=>{let h=Array.from(e).reverse(),p=h.length;if(p===0)return _t;let S=0,v=!1;const R=a?Math.min(h.length,a):h.length,O=new Set,x=new Array,z=()=>O.forEach(K=>{K.currentScheduler.scheduleTask(()=>{K.unsafeInterruptAsFork(d.id())},0)}),A=new Array,E=new Array,T=new Array,q=()=>{const K=x.filter(({exit:V})=>V._tag==="Failure").sort((V,j)=>V.index<j.index?-1:V.index===j.index?0:1).map(({exit:V})=>V);return K.length===0&&K.push(is),K},D=(K,V=!1)=>{const j=Oc(l(K)),te=qie(j,d,d.currentRuntimeFlags,S_);return d.currentScheduler.scheduleTask(()=>{V&&te.unsafeInterruptAsFork(d.id()),te.resume(j)},0),te},I=()=>{r||(p-=h.length,h=[]),v=!0,z()},$=n?aee:Oi,H=D(bc(K=>{const V=(te,Ee)=>{te._op==="Blocked"?T.push(te):(x.push({index:Ee,exit:te}),te._op==="Failure"&&!v&&I())},j=()=>{if(h.length>0){const te=h.pop();let Ee=S++;const xe=()=>{const Te=h.pop();return Ee=S++,ce(u_(),()=>ce($(o(t(Te,Ee))),fe))},fe=Te=>h.length>0&&(V(Te,Ee),h.length>0)?xe():pe(Te),De=ce($(o(t(te,Ee))),fe),ae=D(De);A.push(ae),O.add(ae),v&&ae.currentScheduler.scheduleTask(()=>{ae.unsafeInterruptAsFork(d.id())},0),ae.addObserver(Te=>{let Re;if(Te._op==="Failure"?Re=Te:Re=Te.effect_instruction_i0,E.push(ae),O.delete(ae),V(Re,Ee),x.length===p)K(pe(Dn(Sh(q(),{parallel:!0}),()=>is)));else if(T.length+x.length===p){const Xe=q(),Q=T.map(de=>de.effect_instruction_i0).reduce(c4);K(pe(b4(Q,mc([Dn(Sh(Xe,{parallel:!0}),()=>is),...T.map(de=>de.effect_instruction_i1)],de=>de,n,!0,a))))}else j()})}};for(let te=0;te<R;te++)j()}));return ka(Sc(Tm(o(Qh(H))),Mw({onFailure:K=>{I();const V=T.length+1,j=Math.min(typeof a=="number"?a:T.length,T.length),te=Array.from(T);return bc(Ee=>{let xe=0,fe=0;const De=(Te,Re)=>Xe=>{xe++,xe===V&&Ee(sn(rn(K))),te.length>0&&Re&&ae()},ae=()=>{D(te.pop(),!0).addObserver(De(fe,!0)),fe++};H.addObserver(De(fe,!1)),fe++;for(let Te=0;Te<j;Te++)ae()})},onSuccess:()=>oc(E,K=>K.inheritAll)})))}))),YC=(e,t,n,r)=>Be(()=>{const a=an(e),o=new Array(a.length);return Qt(mc(a,(d,h)=>ct(n(d,h),p=>o[h]=p),r,!1,t),pe(o))}),$ie=e=>Dt((t,n)=>pe(oO(e,t,n.runtimeFlags))),Wh=e=>Nie(e,S_),oO=(e,t,n,r=null)=>{const a=Yv(e,t,n,r);return a.resume(e),a},qie=(e,t,n,r=null)=>Yv(e,t,n,r),Yv=(e,t,n,r=null)=>{const a=VP(),o=t.getFiberRefs(),l=Ane(o,a),d=new c6(a,l,n),h=yy(l,Mi),p=d.currentSupervisor;return p.onStart(h,e,Ce(t),d),d.addObserver(v=>p.onEnd(v,d)),(r!==null?r:F(t.getFiberRef(CC),Dn(()=>t.scope()))).add(n,d),d},Nie=(e,t)=>Dt((n,r)=>pe(oO(e,n,r.runtimeFlags,t))),YN=e=>Om(t=>on(Ea(t,Ii),{onNone:()=>e,onSome:n=>{switch(n.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return ce(qw(n,IC),r=>rd(e,r))}}})),WN=e=>t=>Om(n=>on(Ea(n,Ii),{onNone:()=>t,onSome:r=>r.strategy._tag==="ParallelN"&&r.strategy.parallelism===e?t:ce(qw(r,LC(e)),a=>rd(t,a))})),Wd=(e,t)=>n=>Om(r=>on(Ea(r,Ii),{onNone:()=>n(Ge),onSome:a=>{if(t===!0){const o=e._tag==="Parallel"?YN:e._tag==="Sequential"?JN:WN(e.parallelism);switch(a.strategy._tag){case"Parallel":return o(n(YN));case"Sequential":return o(n(JN));case"ParallelN":return o(n(WN(a.strategy.parallelism)))}}else return n(Ge)}})),h6=e=>ce(Ii,e),m6=e=>ce(qm(),t=>Sc(e(t),n=>t.close(n))),Mie=e=>ce(qm(),t=>Pie(e,t)),JN=e=>Om(t=>on(Ea(t,Ii),{onNone:()=>e,onSome:n=>{switch(n.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return ce(qw(n,Uv),r=>rd(e,r))}}})),Iie=M(e=>Ca(e[1]),(e,t,n)=>R_(e,t,(r,a)=>[r,a],n)),Lie=M(e=>Ca(e[1]),(e,t,n)=>(n==null?void 0:n.concurrent)!==!0&&((n==null?void 0:n.batching)===void 0||n.batching===!1)?xl(e,t):R_(e,t,(r,a)=>r,n)),Fie=M(e=>Ca(e[1]),(e,t,n)=>(n==null?void 0:n.concurrent)!==!0&&((n==null?void 0:n.batching)===void 0||n.batching===!1)?Qt(e,t):R_(e,t,(r,a)=>a,n)),R_=M(e=>Ca(e[1]),(e,t,n,r)=>ct(Yw([e,t],{concurrency:r!=null&&r.concurrent?2:1,batching:r==null?void 0:r.batching,concurrentFinalizers:r==null?void 0:r.concurrentFinalizers}),([a,o])=>n(a,o))),Ii=Ps("effect/Scope"),g6=Ii,zie=(e,t)=>{e.state._tag==="Open"&&e.state.finalizers.set({},t)},Uie={[uN]:uN,[fN]:fN,pipe(){return Fe(this,arguments)},fork(e){return _e(()=>{const t=p6(e);if(this.state._tag==="Closed")return t.state=this.state,t;const n={},r=a=>t.close(a);return this.state.finalizers.set(n,r),zie(t,a=>_e(()=>{this.state._tag==="Open"&&this.state.finalizers.delete(n)})),t})},close(e){return Be(()=>{if(this.state._tag==="Closed")return _t;const t=Array.from(this.state.finalizers.values()).reverse();return this.state={_tag:"Closed",exit:e},t.length===0?_t:Are(this.strategy)?F(oc(t,n=>Oi(n(e))),ce(n=>F(Sh(n),rf(yR),Dn(()=>is)))):Ore(this.strategy)?F(iO(t,n=>Oi(n(e)),!1),ce(n=>F(Sh(n,{parallel:!0}),rf(yR),Dn(()=>is)))):F(YC(t,this.strategy.parallelism,n=>Oi(n(e)),!1),ce(n=>F(Sh(n,{parallel:!0}),rf(yR),Dn(()=>is))))})},addFinalizer(e){return Be(()=>this.state._tag==="Closed"?e(this.state.exit):(this.state.finalizers.set({},e),_t))}},p6=(e=b_)=>{const t=Object.create(Uie);return t.strategy=e,t.state={_tag:"Open",finalizers:new Map},t},qm=(e=b_)=>_e(()=>p6(e)),rd=M(2,(e,t)=>z4(e,Xl(nw(Ii,t)))),Pie=M(2,(e,t)=>F(e,rd(t),Sc(n=>t.close(n)))),jie=e=>Cm(e,{differ:pie,fork:Fp}),Hie=M(2,(e,t)=>ka(aO(ce(f_(e),n=>_r(qv(e,t),n)),n=>qv(e,n)))),cO=M(2,(e,t)=>Rm(e,n=>Hie(e,t(n)))),XN=Cee(_Z),Bie=jie(Gw),y6=M(3,(e,t,n)=>b6(e,t,{onSelfWin:(r,a)=>ce(r.await,o=>{switch(o._tag){case Hr:return ce(r.inheritAll,()=>n.onSelfDone(o,a));case jr:return n.onSelfDone(o,a)}}),onOtherWin:(r,a)=>ce(r.await,o=>{switch(o._tag){case Hr:return ce(r.inheritAll,()=>n.onOtherDone(o,a));case jr:return n.onOtherDone(o,a)}})})),Vie=e=>Us(t=>Zf(n=>ce(Wh(t(e)),r=>F(t(Qh(r)),eu(()=>F(r,zj(n))))))),_6=M(2,(e,t)=>Zf(n=>y6(e,t,{onSelfDone:(r,a)=>OC(r,{onFailure:o=>F(Qh(a),MN(l=>go(o,l))),onSuccess:o=>F(a,cc(n),_r(o))}),onOtherDone:(r,a)=>OC(r,{onFailure:o=>F(Qh(a),MN(l=>go(l,o))),onSuccess:o=>F(a,cc(n),_r(o))})}))),b6=M(3,(e,t,n)=>Dt((r,a)=>{const o=a.runtimeFlags,l=Wf(!0),d=Yv(e,r,o,n.selfScope),h=Yv(t,r,o,n.otherScope);return bc(p=>{d.addObserver(()=>ZN(d,h,n.onSelfWin,l,p)),h.addObserver(()=>ZN(h,d,n.onOtherWin,l,p)),d.startFork(e),h.startFork(t)},Dl(d.id(),h.id()))})),ZN=(e,t,n,r,a)=>{VJ(!0,!1)(r)&&a(n(e,t))},Jh=M(2,(e,t)=>Us(n=>zs(n(e),{onFailure:r=>zs(t,{onFailure:a=>gn(yr(r,a)),onSuccess:()=>gn(r)}),onSuccess:r=>_r(t,r)}))),Kie=(e,t,n)=>Zf(r=>ce(ce(Wh(Vh(e)),a=>bc(o=>{const l=t.map(p=>p.listeners.count),d=()=>{l.every(p=>p===0)&&t.every(p=>p.result.state.current._tag==="Pending"?!0:!!(p.result.state.current._tag==="Done"&&Nw(p.result.state.current.effect)&&p.result.state.current.effect._tag==="Failure"&&f2(p.result.state.current.effect.cause)))&&(h.forEach(p=>p()),n==null||n(),o(hy(a)))};a.addObserver(p=>{h.forEach(S=>S()),o(p)});const h=t.map((p,S)=>{const v=R=>{l[S]=R,d()};return p.listeners.addObserver(v),()=>p.listeners.removeObserver(v)});return d(),_e(()=>{h.forEach(p=>p())})})),()=>Be(()=>{const a=t.flatMap(o=>o.state.completed?[]:[o]);return xf(a,o=>cie(o.request,T2(r)))}))),eM=(e,t)=>(t=hc(t),Oc(Dt(n=>{const r=rw(n.getFiberRef(Mi),Ii),a=V2(n,e,t),o=n.getFiberRef($w),l=va(n.getFiberRef(bo),nd);return _r(my(r,d=>zv(a,d,l,o)),a)}))),Gie=e=>cO(bo,_a(__,e)),Qie=function(){const e=typeof arguments[0]!="string",t=e?arguments[1]:arguments[0],n=hc(e?arguments[2]:arguments[1]);if(e){const r=arguments[0];return ce(eM(t,hc(n)),a=>by(r,_o,a))}return r=>ce(eM(t,hc(n)),a=>by(r,_o,a))},Yie=_c,Pl=Of,Nf=bs,Ww=Ya,Wie=go,Jie=yr,Xie=c2,S6=FZ,Zie=l2,v6=f2,ql=Tw,eoe=d2,Jw=Rw,toe=UZ,lO=BZ,tM=Iee,w6=kw,noe=Pee,Xw=h_,Ey=Zl,roe=h2,soe="effect/ScheduleInterval",Wv=Symbol.for(soe),E6={[Wv]:Wv,startMillis:0,endMillis:0},uO=(e,t)=>e>t?E6:{[Wv]:Wv,startMillis:e,endMillis:t},aoe=M(2,(e,t)=>ioe(e,t)===e),ioe=M(2,(e,t)=>e.endMillis<=t.startMillis?e:t.endMillis<=e.startMillis?t:e.startMillis<t.startMillis?e:t.startMillis<e.startMillis?t:e.endMillis<=t.endMillis?e:t),ooe=e=>e.startMillis>=e.endMillis,coe=M(2,(e,t)=>{const n=Math.max(e.startMillis,t.startMillis),r=Math.min(e.endMillis,t.endMillis);return uO(n,r)}),loe=e=>Ef(e.endMillis-e.startMillis),uoe=e=>uO(e,Number.POSITIVE_INFINITY),nM=uO,T6=E6,foe=aoe,doe=ooe,hoe=coe,moe=loe,WC=uoe,goe="effect/ScheduleIntervals",rM=Symbol.for(goe),R6=e=>({[rM]:rM,intervals:e}),poe=M(2,(e,t)=>yoe(e.intervals,t.intervals,vn())),yoe=(e,t,n)=>{let r=e,a=t,o=n;for(;mo(r)&&mo(a);){const l=F(io(r),hoe(io(a))),d=doe(l)?o:F(o,us(l));F(io(r),foe(io(a)))?r=ic(r):a=ic(a),o=d}return R6(yc(o))},JC=e=>F(e.intervals,cw,Dn(()=>T6)).startMillis,_oe=e=>F(e.intervals,cw,Dn(()=>T6)).endMillis,C6=M(2,(e,t)=>JC(e)<JC(t)),boe=e=>mo(e.intervals),Soe=M(2,(e,t)=>C6(e,t)?t:e),voe=R6,woe=poe,XC=JC,ZC=_oe,Eoe=C6,Toe=boe,Roe=Soe,fO="Continue",k6="Done",Coe=e=>({_tag:fO,intervals:e}),koe=e=>({_tag:fO,intervals:voe(Ln(e))}),Aoe={_tag:k6},Ooe=e=>e._tag===fO,Doe=e=>e._tag===k6,A6=Coe,Jv=koe,Mf=Aoe,sM=Ooe,jl=Doe,xoe=Ii,Hl=q4,$oe=my,gr=kC,C_=rd,O6=qw,k_=qm,qoe=vw,D6=function(){const e=Symbol.for("effect/Data/Error/plainArgs");return{BaseEffectError:class extends w2{constructor(n){super(n==null?void 0:n.message,n!=null&&n.cause?{cause:n.cause}:void 0),n&&(Object.assign(this,n),Object.defineProperty(this,e,{value:n,enumerable:!1}))}toJSON(){return{...this[e],...this}}}}.BaseEffectError}(),Noe=e=>{const t={BaseEffectError:class extends D6{constructor(){super(...arguments);b(this,"_tag",e)}}};return t.BaseEffectError.prototype.name=e,t.BaseEffectError},Moe="effect/Schedule",x6=Symbol.for(Moe),$6=e=>Me(e,x6),Ioe="effect/ScheduleDriver",Loe=Symbol.for(Ioe),Foe={_Out:e=>e,_In:e=>e,_R:e=>e},zoe={_Out:e=>e,_In:e=>e,_R:e=>e};var yF;yF=x6;class Uoe{constructor(t,n){b(this,"initial");b(this,"step");b(this,yF,Foe);this.initial=t,this.step=n}pipe(){return Fe(this,arguments)}}var _F;_F=Loe;class Poe{constructor(t,n){b(this,"schedule");b(this,"ref");b(this,_F,zoe);this.schedule=t,this.ref=n}get state(){return ct($l(this.ref),t=>t[1])}get last(){return ce($l(this.ref),([t,n])=>{switch(t._tag){case"None":return Ow(()=>new h_);case"Some":return pe(t.value)}})}get reset(){return _y(this.ref,[be(),this.schedule.initial])}next(t){return F(ct($l(this.ref),n=>n[1]),ce(n=>F(vne,ce(r=>F(Be(()=>this.schedule.step(r,t,n)),ce(([a,o,l])=>{const d=_y(this.ref,[Ce(o),a]);if(jl(l))return Qt(d,$n(be()));const h=XC(l.intervals)-r;return h<=0?_r(d,o):F(d,Qt(B2(Ef(h))),_r(o))}))))))}}const Dc=(e,t)=>new Uoe(e,t),q6=M(2,(e,t)=>joe(e,n=>_e(()=>t(n)))),joe=M(2,(e,t)=>Woe(e,(n,r)=>ct(t(n),a=>oJ(r,Ta(a))))),Hoe=M(2,(e,t)=>Dc([e.initial,t.initial,!0],(n,r,a)=>a[2]?ce(e.step(n,r,a[0]),([o,l,d])=>jl(d)?ct(t.step(n,r,a[1]),([h,p,S])=>[[o,h,!1],rt(p),S]):pe([[o,a[1],!0],et(l),d])):ct(t.step(n,r,a[1]),([o,l,d])=>[[a[0],o,!1],rt(l),d]))),Boe=M(2,(e,t)=>dO(e,(n,r)=>_e(()=>t(n,r)))),dO=M(2,(e,t)=>Dc(e.initial,(n,r,a)=>ce(e.step(n,r,a),([o,l,d])=>jl(d)?pe([o,l,Mf]):ct(t(r,l),h=>h?[o,l,d]:[o,l,Mf])))),Voe=M(2,(e,t)=>Dc([e.initial,t.initial],(n,r,a)=>ce(e.step(n,r,a[0]),([o,l,d])=>ct(t.step(n,l,a[1]),([h,p,S])=>jl(d)?[[o,h],p,Mf]:jl(S)?[[o,h],p,Mf]:[[o,h],p,A6(F(d.intervals,Roe(S.intervals)))])))),Koe=e=>q6(e,t=>t),N6=e=>F(Fv([be(),e.initial]),ct(t=>new Poe(e,t))),Goe=(e,t=2)=>{const n=Ta(e);return Koe(I6(A_,r=>iJ(n,Math.pow(t,r))))},M6=M(2,(e,t)=>Qoe(e,t,woe)),Qoe=M(3,(e,t,n)=>Dc([e.initial,t.initial],(r,a,o)=>F(k4(e.step(r,a,o[0]),t.step(r,a,o[1]),(l,d)=>[l,d]),ce(([[l,d,h],[p,S,v]])=>sM(h)&&sM(v)?ek(e,t,a,l,d,h.intervals,p,S,v.intervals,n):pe([[l,p],[d,S],Mf]))))),ek=(e,t,n,r,a,o,l,d,h,p)=>{const S=p(o,h);return Toe(S)?pe([[r,l],[a,d],A6(S)]):F(o,Eoe(h))?ce(e.step(ZC(o),n,r),([v,R,O])=>jl(O)?pe([[v,l],[R,d],Mf]):ek(e,t,n,v,R,O.intervals,l,d,h,p)):ce(t.step(ZC(h),n,l),([v,R,O])=>jl(O)?pe([[r,v],[a,R],Mf]):ek(e,t,n,r,a,o,v,R,O.intervals,p))},I6=M(2,(e,t)=>Yoe(e,n=>_e(()=>t(n)))),Yoe=M(2,(e,t)=>Dc(e.initial,(n,r,a)=>ce(e.step(n,r,a),([o,l,d])=>ct(t(l),h=>[o,h,d])))),Woe=M(2,(e,t)=>Dc(e.initial,(n,r,a)=>ce(e.step(n,r,a),([o,l,d])=>{if(jl(d))return pe([o,l,d]);const h=d.intervals,p=moe(nM(n,XC(h)));return ct(t(l,p),S=>{const v=Ta(S),R=XC(h),O=n+Nh(v),x=O-R,z=Math.max(0,ZC(h)+x),A=nM(O,z);return[o,l,Jv(A)]})}))),Joe=e=>Dc(e.initial,(t,n,r)=>F(e.step(t,n,r),ct(([a,o,l])=>[a,n,l]))),L6=e=>U6(A_,t=>t<e),Xoe=e=>q6(A_,()=>e),Zoe=(e,t)=>Dc(e,(n,r,a)=>_e(()=>[t(a),a,Jv(WC(n))])),F6=M(2,(e,t)=>dO(e,(n,r)=>ure(t(n)))),z6=M(2,(e,t)=>dO(e,(n,r)=>t(n))),U6=M(2,(e,t)=>Boe(e,(n,r)=>t(r))),GS=Symbol.for("effect/Schedule/ScheduleDefect");var bF;bF=GS;class ece{constructor(t){b(this,"error");b(this,bF);this.error=t,this[GS]=GS}}const tce=e=>Me(e,GS),Xv=e=>Hh(e,t=>dy(new ece(t))),P6=e=>Em(e,t=>on(Cw(t,n=>l2(n)&&tce(n.defect)?Ce(n.defect):be()),{onNone:()=>gn(t),onSome:n=>$n(n.error)})),aM=M(2,(e,t)=>rce(e,t,(n,r)=>$n(n))),nce=M(2,(e,t)=>{if($6(t))return aM(e,t);const n=t.schedule??Joe(A_),r=t.while?z6(n,l=>{const d=t.while(l);return typeof d=="boolean"?pe(d):Xv(d)}):n,a=t.until?F6(r,l=>{const d=t.until(l);return typeof d=="boolean"?pe(d):Xv(d)}):r,o=t.times?M6(a,L6(t.times)).pipe(I6(l=>l[0])):a;return P6(aM(e,o))}),rce=M(3,(e,t,n)=>ce(N6(t),r=>po(e,{onFailure:a=>n(a,be()),onSuccess:a=>j6(e,r,n,a)}))),j6=(e,t,n,r)=>po(t.next(r),{onFailure:()=>_2(t.last),onSuccess:a=>po(e,{onFailure:o=>n(o,Ce(a)),onSuccess:o=>j6(e,t,n,o)})}),iM=M(2,(e,t)=>ace(e,t,(n,r)=>$n(n))),sce=M(2,(e,t)=>{if($6(t))return iM(e,t);const n=t.schedule??A_,r=t.while?z6(n,l=>{const d=t.while(l);return typeof d=="boolean"?pe(d):Xv(d)}):n,a=t.until?F6(r,l=>{const d=t.until(l);return typeof d=="boolean"?pe(d):Xv(d)}):r,o=t.times?M6(a,L6(t.times)):a;return P6(iM(e,o))}),ace=M(3,(e,t,n)=>ce(N6(t),r=>H6(e,r,n))),H6=(e,t,n)=>Hh(e,r=>po(t.next(r),{onFailure:()=>F(t.last,_2,ce(a=>n(r,a))),onSuccess:()=>H6(e,t,n)})),ice=Dc(be(),(e,t,n)=>{switch(n._tag){case"None":return pe([Ce(e),BA,Jv(WC(e))]);case"Some":return pe([Ce(n.value),Ef(e-n.value),Jv(WC(e))])}}),A_=Zoe(0,e=>e+1);class oce{constructor(t){b(this,"permits");b(this,"waiters",new Set);b(this,"taken",0);b(this,"take",t=>El(n=>{if(this.free<t){const r=()=>{this.free<t||(this.waiters.delete(r),this.taken+=t,n(pe(t)))};return this.waiters.add(r),_e(()=>{this.waiters.delete(r)})}return this.taken+=t,n(pe(t))}));b(this,"updateTaken",t=>Dt(n=>(this.taken=t(this.taken),this.waiters.size>0&&n.getFiberRef(Bw).scheduleTask(()=>{const r=this.waiters.values();let a=r.next();for(;a.done===!1&&this.free>0;)a.value(),a=r.next()},n.getFiberRef(td)),pe(this.free))));b(this,"release",t=>this.updateTaken(n=>n-t));b(this,"releaseAll",this.updateTaken(t=>0));b(this,"withPermits",t=>n=>Us(r=>ce(r(this.take(t)),a=>Jh(r(n),this.release(a)))));b(this,"withPermitsIfAvailable",t=>n=>Us(r=>Be(()=>this.free<t?Sy:(this.taken+=t,Jh(r(Jne(n)),this.release(t))))));this.permits=t}get free(){return this.permits-this.taken}}const zp=e=>new oce(e),cce=e=>_e(()=>zp(e));class lce extends ko{constructor(n){super();b(this,"isOpen");b(this,"waiters",[]);b(this,"scheduled",!1);b(this,"flushWaiters",()=>{this.scheduled=!1;const n=this.waiters;this.waiters=[];for(let r=0;r<n.length;r++)n[r](is)});b(this,"open",Dt(n=>this.isOpen?_t:(this.isOpen=!0,this.unsafeSchedule(n))));b(this,"release",Dt(n=>this.isOpen?_t:this.unsafeSchedule(n)));b(this,"await",El(n=>this.isOpen?n(_t):(this.waiters.push(n),_e(()=>{const r=this.waiters.indexOf(n);r!==-1&&this.waiters.splice(r,1)}))));b(this,"close",_e(()=>{this.isOpen=!1}));b(this,"whenOpen",n=>Qt(this.await,n));this.isOpen=n}commit(){return this.await}unsafeSchedule(n){return this.scheduled||this.waiters.length===0||(this.scheduled=!0,n.currentScheduler.scheduleTask(this.flushWaiters,n.getFiberRef(td))),_t}unsafeOpen(){this.isOpen||(this.isOpen=!0,this.flushWaiters())}unsafeClose(){this.isOpen=!1}}const B6=e=>new lce(e??!1),uce=e=>_e(()=>B6(e)),Zv=M(2,(e,t)=>Dt((n,r)=>{const a=t,o=oO(e,n,r.runtimeFlags,S_);if(a.state._tag==="Open"){const l=()=>Zf(h=>at(h,o.id())?_t:ka(hy(o))),d={};a.state.finalizers.set(d,l),o.addObserver(()=>{a.state._tag!=="Closed"&&a.state.finalizers.delete(d)})}else o.unsafeInterruptAsFork(n.id());return pe(o)})),fce=e=>h6(t=>Zv(e,t)),dce=M(2,(e,t)=>F(Oi(e),_6(Oi(t)),n=>Tm(n))),hce=M(2,(e,t)=>mce(e,{onTimeout:()=>Hee(t),duration:t})),mce=M(2,(e,{duration:t,onTimeout:n})=>Tm(gce(e,{onTimeout:()=>Ow(n),onSuccess:pe,duration:t}))),gce=M(2,(e,{duration:t,onSuccess:n,onTimeout:r})=>Zf(a=>Us(o=>b6(o(e),Vh(B2(t)),{onSelfWin:(l,d)=>ce(l.await,h=>h._tag==="Success"?ce(l.inheritAll,()=>_r(cc(d,a),n(h.value))):ce(cc(d,a),()=>rn(h.cause))),onOtherWin:(l,d)=>ce(l.await,h=>h._tag==="Success"?ce(l.inheritAll,()=>_r(cc(d,a),r())):ce(cc(d,a),()=>rn(h.cause))),otherScope:S_})))),pce="effect/Ref/SynchronizedRef",V6=Symbol.for(pce),K6={_A:e=>e};var SF,vF,wF,EF;class yce extends(EF=ko,wF=V6,vF=U2,SF=Ul,EF){constructor(n,r){super();b(this,"ref");b(this,"withLock");b(this,wF,K6);b(this,vF,P2);b(this,SF,Ul);b(this,"get");this.ref=n,this.withLock=r,this.get=$l(this.ref)}commit(){return this.get}modify(n){return this.modifyEffect(r=>pe(n(r)))}modifyEffect(n){return this.withLock(F(ce($l(this.ref),n),ce(([r,a])=>_r(_y(this.ref,a),r))))}}const _ce=e=>_e(()=>G6(e)),G6=e=>{const t=aj(e),n=zp(1);return new yce(t,n.withPermits(1))},bce=Symbol.for("effect/ManagedRuntime"),Sce="Fold",vce="Fresh",wce="FromEffect",Ece="Scoped",Tce="Suspend",Rce="Provide",Q6="ProvideMerge",Cce="ZipWith",Y6=Fj,kce=Ase,oM=Cse,wa=hy,Zw=cc,Ace=kse,Tl=Qh,Nm=e=>function(){if(arguments.length===1){const t=arguments[0];return(n,...r)=>e(t,n,...r)}return e.apply(this,arguments)},O_=Nm((e,t,n)=>{const r=VP(),a=[[Mi,[[r,e.context]]]];n!=null&&n.scheduler&&a.push([Bw,[[r,n.scheduler]]]);let o=Dne(e.fiberRefs,{entries:a,forkAs:r});n!=null&&n.updateRefs&&(o=n.updateRefs(o,r));const l=new c6(r,o,e.runtimeFlags);let d=t;n!=null&&n.scope&&(d=ce(O6(n.scope,b_),p=>Qt(q4(p,Zf(S=>at(S,l.id())?_t:cc(l,S))),Sc(t,S=>gr(p,S)))));const h=l.currentSupervisor;return h!==Gw&&(h.onStart(e.context,d,be(),l),l.addObserver(p=>h.onEnd(p,l))),S_.add(e.runtimeFlags,l),(n==null?void 0:n.immediate)===!1?l.resume(d):l.start(d),l}),W6=Nm((e,t,n={})=>{const r=O_(e,t,n);return n.onExit&&r.addObserver(a=>{n.onExit(a)}),(a,o)=>W6(e)(F(r,Zw(a??ai)),{...o,onExit:o!=null&&o.onExit?l=>o.onExit(cte(l)):void 0})}),Oce=Nm((e,t)=>{const n=qce(e)(t);if(n._tag==="Failure")throw J6(n.effect_instruction_i0);return n.effect_instruction_i0});class Dce extends Error{constructor(n){super(`Fiber #${n.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`);b(this,"fiber");b(this,"_tag","AsyncFiberException");this.fiber=n,this.name=this._tag,this.stack=this.message}}const xce=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new Dce(e);return Error.stackTraceLimit=t,n},vR=Symbol.for("effect/Runtime/FiberFailure"),_S=Symbol.for("effect/Runtime/FiberFailure/Cause");var TF,RF;class $ce extends Error{constructor(n){const r=h2(n)[0];super((r==null?void 0:r.message)||"An error has occurred");b(this,RF);b(this,TF);this[vR]=vR,this[_S]=n,this.name=r?`(FiberFailure) ${r.name}`:"FiberFailure",r!=null&&r.stack&&(this.stack=r.stack)}toJSON(){return{_id:"FiberFailure",cause:this[_S].toJSON()}}toString(){return"(FiberFailure) "+Zl(this[_S],{renderErrorCause:!0})}[(RF=vR,TF=_S,cn)](){return this.toString()}}const J6=e=>{const t=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new $ce(e);return Error.stackTraceLimit=t,n},X6=e=>{const t=e;switch(t._op){case"Failure":case"Success":return t;case"Left":return gy(t.left);case"Right":return sn(t.right);case"Some":return sn(t.value);case"None":return gy(h_())}},qce=Nm((e,t)=>{const n=X6(t);if(n)return n;const r=new Ij,a=O_(e)(t,{scheduler:r});r.flush();const o=a.unsafePoll();return o||ch(g2(xce(a),O2(a)))}),Nce=Nm((e,t,n)=>Mce(e,t,n).then(r=>{switch(r._tag){case Hr:return r.effect_instruction_i0;case jr:throw J6(r.effect_instruction_i0)}})),Mce=Nm((e,t,n)=>new Promise(r=>{const a=X6(t);a&&r(a);const o=O_(e)(t);o.addObserver(l=>{r(l)}),(n==null?void 0:n.signal)!==void 0&&(n.signal.aborted?o.unsafeInterruptAsFork(o.id()):n.signal.addEventListener("abort",()=>{o.unsafeInterruptAsFork(o.id())},{once:!0}))}));class Z6{constructor(t,n,r){b(this,"context");b(this,"runtimeFlags");b(this,"fiberRefs");this.context=t,this.runtimeFlags=n,this.fiberRefs=r}pipe(){return Fe(this,arguments)}}const e5=e=>new Z6(e.context,e.runtimeFlags,e.fiberRefs),Ice=()=>Dt((e,t)=>pe(new Z6(e.getFiberRef(Mi),t.runtimeFlags,e.getFiberRefs()))),Lce=i4(_m,s4,r4),Xh=e5({context:vf(),runtimeFlags:Lce,fiberRefs:xne()}),Fce=M(2,(e,t)=>e5({context:t(e.context),runtimeFlags:e.runtimeFlags,fiberRefs:e.fiberRefs})),zce=W6(Xh),Uce=O_(Xh),Pce=Nce(Xh),jce=Oce(Xh),Hce=M(2,(e,t)=>e.modifyEffect(t)),Bce="effect/Layer",t5=Symbol.for(Bce),Vce={_RIn:e=>e,_E:e=>e,_ROut:e=>e},Bl={[t5]:Vce,pipe(){return Fe(this,arguments)}},Kce="effect/Layer/MemoMap",wR=Symbol.for(Kce),Gce=sw()("effect/Layer/CurrentMemoMap",{defaultValue:()=>Jce()}),Qce=e=>Me(e,t5),Yce=e=>e._op_layer===vce;var CF;CF=wR;class n5{constructor(t){b(this,"ref");b(this,CF);this.ref=t,this[wR]=wR}getOrElseMemoize(t,n){return F(Hce(this.ref,r=>{const a=r.get(t);if(a!==void 0){const[o,l]=a,d=F(o,ce(([h,p])=>F(fre(h),_r(p))),Sc(Mw({onFailure:()=>_t,onSuccess:()=>my(n,l)})));return pe([d,r])}return F(Fv(0),ce(o=>F(g_(),ce(l=>F(Fv(()=>_t),ct(d=>{const h=Us(S=>F(qm(),ce(v=>F(S(ce(s5(t,v,!0),R=>sre(R(this)))),Oi,ce(R=>{switch(R._tag){case jr:return F(F4(l,R.effect_instruction_i0),Qt(kC(v,R)),Qt(gn(R.effect_instruction_i0)));case Hr:return F(_y(d,O=>F(kC(v,O),xw(ij(o,x=>[x===1,x-1])),ka)),Qt(qC(o,O=>O+1)),Qt(my(n,O=>F(_e(()=>r.delete(t)),Qt($l(d)),ce(x=>x(O))))),Qt(p_(l,R.effect_instruction_i0)),_r(R.effect_instruction_i0[1]))}}))))),p=[F(yo(l),Sc(OC({onFailure:()=>_t,onSuccess:()=>qC(o,S=>S+1)}))),S=>F($l(d),ce(v=>v(S)))];return[h,Yce(t)?r:r.set(t,p)]}))))))}),Tm)}}const Wce=Be(()=>ct(_ce(new Map),e=>new n5(e))),Jce=()=>new n5(G6(new Map)),r5=M(2,(e,t)=>ce(Wce,n=>Xce(e,n,t))),Xce=M(3,(e,t,n)=>ce(s5(e,n),r=>by(r(t),Gce,t))),s5=(e,t,n=!1)=>{const r=e;switch(r._op_layer){case"Locally":return _e(()=>a=>r.f(a.getOrElseMemoize(r.self,t)));case"ExtendScope":return _e(()=>a=>h6(o=>a.getOrElseMemoize(r.layer,o)));case"Fold":return _e(()=>a=>F(a.getOrElseMemoize(r.layer,t),zs({onFailure:o=>a.getOrElseMemoize(r.failureK(o),t),onSuccess:o=>a.getOrElseMemoize(r.successK(o),t)})));case"Fresh":return _e(()=>a=>F(r.layer,r5(t)));case"FromEffect":return _e(n?()=>a=>r.effect:()=>a=>a.getOrElseMemoize(e,t));case"Provide":return _e(()=>a=>F(a.getOrElseMemoize(r.first,t),ce(o=>F(a.getOrElseMemoize(r.second,t),k2(o)))));case"Scoped":return _e(n?()=>a=>rd(r.effect,t):()=>a=>a.getOrElseMemoize(e,t));case"Suspend":return _e(()=>a=>a.getOrElseMemoize(r.evaluate(),t));case"ProvideMerge":return _e(()=>a=>F(a.getOrElseMemoize(r.first,t),k4(a.getOrElseMemoize(r.second,t),r.zipK)));case"ZipWith":return _e(()=>a=>F(a.getOrElseMemoize(r.first,t),R_(a.getOrElseMemoize(r.second,t),r.zipK,{concurrent:!0})))}},Zce=()=>eE(Am()),ele=e=>a5(Pl(e)),a5=e=>eE(gn(e)),hO=M(2,(e,t)=>nle(e,{onFailure:ele,onSuccess:t})),i5=M(2,(e,t)=>{const n=jA(e),r=n?e:t;return eE(ct(n?t:e,o=>nw(r,o)))});function eE(e){const t=Object.create(Bl);return t._op_layer=wce,t.effect=e,t}const tle=M(2,(e,{onFailure:t,onSuccess:n})=>{const r=Object.create(Bl);return r._op_layer=Sce,r.layer=e,r.failureK=t,r.successK=n,r}),nle=M(2,(e,{onFailure:t,onSuccess:n})=>tle(e,{onFailure:r=>{const a=Jw(r);switch(a._tag){case"Left":return t(a.left);case"Right":return a5(a.right)}},onSuccess:n})),o5=M(2,(e,t)=>ile(e,t,(n,r)=>Xl(n,r))),c5=(...e)=>{let t=e[0];for(let n=1;n<e.length;n++)t=o5(t,e[n]);return t},rle=M(2,(e,t)=>{const n=jA(e),r=n?e:t;return l5(ct(n?t:e,o=>nw(r,o)))}),mO=e=>l5(F(e,_r(vf()))),l5=e=>{const t=Object.create(Bl);return t._op_layer=Ece,t.effect=e,t},sle=M(2,(e,t)=>{const n=jA(e);return eE(pe(nw(n?e:t,n?t:e)))}),u5=e=>{const t=Object.create(Bl);return t._op_layer=Tce,t.evaluate=e,t},f5=M(2,(e,t)=>u5(()=>{const n=Object.create(Bl);return n._op_layer=Rce,n.first=Object.create(Bl,{_op_layer:{value:Q6,enumerable:!0},first:{value:Zce(),enumerable:!0},second:{value:Array.isArray(t)?c5(...t):t},zipK:{value:(r,a)=>F(r,Xl(a))}}),n.second=e,n})),ale=M(2,(e,t)=>{const n=Object.create(Bl);return n._op_layer=Q6,n.first=t,n.second=f5(e,t),n.zipK=(r,a)=>F(r,Xl(a)),n}),ile=M(3,(e,t,n)=>u5(()=>{const r=Object.create(Bl);return r._op_layer=Cce,r.first=e,r.second=t,r.zipK=n,r})),ole=e=>{const t=Ps("effect/Layer/unwrapEffect/Layer.Layer<R1, E1, A>");return hO(i5(t,e),n=>va(n,t))},cle=e=>{const t=Ps("effect/Layer/unwrapScoped/Layer.Layer<R1, E1, A>");return hO(rle(t,e),n=>va(n,t))},cM=M(2,(e,t)=>m6(n=>ce(r5(t,n),r=>A2(e,r)))),lM=M(2,(e,t)=>{const n=vy(Xh.fiberRefs,t.fiberRefs),r=of(Xh.runtimeFlags,t.runtimeFlags);return Us(a=>Dt(o=>{const l=o.getFiberRef(Mi),d=o.getFiberRefs(),h=wy(o.id(),d)(n),p=o.currentRuntimeFlags,S=bh(r)(p),v=vy(h,d),R=of(S,p);return o.setFiberRefs(h),o.currentRuntimeFlags=S,Jh(A2(a(e),Xl(l,t.context)),Dt(O=>(O.setFiberRefs(wy(O.id(),O.getFiberRefs())(v)),O.currentRuntimeFlags=bh(R)(O.currentRuntimeFlags),_t)))}))}),lle=M(2,(e,t)=>Array.isArray(t)?cM(e,c5(...t)):Qce(t)?cM(e,t):MW(t)?A2(e,t):bce in t?ce(t.runtimeEffect,n=>lM(e,n)):lM(e,t)),ule=oie,uM=Df,nu=Ca,tE=Yw,os=Yh,gO=bc,Zh=Dt,If=$n,ii=gn,Ty=dy,fle=TC,ke=uee,pO=hee,Lf=dre,fr=pe,Zn=Be,it=_e,wt=_t,dle=u_,yO=Hh,Mm=Em,d5=Zne,ER=ere,Ff=tre,hle=bj,_O=ire,nE=sce,D_=Xne,mle=Vie,_l=mr,Bn=Vh,gle=eu,lh=Oc,Im=Us,gc=_r,bO=ka,Mt=ct,ple=y2,sd=Dw,Pn=aO,SO=m2,Ss=d6,uh=Jh,yle=iee,h5=g6,tk=m6,zf=Mie,m5=Zf,vO=$ie,g5=Wh,Is=Zv,jn=fce,_le=rre,wO=B2,em=hce,ble=Am,vs=lle,EO=by,Sle=vre,Jd=Bh,tr=Oi,rE=R4,vle=Sre,ft=ce,Ry=see,vl=Tm,TR=_6,p5=dce,y5=y6,Zs=vc,wle=mre,Ele=gre,Sa=pre,tm=H2,fM=nce,Tle=S2,Rle=_j,e0=T4,no=zs,Cle=po,TO=ore,ss=Sj,ki=cre,Cy=lre,Nl=Wne,kle=$ee,Wa=_2,Lm=Ice,sE=cce,dM=uce,Li=Uce,_5=zce,aE=Pce,Ga=jce,nk=Iie,RO=Lie,Sn=Fie,iE=R_,Ale=_re,rk=wre,CO=vj,Ole=Ere,Ft=Tre,kO=Qie,fh=MC,oE=function(e,...t){const n=Error.stackTraceLimit;Error.stackTraceLimit=2;const r=new Error;if(Error.stackTraceLimit=n,typeof e!="string")return hM(e.length,function(...l){const d=Error.stackTraceLimit;Error.stackTraceLimit=2;const h=new Error;return Error.stackTraceLimit=d,mM({self:this,body:e,args:l,pipeables:t,spanName:"<anonymous>",spanOptions:{context:Lv.context(!0)},errorDef:r,errorCall:h})});const a=e,o=t[0];return(l,...d)=>hM(l.length,{[a](...h){const p=Error.stackTraceLimit;Error.stackTraceLimit=2;const S=new Error;return Error.stackTraceLimit=p,mM({self:this,body:l,args:h,pipeables:d,spanName:a,spanOptions:o,errorDef:r,errorCall:S})}}[a])};function hM(e,t){return Object.defineProperty(t,"length",{value:e,configurable:!0})}function mM(e){let t,n;if(rQ(e.body))t=$v(()=>e.body.apply(e.self,e.args));else try{t=e.body.apply(e.self,e.args)}catch(l){n=l,t=Ty(l)}if(e.pipeables.length>0)try{for(const l of e.pipeables)t=l(t,...e.args)}catch(l){t=n?ii(yr(bs(n),bs(l))):Ty(l)}let r=!1;const a=()=>{if(r!==!1)return r;if(e.errorCall.stack){const l=e.errorDef.stack.trim().split(`
`),d=e.errorCall.stack.trim().split(`
`);let h=l.slice(2).join(`
`).trim();h.includes("(")||(h=h.replace(/at (.*)/,"at ($1)"));let p=d.slice(2).join(`
`).trim();return p.includes("(")||(p=p.replace(/at (.*)/,"at ($1)")),r=`${h}
${p}`,r}},o=e.spanOptions&&"captureStackTrace"in e.spanOptions?e.spanOptions:{captureStackTrace:a,...e.spanOptions};return Ft(t,e.spanName,o)}const Dle=fee,xle=f_,$le=Rm,b5=Mi,qle=td,Nle=Qw,S5=Bw,Mle=$w,Ile=M(2,(e,t)=>ed(l6,t)(e)),Lle=e=>mO(cO(Qw,_h(e))),Fle=e=>mO(cO(Qw,t2(e))),zle=M(2,(e,t)=>hO(Fle(e),()=>Lle(t))),Ule=e=>mO(Gie(e)),Ple=i5,jle=o5,x_=sle,Hle=f5,Ble=ale,v5=ole,Vle=cle,w5=Ule,Kle="effect/QueueEnqueue",E5=Symbol.for(Kle),Gle="effect/QueueDequeue",AO=Symbol.for(Gle),Qle="effect/QueueStrategy",OO=Symbol.for(Qle),Yle="effect/BackingQueue",Wle=Symbol.for(Yle),DO={_A:e=>e},Jle={_A:e=>e},T5={_In:e=>e},xO={_Out:e=>e};var kF,AF,OF;class Xle extends(OF=ko,AF=E5,kF=AO,OF){constructor(n,r,a,o,l){super();b(this,"queue");b(this,"takers");b(this,"shutdownHook");b(this,"shutdownFlag");b(this,"strategy");b(this,AF,T5);b(this,kF,xO);this.queue=n,this.takers=r,this.shutdownHook=a,this.shutdownFlag=o,this.strategy=l}pipe(){return Fe(this,arguments)}commit(){return this.take}capacity(){return this.queue.capacity()}get size(){return Be(()=>Hh(this.unsafeSize(),()=>mr))}unsafeSize(){return Vt(this.shutdownFlag)?be():Ce(this.queue.length()-M2(this.takers)+this.strategy.surplusSize())}get isEmpty(){return ct(this.size,n=>n<=0)}get isFull(){return ct(this.size,n=>n>=this.capacity())}get shutdown(){return Oc(Dt(n=>(F(this.shutdownFlag,Jf(!0)),F(mc(wh(this.takers),r=>C2(r,n.id()),!1,!1),Qt(this.strategy.shutdown),xw(p_(this.shutdownHook,void 0)),ka))))}get isShutdown(){return _e(()=>Vt(this.shutdownFlag))}get awaitShutdown(){return yo(this.shutdownHook)}isActive(){return!Vt(this.shutdownFlag)}unsafeOffer(n){if(Vt(this.shutdownFlag))return!1;let r;if(this.queue.length()===0){const o=F(this.takers,dc(ur));o!==ur?(uf(o,n),r=!0):r=!1}else r=!1;if(r)return!0;const a=this.queue.offer(n);return Wu(this.strategy,this.queue,this.takers),a}offer(n){return Be(()=>{if(Vt(this.shutdownFlag))return mr;let r;if(this.queue.length()===0){const o=F(this.takers,dc(ur));o!==ur?(uf(o,n),r=!0):r=!1}else r=!1;if(r)return pe(!0);const a=this.queue.offer(n);return Wu(this.strategy,this.queue,this.takers),a?pe(!0):this.strategy.handleSurplus([n],this.queue,this.takers,this.shutdownFlag)})}offerAll(n){return Be(()=>{if(Vt(this.shutdownFlag))return mr;const r=an(n),a=this.queue.length()===0?an(_ue(this.takers,r.length)):Ll,[o,l]=F(r,AU(a.length));for(let h=0;h<a.length;h++){const p=a[h],S=o[h];uf(p,S)}if(l.length===0)return pe(!0);const d=this.queue.offerAll(l);return Wu(this.strategy,this.queue,this.takers),ow(d)?pe(!0):this.strategy.handleSurplus(d,this.queue,this.takers,this.shutdownFlag)})}get take(){return Dt(n=>{if(Vt(this.shutdownFlag))return mr;const r=this.queue.poll(ur);if(r!==ur)return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),pe(r);{const a=m_(n.id());return F(Be(()=>(F(this.takers,Kh(a)),Wu(this.strategy,this.queue,this.takers),Vt(this.shutdownFlag)?mr:yo(a))),eu(()=>_e(()=>bue(this.takers,a))))}})}get takeAll(){return Be(()=>Vt(this.shutdownFlag)?mr:_e(()=>{const n=this.queue.pollUpTo(Number.POSITIVE_INFINITY);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),wf(n)}))}takeUpTo(n){return Be(()=>Vt(this.shutdownFlag)?mr:_e(()=>{const r=this.queue.pollUpTo(n);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),wf(r)}))}takeBetween(n,r){return Be(()=>R5(this,n,r,vn()))}}const R5=(e,t,n,r)=>n<t?pe(r):F(fue(e,n),ce(a=>{const o=t-a.length;return o===1?F(sk(e),ct(l=>F(r,Nn(a),sy(l)))):o>1?F(sk(e),ce(l=>R5(e,o-1,n-a.length-1,F(r,Nn(a),sy(l))))):pe(F(r,Nn(a)))})),Zle=e=>F(_e(()=>N2(e)),ce(t=>cE(lE(t),hue()))),eue=e=>F(_e(()=>N2(e)),ce(t=>cE(lE(t),C5()))),tue=e=>F(_e(()=>N2(e)),ce(t=>cE(lE(t),mue()))),$O=()=>F(_e(()=>Iw()),ce(e=>cE(lE(e),C5()))),nue=(e,t,n,r,a)=>new Xle(e,t,n,r,a),cE=(e,t)=>F(g_(),ct(n=>nue(e,Iw(),n,Wf(!1),t)));var DF;DF=Wle;class rue{constructor(t){b(this,"mutable");b(this,DF,Jle);this.mutable=t}poll(t){return dc(this.mutable,t)}pollUpTo(t){return Lw(this.mutable,t)}offerAll(t){return I2(this.mutable,t)}offer(t){return Kh(this.mutable,t)}capacity(){return Ete(this.mutable)}length(){return M2(this.mutable)}}const lE=e=>new rue(e),sue=e=>e.size,aue=e=>e.isShutdown,iue=e=>e.awaitShutdown,oue=e=>e.shutdown,cue=M(2,(e,t)=>e.offer(t)),lue=M(2,(e,t)=>e.offerAll(t)),sk=e=>e.take,uue=e=>e.takeAll,fue=M(2,(e,t)=>e.takeUpTo(t)),due=M(3,(e,t,n)=>e.takeBetween(t,n)),hue=()=>new gue,C5=()=>new pue,mue=()=>new yue;var xF;xF=OO;class gue{constructor(){b(this,xF,DO);b(this,"putters",Iw())}surplusSize(){return M2(this.putters)}onCompleteTakersWithEmptyQueue(t){for(;!lf(this.putters)&&!lf(t);){const n=dc(t,void 0),r=dc(this.putters,void 0);r[2]&&uf(r[1],!0),uf(n,r[0])}}get shutdown(){return F(l_,ce(t=>F(_e(()=>wh(this.putters)),ce(n=>mc(n,([r,a,o])=>o?F(C2(a,t),ka):_t,!1,!1)))))}handleSurplus(t,n,r,a){return Dt(o=>{const l=m_(o.id());return F(Be(()=>(this.unsafeOffer(t,l),this.unsafeOnQueueEmptySpace(n,r),Wu(this,n,r),Vt(a)?mr:yo(l))),eu(()=>_e(()=>this.unsafeRemove(l))))})}unsafeOnQueueEmptySpace(t,n){let r=!0;for(;r&&(t.capacity()===Number.POSITIVE_INFINITY||t.length()<t.capacity());){const a=F(this.putters,dc(ur));if(a===ur)r=!1;else{const o=t.offer(a[0]);o&&a[2]?uf(a[1],!0):o||t0(this.putters,F(wh(this.putters),us(a))),Wu(this,t,n)}}}unsafeOffer(t,n){const r=an(t);for(let a=0;a<r.length;a++){const o=r[a];a===r.length-1?F(this.putters,Kh([o,n,!0])):F(this.putters,Kh([o,n,!1]))}}unsafeRemove(t){t0(this.putters,F(wh(this.putters),iw(([,n])=>n!==t)))}}var $F;let pue=($F=OO,class{constructor(){b(this,$F,DO)}surplusSize(){return 0}get shutdown(){return _t}onCompleteTakersWithEmptyQueue(){}handleSurplus(t,n,r,a){return pe(!1)}unsafeOnQueueEmptySpace(t,n){}});var qF;qF=OO;class yue{constructor(){b(this,qF,DO)}surplusSize(){return 0}get shutdown(){return _t}onCompleteTakersWithEmptyQueue(){}handleSurplus(t,n,r,a){return _e(()=>(this.unsafeOffer(n,t),Wu(this,n,r),!0))}unsafeOnQueueEmptySpace(t,n){}unsafeOffer(t,n){const r=n[Symbol.iterator]();let a,o=!0;for(;!(a=r.next()).done&&o;){if(t.capacity()===0)return;t.poll(ur),o=t.offer(a.value)}}}const uf=(e,t)=>y_(e,pe(t)),t0=(e,t)=>F(e,I2(t)),wh=e=>F(e,Lw(Number.POSITIVE_INFINITY)),_ue=(e,t)=>F(e,Lw(t)),bue=(e,t)=>{t0(e,F(wh(e),iw(n=>t!==n)))},Wu=(e,t,n)=>{let r=!0;for(;r&&t.length()!==0;){const a=F(n,dc(ur));if(a!==ur){const o=t.poll(ur);o!==ur?(uf(a,o),e.unsafeOnQueueEmptySpace(t,n)):t0(n,F(wh(n),us(a))),r=!0}else r=!1}r&&t.length()===0&&!lf(n)&&e.onCompleteTakersWithEmptyQueue(n)},to=Symbol.for("effect/PubSub/AbsentValue"),k5=(e,t)=>n=>{n.has(e)||n.set(e,new Set),n.get(e).add(t)},Sue=(e,t)=>n=>{if(!n.has(e))return;const r=n.get(e);r.delete(t),r.size===0&&n.delete(e)},vue=e=>Be(()=>{const t=Rue(e);return $ue(t,new zue)}),wue=e=>e.shutdown,Eue=M(2,(e,t)=>e.publish(t)),Tue=e=>e.subscribe,Rue=e=>new Aue(e!=null&&e.replay?new jue(e.replay):void 0),Cue=(e,t,n)=>ct(g_(),r=>kue(e,t,e.subscribe(),Iw(),r,Wf(!1),n)),kue=(e,t,n,r,a,o,l)=>new Due(e,t,n,r,a,o,l,e.replayWindow());class Aue{constructor(t){b(this,"replayBuffer");b(this,"publisherHead",{value:to,subscribers:0,next:null});b(this,"publisherTail",this.publisherHead);b(this,"publisherIndex",0);b(this,"subscribersIndex",0);b(this,"capacity",Number.MAX_SAFE_INTEGER);this.replayBuffer=t}replayWindow(){return this.replayBuffer?new Hue(this.replayBuffer):Bue}isEmpty(){return this.publisherHead===this.publisherTail}isFull(){return!1}size(){return this.publisherIndex-this.subscribersIndex}publish(t){const n=this.publisherTail.subscribers;return n!==0&&(this.publisherTail.next={value:t,subscribers:n,next:null},this.publisherTail=this.publisherTail.next,this.publisherIndex+=1),this.replayBuffer&&this.replayBuffer.offer(t),!0}publishAll(t){if(this.publisherTail.subscribers!==0)for(const n of t)this.publish(n);else this.replayBuffer&&this.replayBuffer.offerAll(t);return vn()}slide(){this.publisherHead!==this.publisherTail&&(this.publisherHead=this.publisherHead.next,this.publisherHead.value=to,this.subscribersIndex+=1),this.replayBuffer&&this.replayBuffer.slide()}subscribe(){return this.publisherTail.subscribers+=1,new Oue(this,this.publisherTail,this.publisherIndex,!1)}}class Oue{constructor(t,n,r,a){b(this,"self");b(this,"subscriberHead");b(this,"subscriberIndex");b(this,"unsubscribed");this.self=t,this.subscriberHead=n,this.subscriberIndex=r,this.unsubscribed=a}isEmpty(){if(this.unsubscribed)return!0;let t=!0,n=!0;for(;n;)this.subscriberHead===this.self.publisherTail?n=!1:this.subscriberHead.next.value!==to?(t=!1,n=!1):(this.subscriberHead=this.subscriberHead.next,this.subscriberIndex+=1);return t}size(){return this.unsubscribed?0:this.self.publisherIndex-Math.max(this.subscriberIndex,this.self.subscribersIndex)}poll(t){if(this.unsubscribed)return t;let n=!0,r=t;for(;n;)if(this.subscriberHead===this.self.publisherTail)n=!1;else{const a=this.subscriberHead.next.value;a!==to&&(r=a,this.subscriberHead.subscribers-=1,this.subscriberHead.subscribers===0&&(this.self.publisherHead=this.self.publisherHead.next,this.self.publisherHead.value=to,this.self.subscribersIndex+=1),n=!1),this.subscriberHead=this.subscriberHead.next,this.subscriberIndex+=1}return r}pollUpTo(t){const n=[],r=to;let a=0;for(;a!==t;){const o=this.poll(r);o===r?a=t:(n.push(o),a+=1)}return wf(n)}unsubscribe(){if(!this.unsubscribed)for(this.unsubscribed=!0,this.self.publisherTail.subscribers-=1;this.subscriberHead!==this.self.publisherTail;)this.subscriberHead.next.value!==to&&(this.subscriberHead.subscribers-=1,this.subscriberHead.subscribers===0&&(this.self.publisherHead=this.self.publisherHead.next,this.self.publisherHead.value=to,this.self.subscribersIndex+=1)),this.subscriberHead=this.subscriberHead.next}}var NF,MF;class Due extends(MF=ko,NF=AO,MF){constructor(n,r,a,o,l,d,h,p){super();b(this,"pubsub");b(this,"subscribers");b(this,"subscription");b(this,"pollers");b(this,"shutdownHook");b(this,"shutdownFlag");b(this,"strategy");b(this,"replayWindow");b(this,NF,xO);this.pubsub=n,this.subscribers=r,this.subscription=a,this.pollers=o,this.shutdownHook=l,this.shutdownFlag=d,this.strategy=h,this.replayWindow=p}commit(){return this.take}pipe(){return Fe(this,arguments)}capacity(){return this.pubsub.capacity}isActive(){return!Vt(this.shutdownFlag)}get size(){return Be(()=>Vt(this.shutdownFlag)?mr:pe(this.subscription.size()+this.replayWindow.remaining))}unsafeSize(){return Vt(this.shutdownFlag)?be():Ce(this.subscription.size()+this.replayWindow.remaining)}get isFull(){return Be(()=>Vt(this.shutdownFlag)?mr:pe(this.subscription.size()===this.capacity()))}get isEmpty(){return ct(this.size,n=>n===0)}get shutdown(){return Oc(Dt(n=>(Jf(this.shutdownFlag,!0),F(iO(qO(this.pollers),r=>C2(r,n.id()),!1),Qt(_e(()=>{this.subscribers.delete(this.subscription),this.subscription.unsubscribe(),this.strategy.unsafeOnPubSubEmptySpace(this.pubsub,this.subscribers)})),xw(p_(this.shutdownHook,void 0)),ka))))}get isShutdown(){return _e(()=>Vt(this.shutdownFlag))}get awaitShutdown(){return yo(this.shutdownHook)}get take(){return Dt(n=>{if(Vt(this.shutdownFlag))return mr;if(this.replayWindow.remaining>0){const a=this.replayWindow.take();return pe(a)}const r=lf(this.pollers)?this.subscription.poll(ur):ur;if(r===ur){const a=m_(n.id());return F(Be(()=>(F(this.pollers,Kh(a)),F(this.subscribers,k5(this.subscription,this.pollers)),this.strategy.unsafeCompletePollers(this.pubsub,this.subscribers,this.subscription,this.pollers),Vt(this.shutdownFlag)?mr:yo(a))),eu(()=>_e(()=>Fue(this.pollers,a))))}else return this.strategy.unsafeOnPubSubEmptySpace(this.pubsub,this.subscribers),pe(r)})}get takeAll(){return Be(()=>{if(Vt(this.shutdownFlag))return mr;const n=lf(this.pollers)?Mue(this.subscription):vn();return this.strategy.unsafeOnPubSubEmptySpace(this.pubsub,this.subscribers),this.replayWindow.remaining>0?pe(Nn(this.replayWindow.takeAll(),n)):pe(n)})}takeUpTo(n){return Be(()=>{if(Vt(this.shutdownFlag))return mr;let r;if(this.replayWindow.remaining>=n){const o=this.replayWindow.takeN(n);return pe(o)}else this.replayWindow.remaining>0&&(r=this.replayWindow.takeAll(),n=n-r.length);const a=lf(this.pollers)?Iue(this.subscription,n):vn();return this.strategy.unsafeOnPubSubEmptySpace(this.pubsub,this.subscribers),pe(r?Nn(r,a):a)})}takeBetween(n,r){return Be(()=>A5(this,n,r,vn()))}}const A5=(e,t,n,r)=>n<t?pe(r):F(e.takeUpTo(n),ce(a=>{const o=t-a.length;return o===1?F(e.take,ct(l=>F(r,Nn(a),sy(l)))):o>1?F(e.take,ce(l=>A5(e,o-1,n-a.length-1,F(r,Nn(a),sy(l))))):pe(F(r,Nn(a)))}));var IF,LF;LF=E5,IF=AO;class xue{constructor(t,n,r,a,o,l){b(this,"pubsub");b(this,"subscribers");b(this,"scope");b(this,"shutdownHook");b(this,"shutdownFlag");b(this,"strategy");b(this,LF,T5);b(this,IF,xO);this.pubsub=t,this.subscribers=n,this.scope=r,this.shutdownHook=a,this.shutdownFlag=o,this.strategy=l}capacity(){return this.pubsub.capacity}get size(){return Be(()=>Vt(this.shutdownFlag)?mr:_e(()=>this.pubsub.size()))}unsafeSize(){return Vt(this.shutdownFlag)?be():Ce(this.pubsub.size())}get isFull(){return ct(this.size,t=>t===this.capacity())}get isEmpty(){return ct(this.size,t=>t===0)}get awaitShutdown(){return yo(this.shutdownHook)}get isShutdown(){return _e(()=>Vt(this.shutdownFlag))}get shutdown(){return Oc(Dt(t=>(F(this.shutdownFlag,Jf(!0)),F(this.scope.close(T2(t.id())),Qt(this.strategy.shutdown),xw(p_(this.shutdownHook,void 0)),ka))))}publish(t){return Be(()=>Vt(this.shutdownFlag)?mr:this.pubsub.publish(t)?(this.strategy.unsafeCompleteSubscribers(this.pubsub,this.subscribers),pe(!0)):this.strategy.handleSurplus(this.pubsub,this.subscribers,Ln(t),this.shutdownFlag))}isActive(){return!Vt(this.shutdownFlag)}unsafeOffer(t){return Vt(this.shutdownFlag)?!1:this.pubsub.publish(t)?(this.strategy.unsafeCompleteSubscribers(this.pubsub,this.subscribers),!0):!1}publishAll(t){return Be(()=>{if(Vt(this.shutdownFlag))return mr;const n=Lue(this.pubsub,t);return this.strategy.unsafeCompleteSubscribers(this.pubsub,this.subscribers),ow(n)?pe(!0):this.strategy.handleSurplus(this.pubsub,this.subscribers,n,this.shutdownFlag)})}get subscribe(){const t=vc(Yw([this.scope.fork(b_),Cue(this.pubsub,this.subscribers,this.strategy)]),n=>n[0].addFinalizer(()=>n[1].shutdown));return ct(aO(t,(n,r)=>n[0].close(r)),n=>n[1])}offer(t){return this.publish(t)}offerAll(t){return this.publishAll(t)}pipe(){return Fe(this,arguments)}}const $ue=(e,t)=>ce(qm(),n=>ct(g_(),r=>que(e,new Map,n,r,Wf(!1),t))),que=(e,t,n,r,a,o)=>new xue(e,t,n,r,a,o),Nue=(e,t)=>{y_(e,pe(t))},O5=(e,t)=>F(e,I2(t)),qO=e=>F(e,Lw(Number.POSITIVE_INFINITY)),Mue=e=>e.pollUpTo(Number.POSITIVE_INFINITY),Iue=(e,t)=>e.pollUpTo(t),Lue=(e,t)=>e.publishAll(t),Fue=(e,t)=>{O5(e,F(qO(e),iw(n=>n!==t)))};class zue{get shutdown(){return _t}handleSurplus(t,n,r,a){return pe(!1)}unsafeOnPubSubEmptySpace(t,n){}unsafeCompletePollers(t,n,r,a){return Uue(this,t,n,r,a)}unsafeCompleteSubscribers(t,n){return Pue(this,t,n)}}const Uue=(e,t,n,r,a)=>{let o=!0;for(;o&&!r.isEmpty();){const l=F(a,dc(ur));if(l===ur)F(n,Sue(r,a)),lf(a)?o=!1:F(n,k5(r,a));else{const d=r.poll(ur);d===ur?O5(a,F(qO(a),us(l))):(Nue(l,d),e.unsafeOnPubSubEmptySpace(t,n))}}},Pue=(e,t,n)=>{for(const[r,a]of n)for(const o of a)e.unsafeCompletePollers(t,n,r,o)};class jue{constructor(t){b(this,"capacity");b(this,"head",{value:to,next:null});b(this,"tail",this.head);b(this,"size",0);b(this,"index",0);this.capacity=t}slide(){this.index++}offer(t){this.tail.value=t,this.tail.next={value:to,next:null},this.tail=this.tail.next,this.size===this.capacity?this.head=this.head.next:this.size+=1}offerAll(t){for(const n of t)this.offer(n)}}class Hue{constructor(t){b(this,"buffer");b(this,"head");b(this,"index");b(this,"remaining");this.buffer=t,this.index=t.index,this.remaining=t.size,this.head=t.head}fastForward(){for(;this.index<this.buffer.index;)this.head=this.head.next,this.index++}take(){if(this.remaining===0)return;this.index<this.buffer.index&&this.fastForward(),this.remaining--;const t=this.head.value;return this.head=this.head.next,t}takeN(t){if(this.remaining===0)return vn();this.index<this.buffer.index&&this.fastForward();const n=Math.min(t,this.remaining),r=new Array(n);for(let a=0;a<n;a++){const o=this.head.value;this.head=this.head.next,r[a]=o}return this.remaining-=n,lr(r)}takeAll(){return this.takeN(this.remaining)}}const Bue={remaining:0,take:()=>{},takeN:()=>vn(),takeAll:()=>vn()},D5=vue,ak=wue,NO=Eue,gM=Tue,MO=Zle,Vue=eue,Kue=tue,Xs=$O,Gue=sue,Que=aue,Yue=iue,Ns=oue,Hn=cue,IO=lue,nm=sk,Wue=uue,x5=due,$5="Continue",Jue="Close",Xue="Yield",Zue="effect/ChannelChildExecutorDecision",pM=Symbol.for(Zue),efe={[pM]:pM},q5=e=>{const t=Object.create(efe);return t._tag=$5,t},QS="ContinuationK",tfe="ContinuationFinalizer",N5=Symbol.for("effect/ChannelContinuation"),M5={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutDone:e=>e,_OutErr2:e=>e,_OutElem:e=>e,_OutDone2:e=>e};var FF;FF=N5;class LO{constructor(t,n){b(this,"onSuccess");b(this,"onHalt");b(this,"_tag",QS);b(this,FF,M5);this.onSuccess=t,this.onHalt=n}onExit(t){return Dm(t)?this.onHalt(t.cause):this.onSuccess(t.value)}}var zF;zF=N5;class nfe{constructor(t){b(this,"finalizer");b(this,"_tag",tfe);b(this,zF,M5);this.finalizer=t}}const I5="PullAfterNext",rfe="PullAfterAllEnqueued",sfe="effect/ChannelUpstreamPullStrategy",afe=Symbol.for(sfe),ife={_A:e=>e},ofe={[afe]:ife},L5=e=>{const t=Object.create(ofe);return t._tag=I5,t.emitSeparator=e,t},F5="BracketOut",z5="Bridge",FO="ConcatAll",U5="Emit",P5="Ensuring",j5="Fail",zO="Fold",H5="FromEffect",B5="PipeTo",V5="Provide",K5="Read",G5="Succeed",Q5="SucceedNow",Y5="Suspend",cfe="effect/Channel",n0=Symbol.for(cfe),lfe={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},Ts={[n0]:lfe,pipe(){return Fe(this,arguments)}},W5=e=>Me(e,n0)||nu(e),ufe=M(2,(e,t)=>{const n=Object.create(Ts);return n._tag=F5,n.acquire=()=>e,n.finalizer=t,n}),UO=M(2,(e,t)=>{const n=Object.create(Ts);return n._tag=zO,n.channel=e,n.k=new LO(ad,t),n}),J5=(e,t,n)=>{const r=Object.create(Ts);return r._tag=FO,r.combineInners=t,r.combineAll=n,r.onPull=()=>L5(be()),r.onEmit=()=>q5,r.value=()=>e,r.k=Ge,r},ffe=M(4,(e,t,n,r)=>{const a=Object.create(Ts);return a._tag=FO,a.combineInners=n,a.combineAll=r,a.onPull=()=>L5(be()),a.onEmit=()=>q5,a.value=()=>e,a.k=t,a}),PO=M(2,(e,t)=>{const n=Object.create(Ts);return n._tag=z5,n.input=t,n.channel=e,n}),X5=M(2,(e,t)=>{const n=Object.create(Ts);return n._tag=P5,n.channel=e,n.finalizer=t,n}),Fm=e=>dr(Pl(e)),dr=e=>Z5(()=>e),Z5=e=>{const t=Object.create(Ts);return t._tag=j5,t.error=e,t},Yt=M(2,(e,t)=>{const n=Object.create(Ts);return n._tag=zO,n.channel=e,n.k=new LO(t,dr),n}),Fr=e=>{const t=Object.create(Ts);return t._tag=H5,t.effect=()=>e,t},cs=M(2,(e,t)=>{const n=Object.create(Ts);return n._tag=B5,n.left=()=>e,n.right=()=>t,n}),yM=M(2,(e,t)=>{const n=Object.create(Ts);return n._tag=V5,n.context=()=>t,n.inner=e,n}),$_=e=>Ao({onInput:e.onInput,onFailure:t=>as(Jw(t),{onLeft:e.onFailure,onRight:dr}),onDone:e.onDone}),Ao=e=>{const t=Object.create(Ts);return t._tag=K5,t.more=e.onInput,t.done=new LO(e.onDone,e.onFailure),t},ad=e=>eH(()=>e),So=e=>{const t=Object.create(Ts);return t._tag=Q5,t.terminal=e,t},q_=e=>{const t=Object.create(Ts);return t._tag=Y5,t.channel=e,t},eH=e=>{const t=Object.create(Ts);return t._tag=G5,t.evaluate=e,t},Ls=So(void 0),ln=e=>{const t=Object.create(Ts);return t._tag=U5,t.out=e,t},N_="Done",M_="Emit",zm="FromEffect",I_="Read",dfe=Symbol.for("effect/ChannelState"),hfe={_E:e=>e,_R:e=>e},uE={[dfe]:hfe},Xd=()=>{const e=Object.create(uE);return e._tag=N_,e},RR=()=>{const e=Object.create(uE);return e._tag=M_,e},cp=e=>{const t=Object.create(uE);return t._tag=zm,t.effect=e,t},CR=(e,t,n,r)=>{const a=Object.create(uE);return a._tag=I_,a.upstream=e,a.onEffect=t,a.onEmit=n,a.onDone=r,a},r0=e=>e._tag===zm,mfe=e=>r0(e)?e.effect:wt,_M=e=>r0(e)?hle(e.effect):void 0,tH="PullFromChild",ik="PullFromUpstream",ok="DrainChildExecutors",nH="Emit";class bS{constructor(t,n,r){b(this,"childExecutor");b(this,"parentSubexecutor");b(this,"onEmit");b(this,"_tag",tH);this.childExecutor=t,this.parentSubexecutor=n,this.onEmit=r}close(t){const n=this.childExecutor.close(t),r=this.parentSubexecutor.close(t);return n!==void 0&&r!==void 0?iE(tr(n),tr(r),(a,o)=>F(a,py(o))):n!==void 0?n:r!==void 0?r:void 0}enqueuePullFromChild(t){return this}}class Bu{constructor(t,n,r,a,o,l,d,h){b(this,"upstreamExecutor");b(this,"createChild");b(this,"lastDone");b(this,"activeChildExecutors");b(this,"combineChildResults");b(this,"combineWithChildResult");b(this,"onPull");b(this,"onEmit");b(this,"_tag",ik);this.upstreamExecutor=t,this.createChild=n,this.lastDone=r,this.activeChildExecutors=a,this.combineChildResults=o,this.combineWithChildResult=l,this.onPull=d,this.onEmit=h}close(t){const n=this.upstreamExecutor.close(t),a=[...this.activeChildExecutors.map(o=>o!==void 0?o.childExecutor.close(t):void 0),n].reduce((o,l)=>o!==void 0&&l!==void 0?iE(o,tr(l),(d,h)=>py(d,h)):o!==void 0?o:l!==void 0?tr(l):void 0,void 0);return a}enqueuePullFromChild(t){return new Bu(this.upstreamExecutor,this.createChild,this.lastDone,[...this.activeChildExecutors,t],this.combineChildResults,this.combineWithChildResult,this.onPull,this.onEmit)}}class dh{constructor(t,n,r,a,o,l,d){b(this,"upstreamExecutor");b(this,"lastDone");b(this,"activeChildExecutors");b(this,"upstreamDone");b(this,"combineChildResults");b(this,"combineWithChildResult");b(this,"onPull");b(this,"_tag",ok);this.upstreamExecutor=t,this.lastDone=n,this.activeChildExecutors=r,this.upstreamDone=a,this.combineChildResults=o,this.combineWithChildResult=l,this.onPull=d}close(t){const n=this.upstreamExecutor.close(t),a=[...this.activeChildExecutors.map(o=>o!==void 0?o.childExecutor.close(t):void 0),n].reduce((o,l)=>o!==void 0&&l!==void 0?iE(o,tr(l),(d,h)=>py(d,h)):o!==void 0?o:l!==void 0?tr(l):void 0,void 0);return a}enqueuePullFromChild(t){return new dh(this.upstreamExecutor,this.lastDone,[...this.activeChildExecutors,t],this.upstreamDone,this.combineChildResults,this.combineWithChildResult,this.onPull)}}class kR{constructor(t,n){b(this,"value");b(this,"next");b(this,"_tag",nH);this.value=t,this.next=n}close(t){const n=this.next.close(t);return n}enqueuePullFromChild(t){return this}}const gfe="Pulled",pfe="NoUpstream",yfe="effect/ChannelUpstreamPullRequest",_fe=Symbol.for(yfe),bfe={_A:e=>e},rH={[_fe]:bfe},bM=e=>{const t=Object.create(rH);return t._tag=gfe,t.value=e,t},Sfe=e=>{const t=Object.create(rH);return t._tag=pfe,t.activeDownstreamCount=e,t};class Ju{constructor(t,n,r){b(this,"_activeSubexecutor");b(this,"_cancelled");b(this,"_closeLastSubstream");b(this,"_currentChannel");b(this,"_done");b(this,"_doneStack",[]);b(this,"_emitted");b(this,"_executeCloseLastSubstream");b(this,"_input");b(this,"_inProgressFinalizer");b(this,"_providedEnv");this._currentChannel=t,this._executeCloseLastSubstream=r,this._providedEnv=n}run(){let t;for(;t===void 0;)if(this._cancelled!==void 0)t=this.processCancellation();else if(this._activeSubexecutor!==void 0)t=this.runSubexecutor();else try{if(this._currentChannel===void 0)t=Xd();else switch(nu(this._currentChannel)&&(this._currentChannel=Fr(this._currentChannel)),this._currentChannel._tag){case F5:{t=this.runBracketOut(this._currentChannel);break}case z5:{const n=this._currentChannel.input;if(this._currentChannel=this._currentChannel.channel,this._input!==void 0){const r=this._input;this._input=void 0;const a=()=>ft(n.awaitRead(),()=>Zn(()=>{const o=r.run();switch(o._tag){case N_:return oo(r.getDone(),{onFailure:l=>n.error(l),onSuccess:l=>n.done(l)});case M_:return ft(n.emit(r.getEmit()),()=>a());case zm:return no(o.effect,{onFailure:l=>n.error(l),onSuccess:()=>a()});case I_:return jO(o,()=>a(),l=>n.error(l))}}));t=cp(ft(g5(Bn(a())),o=>it(()=>this.addFinalizer(l=>ft(wa(o),()=>Zn(()=>{const d=this.restorePipe(l,r);return d!==void 0?d:wt}))))))}break}case FO:{const n=new Ju(this._currentChannel.value(),this._providedEnv,a=>it(()=>{const o=this._closeLastSubstream===void 0?wt:this._closeLastSubstream;this._closeLastSubstream=F(o,Sn(a))}));n._input=this._input;const r=this._currentChannel;this._activeSubexecutor=new Bu(n,a=>r.k(a),void 0,[],(a,o)=>r.combineInners(a,o),(a,o)=>r.combineAll(a,o),a=>r.onPull(a),a=>r.onEmit(a)),this._closeLastSubstream=void 0,this._currentChannel=void 0;break}case U5:{this._emitted=this._currentChannel.out,this._currentChannel=this._activeSubexecutor!==void 0?void 0:Ls,t=RR();break}case P5:{this.runEnsuring(this._currentChannel);break}case j5:{t=this.doneHalt(this._currentChannel.error());break}case zO:{this._doneStack.push(this._currentChannel.k),this._currentChannel=this._currentChannel.channel;break}case H5:{const n=this._providedEnv===void 0?this._currentChannel.effect():F(this._currentChannel.effect(),vs(this._providedEnv));t=cp(no(n,{onFailure:r=>{const a=this.doneHalt(r);return a!==void 0&&r0(a)?a.effect:wt},onSuccess:r=>{const a=this.doneSucceed(r);return a!==void 0&&r0(a)?a.effect:wt}}));break}case B5:{const n=this._input,r=new Ju(this._currentChannel.left(),this._providedEnv,a=>this._executeCloseLastSubstream(a));r._input=n,this._input=r,this.addFinalizer(a=>{const o=this.restorePipe(a,n);return o!==void 0?o:wt}),this._currentChannel=this._currentChannel.right();break}case V5:{const n=this._providedEnv;this._providedEnv=this._currentChannel.context(),this._currentChannel=this._currentChannel.inner,this.addFinalizer(()=>it(()=>{this._providedEnv=n}));break}case K5:{const n=this._currentChannel;t=CR(this._input,Ge,r=>{try{this._currentChannel=n.more(r)}catch(a){this._currentChannel=n.done.onExit(Mv(a))}},r=>{const a=o=>n.done.onExit(o);this._currentChannel=a(r)});break}case G5:{t=this.doneSucceed(this._currentChannel.evaluate());break}case Q5:{t=this.doneSucceed(this._currentChannel.terminal);break}case Y5:{this._currentChannel=this._currentChannel.channel();break}}}catch(n){this._currentChannel=dr(Nf(n))}return t}getDone(){return this._done}getEmit(){return this._emitted}cancelWith(t){this._cancelled=t}clearInProgressFinalizer(){this._inProgressFinalizer=void 0}storeInProgressFinalizer(t){this._inProgressFinalizer=t}popAllFinalizers(t){const n=[];let r=this._doneStack.pop();for(;r;)r._tag==="ContinuationFinalizer"&&n.push(r.finalizer),r=this._doneStack.pop();const a=n.length===0?wt:OR(n,t);return this.storeInProgressFinalizer(a),a}popNextFinalizers(){const t=[];for(;this._doneStack.length!==0;){const n=this._doneStack[this._doneStack.length-1];if(n._tag===QS)return t;t.push(n),this._doneStack.pop()}return t}restorePipe(t,n){const r=this._input;return this._input=n,r!==void 0?r.close(t):wt}close(t){let n;const r=this._inProgressFinalizer;r!==void 0&&(n=F(r,uh(it(()=>this.clearInProgressFinalizer()))));let a;const o=this.popAllFinalizers(t);o!==void 0&&(a=F(o,uh(it(()=>this.clearInProgressFinalizer()))));const l=this._activeSubexecutor===void 0?void 0:this._activeSubexecutor.close(t);if(!(l===void 0&&n===void 0&&a===void 0))return F(tr(AR(l)),nk(tr(AR(n))),nk(tr(AR(a))),Mt(([[d,h],p])=>F(d,py(h),py(p))),lh,ft(d=>Zn(()=>d)))}doneSucceed(t){if(this._doneStack.length===0)return this._done=er(t),this._currentChannel=void 0,Xd();const n=this._doneStack[this._doneStack.length-1];if(n._tag===QS){this._doneStack.pop(),this._currentChannel=n.onSuccess(t);return}const r=this.popNextFinalizers();if(this._doneStack.length===0)return this._doneStack=r.reverse(),this._done=er(t),this._currentChannel=void 0,Xd();const a=OR(r.map(l=>l.finalizer),er(t));this.storeInProgressFinalizer(a);const o=F(a,uh(it(()=>this.clearInProgressFinalizer())),lh,ft(()=>it(()=>this.doneSucceed(t))));return cp(o)}doneHalt(t){if(this._doneStack.length===0)return this._done=Or(t),this._currentChannel=void 0,Xd();const n=this._doneStack[this._doneStack.length-1];if(n._tag===QS){this._doneStack.pop();try{this._currentChannel=n.onHalt(t)}catch(l){this._currentChannel=dr(Nf(l))}return}const r=this.popNextFinalizers();if(this._doneStack.length===0)return this._doneStack=r.reverse(),this._done=Or(t),this._currentChannel=void 0,Xd();const a=OR(r.map(l=>l.finalizer),Or(t));this.storeInProgressFinalizer(a);const o=F(a,uh(it(()=>this.clearInProgressFinalizer())),lh,ft(()=>it(()=>this.doneHalt(t))));return cp(o)}processCancellation(){return this._currentChannel=void 0,this._done=this._cancelled,this._cancelled=void 0,Xd()}runBracketOut(t){const n=lh(no(this.provide(t.acquire()),{onFailure:r=>it(()=>{this._currentChannel=dr(r)}),onSuccess:r=>it(()=>{this.addFinalizer(a=>this.provide(t.finalizer(r,a))),this._currentChannel=ln(r)})}));return cp(n)}provide(t){return this._providedEnv===void 0?t:F(t,vs(this._providedEnv))}runEnsuring(t){this.addFinalizer(t.finalizer),this._currentChannel=t.channel}addFinalizer(t){this._doneStack.push(new nfe(t))}runSubexecutor(){const t=this._activeSubexecutor;switch(t._tag){case tH:return this.pullFromChild(t.childExecutor,t.parentSubexecutor,t.onEmit,t);case ik:return this.pullFromUpstream(t);case ok:return this.drainChildExecutors(t);case nH:return this._emitted=t.value,this._activeSubexecutor=t.next,RR()}}replaceSubexecutor(t){this._currentChannel=void 0,this._activeSubexecutor=t}finishWithExit(t){const n=oo(t,{onFailure:r=>this.doneHalt(r),onSuccess:r=>this.doneSucceed(r)});return this._activeSubexecutor=void 0,n===void 0?wt:mfe(n)}finishSubexecutorWithCloseEffect(t,...n){this.addFinalizer(()=>F(n,os(a=>F(it(()=>a(t)),ft(o=>o!==void 0?o:wt)),{discard:!0})));const r=F(t,oo({onFailure:a=>this.doneHalt(a),onSuccess:a=>this.doneSucceed(a)}));return this._activeSubexecutor=void 0,r}applyUpstreamPullStrategy(t,n,r){switch(r._tag){case I5:{const a=!t||n.some(o=>o!==void 0);return[r.emitSeparator,a?[void 0,...n]:n]}case rfe:{const a=!t||n.some(o=>o!==void 0);return[r.emitSeparator,a?[...n,void 0]:n]}}}pullFromChild(t,n,r,a){return CR(t,Ge,o=>{const l=r(o);switch(l._tag){case $5:break;case Jue:{this.finishWithDoneValue(t,n,l.value);break}case Xue:{const d=n.enqueuePullFromChild(a);this.replaceSubexecutor(d);break}}this._activeSubexecutor=new kR(o,this._activeSubexecutor)},oo({onFailure:o=>{const l=this.handleSubexecutorFailure(t,n,o);return l===void 0?void 0:_M(l)},onSuccess:o=>{this.finishWithDoneValue(t,n,o)}}))}finishWithDoneValue(t,n,r){const a=n;switch(a._tag){case ik:{const o=new Bu(a.upstreamExecutor,a.createChild,a.lastDone!==void 0?a.combineChildResults(a.lastDone,r):r,a.activeChildExecutors,a.combineChildResults,a.combineWithChildResult,a.onPull,a.onEmit);this._closeLastSubstream=t.close(er(r)),this.replaceSubexecutor(o);break}case ok:{const o=new dh(a.upstreamExecutor,a.lastDone!==void 0?a.combineChildResults(a.lastDone,r):r,a.activeChildExecutors,a.upstreamDone,a.combineChildResults,a.combineWithChildResult,a.onPull);this._closeLastSubstream=t.close(er(r)),this.replaceSubexecutor(o);break}}}handleSubexecutorFailure(t,n,r){return this.finishSubexecutorWithCloseEffect(Or(r),a=>n.close(a),a=>t.close(a))}pullFromUpstream(t){if(t.activeChildExecutors.length===0)return this.performPullFromUpstream(t);const n=t.activeChildExecutors[0],r=new Bu(t.upstreamExecutor,t.createChild,t.lastDone,t.activeChildExecutors.slice(1),t.combineChildResults,t.combineWithChildResult,t.onPull,t.onEmit);if(n===void 0)return this.performPullFromUpstream(r);this.replaceSubexecutor(new bS(n.childExecutor,r,n.onEmit))}performPullFromUpstream(t){return CR(t.upstreamExecutor,n=>{const r=this._closeLastSubstream===void 0?wt:this._closeLastSubstream;return this._closeLastSubstream=void 0,F(this._executeCloseLastSubstream(r),Sn(n))},n=>{if(this._closeLastSubstream!==void 0){const l=this._closeLastSubstream;return this._closeLastSubstream=void 0,F(this._executeCloseLastSubstream(l),Mt(()=>{const d=new Ju(t.createChild(n),this._providedEnv,this._executeCloseLastSubstream);d._input=this._input;const[h,p]=this.applyUpstreamPullStrategy(!1,t.activeChildExecutors,t.onPull(bM(n)));this._activeSubexecutor=new bS(d,new Bu(t.upstreamExecutor,t.createChild,t.lastDone,p,t.combineChildResults,t.combineWithChildResult,t.onPull,t.onEmit),t.onEmit),mn(h)&&(this._activeSubexecutor=new kR(h.value,this._activeSubexecutor))}))}const r=new Ju(t.createChild(n),this._providedEnv,this._executeCloseLastSubstream);r._input=this._input;const[a,o]=this.applyUpstreamPullStrategy(!1,t.activeChildExecutors,t.onPull(bM(n)));this._activeSubexecutor=new bS(r,new Bu(t.upstreamExecutor,t.createChild,t.lastDone,o,t.combineChildResults,t.combineWithChildResult,t.onPull,t.onEmit),t.onEmit),mn(a)&&(this._activeSubexecutor=new kR(a.value,this._activeSubexecutor))},n=>{if(t.activeChildExecutors.some(o=>o!==void 0)){const o=new dh(t.upstreamExecutor,t.lastDone,[void 0,...t.activeChildExecutors],t.upstreamExecutor.getDone(),t.combineChildResults,t.combineWithChildResult,t.onPull);if(this._closeLastSubstream!==void 0){const l=this._closeLastSubstream;return this._closeLastSubstream=void 0,F(this._executeCloseLastSubstream(l),Mt(()=>this.replaceSubexecutor(o)))}this.replaceSubexecutor(o);return}const r=this._closeLastSubstream,a=this.finishSubexecutorWithCloseEffect(F(n,ute(o=>t.combineWithChildResult(t.lastDone,o))),()=>r,o=>t.upstreamExecutor.close(o));return a===void 0?void 0:_M(a)})}drainChildExecutors(t){if(t.activeChildExecutors.length===0){const o=this._closeLastSubstream;return o!==void 0&&this.addFinalizer(()=>fr(o)),this.finishSubexecutorWithCloseEffect(t.upstreamDone,()=>o,l=>t.upstreamExecutor.close(l))}const n=t.activeChildExecutors[0],r=t.activeChildExecutors.slice(1);if(n===void 0){const[o,l]=this.applyUpstreamPullStrategy(!0,r,t.onPull(Sfe(r.reduce((d,h)=>h!==void 0?d+1:d,0))));return this.replaceSubexecutor(new dh(t.upstreamExecutor,t.lastDone,l,t.upstreamDone,t.combineChildResults,t.combineWithChildResult,t.onPull)),mn(o)?(this._emitted=o.value,RR()):void 0}const a=new dh(t.upstreamExecutor,t.lastDone,r,t.upstreamDone,t.combineChildResults,t.combineWithChildResult,t.onPull);this.replaceSubexecutor(new bS(n.childExecutor,a,n.onEmit))}}const AR=e=>e!==void 0?e:wt,OR=(e,t)=>F(os(e,n=>tr(n(t))),Mt(n=>F(ote(n),Dn(()=>Ra))),ft(n=>Zn(()=>n))),jO=(e,t,n)=>{const r=[e],a=()=>{const o=r.pop();if(o===void 0||o.upstream===void 0)return fle("Unexpected end of input for channel execution");const l=o.upstream.run();switch(l._tag){case M_:{const d=o.onEmit(o.upstream.getEmit());return r.length===0?d===void 0?Zn(t):F(d,no({onFailure:n,onSuccess:t})):d===void 0?Zn(()=>a()):F(d,no({onFailure:n,onSuccess:()=>a()}))}case N_:{const d=o.onDone(o.upstream.getDone());return r.length===0?d===void 0?Zn(t):F(d,no({onFailure:n,onSuccess:t})):d===void 0?Zn(()=>a()):F(d,no({onFailure:n,onSuccess:()=>a()}))}case zm:return r.push(o),F(o.onEffect(l.effect),Mm(d=>Zn(()=>{const h=o.onDone(Or(d));return h===void 0?wt:h})),no({onFailure:n,onSuccess:()=>a()}));case I_:return r.push(o),r.push(l),Zn(()=>a())}};return a()},sH=M(2,(e,t)=>{const n=(r,a,o)=>SO(it(()=>new Ju(e,void 0,Ge)),l=>Zn(()=>YS(l.run(),l).pipe(rE(r),Sn(qn(r)),RO(qn(a)))),(l,d)=>{const h=l.close(d);return h===void 0?wt:Sa(h,p=>Hl(o,ii(p)))});return Im(r=>tE([O6(t,Uv),jt(),jt()]).pipe(ft(([a,o,l])=>r(n(o,l,a)).pipe(Is(t),ft(d=>t.addFinalizer(h=>{const p=Dm(h)?eoe(h.cause):void 0;return DC(o).pipe(ft(S=>S?On(l,void 0).pipe(Sn(Y6(d)),Sn(oM(d))):On(l,void 0).pipe(Sn(p&&e2(p)>0?Zw(d,tX(p)):wa(d)),Sn(oM(d)))))}).pipe(Sn(r(qn(o)))))))))}),YS=(e,t)=>{const n=e;switch(n._tag){case zm:return F(n.effect,ft(()=>YS(t.run(),t)));case M_:return YS(t.run(),t);case N_:return Zn(()=>t.getDone());case I_:return jO(n,()=>YS(t.run(),t),ii)}},vfe="Done",wfe="Await",Efe="effect/ChannelMergeDecision",Tfe=Symbol.for(Efe),Rfe={[Tfe]:{_R:e=>e,_E0:e=>e,_Z0:e=>e,_E:e=>e,_Z:e=>e}},SM=e=>{const t=Object.create(Rfe);return t._tag=wfe,t.f=e,t},aH="BothRunning",iH="LeftDone",oH="RightDone",Cfe="effect/ChannelMergeState",vM=Symbol.for(Cfe),HO={[vM]:vM},DR=(e,t)=>{const n=Object.create(HO);return n._tag=aH,n.left=e,n.right=t,n},wM=e=>{const t=Object.create(HO);return t._tag=iH,t.f=e,t},EM=e=>{const t=Object.create(HO);return t._tag=oH,t.f=e,t},cH="BackPressure",lH="BufferSliding",kfe="effect/ChannelMergeStrategy",TM=Symbol.for(kfe),uH={[TM]:TM},Afe=e=>{const t=Object.create(uH);return t._tag=cH,t},Ofe=e=>{const t=Object.create(uH);return t._tag=lH,t},Dfe=M(2,(e,{onBackPressure:t,onBufferSliding:n})=>{switch(e._tag){case cH:return t();case lH:return n()}}),nh="Empty",Sp="Emit",vp="Error",wp="Done",fH=e=>({_tag:nh,notifyProducer:e}),xR=e=>({_tag:Sp,notifyConsumers:e}),xfe=e=>({_tag:vp,cause:e}),$fe=e=>({_tag:wp,done:e});class qfe{constructor(t){b(this,"ref");this.ref=t}awaitRead(){return vl(ap(this.ref,t=>t._tag===nh?[qn(t.notifyProducer),t]:[wt,t]))}get close(){return m5(t=>this.error(Ww(t)))}done(t){return vl(ap(this.ref,n=>{switch(n._tag){case nh:return[qn(n.notifyProducer),n];case Sp:return[os(n.notifyConsumers,r=>On(r,et(t)),{discard:!0}),$fe(t)];case vp:return[_l,n];case wp:return[_l,n]}}))}emit(t){return ft(jt(),n=>vl(ap(this.ref,r=>{switch(r._tag){case nh:return[qn(r.notifyProducer),r];case Sp:{const a=r.notifyConsumers[0],o=r.notifyConsumers.slice(1);if(a!==void 0)return[On(a,rt(t)),o.length===0?fH(n):xR(o)];throw new Error("Bug: Channel.SingleProducerAsyncInput.emit - Queue was empty! please report an issue at https://github.com/Effect-TS/effect/issues")}case vp:return[_l,r];case wp:return[_l,r]}})))}error(t){return vl(ap(this.ref,n=>{switch(n._tag){case nh:return[qn(n.notifyProducer),n];case Sp:return[os(n.notifyConsumers,r=>cf(r,t),{discard:!0}),xfe(t)];case vp:return[_l,n];case wp:return[_l,n]}}))}get take(){return this.takeWith(t=>Or(lO(t,et)),t=>er(t),t=>xm(rt(t)))}takeWith(t,n,r){return ft(jt(),a=>vl(ap(this.ref,o=>{switch(o._tag){case nh:return[Sn(On(o.notifyProducer,void 0),e0(qn(a),{onFailure:t,onSuccess:as({onLeft:r,onRight:n})})),xR([a])];case Sp:return[e0(qn(a),{onFailure:t,onSuccess:as({onLeft:r,onRight:n})}),xR([...o.notifyConsumers,a])];case vp:return[fr(t(o.cause)),o];case wp:return[fr(r(o.done)),o]}})))}}const BO=()=>F(jt(),ft(e=>Uw(fH(e))),Mt(e=>new qfe(e))),ck=(e,t,n)=>Yt(Fr(Uw(()=>wt)),r=>F(Fr(lh(Zs(e,a=>j2(r,o=>n(a,o))))),Yt(t),X5(a=>ft(Lp(r),o=>o(a))))),Nfe=M(2,(e,t)=>KO(e,()=>t)),Mfe=M(2,(e,t)=>UO(e,n=>as(Jw(n),{onLeft:t,onRight:dr}))),s0=M(2,(e,t)=>ffe(e,t,()=>{},()=>{})),VO=e=>{const t=Ao({onInput:()=>t,onFailure:dr,onDone:ad});return cs(e,t)},dH=M(2,(e,t)=>X5(e,()=>t)),Ife=e=>Yt(e,Ge),fE=e=>oi(e.takeWith(dr,t=>Yt(ln(t),()=>fE(e)),ad)),hH=()=>$_({onInput:e=>Yt(ln(e),()=>hH()),onFailure:Fm,onDone:So}),KO=M(2,(e,t)=>Yt(e,n=>eH(()=>t(n)))),Lfe=M(2,(e,t)=>Ffe(e,lO(t))),Ffe=M(2,(e,t)=>UO(e,n=>dr(t(n)))),dE=M(2,(e,t)=>{const n=$_({onInput:r=>Yt(ln(t(r)),()=>n),onFailure:Fm,onDone:So});return cs(e,n)}),zfe=M(2,(e,t)=>{const n=Ao({onInput:r=>F(Fr(t(r)),Yt(ln),Yt(()=>n)),onFailure:dr,onDone:So});return cs(e,n)}),Ufe=M(3,(e,t,n)=>GO(r=>ke(function*(){const a=yield*BO(),o=fE(a),l=yield*MO(n);yield*Hl(r,Ns(l));const d=yield*jt(),h=n===Number.POSITIVE_INFINITY?v=>Ge:(yield*sE(n)).withPermits;yield*(yield*o.pipe(cs(e),Eh(r))).pipe(no({onFailure:v=>Hn(l,ii(v)),onSuccess:as({onLeft:v=>Sn(Bn(h(n)(wt)),bO(Hn(l,fr(et(v))))),onRight:v=>ke(function*(){const R=yield*jt(),O=yield*jt();yield*Hn(l,Mt(qn(R),rt)),yield*On(O,void 0).pipe(Sn(Im(x=>tr(x(qn(d))).pipe(p5(tr(x(t(v)))),ft(Ge))).pipe(Sa(x=>cf(d,x)),rE(R))),h(1),Is(r)),yield*qn(O)})})}),tm,Bn,Is(r));const S=oi(e0(vl(nm(l)),{onFailure:dr,onSuccess:as({onLeft:So,onRight:v=>Yt(ln(v),()=>S)})}));return PO(S,a)}))),Pfe=e=>t=>jfe(e)(t,Zp),jfe=({bufferSize:e=16,concurrency:t,mergeStrategy:n=Afe()})=>(r,a)=>GO(o=>ke(function*(){const l=t==="unbounded"?Number.MAX_SAFE_INTEGER:t,d=yield*BO(),h=fE(d),p=yield*MO(e);yield*Hl(o,Ns(p));const S=yield*Xs();yield*Hl(o,Ns(S));const v=yield*Uw(be()),R=yield*jt(),O=(yield*sE(l)).withPermits,x=yield*Eh(cs(h,r),o);function z(E){return E.pipe(ft(as({onLeft:T=>fr(Ce(T)),onRight:T=>gc(Hn(p,fr(rt(T))),be())})),fM({until:T=>mn(T)}),ft(T=>Bne(v,on({onNone:()=>Ce(T.value),onSome:q=>Ce(a(q,T.value))}))),Mm(T=>v6(T)?ii(T):Hn(p,ii(T)).pipe(Sn(On(R,void 0)),bO)))}yield*x.pipe(no({onFailure:E=>Hn(p,ii(E)).pipe(Sn(fr(!1))),onSuccess:as({onLeft:E=>y5(Bn(qn(R)),Bn(O(l)(wt)),{onSelfDone:(T,q)=>gc(wa(q),!1),onOtherDone:(T,q)=>Sn(wa(q),Lp(v).pipe(ft(on({onNone:()=>Hn(p,fr(et(E))),onSome:D=>Hn(p,fr(et(a(D,E))))})),gc(!1)))}),onRight:E=>Dfe(n,{onBackPressure:()=>ke(function*(){const T=yield*jt(),q=tk(I=>Eh(cs(h,E),I).pipe(ft($=>TR(tr(z($)),tr(Bn(qn(R))))),ft(Ge)));return yield*On(T,void 0).pipe(Sn(q),O(1),Is(o)),yield*qn(T),!(yield*DC(R))}),onBufferSliding:()=>ke(function*(){const T=yield*jt(),q=yield*jt(),D=yield*Gue(S);yield*nm(S).pipe(ft(H=>On(H,void 0)),vle(()=>D>=l)),yield*Hn(S,T);const I=tk(H=>Eh(cs(h,E),H).pipe(ft(K=>tr(z(K)).pipe(TR(tr(Bn(qn(R)))),TR(tr(Bn(qn(T)))))),ft(Ge)));return yield*On(q,void 0).pipe(Sn(I),O(1),Is(o)),yield*qn(q),!(yield*DC(R))})})})}),fM({while:E=>E}),Is(o));const A=F(nm(p),vl,e0({onFailure:dr,onSuccess:as({onLeft:So,onRight:E=>Yt(ln(E),()=>A)})}),oi);return PO(A,d)})),mH=M(3,(e,t,n)=>Pfe(n)(dE(e,t))),Hfe=M(2,(e,t)=>{function n(r){return ke(function*(){const a=yield*BO(),o=fE(a),l=yield*Eh(cs(o,e),r),d=yield*Eh(cs(o,t.other),r);function h(S,v,R){return(O,x,z)=>{function A(E){const T=E;return T._tag===vfe?fr(Fr(Sn(wa(v),T.effect))):Mt(Y6(v),oo({onFailure:q=>Fr(T.f(Or(q))),onSuccess:as({onLeft:q=>Fr(T.f(er(q))),onRight:q=>L_(ln(q),p(z(T.f)))})}))}return oo(S,{onFailure:E=>A(O(Or(E))),onSuccess:as({onLeft:E=>A(O(er(E))),onRight:E=>fr(Yt(ln(E),()=>Yt(Fr(Is(Bn(R),r)),T=>p(x(T,v)))))})})}}function p(S){switch(S._tag){case aH:{const v=Bn(Tl(S.left)),R=Bn(Tl(S.right));return oi(y5(v,R,{onSelfDone:(O,x)=>Sn(wa(x),h(O,S.right,l)(t.onSelfDone,DR,z=>wM(z))),onOtherDone:(O,x)=>Sn(wa(x),h(O,S.left,d)(t.onOtherDone,(z,A)=>DR(A,z),z=>EM(z)))}))}case iH:return oi(Mt(tr(d),oo({onFailure:v=>Fr(S.f(Or(v))),onSuccess:as({onLeft:v=>Fr(S.f(er(v))),onRight:v=>Yt(ln(v),()=>p(wM(S.f)))})})));case oH:return oi(Mt(tr(l),oo({onFailure:v=>Fr(S.f(Or(v))),onSuccess:as({onLeft:v=>Fr(S.f(er(v))),onRight:v=>Yt(ln(v),()=>p(EM(S.f)))})})))}}return Fr(Zh(S=>{const v=Zh(x=>(x.transferChildren(S.scope()),wt)),R=Bn(l).pipe(uh(v),Is(r)),O=Bn(d).pipe(uh(v),Is(r));return iE(R,O,(x,z)=>DR(x,z))})).pipe(Yt(p),PO(a))})}return GO(n)}),Bfe=M(2,(e,t)=>Mfe(e,n=>Z5(()=>Nf(t(n))))),gH=M(2,(e,t)=>q_(()=>{let n;const r=$_({onInput:o=>Yt(ln(o),()=>r),onFailure:o=>(n=Qfe(o),dr(Nf(n))),onDone:So}),a=Ao({onInput:o=>F(ln(o),Yt(()=>a)),onFailure:o=>Zie(o)&&Yfe(o.defect)&&at(o.defect,n)?Fm(o.defect.error):dr(o),onDone:So});return cs(cs(cs(e,r),t),a)})),Vfe=e=>tk(t=>sH(e,t)),Kfe=e=>Vfe(VO(e)),pH=e=>oi(Im(t=>Mt(k_(),n=>ufe(Sa(t(C_(e,n)),r=>gr(n,Or(r))),(r,a)=>gr(n,a))))),yH=e=>_H(Mt(h5,t=>Yt(Fr(e(t)),ln))),Eh=M(2,(e,t)=>nk(it(()=>new Ju(e,void 0,Ge)),Lm()).pipe(Zs(([n,r])=>$oe(t,a=>{const o=n.close(a);return o!==void 0?vs(o,r):wt})),lh,Mt(([n])=>Zn(()=>lk(n.run(),n))))),lk=(e,t)=>{const n=e;switch(n._tag){case N_:return oo(t.getDone(),{onFailure:ii,onSuccess:r=>fr(et(r))});case M_:return fr(rt(t.getEmit()));case zm:return F(n.effect,ft(()=>lk(t.run(),t)));case I_:return jO(n,()=>lk(t.run(),t),r=>ii(r))}},oi=e=>Ife(Fr(e)),_H=e=>J5(pH(e),(t,n)=>t,(t,n)=>t),GO=e=>J5(yH(e),(t,n)=>t,(t,n)=>t),RM=function(){const e=typeof arguments[0]!="string",t=e?arguments[1]:arguments[0],n=hc(e?arguments[2]:arguments[1]),r=tE([Ole(t,n),ble(),_le,xle(Mle)]);if(e){const a=arguments[0];return ck(r,([o,l])=>yM(a,_a(l,_o,o)),([o,,l,d],h)=>zv(o,h,l,d))}return a=>ck(r,([o,l])=>yM(a,_a(l,_o,o)),([o,,l,d],h)=>zv(o,h,l,d))},hE=e=>bH(0,e.length,e),bH=(e,t,n)=>e===t?Ls:F(ln(F(n,uc(e))),Yt(()=>bH(e+1,t,n))),Gfe=M(e=>W5(e[1]),(e,t,n)=>n!=null&&n.concurrent?Hfe(e,{other:t,onSelfDone:r=>SM(a=>Zn(()=>_N(r,a))),onOtherDone:r=>SM(a=>Zn(()=>_N(a,r)))}):Yt(e,r=>KO(t,a=>[r,a]))),L_=M(e=>W5(e[1]),(e,t,n)=>n!=null&&n.concurrent?KO(Gfe(e,t,{concurrent:!0}),r=>r[1]):Yt(e,()=>t)),uk=Symbol.for("effect/Channel/ChannelException"),Qfe=e=>({_tag:"ChannelException",[uk]:uk,error:e}),Yfe=e=>Me(e,uk),fk=Symbol.for("effect/Sink"),Wfe={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e};var UF;UF=fk;class F_{constructor(t){b(this,"channel");b(this,UF,Wfe);this.channel=t}pipe(){return Fe(this,arguments)}}const Jfe=e=>new F_(q_(()=>QO(e()))),Xfe=()=>new F_(SH(vn())),SH=e=>Ao({onInput:t=>SH(F(e,Nn(t))),onFailure:dr,onDone:()=>ad(e)}),Zfe=new F_(VO(hH())),ede=(e,t,n)=>Jfe(()=>new F_(vH(e,t,n))),vH=(e,t,n)=>t(e)?$_({onInput:r=>{const[a,o]=wH(e,r,t,n,0,r.length);return mo(o)?F(ln(o),Nfe(a)):vH(a,t,n)},onFailure:Fm,onDone:()=>So(e)}):So(e),wH=(e,t,n,r,a,o)=>{if(a===o)return[e,vn()];const l=r(e,F(t,uc(a)));return n(l)?wH(l,t,n,r,a+1,o):[l,F(t,ao(a+1))]},tde=e=>new F_(Fr(e)),nde=()=>ede(be(),Mn,(e,t)=>on(e,{onNone:()=>Ce(t),onSome:()=>e})),QO=e=>nu(e)?QO(tde(e)):e.channel,EH=O_,rde=Fce,sde=Hoe,ade=Voe,ide=ice,TH=Goe,RH=Xoe,ode=U6;class CH{constructor(t){b(this,"value");this.value=t}}const kH=(e,t)=>({ref:e,isNew:t,isChanged:!1,expected:e.versioned,newValue:e.versioned.value}),AH=e=>e.newValue,OH=(e,t)=>{e.isChanged=!0,e.newValue=t},cde=e=>{e.ref.versioned=new CH(e.newValue)},lde=e=>e.ref.versioned!==e.expected,ude=e=>e.isChanged,a0="Invalid",YO="ReadWrite",fde="ReadOnly",DH=e=>{for(const t of e)cde(t[1])},xH=e=>{let t=fde;for(const[,n]of e)if(t=lde(n)?a0:ude(n)?YO:t,t===a0)return t;return t},dde=e=>{const t=new Map;for(const[,n]of e){for(const r of n.ref.todos)t.set(r[0],r[1]);n.ref.todos=new Map}return t},hde=e=>{const t=Array.from(e.entries()).sort((n,r)=>n[0]-r[0]);for(const[n,r]of t)r()},mde=(e,t,n)=>{let r=!1;for(const[,a]of t)a.ref.todos.has(e)||(a.ref.todos.set(e,n),r=!0);return r},$H="WithSTMRuntime",dk="OnFailure",CM="OnRetry",hk="OnSuccess",gde="Provide",qH="Sync",NH="Succeed",MH="Retry",IH="Fail",LH="Die",FH="Interrupt",Th="Fail",Rh="Die",Ch="Interrupt",ff="Succeed",Um="Retry",WO="Done",JO="Suspend",WS="Done",mk="Interrupted",i0="Running",mE="effect/STM/State",Uf=Symbol.for(mE),XO=e=>Me(e,Uf),zH=e=>e._tag===i0,pde=e=>e._tag===WS,SS=e=>({[Uf]:Uf,_tag:WS,exit:e,[gt](){return F(Ae(mE),ot(Ae(WS)),ot(Ae(e)),un(this))},[dt](t){return XO(t)&&t._tag===WS&&at(e,t.exit)}}),yde=F(Ae(mE),ot(Ae(mk)),ot(Ae("interrupted"))),_de={[Uf]:Uf,_tag:mk,[gt](){return yde},[dt](e){return XO(e)&&e._tag===mk}},bde=F(Ae(mE),ot(Ae(i0)),ot(Ae("running"))),Sde={[Uf]:Uf,_tag:i0,[gt](){return bde},[dt](e){return XO(e)&&e._tag===i0}},vS=e=>{switch(e._tag){case Th:return SS(xm(e.error));case Rh:return SS(Mv(e.defect));case Ch:return SS(lte(e.fiberId));case ff:return SS(er(e.value));case Um:throw new Error("BUG: STM.STMState.fromTExit - please report an issue at https://github.com/Effect-TS/effect/issues")}},Pm="effect/TExit",jm=Symbol.for(Pm),z_={_A:e=>e,_E:e=>e},U_=e=>Me(e,jm),vde=e=>e._tag===ff,wde=e=>e._tag===Um,Ede=e=>({[jm]:z_,_tag:Th,error:e,[gt](){return F(Ae(Pm),ot(Ae(Th)),ot(Ae(e)),un(this))},[dt](t){return U_(t)&&t._tag===Th&&at(e,t.error)}}),Tde=e=>({[jm]:z_,_tag:Rh,defect:e,[gt](){return F(Ae(Pm),ot(Ae(Rh)),ot(Ae(e)),un(this))},[dt](t){return U_(t)&&t._tag===Rh&&at(e,t.defect)}}),Rde=e=>({[jm]:z_,_tag:Ch,fiberId:e,[gt](){return F(Ae(Pm),ot(Ae(Ch)),ot(Ae(e)),un(this))},[dt](t){return U_(t)&&t._tag===Ch&&at(e,t.fiberId)}}),kM=e=>({[jm]:z_,_tag:ff,value:e,[gt](){return F(Ae(Pm),ot(Ae(ff)),ot(Ae(e)),un(this))},[dt](t){return U_(t)&&t._tag===ff&&at(e,t.value)}}),Cde=F(Ae(Pm),ot(Ae(Um)),ot(Ae("retry"))),kde={[jm]:z_,_tag:Um,[gt](){return Cde},[dt](e){return U_(e)&&wde(e)}},Ade=e=>({_tag:WO,exit:e}),UH=e=>({_tag:JO,journal:e}),AM={ref:0},Ode=()=>{const e=AM.ref+1;return AM.ref=e,e},Dde="effect/STM",xde=Symbol.for(Dde),wS={_R:e=>e,_E:e=>e,_A:e=>e};var PF,jF,HF,BF;class xc{constructor(t){b(this,"effect_instruction_i0");b(this,"_op",Yy);b(this,"effect_instruction_i1");b(this,"effect_instruction_i2");b(this,BF);b(this,HF);b(this,jF);b(this,PF);this.effect_instruction_i0=t,this[uM]=pf,this[rC]=wS,this[fk]=wS,this[n0]=wS}get[(BF=uM,HF=rC,jF=fk,PF=n0,xde)](){return wS}[dt](t){return this===t}[gt](){return un(this,Q0(this))}[Symbol.iterator](){return new wm(new fm(this))}commit(){return $de(this,Zp)}pipe(){return Fe(this,arguments)}}const $de=(e,t,n)=>Dt(r=>{const a=r.id(),o=r.getFiberRef(b5),l=r.getFiberRef(S5),d=r.getFiberRef(qle),h=Nde(a,e,o,l,d);switch(h._tag){case WO:return t(h.exit),h.exit;case JO:{const p=Ode(),S={value:Sde},v=gO(R=>PH(a,e,p,S,o,l,d,R));return Im(R=>F(R(v),Mm(O=>{let x=S.value;return zH(x)&&(S.value=_de),x=S.value,pde(x)?(t(x.exit),x.exit):ii(O)})))}}}),qde=(e,t,n,r,a,o)=>{const l=new Map,d=new jH(t,l,e,r).run(),h=xH(l);if(h===YO)DH(l);else if(h===a0)throw new Error("BUG: STM.TryCommit.tryCommit - please report an issue at https://github.com/Effect-TS/effect/issues");switch(d._tag){case ff:return n.value=vS(d),Rl(er(d.value),l,a,o);case Th:{n.value=vS(d);const p=Pl(d.error);return Rl(Or(p),l,a,o)}case Rh:{n.value=vS(d);const p=Nf(d.defect);return Rl(Or(p),l,a,o)}case Ch:{n.value=vS(d);const p=Ww(e);return Rl(Or(p),l,a,o)}case Um:return UH(l)}},Nde=(e,t,n,r,a)=>{const o=new Map,l=new jH(t,o,e,n).run(),d=xH(o);if(d===YO&&vde(l))DH(o);else if(d===a0)throw new Error("BUG: STM.TryCommit.tryCommitSync - please report an issue at https://github.com/Effect-TS/effect/issues");switch(l._tag){case ff:return Rl(er(l.value),o,r,a);case Th:{const h=Pl(l.error);return Rl(Or(h),o,r,a)}case Rh:{const h=Nf(l.defect);return Rl(Or(h),o,r,a)}case Ch:{const h=Ww(e);return Rl(Or(h),o,r,a)}case Um:return UH(o)}},PH=(e,t,n,r,a,o,l,d)=>{if(zH(r.value)){const h=qde(e,t,r,a,o,l);switch(h._tag){case WO:{Mde(h.exit,d);break}case JO:{mde(n,h.journal,()=>PH(e,t,n,r,a,o,l,d));break}}}},Rl=(e,t,n,r)=>{const a=dde(t);return a.size>0&&n.scheduleTask(()=>hde(a),r),Ade(e)},Mde=(e,t)=>{t(e)};class jH{constructor(t,n,r,a){b(this,"self");b(this,"journal");b(this,"fiberId");b(this,"contStack",[]);b(this,"env");this.self=t,this.journal=n,this.fiberId=r,this.env=a}getEnv(){return this.env}pushStack(t){this.contStack.push(t)}popStack(){return this.contStack.pop()}nextSuccess(){let t=this.popStack();for(;t!==void 0&&t.effect_instruction_i0!==hk;)t=this.popStack();return t}nextFailure(){let t=this.popStack();for(;t!==void 0&&t.effect_instruction_i0!==dk;)t=this.popStack();return t}nextRetry(){let t=this.popStack();for(;t!==void 0&&t.effect_instruction_i0!==CM;)t=this.popStack();return t}run(){let t=this.self,n;for(;n===void 0&&t!==void 0;)try{const r=t;if(r)switch(r._op){case"Tag":{t=gE((a,o,l)=>rw(l,r));break}case"Left":{t=gk(r.left);break}case"None":{t=gk(new Xw);break}case"Right":{t=Ar(r.right);break}case"Some":{t=Ar(r.value);break}case"Commit":{switch(r.effect_instruction_i0){case LH:{n=Tde(_n(()=>r.effect_instruction_i1()));break}case IH:{const a=this.nextFailure();a===void 0?n=Ede(_n(()=>r.effect_instruction_i1())):t=_n(()=>a.effect_instruction_i2(_n(()=>r.effect_instruction_i1())));break}case MH:{const a=this.nextRetry();a===void 0?n=kde:t=_n(()=>a.effect_instruction_i2());break}case FH:{n=Rde(this.fiberId);break}case $H:{t=_n(()=>r.effect_instruction_i1(this));break}case hk:case dk:case CM:{this.pushStack(r),t=r.effect_instruction_i1;break}case gde:{const a=this.env;this.env=_n(()=>r.effect_instruction_i2(a)),t=F(r.effect_instruction_i1,zde(ZO(()=>this.env=a)));break}case NH:{const a=r.effect_instruction_i1,o=this.nextSuccess();o===void 0?n=kM(a):t=_n(()=>o.effect_instruction_i2(a));break}case qH:{const a=_n(()=>r.effect_instruction_i1()),o=this.nextSuccess();o===void 0?n=kM(a):t=_n(()=>o.effect_instruction_i2(a));break}}break}}}catch(r){t=Lde(r)}return n}}const Ide=M(2,(e,t)=>{const n=new xc(dk);return n.effect_instruction_i1=e,n.effect_instruction_i2=t,n}),Lde=e=>Fde(()=>e),Fde=e=>{const t=new xc(LH);return t.effect_instruction_i1=e,t},gE=e=>Zi(t=>Ar(e(t.journal,t.fiberId,t.getEnv()))),zde=M(2,(e,t)=>Pde(e,{onFailure:n=>OM(t,gk(n)),onSuccess:n=>OM(t,Ar(n))})),gk=e=>Ude(()=>e),Ude=e=>{const t=new xc(IH);return t.effect_instruction_i1=e,t},Hm=M(2,(e,t)=>{const n=new xc(hk);return n.effect_instruction_i1=e,n.effect_instruction_i2=t,n}),Pde=M(2,(e,{onFailure:t,onSuccess:n})=>F(e,ky(rt),Ide(r=>F(t(r),ky(et))),Hm(r=>{switch(r._tag){case"Left":return Ar(r.left);case"Right":return n(r.right)}}))),Zi=e=>{const t=new xc($H);return t.effect_instruction_i1=e,t},hl=e=>{const t=new xc(FH);return t.effect_instruction_i1=e,t},ky=M(2,(e,t)=>F(e,Hm(n=>ZO(()=>t(n))))),rh=new xc(MH),Ar=e=>{const t=new xc(NH);return t.effect_instruction_i1=e,t},ZO=e=>{const t=new xc(qH);return t.effect_instruction_i1=e,t},OM=M(2,(e,t)=>F(e,Hm(()=>t))),DM="BackPressure",pk="Dropping",xM="Sliding",jde=e=>Hm(e,Ge),Hde=(...e)=>Bde(()=>{const n=(e.length===1?e[0]:e[1].bind(e[0]))(F),r=n.next(),a=o=>o.done?Ar(o.value):Hm(nU(o.value),l=>a(n.next(l)));return a(r)}),Bde=e=>jde(ZO(e)),$M=Ar(void 0),Vde="effect/TRef",Kde=Symbol.for(Vde),Gde={_A:e=>e};var VF;VF=Kde;class Qde{constructor(t){b(this,VF,Gde);b(this,"todos");b(this,"versioned");this.versioned=new CH(t),this.todos=new Map}modify(t){return gE(n=>{const r=eD(this,n),[a,o]=t(AH(r));return OH(r,o),a})}pipe(){return Fe(this,arguments)}}const HH=e=>gE(t=>{const n=new Qde(e);return t.set(n,kH(n,!0)),n}),Yde=e=>e.modify(t=>[t,t]),Wde=M(2,(e,t)=>e.modify(()=>[void 0,t])),Jde=M(2,(e,t)=>e.modify(n=>[void 0,t(n)])),eD=(e,t)=>{if(t.has(e))return t.get(e);const n=kH(e,!1);return t.set(e,n),n},Zo=M(2,(e,t)=>AH(eD(e,t))),ec=M(3,(e,t,n)=>{const r=eD(e,n);OH(r,t)}),Xde="effect/TQueue/TEnqueue",Zde=Symbol.for(Xde),ehe="effect/TQueue/TDequeue",the=Symbol.for(ehe),nhe={_tag:pk},rhe={_Out:e=>e},she={_In:e=>e};var KF,GF;GF=the,KF=Zde;class ahe{constructor(t,n,r){b(this,"ref");b(this,"requestedCapacity");b(this,"strategy");b(this,GF,rhe);b(this,KF,she);b(this,"size",Zi(t=>{const n=Zo(this.ref,t.journal);return n===void 0?hl(t.fiberId):Ar(n.length)}));b(this,"isFull",ky(this.size,t=>t===this.requestedCapacity));b(this,"isEmpty",ky(this.size,t=>t===0));b(this,"shutdown",Zi(t=>(ec(this.ref,void 0,t.journal),$M)));b(this,"isShutdown",gE(t=>Zo(this.ref,t)===void 0));b(this,"awaitShutdown",Hm(this.isShutdown,t=>t?$M:rh));b(this,"peek",Zi(t=>{const n=Zo(this.ref,t.journal);return n===void 0?hl(t.fiberId):n.length===0?rh:Ar(n[0])}));b(this,"peekOption",Zi(t=>{const n=Zo(this.ref,t.journal);return n===void 0?hl(t.fiberId):Ar(Yf(n[0]))}));b(this,"take",Zi(t=>{const n=Zo(this.ref,t.journal);if(n===void 0)return hl(t.fiberId);if(n.length===0)return rh;const r=n.shift();return ec(this.ref,n,t.journal),Ar(r)}));b(this,"takeAll",Zi(t=>{const n=Zo(this.ref,t.journal);return n===void 0?hl(t.fiberId):(ec(this.ref,[],t.journal),Ar(n))}));this.ref=t,this.requestedCapacity=n,this.strategy=r}capacity(){return this.requestedCapacity}offer(t){return Zi(n=>{const r=F(this.ref,Zo(n.journal));if(r===void 0)return hl(n.fiberId);if(r.length<this.requestedCapacity)return r.push(t),ec(this.ref,r,n.journal),Ar(!0);switch(this.strategy._tag){case DM:return rh;case pk:return Ar(!1);case xM:return r.length===0||(r.shift(),r.push(t),ec(this.ref,r,n.journal)),Ar(!0)}})}offerAll(t){return Zi(n=>{const r=Array.from(t),a=Zo(this.ref,n.journal);if(a===void 0)return hl(n.fiberId);if(a.length+r.length<=this.requestedCapacity)return ec(this.ref,[...a,...r],n.journal),Ar(!0);switch(this.strategy._tag){case DM:return rh;case pk:{const o=r.slice(0,this.requestedCapacity-a.length);return ec(this.ref,[...a,...o],n.journal),Ar(!1)}case xM:{const o=r.slice(0,this.requestedCapacity-a.length),l=a.length+o.length-this.requestedCapacity,d=a.slice(l);return ec(this.ref,[...d,...o],n.journal),Ar(!0)}}})}takeUpTo(t){return Zi(n=>{const r=Zo(this.ref,n.journal);if(r===void 0)return hl(n.fiberId);const[a,o]=wP(lr(r),t);return ec(this.ref,Array.from(o),n.journal),Ar(Array.from(a))})}}const ihe=M(2,(e,t)=>e.offer(t)),ohe=e=>e.peek,che=e=>e.take,lhe=()=>uhe(Number.MAX_SAFE_INTEGER,nhe),uhe=(e,t)=>ky(HH([]),n=>new ahe(n,e,t)),fhe=ihe,dhe=ohe,hhe=che,mhe=lhe,ghe=(e,t)=>{let n=!1,r=[],a=!1;function o(h){if(n)return!1;if(h.length<=5e4)r.push.apply(r,h);else for(let p=0;p<h.length;p++)r.push(h[0]);return a||(a=!0,t.scheduleTask(l,0)),!0}function l(){a=!1,r.length>0&&(e.unsafeOffer(r),r=[])}function d(h){n||(n=!0,h._tag==="Success"&&r.push(h.value),l(),e.unsafeOffer(h._tag==="Success"?Ra:h))}return{single(h){return n?!1:(r.push(h),a||(a=!0,t.scheduleTask(l,0)),!0)},array:o,chunk(h){return o(si(h))},done:d,end(){n||(n=!0,l(),e.unsafeOffer(Ra))},halt(h){return d(Or(h))},fail(h){return d(xm(h))},die(h){return d(Mv(h))},dieMessage(h){return d(Mv(new Error(h)))}}},phe="effect/Take",yhe=Symbol.for(phe),_he={_A:e=>e,_E:e=>e};var QF;QF=yhe;class pE{constructor(t){b(this,"exit");b(this,QF,_he);this.exit=t}pipe(){return Fe(this,arguments)}}const qM=e=>new pE(er(e)),NM=new pE(xm(be())),bhe=e=>new pE(Or(F(e,lO(Ce)))),She=e=>new pE(er(Ln(e))),vhe=()=>If(be()),whe=e=>sd(ii(e),Ce),Ehe="effect/Stream",BH=Symbol.for(Ehe),The={_R:e=>e,_E:e=>e,_A:e=>e};var YF;YF=BH;class wn{constructor(t){b(this,"channel");b(this,YF,The);this.channel=t}pipe(){return Fe(this,arguments)}}const VH=e=>Me(e,BH)||nu(e),tD=4096,Rhe=e=>{if((e==null?void 0:e.bufferSize)==="unbounded"||(e==null?void 0:e.bufferSize)===void 0&&(e==null?void 0:e.strategy)===void 0)return Xs();switch(e==null?void 0:e.strategy){case"sliding":return Kue(e.bufferSize??16);default:return Vue((e==null?void 0:e.bufferSize)??16)}},KH=(e,t)=>Pn(Rhe(t),Ns).pipe(Zs(n=>$le(S5,r=>e(ghe(n,r)))),Mt(n=>{const r=Yt(nm(n),a=>ate(a)?Nv(a)?Ls:dr(a.cause):L_(ln(lr(a)),r));return r}),_H,QH),Che=M(2,(e,t)=>khe(e,n=>as(Jw(n),{onLeft:t,onRight:Dhe}))),khe=M(2,(e,t)=>new wn(F(hn(e),UO(n=>hn(t(n)))))),Ahe=M(2,(e,t)=>new wn(F(hn(e),L_(hn(t))))),Ohe=e=>Bm(Ty(e)),yk=M(2,(e,t)=>new wn(F(hn(e),dH(t)))),Dhe=e=>Bm(ii(e)),xhe=M(2,(e,t)=>JH(e,iw(t))),$he=M(2,(e,t)=>{const n=r=>{const a=r.next();return a.done?Ao({onInput:o=>n(o[Symbol.iterator]()),onFailure:dr,onDone:ad}):F(t(a.value),Mt(o=>o?F(ln(Ln(a.value)),Yt(()=>n(r))):n(r)),oi)};return new wn(q_(()=>F(hn(e),cs(n(vn()[Symbol.iterator]())))))}),qhe=M(2,(e,t)=>JH(e,SP(t))),yE=M(e=>VH(e[0]),(e,t,n)=>{const r=(n==null?void 0:n.bufferSize)??16;return n!=null&&n.switch?_k(n==null?void 0:n.concurrency,()=>MM(e,1,r,t),a=>MM(e,a,r,t)):_k(n==null?void 0:n.concurrency,()=>new wn(s0(hn(e),a=>F(a,vP(o=>hn(t(o))),GW(Ls,(o,l)=>F(o,L_(l)))))),a=>new wn(F(hn(e),s0(hE),mH(o=>hn(t(o)),n))))}),_k=(e,t,n)=>{switch(e){case void 0:return t();case"unbounded":return n(Number.MAX_SAFE_INTEGER);default:return e>1?n(e):t()}},MM=M(4,(e,t,n,r)=>new wn(F(hn(e),s0(hE),mH(a=>hn(r(a)),{concurrency:t,mergeStrategy:Ofe(),bufferSize:n})))),_E=M(e=>VH(e[0]),(e,t)=>yE(e,Ge,t)),Nhe=e=>{const t=Ao({onInput:n=>Yt(hE(n),()=>t),onFailure:dr,onDone:()=>Ls});return new wn(F(hn(e),cs(t)))},Mhe=e=>{const t=(r,a)=>{const[o,l]=F(r,VW(h=>!Nv(h))),d=F(cw(l),on({onNone:()=>a,onSome:oo({onFailure:h=>on(toe(h),{onNone:()=>Ls,onSome:dr}),onSuccess:()=>Ls})}));return F(ln(F(o,SP(h=>Nv(h)?Ce(h.value):be()))),Yt(()=>d))},n=Ao({onInput:r=>t(r,n),onFailure:r=>dr(r),onDone:()=>Ls});return new wn(F(hn(e),cs(n)))},GH=e=>Nhe(Mhe(F(e,WH(t=>t.exit)))),QH=e=>new wn(e),hn=e=>{if("channel"in e)return e.channel;if(nu(e))return hn(Bm(e));throw new TypeError("Expected a Stream.")},Ihe=e=>new wn(ow(e)?Ls:ln(e)),Bm=e=>F(e,sd(Ce),Lhe),Lhe=e=>new wn(oi(Rle(e,{onFailure:on({onNone:()=>Ls,onSome:Fm}),onSuccess:t=>ln(Ln(t))}))),YH=(e,t)=>{const n=(t==null?void 0:t.maxChunkSize)??tD;if(t!=null&&t.scoped){const a=Mt(gM(e),o=>Ay(o,{maxChunkSize:n,shutdown:!0}));return t.shutdown?Mt(a,yk(ak(e))):a}const r=yE(XH(gM(e)),a=>Ay(a,{maxChunkSize:n}));return t!=null&&t.shutdown?yk(r,ak(e)):r},Fhe=e=>rD(()=>aw(e)?Ihe(e):zhe(e[Symbol.iterator]())),zhe=(e,t=tD)=>F(it(()=>{let n=[];const r=a=>F(it(()=>{let o=a.next();if(t===1)return o.done?Ls:F(ln(Ln(o.value)),Yt(()=>r(a)));n=[];let l=0;for(;o.done===!1&&(n.push(o.value),l=l+1,!(l>=t));)o=a.next();return l>0?F(ln(lr(n)),Yt(()=>r(a))):Ls}),oi);return new wn(r(e))}),ZH),Ay=(e,t)=>F(x5(e,1,(t==null?void 0:t.maxChunkSize)??tD),Mm(n=>F(Que(e),ft(r=>r&&v6(n)?vhe():whe(n)))),Ghe,t!=null&&t.shutdown?yk(Ns(e)):Ge),Uhe=(...e)=>Fhe(e),WH=M(2,(e,t)=>new wn(F(hn(e),dE(vP(t))))),JH=M(2,(e,t)=>new wn(F(hn(e),dE(t)))),Phe=M(2,(e,t)=>new wn(F(hn(e),zfe(t)))),bk=M(2,(e,t)=>{const n=r=>{const a=r.next();if(a.done)return Ao({onInput:o=>n(o[Symbol.iterator]()),onFailure:dr,onDone:ad});{const o=a.value;return oi(Mt(t(o),l=>Yt(ln(Ln(l)),()=>n(r))))}};return new wn(F(hn(e),cs(q_(()=>n(vn()[Symbol.iterator]())))))}),jhe=M(3,(e,t,n)=>new wn(F(hn(e),s0(hE),Ufe(n,t),dE(Ln)))),Hhe=M(2,(e,t)=>new wn(F(hn(e),Lfe(t)))),Bhe=Bm(pO),Vhe=e=>F(e,Khe(Ge)),Khe=M(2,(e,t)=>new wn(F(hn(e),Bfe(t)))),Ghe=e=>eme(e,t=>F(Mt(t,n=>Ce([n,t])),yO(on({onNone:()=>fr(be()),onSome:If})))),nD=M(2,(e,t)=>hn(e).pipe(gH(QO(t)),Kfe)),Qhe=e=>nD(e,Xfe()),Yhe=e=>nD(e,Zfe),Whe=e=>nD(e,nde()),XH=e=>new wn(dH(pH(F(e,Mt(Ln))),wt)),Jhe=e=>new wn(yH(t=>e(t).pipe(Mt(Ln)))),rD=e=>new wn(q_(()=>hn(e()))),Xhe=M(2,(e,t)=>{if(!Number.isInteger(t))return Ohe(new noe(`${t} must be an integer`));const n=r=>$_({onInput:a=>{const o=F(a,qh(Math.min(r,Number.POSITIVE_INFINITY))),l=Math.max(0,r-o.length);return l>0?F(ln(o),Yt(()=>n(l))):ln(o)},onFailure:Fm,onDone:ad});return new wn(F(hn(e),gH(0<t?n(t):Ls)))}),Zhe=M(2,(e,t)=>bk(e,n=>gc(t(n),n))),eme=(e,t)=>rD(()=>{const n=r=>oi(Mt(t(r),on({onNone:()=>Ls,onSome:([a,o])=>Yt(ln(a),()=>n(o))})));return new wn(n(e))}),ZH=e=>_E(Bm(e)),eB=e=>_E(XH(e)),tme=e=>_E(Jhe(t=>e(t))),nme=function(){const e=typeof arguments[0]!="string",t=e?arguments[1]:arguments[0],n=hc(e?arguments[2]:arguments[1]);if(e){const r=arguments[0];return new wn(RM(hn(r),t,n))}return r=>new wn(RM(hn(r),t,n))},rme=(e,t,n)=>KH(r=>Pn(it(()=>e.addEventListener(t,r.single,n)),()=>it(()=>e.removeEventListener(t,r.single,n))),{bufferSize:typeof n=="object"?n.bufferSize:void 0}),sme=ck,IM=Symbol.for("effect/Encoding/errors/Decode"),$R=(e,t)=>{const n={_tag:"DecodeException",[IM]:IM,input:e};return Fs(t)&&(n.message=t),n},ame=new TextEncoder,LM=e=>{const t=e.length;let n="",r;for(r=2;r<t;r+=3)n+=tc[e[r-2]>>2],n+=tc[(e[r-2]&3)<<4|e[r-1]>>4],n+=tc[(e[r-1]&15)<<2|e[r]>>6],n+=tc[e[r]&63];return r===t+1&&(n+=tc[e[r-2]>>2],n+=tc[(e[r-2]&3)<<4],n+="=="),r===t&&(n+=tc[e[r-2]>>2],n+=tc[(e[r-2]&3)<<4|e[r-1]>>4],n+=tc[(e[r-1]&15)<<2],n+="="),n},ime=e=>{const t=ome(e),n=t.length;if(n%4!==0)return et($R(t,`Length must be a multiple of 4, but is ${n}`));const r=t.indexOf("=");if(r!==-1&&(r<n-2||r===n-2&&t[n-1]!=="="))return et($R(t,"Found a '=' character, but it is not at the end"));try{const a=t.endsWith("==")?2:t.endsWith("=")?1:0,o=new Uint8Array(3*(n/4)-a);for(let l=0,d=0;l<n;l+=4,d+=3){const h=ES(t.charCodeAt(l))<<18|ES(t.charCodeAt(l+1))<<12|ES(t.charCodeAt(l+2))<<6|ES(t.charCodeAt(l+3));o[d]=h>>16,o[d+1]=h>>8&255,o[d+2]=h&255}return rt(o)}catch(a){return et($R(t,a instanceof Error?a.message:"Invalid input"))}},ome=e=>e.replace(/[\n\r]/g,"");function ES(e){if(e>=FM.length)throw new TypeError(`Invalid character ${String.fromCharCode(e)}`);const t=FM[e];if(t===255)throw new TypeError(`Invalid character ${String.fromCharCode(e)}`);return t}const tc=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],FM=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],cme=e=>LM(typeof e=="string"?ame.encode(e):e),lme=e=>ime(e),Sk=Symbol.for("effect/FiberHandle"),ume=e=>Me(e,Sk),fme={[Sk]:Sk,toString(){return xn(this.toJSON())},toJSON(){return{_id:"FiberHandle",state:this.state}},[cn](){return this.toJSON()},pipe(){return Fe(this,arguments)}},dme=e=>{const t=Object.create(fme);return t.state={_tag:"Open",fiber:void 0},t.deferred=e,t},tB=()=>Pn(Mt(jt(),e=>dme(e)),e=>Zh(t=>{const n=e.state;return n._tag==="Closed"?wt:(e.state={_tag:"Closed"},n.fiber?rE(bO(Zw(n.fiber,Dl(t.id(),Up))),e.deferred):tu(e.deferred,Ra))})),nB=-1,Up=BP(nB,0),hme=w6(void 0,{emptyCase:ho,failCase:ho,dieCase:ho,interruptCase:(e,t)=>ZA(s2(t),nB),sequentialCase:(e,t,n)=>t||n,parallelCase:(e,t,n)=>t||n}),mme=M(e=>ume(e[0]),(e,t,n)=>{if(e.state._tag==="Closed"){t.unsafeInterruptAsFork(Dl((n==null?void 0:n.interruptAs)??ai,Up));return}else if(e.state.fiber!==void 0){if((n==null?void 0:n.onlyIfMissing)===!0){t.unsafeInterruptAsFork(Dl((n==null?void 0:n.interruptAs)??ai,Up));return}else if(e.state.fiber===t)return;e.state.fiber.unsafeInterruptAsFork(Dl((n==null?void 0:n.interruptAs)??ai,Up)),e.state.fiber=void 0}e.state.fiber=t,t.addObserver(r=>{e.state._tag==="Open"&&t===e.state.fiber&&(e.state.fiber=void 0),Dm(r)&&((n==null?void 0:n.propagateInterruption)===!0?!hme(r.cause):!ql(r.cause))&&x2(e.deferred,r)})}),gme=e=>Im(t=>Zh(n=>e.state._tag==="Closed"||e.state.fiber===void 0?wt:Sn(t(Zw(e.state.fiber,Dl(n.id(),Up))),it(()=>{e.state._tag==="Open"&&(e.state.fiber=void 0)})))),pme=function(){let e;return()=>(e===void 0&&(e=Li(_l)),e)}(),o0=function(){const e=arguments[0];if(nu(arguments[1]))return zM(e,arguments[1],arguments[2]);const t=arguments[1];return n=>zM(e,n,t)},zM=(e,t,n)=>m5(r=>e.state._tag==="Closed"?_l:e.state.fiber!==void 0&&(n==null?void 0:n.onlyIfMissing)===!0?it(pme):Zs(g5(t),a=>mme(e,a,{...n,interruptAs:r}))),vk=Symbol.for("effect/FiberSet"),yme=e=>Me(e,vk),_me={[vk]:vk,[Symbol.iterator](){return this.state._tag==="Closed"?VQ():this.state.backing[Symbol.iterator]()},toString(){return xn(this.toJSON())},toJSON(){return{_id:"FiberMap",state:this.state}},[cn](){return this.toJSON()},pipe(){return Fe(this,arguments)}},bme=(e,t)=>{const n=Object.create(_me);return n.state={_tag:"Open",backing:e},n.deferred=t,n},Sme=()=>Pn(Mt(jt(),e=>bme(new Set,e)),e=>Zh(t=>{const n=e.state;if(n._tag==="Closed")return wt;e.state={_tag:"Closed"};const r=n.backing;return Ace(r,Dl(t.id(),sB)).pipe(rE(e.deferred))})),rB=-1,sB=BP(rB,0),vme=w6(void 0,{emptyCase:ho,failCase:ho,dieCase:ho,interruptCase:(e,t)=>ZA(s2(t),rB),sequentialCase:(e,t,n)=>t||n,parallelCase:(e,t,n)=>t||n}),wme=M(e=>yme(e[0]),(e,t,n)=>{if(e.state._tag==="Closed"){t.unsafeInterruptAsFork(Dl((n==null?void 0:n.interruptAs)??ai,sB));return}else if(e.state.backing.has(t))return;e.state.backing.add(t),t.addObserver(r=>{e.state._tag!=="Closed"&&(e.state.backing.delete(t),Dm(r)&&((n==null?void 0:n.propagateInterruption)===!0?!vme(r.cause):!ql(r.cause))&&x2(e.deferred,r))})}),Eme=e=>qn(e.deferred),Tme="effect/GroupBy",aB=Symbol.for(Tme),Rme={_R:e=>e,_E:e=>e,_K:e=>e,_V:e=>e},Cme=e=>Me(e,aB),kme=M(e=>Cme(e[0]),(e,t,n)=>yE(e.grouped,([r,a])=>t(r,GH(Ay(a,{shutdown:!0}))),{concurrency:"unbounded",bufferSize:(n==null?void 0:n.bufferSize)??16})),Ame=e=>({[aB]:Rme,pipe(){return Fe(this,arguments)},grouped:e}),Ome=M(e=>typeof e[0]!="function",(e,t,n)=>n!=null&&n.key?kme(Dme(e,n.key,{bufferSize:n.bufferSize}),(r,a)=>bk(a,t)):_k(n==null?void 0:n.concurrency,()=>bk(e,t),r=>n!=null&&n.unordered?yE(e,a=>Bm(t(a)),{concurrency:r}):jhe(e,r,t))),Dme=M(e=>typeof e[0]!="function",(e,t,n)=>{const r=(a,o)=>Ao({onInput:l=>Yt(Fr(os(xme(l,t),([d,h])=>{const p=a.get(d);return p===void 0?F(MO((n==null?void 0:n.bufferSize)??16),ft(S=>F(it(()=>{a.set(d,S)}),Sn(Hn(o,She([d,S]))),Sn(F(Hn(S,qM(h)),ER(v=>ql(v)?Ce(wt):be())))))):ER(Hn(p,qM(h)),S=>ql(S)?Ce(wt):be())},{discard:!0})),()=>r(a,o)),onFailure:l=>Fr(Hn(o,bhe(l))),onDone:()=>F(Fr(F(os(a.entries(),([l,d])=>F(Hn(d,NM),ER(h=>ql(h)?Ce(wt):be())),{discard:!0}),Sn(Hn(o,NM)))))});return Ame(tme(a=>ke(function*(){const o=new Map,l=yield*Xs();return yield*Hl(a,Ns(l)),yield*hn(e).pipe(cs(r(o,l)),VO,sH(a),Is(a),gc(GH(Ay(l,{shutdown:!0}))))})))}),xme=M(2,(e,t)=>{const n=[],r=e[Symbol.iterator](),a=new Map;let o;for(;(o=r.next())&&!o.done;){const l=o.value,d=t(l);if(a.has(d))a.get(d).push(l);else{const h=[l];n.push([d,h]),a.set(d,h)}}return lr(n.map(l=>[l[0],lr(l[1])]))});class rs{constructor(t,n,r){b(this,"path");b(this,"actual");b(this,"issue");b(this,"_tag","Pointer");this.path=t,this.actual=n,this.issue=r}}class UM{constructor(t,n){b(this,"actual");b(this,"message");b(this,"_tag","Unexpected");this.actual=t,this.message=n}}class lp{constructor(t,n){b(this,"ast");b(this,"message");b(this,"_tag","Missing");b(this,"actual");this.ast=t,this.message=n}}class ir{constructor(t,n,r,a){b(this,"ast");b(this,"actual");b(this,"issues");b(this,"output");b(this,"_tag","Composite");this.ast=t,this.actual=n,this.issues=r,this.output=a}}class qR{constructor(t,n,r,a){b(this,"ast");b(this,"actual");b(this,"kind");b(this,"issue");b(this,"_tag","Refinement");this.ast=t,this.actual=n,this.kind=r,this.issue=a}}class NR{constructor(t,n,r,a){b(this,"ast");b(this,"actual");b(this,"kind");b(this,"issue");b(this,"_tag","Transformation");this.ast=t,this.actual=n,this.kind=r,this.issue=a}}class pr{constructor(t,n,r){b(this,"ast");b(this,"actual");b(this,"message");b(this,"_tag","Type");this.ast=t,this.actual=n,this.message=r}}class PM{constructor(t,n,r){b(this,"ast");b(this,"actual");b(this,"message");b(this,"_tag","Forbidden");this.ast=t,this.actual=n,this.message=r}}const wk=Symbol.for("effect/Schema/ParseErrorTypeId"),jM=e=>Me(e,wk);var WF;class $me extends Noe("ParseError"){constructor(){super(...arguments);b(this,WF,wk)}get message(){return this.toString()}toString(){return jp.formatIssueSync(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[(WF=wk,cn)](){return this.toJSON()}}const Vm=e=>new $me({issue:e}),Di=rt,Vl=et,HM=EQ,Ds=yU,Cl=M(2,(e,t)=>Ds(e)?as(e,{onLeft:et,onRight:t}):ft(e,t)),$s=M(2,(e,t)=>Ds(e)?RQ(e,t):Mt(e,t)),Pp=M(2,(e,t)=>Ds(e)?Xy(e,t):sd(e,t)),qme=M(2,(e,t)=>Ds(e)?TQ(e,{onLeft:t.onFailure,onRight:t.onSuccess}):ple(e,t)),iB=M(2,(e,t)=>Ds(e)?as(e,{onLeft:t,onRight:rt}):yO(e,t)),bE=(e,t)=>t===void 0||pc(t)?e:e===void 0?t:{...e,...t},SE=(e,t,n)=>{const r=Xr(e,t);return(a,o)=>r(a,bE(n,o))},sD=(e,t,n)=>{const r=SE(e,t,n);return(a,o)=>_U(r(a,o),Vm)},oB=(e,t,n)=>{const r=Xr(e,t);return(a,o)=>r(a,{...bE(n,o),isEffectAllowed:!0})},cB=(e,t)=>sD(e.ast,!0,t),Nme=(e,t)=>SE(e.ast,!0,t),Km=(e,t)=>oB(e.ast,!0,t),aD=(e,t)=>sD(e.ast,!1,t),Mme=(e,t)=>SE(e.ast,!1,t),id=(e,t)=>oB(e.ast,!1,t),Pf=cB,Ime=Km,vE=(e,t)=>sD(Jn(e.ast),!0,t),Lme=(e,t)=>SE(Jn(e.ast),!0,t),bn=(e,t)=>{const n=Xr(Jn(e.ast),!0);return(r,a)=>so(n(r,{exact:!0,...bE(t,a)}))},kl=aD,Fme=id,zme=xt(Symbol.for("effect/ParseResult/decodeMemoMap"),()=>new WeakMap),Ume=xt(Symbol.for("effect/ParseResult/encodeMemoMap"),()=>new WeakMap),Xr=(e,t)=>{const n=t?zme:Ume,r=n.get(e);if(r)return r;const a=Pme(e,t),o=qY(e),l=mn(o)?(p,S)=>a(p,bE(S,o.value)):a,d=NY(e),h=t&&mn(d)?(p,S)=>Tp(iB(l(p,S),d.value),e,p,S):l;return n.set(e,h),h},MR=e=>Qa(DY(e)),IR=e=>Qa(xY(e)),Pme=(e,t)=>{switch(e._tag){case"Refinement":if(t){const n=Xr(e.from,!0);return(r,a)=>{a=a??fR;const o=(a==null?void 0:a.errors)==="all",l=Cl(iB(n(r,a),d=>{const h=new qR(e,r,"From",d);return o&&IY(e)&&hB(d)?on(e.filter(r,a,e),{onNone:()=>et(h),onSome:p=>et(new ir(e,r,[h,new qR(e,r,"Predicate",p)]))}):et(h)}),d=>on(e.filter(d,a,e),{onNone:()=>rt(d),onSome:h=>et(new qR(e,r,"Predicate",h))}));return Tp(l,e,r,a)}}else{const n=Xr(Jn(e),!0),r=Xr(uB(e.from),!1);return(a,o)=>Tp(Cl(n(a,o),l=>r(l,o)),e,a,o)}case"Transformation":{const n=Hme(e.transformation,t),r=t?Xr(e.from,!0):Xr(e.to,!1),a=t?Xr(e.to,!0):Xr(e.from,!1);return(o,l)=>Tp(Cl(Pp(r(o,l),d=>new NR(e,o,t?"Encoded":"Type",d)),d=>Cl(Pp(n(d,l??fR,e,o),h=>new NR(e,o,"Transformation",h)),h=>Pp(a(h,l),p=>new NR(e,o,t?"Type":"Encoded",p)))),e,o,l)}case"Declaration":{const n=t?e.decodeUnknown(...e.typeParameters):e.encodeUnknown(...e.typeParameters);return(r,a)=>Tp(n(r,a??fR,e),e,r,a)}case"Literal":return da(e,n=>n===e.literal);case"UniqueSymbol":return da(e,n=>n===e.symbol);case"UndefinedKeyword":return da(e,PG);case"NeverKeyword":return da(e,jG);case"UnknownKeyword":case"AnyKeyword":case"VoidKeyword":return rt;case"StringKeyword":return da(e,Fs);case"NumberKeyword":return da(e,pc);case"BooleanKeyword":return da(e,mf);case"BigIntKeyword":return da(e,V0);case"SymbolKeyword":return da(e,lv);case"ObjectKeyword":return da(e,To);case"Enums":return da(e,n=>e.enums.some(([r,a])=>a===n));case"TemplateLiteral":{const n=cP(e);return da(e,r=>Fs(r)&&n.test(r))}case"TupleType":{const n=e.elements.map(p=>Xr(p.type,t)),r=e.rest.map(p=>Xr(p.type,t));let a=e.elements.filter(p=>!p.isOptional);e.rest.length>0&&(a=a.concat(e.rest.slice(1)));const o=a.length,l=e.elements.length>0?e.elements.map((p,S)=>S).join(" | "):"never",d=MR(e),h=IR(e);return(p,S)=>{if(!JQ(p))return et(new pr(e,p));const v=(S==null?void 0:S.errors)==="all",R=[];let O=0;const x=[],z=p.length;for(let q=z;q<=o-1;q++){const D=new rs(q,p,new lp(a[q-z]));if(v){R.push([O++,D]);continue}else return et(new ir(e,p,D,x))}if(e.rest.length===0)for(let q=e.elements.length;q<=z-1;q++){const D=new rs(q,p,new UM(p[q],`is unexpected, expected: ${l}`));if(v){R.push([O++,D]);continue}else return et(new ir(e,p,D,x))}let A=0,E;for(;A<n.length;A++)if(z<A+1){if(e.elements[A].isOptional)continue}else{const q=n[A],D=q(p[A],S);if(Ds(D)){if(Lr(D)){const I=new rs(A,p,D.left);if(v){R.push([O++,I]);continue}else return et(new ir(e,p,I,bi(x)))}x.push([O++,D.right])}else{const I=O++,$=A;E||(E=[]),E.push(({es:H,output:K})=>ft(Jd(D),V=>{if(Lr(V)){const j=new rs($,p,V.left);return v?(H.push([I,j]),wt):et(new ir(e,p,j,bi(K)))}return K.push([I,V.right]),wt}))}}if(In(r)){const[q,...D]=r;for(;A<z-D.length;A++){const I=q(p[A],S);if(Ds(I))if(Lr(I)){const $=new rs(A,p,I.left);if(v){R.push([O++,$]);continue}else return et(new ir(e,p,$,bi(x)))}else x.push([O++,I.right]);else{const $=O++,H=A;E||(E=[]),E.push(({es:K,output:V})=>ft(Jd(I),j=>{if(Lr(j)){const te=new rs(H,p,j.left);return v?(K.push([$,te]),wt):et(new ir(e,p,te,bi(V)))}else return V.push([$,j.right]),wt}))}}for(let I=0;I<D.length;I++)if(A+=I,!(z<A+1)){const $=D[I](p[A],S);if(Ds($)){if(Lr($)){const H=new rs(A,p,$.left);if(v){R.push([O++,H]);continue}else return et(new ir(e,p,H,bi(x)))}x.push([O++,$.right])}else{const H=O++,K=A;E||(E=[]),E.push(({es:V,output:j})=>ft(Jd($),te=>{if(Lr(te)){const Ee=new rs(K,p,te.left);return v?(V.push([H,Ee]),wt):et(new ir(e,p,Ee,bi(j)))}return j.push([H,te.right]),wt}))}}}const T=({es:q,output:D})=>IS(q)?et(new ir(e,p,bi(q),bi(D))):rt(bi(D));if(E&&E.length>0){const q=E;return Zn(()=>{const D={es:_p(R),output:_p(x)};return ft(os(q,I=>I(D),{concurrency:d,batching:h,discard:!0}),()=>T(D))})}return T({output:x,es:R})}}case"TypeLiteral":{if(e.propertySignatures.length===0&&e.indexSignatures.length===0)return da(e,HG);const n=[],r={},a=[];for(const S of e.propertySignatures)n.push([Xr(S.type,t),S]),r[S.name]=null,a.push(S.name);const o=e.indexSignatures.map(S=>[Xr(S.parameter,t),Xr(S.type,t),S.parameter]),l=zr.make(e.indexSignatures.map(S=>S.parameter).concat(a.map(S=>lv(S)?new eP(S):new vv(S)))),d=Xr(l,t),h=MR(e),p=IR(e);return(S,v)=>{if(!VG(S))return et(new pr(e,S));const R=(v==null?void 0:v.errors)==="all",O=[];let x=0;const z=(v==null?void 0:v.onExcessProperty)==="error",A=(v==null?void 0:v.onExcessProperty)==="preserve",E={};let T;if(z||A){T=Ai(S);for(const $ of T){const H=d($,v);if(Ds(H)&&Lr(H))if(z){const K=new rs($,S,new UM(S[$],`is unexpected, expected: ${String(l)}`));if(R){O.push([x++,K]);continue}else return et(new ir(e,S,K,E))}else E[$]=S[$]}}let q;const D=(v==null?void 0:v.exact)===!0;for(let $=0;$<n.length;$++){const H=n[$][1],K=H.name,V=Object.prototype.hasOwnProperty.call(S,K);if(!V){if(H.isOptional)continue;if(D){const Ee=new rs(K,S,new lp(H));if(R){O.push([x++,Ee]);continue}else return et(new ir(e,S,Ee,E))}}const j=n[$][0],te=j(S[K],v);if(Ds(te)){if(Lr(te)){const Ee=new rs(K,S,V?te.left:new lp(H));if(R){O.push([x++,Ee]);continue}else return et(new ir(e,S,Ee,E))}E[K]=te.right}else{const Ee=x++,xe=K;q||(q=[]),q.push(({es:fe,output:De})=>ft(Jd(te),ae=>{if(Lr(ae)){const Te=new rs(xe,S,V?ae.left:new lp(H));return R?(fe.push([Ee,Te]),wt):et(new ir(e,S,Te,De))}return De[xe]=ae.right,wt}))}}for(let $=0;$<o.length;$++){const H=o[$],K=H[0],V=H[1],j=xU(S,H[2]);for(const te of j){const Ee=K(te,v);if(Ds(Ee)&&so(Ee)){const xe=V(S[te],v);if(Ds(xe))if(Lr(xe)){const fe=new rs(te,S,xe.left);if(R){O.push([x++,fe]);continue}else return et(new ir(e,S,fe,E))}else Object.prototype.hasOwnProperty.call(r,te)||(E[te]=xe.right);else{const fe=x++,De=te;q||(q=[]),q.push(({es:ae,output:Te})=>ft(Jd(xe),Re=>{if(Lr(Re)){const Xe=new rs(De,S,Re.left);return R?(ae.push([fe,Xe]),wt):et(new ir(e,S,Xe,Te))}else return Object.prototype.hasOwnProperty.call(r,te)||(Te[te]=Re.right),wt}))}}}}const I=({es:$,output:H})=>{if(IS($))return et(new ir(e,S,bi($),H));if((v==null?void 0:v.propertyOrder)==="original"){const K=T||Ai(S);for(const j of a)K.indexOf(j)===-1&&K.push(j);const V={};for(const j of K)Object.prototype.hasOwnProperty.call(H,j)&&(V[j]=H[j]);return rt(V)}return rt(H)};if(q&&q.length>0){const $=q;return Zn(()=>{const H={es:_p(O),output:Object.assign({},E)};return ft(os($,K=>K(H),{concurrency:h,batching:p,discard:!0}),()=>I(H))})}return I({es:O,output:E})}}case"Union":{const n=lB(e.types,t),r=Ai(n.keys),a=r.length,o=e.types.length,l=new Map;for(let p=0;p<o;p++)l.set(e.types[p],Xr(e.types[p],t));const d=MR(e)??1,h=IR(e);return(p,S)=>{const v=[];let R=0,O=[];if(a>0)if(K0(p))for(let A=0;A<a;A++){const E=r[A],T=n.keys[E].buckets;if(Object.prototype.hasOwnProperty.call(p,E)){const q=String(p[E]);if(Object.prototype.hasOwnProperty.call(T,q))O=O.concat(T[q]);else{const{candidates:D,literals:I}=n.keys[E],$=zr.make(I),H=D.length===o?new ri([new Wn(E,$,!1,!0)],[]):zr.make(D);v.push([R++,new ir(H,p,new rs(E,p,new pr($,p[E])))])}}else{const{candidates:q,literals:D}=n.keys[E],I=new Wn(E,zr.make(D),!1,!0),$=q.length===o?new ri([I],[]):zr.make(q);v.push([R++,new ir($,p,new rs(E,p,new lp(I)))])}}else{const A=n.candidates.length===o?e:zr.make(n.candidates);v.push([R++,new pr(A,p)])}n.otherwise.length>0&&(O=O.concat(n.otherwise));let x;for(let A=0;A<O.length;A++){const E=O[A],T=l.get(E)(p,S);if(Ds(T)&&(!x||x.length===0)){if(so(T))return T;v.push([R++,T.left])}else{const q=R++;x||(x=[]),x.push(D=>Zn(()=>"finalResult"in D?wt:ft(Jd(T),I=>(so(I)?D.finalResult=I:D.es.push([q,I.left]),wt))))}}const z=A=>IS(A)?A.length===1&&A[0][1]._tag==="Type"?et(A[0][1]):et(new ir(e,p,bi(A))):et(new pr(e,p));if(x&&x.length>0){const A=x;return Zn(()=>{const E={es:_p(v)};return ft(os(A,T=>T(E),{concurrency:d,batching:h,discard:!0}),()=>"finalResult"in E?E.finalResult:z(E.es))})}return z(v)}}case"Suspend":{const n=xA(()=>Xr(bf(e.f(),e.annotations),t));return(r,a)=>n()(r,a)}}},da=(e,t)=>n=>t(n)?rt(n):et(new pr(e,n)),Ep=(e,t)=>{switch(e._tag){case"Declaration":{const n=gm(e);if(mn(n))return Ep(n.value,t);break}case"TypeLiteral":{const n=[];for(let r=0;r<e.propertySignatures.length;r++){const a=e.propertySignatures[r],o=t?uC(a.type):Jn(a.type);Ip(o)&&!a.isOptional&&n.push([a.name,o])}return n}case"TupleType":{const n=[];for(let r=0;r<e.elements.length;r++){const a=e.elements[r],o=t?uC(a.type):Jn(a.type);Ip(o)&&!a.isOptional&&n.push([r,o])}return n}case"Refinement":return Ep(e.from,t);case"Suspend":return Ep(e.f(),t);case"Transformation":return Ep(t?e.from:e.to,t)}return[]},lB=(e,t)=>{const n={},r=[],a=[];for(let o=0;o<e.length;o++){const l=e[o],d=Ep(l,t);if(d.length>0){a.push(l);for(let h=0;h<d.length;h++){const[p,S]=d[h],v=String(S.literal);n[p]=n[p]||{buckets:{},literals:[],candidates:[]};const R=n[p].buckets;if(Object.prototype.hasOwnProperty.call(R,v)){if(h<d.length-1)continue;R[v].push(l),n[p].literals.push(S),n[p].candidates.push(l)}else{R[v]=[l],n[p].literals.push(S),n[p].candidates.push(l);break}}}else r.push(l)}return{keys:n,otherwise:r,candidates:a}},uB=e=>ph(e)?uB(e.from):e,Tp=(e,t,n,r)=>{if((r==null?void 0:r.isEffectAllowed)===!0||Ds(e))return e;const a=new Ij,o=Li(e,{scheduler:a});a.flush();const l=o.unsafePoll();if(l){if(Nv(l))return rt(l.value);const d=l.cause;return S6(d)?et(d.error):et(new PM(t,n,Ey(d)))}return et(new PM(t,n,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))},jme=([e],[t])=>e>t?1:e<t?-1:0;function bi(e){return e.sort(jme).map(t=>t[1])}const Hme=(e,t)=>{switch(e._tag){case"FinalTransformation":return t?e.decode:e.encode;case"ComposeTransformation":return rt;case"TypeLiteralTransformation":return n=>{let r=rt(n);for(const a of e.propertySignatureTransformations){const[o,l]=t?[a.from,a.to]:[a.to,a.from],d=t?a.decode:a.encode;r=$s(r,p=>{const S=d(Object.prototype.hasOwnProperty.call(p,o)?Ce(p[o]):be());return delete p[o],mn(S)&&(p[l]=S.value),p})}return r}}},As=(e,t=[])=>({value:e,forest:t}),jp={formatIssue:e=>$s(sh(e),Bme),formatIssueSync:e=>{const t=jp.formatIssue(e);return Ds(t)?kQ(t):Ga(t)},formatError:e=>jp.formatIssue(e.issue),formatErrorSync:e=>jp.formatIssueSync(e.issue)},Bme=e=>e.value+fB(`
`,e.forest),fB=(e,t)=>{let n="";const r=t.length;let a;for(let o=0;o<r;o++){a=t[o];const l=o===r-1;n+=e+(l?"└":"├")+"─ "+a.value,n+=fB(e+(r>1&&!l?"│  ":"   "),a.forest)}return n},Vme=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},Kme=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},dB=e=>"ast"in e?Ce(e.ast):be(),Ek=rt(void 0),Gme=e=>dB(e).pipe(hm(AY),on({onNone:()=>Ek,onSome:t=>{const n=t(e);return Fs(n)?rt({message:n,override:!1}):nu(n)?Mt(n,r=>({message:r,override:!1})):Fs(n.message)?rt({message:n.message,override:n.override}):Mt(n.message,r=>({message:r,override:n.override}))}})),iD=e=>t=>t._tag===e,hB=iD("Composite"),BM=iD("Refinement"),VM=iD("Transformation"),Hp=e=>Cl(Gme(e),t=>t!==void 0?!t.override&&(hB(e)||BM(e)&&e.kind==="From"||VM(e)&&e.kind!=="Transformation")?VM(e)||BM(e)?Hp(e.issue):Ek:rt(t.message):Ek),mB=e=>dB(e).pipe(hm($Y),$Q(t=>t(e)),Qa);function Qme(e){return ZU(e).pipe(lc(()=>JU(e)),lc(()=>XU(e)),lc(()=>J0(e)),Dn(()=>`{ ${e.from} | filter }`))}function Yme(e){return e.message!==void 0?e.message:`Expected ${ph(e.ast)?Qme(e.ast):String(e.ast)}, actual ${ni(e.actual)}`}const Wme=e=>$s(Hp(e),t=>t??mB(e)??Yme(e)),TS=e=>mB(e)??String(e.ast),Jme=e=>e.message??"is forbidden",Xme=e=>e.message??"is unexpected",Zme=e=>{const t=OY(e.ast);if(mn(t)){const n=t.value();return Fs(n)?rt(n):n}return rt(e.message??"is missing")},sh=e=>{switch(e._tag){case"Type":return $s(Wme(e),As);case"Forbidden":return rt(As(TS(e),[As(Jme(e))]));case"Unexpected":return rt(As(Xme(e)));case"Missing":return $s(Zme(e),As);case"Transformation":return Cl(Hp(e),t=>t!==void 0?rt(As(t)):$s(sh(e.issue),n=>As(TS(e),[As(Vme(e.kind),[n])])));case"Refinement":return Cl(Hp(e),t=>t!==void 0?rt(As(t)):$s(sh(e.issue),n=>As(TS(e),[As(Kme(e.kind),[n])])));case"Pointer":return $s(sh(e.issue),t=>As(NU(e.path),[t]));case"Composite":return Cl(Hp(e),t=>{if(t!==void 0)return rt(As(t));const n=TS(e);return qU(e.issues)?$s(os(e.issues,sh),r=>As(n,r)):$s(sh(e.issues),r=>As(n,[r]))})}},KM=Symbol.for("effect/Pool"),ege={_E:e=>e,_A:e=>e},gB=e=>Us(t=>ce(Am(),n=>{const r=va(n,Ii),a=z4(e.acquire,h=>Xl(n,h)),o=new rge(r,a,e.concurrency??1,e.min,e.max,e.strategy,Math.min(Math.max(e.targetUtilization??1,.1),1)),l=vc(Wh(t(o.resize)),h=>r.addFinalizer(()=>hy(h))),d=vc(Wh(t(e.strategy.run(o))),h=>r.addFinalizer(()=>hy(h)));return pe(o).pipe(xl(r.addFinalizer(()=>o.shutdown)),xl(l),xl(d))})),tge=e=>gB({...e,min:e.size,max:e.size,strategy:sge()}),nge=e=>ce(e.timeToLiveStrategy==="creation"?age(e.timeToLive):ige(e.timeToLive),t=>gB({...e,strategy:t}));var JF,XF;class rge extends(XF=ko,JF=KM,XF){constructor(n,r,a,o,l,d,h){super();b(this,"scope");b(this,"acquire");b(this,"concurrency");b(this,"minSize");b(this,"maxSize");b(this,"strategy");b(this,"targetUtilization");b(this,JF);b(this,"isShuttingDown",!1);b(this,"semaphore");b(this,"items",new Set);b(this,"available",new Set);b(this,"availableLatch",B6(!1));b(this,"invalidated",new Set);b(this,"waiters",0);b(this,"allocate",m2(qm(),n=>this.acquire.pipe(rd(n),Oi,ce(r=>{const a={exit:r,finalizer:Em(n.close(r),oge),refCount:0,disableReclaim:!1};return this.items.add(a),this.available.add(a),_r(r._tag==="Success"?this.strategy.onAcquire(a):Qt(a.finalizer,this.strategy.onAcquire(a)),a)})),(n,r)=>r._tag==="Failure"?n.close(r):_t));b(this,"resizeLoop",Be(()=>{if(this.activeSize>=this.targetSize)return _t;const n=this.targetSize-this.activeSize;return this.strategy.reclaim(this).pipe(ce(on({onNone:()=>this.allocate,onSome:pe})),xie(n,{concurrency:n}),xl(this.availableLatch.open),ce(r=>r.some(a=>a.exit._tag==="Failure")?_t:this.resizeLoop))}));b(this,"resizeSemaphore",zp(1));b(this,"resize",this.resizeSemaphore.withPermits(1)(this.resizeLoop));b(this,"getPoolItem",Us(n=>n(this.semaphore.take(1)).pipe(Qt(Ii),ce(r=>Be(()=>{if(this.waiters++,this.isShuttingDown)return mr;if(this.targetSize>this.activeSize){const a=this;return ce(this.resizeSemaphore.withPermitsIfAvailable(1)(Zv(Vh(this.resize),this.scope)),function o(){return a.isShuttingDown?mr:a.available.size>0?pe(sC(a.available)):(a.availableLatch.unsafeClose(),ce(a.availableLatch.await,o))})}return pe(sC(this.available))}).pipe(Jh(_e(()=>this.waiters--)),vc(a=>a.exit._tag==="Failure"?(this.items.delete(a),this.invalidated.delete(a),this.available.delete(a),this.semaphore.release(1)):(a.refCount++,this.available.delete(a),a.refCount<this.concurrency&&this.available.add(a),r.addFinalizer(()=>Qt(Be(()=>(a.refCount--,this.invalidated.has(a)?this.invalidatePoolItem(a):(this.available.add(a),is))),this.semaphore.release(1))))),eu(()=>this.semaphore.release(1)))))));b(this,"get",ce(Be(()=>this.isShuttingDown?mr:this.getPoolItem),n=>n.exit));this.scope=n,this.acquire=r,this.concurrency=a,this.minSize=o,this.maxSize=l,this.strategy=d,this.targetUtilization=h,this[KM]=ege,this.semaphore=zp(a*l)}get currentUsage(){let n=this.waiters;for(const r of this.items)n+=r.refCount;return n}get targetSize(){if(this.isShuttingDown)return 0;const n=this.currentUsage/this.targetUtilization,r=Math.ceil(n/this.concurrency);return Math.min(Math.max(this.minSize,r),this.maxSize)}get activeSize(){return this.items.size-this.invalidated.size}commit(){return this.get}invalidate(n){return Be(()=>{if(this.isShuttingDown)return _t;for(const r of this.items)if(r.exit._tag==="Success"&&r.exit.value===n)return r.disableReclaim=!0,Oc(this.invalidatePoolItem(r));return _t})}invalidatePoolItem(n){return Be(()=>{if(this.items.has(n)){if(n.refCount===0)return this.items.delete(n),this.available.delete(n),this.invalidated.delete(n),Qt(n.finalizer,Zv(Vh(this.resize),this.scope))}else return _t;return this.invalidated.add(n),this.available.delete(n),_t})}get shutdown(){return Be(()=>{if(this.isShuttingDown)return _t;this.isShuttingDown=!0;const n=this.items.size,r=zp(n);return xf(this.items,a=>a.refCount>0?(a.finalizer=xl(a.finalizer,r.release(1)),this.invalidated.add(a),r.take(1)):(this.items.delete(a),this.available.delete(a),this.invalidated.delete(a),a.finalizer)).pipe(Qt(this.semaphore.releaseAll),Qt(this.availableLatch.open),Qt(r.take(n)))})}pipe(){return Fe(this,arguments)}}const sge=()=>({run:e=>_t,onAcquire:e=>_t,reclaim:e=>Sy}),age=e=>zw(t=>ct($O(),n=>{const r=Nh(e),a=new WeakMap;return Ge({run:o=>{const l=d=>Be(()=>{if(!o.items.has(d)||o.invalidated.has(d))return _t;const h=t.unsafeCurrentTimeMillis(),p=a.get(d),S=r-(h-p);return S>0?yj(l(d),S):o.invalidatePoolItem(d)});return n.take.pipe(vc(l),H2)},onAcquire:o=>Be(()=>(a.set(o,t.unsafeCurrentTimeMillis()),n.offer(o))),reclaim:o=>Sy})})),ige=e=>ct($O(),t=>Ge({run:n=>{const r=Be(()=>n.activeSize-n.targetSize<=0?_t:t.take.pipe(vc(o=>n.invalidatePoolItem(o)),Qt(r)));return r.pipe(yj(e),H2)},onAcquire:n=>t.offer(n),reclaim(n){return Be(()=>{if(n.invalidated.size===0)return Sy;const r=PQ(KQ(n.invalidated,a=>!a.disableReclaim));return r._tag==="None"?Sy:(n.invalidated.delete(r.value),r.value.refCount<n.concurrency&&n.available.add(r.value),_r(t.offer(r.value),r))})}})),oge=e=>Dt(t=>{const n=t.getFiberRef(v2);return n._tag==="Some"&&t.log("Unhandled error in pool finalizer",e,n),_t}),cge=zle,lge=Ile,uge=u6,fge=Hse,dge=f6,Tk=Symbol.for("effect/Mailbox"),GM=Symbol.for("effect/Mailbox/ReadonlyMailbox"),Vu=vn(),QM=sn(Vu),RS=sn(!1),CS=sn(!0),YM=[Vu,!0];var ZF,ez;class hge extends ko{constructor(n,r,a){super();b(this,"scheduler");b(this,"capacity");b(this,"strategy");b(this,ez,Tk);b(this,ZF,GM);b(this,"state",{_tag:"Open",takers:new Set,offers:new Set,awaiters:new Set});b(this,"messages",[]);b(this,"messagesChunk",vn());b(this,"shutdown",_e(()=>{if(this.state._tag==="Done")return!0;this.messages=[],this.messagesChunk=Vu;const n=this.state.offers;if(this.finalize(this.state._tag==="Open"?is:this.state.exit),n.size>0){for(const r of n)r._tag==="Single"?r.resume(RS):r.resume(sn(lr(r.remaining.slice(r.offset))));n.clear()}return!0}));b(this,"end",this.done(is));b(this,"clear",Be(()=>{if(this.state._tag==="Done")return HS(this.state.exit,Vu);const n=this.unsafeTakeAll();return this.releaseCapacity(),pe(n)}));b(this,"takeAll",Be(()=>{if(this.state._tag==="Done")return HS(this.state.exit,YM);const n=this.unsafeTakeAll();return n.length===0?Qt(this.awaitTake,this.takeAll):pe([n,this.releaseCapacity()])}));b(this,"take",Be(()=>this.unsafeTake()??Qt(this.awaitTake,this.take)));b(this,"await",El(n=>this.state._tag==="Done"?n(this.state.exit):(this.state.awaiters.add(n),_e(()=>{this.state._tag!=="Done"&&this.state.awaiters.delete(n)}))));b(this,"size",_e(()=>this.unsafeSize()));b(this,"awaitTake",El(n=>this.state._tag==="Done"?n(this.state.exit):(this.state.takers.add(n),_e(()=>{this.state._tag!=="Done"&&this.state.takers.delete(n)}))));b(this,"scheduleRunning",!1);b(this,"releaseTaker",()=>{if(this.scheduleRunning=!1,this.state._tag==="Done")return;if(this.state.takers.size===0)return;const n=sC(this.state.takers);this.state.takers.delete(n),n(is)});this.scheduler=n,this.capacity=r,this.strategy=a}offer(n){return Be(()=>{if(this.state._tag!=="Open")return RS;if(this.messages.length+this.messagesChunk.length>=this.capacity)switch(this.strategy){case"dropping":return RS;case"suspend":return this.capacity<=0&&this.state.takers.size>0?(this.messages.push(n),this.releaseTaker(),CS):this.offerRemainingSingle(n);case"sliding":return this.unsafeTake(),this.messages.push(n),CS}return this.messages.push(n),this.scheduleReleaseTaker(),CS})}unsafeOffer(n){return this.state._tag!=="Open"?!1:this.messages.length+this.messagesChunk.length>=this.capacity?this.strategy==="sliding"?(this.unsafeTake(),this.messages.push(n),!0):this.capacity<=0&&this.state.takers.size>0?(this.messages.push(n),this.releaseTaker(),!0):!1:(this.messages.push(n),this.scheduleReleaseTaker(),!0)}offerAll(n){return Be(()=>{if(this.state._tag!=="Open")return pe(wf(n));const r=this.unsafeOfferAllArray(n);return r.length===0?QM:this.strategy==="dropping"?pe(lr(r)):this.offerRemainingArray(r)})}unsafeOfferAll(n){return lr(this.unsafeOfferAllArray(n))}unsafeOfferAllArray(n){if(this.state._tag!=="Open")return an(n);if(this.capacity===Number.POSITIVE_INFINITY||this.strategy==="sliding")return this.messages.length>0&&(this.messagesChunk=Nn(this.messagesChunk,lr(this.messages))),this.strategy==="sliding"?this.messagesChunk=this.messagesChunk.pipe(Nn(wf(n)),KW(this.capacity)):aw(n)?this.messagesChunk=Nn(this.messagesChunk,n):this.messages=an(n),this.scheduleReleaseTaker(),[];const r=this.capacity<=0?this.state.takers.size:this.capacity-this.messages.length-this.messagesChunk.length;if(r===0)return an(n);const a=[];let o=0;for(const l of n)o<r?this.messages.push(l):a.push(l),o++;return this.scheduleReleaseTaker(),a}fail(n){return this.done(gy(n))}failCause(n){return this.done(rn(n))}unsafeDone(n){return this.state._tag!=="Open"?!1:this.state.offers.size===0&&this.messages.length===0&&this.messagesChunk.length===0?(this.finalize(n),!0):(this.state={...this.state,_tag:"Closing",exit:n},!0)}done(n){return _e(()=>this.unsafeDone(n))}takeN(n){return Be(()=>{if(this.state._tag==="Done")return HS(this.state.exit,YM);if(n<=0)return pe([Vu,!1]);n=Math.min(n,this.capacity);let r;if(n<=this.messagesChunk.length)r=qh(this.messagesChunk,n),this.messagesChunk=ao(this.messagesChunk,n);else if(n<=this.messages.length+this.messagesChunk.length)this.messagesChunk=Nn(this.messagesChunk,lr(this.messages)),this.messages=[],r=qh(this.messagesChunk,n),this.messagesChunk=ao(this.messagesChunk,n);else return Qt(this.awaitTake,this.takeN(n));return pe([r,this.releaseCapacity()])})}unsafeTake(){if(this.state._tag==="Done")return I4(this.state.exit,gy(new Xw));let n;if(this.messagesChunk.length>0)n=lw(this.messagesChunk),this.messagesChunk=ao(this.messagesChunk,1);else if(this.messages.length>0)n=this.messages[0],this.messagesChunk=ao(lr(this.messages),1),this.messages=[];else return this.capacity<=0&&this.state.offers.size>0?(this.capacity=1,this.releaseCapacity(),this.capacity=0,this.messages.length>0?sn(this.messages.pop()):void 0):void 0;return this.releaseCapacity(),sn(n)}unsafeSize(){const n=this.messages.length+this.messagesChunk.length;return this.state._tag==="Done"?be():Ce(n)}commit(){return this.takeAll}pipe(){return Fe(this,arguments)}toJSON(){return{_id:"effect/Mailbox",state:this.state._tag,size:this.unsafeSize().toJSON()}}toString(){return xn(this)}[(ez=Tk,ZF=GM,cn)](){return xn(this)}offerRemainingSingle(n){return El(r=>{if(this.state._tag!=="Open")return r(RS);const a={_tag:"Single",message:n,resume:r};return this.state.offers.add(a),_e(()=>{this.state._tag==="Open"&&this.state.offers.delete(a)})})}offerRemainingArray(n){return El(r=>{if(this.state._tag!=="Open")return r(sn(lr(n)));const a={_tag:"Array",remaining:n,offset:0,resume:r};return this.state.offers.add(a),_e(()=>{this.state._tag==="Open"&&this.state.offers.delete(a)})})}releaseCapacity(){if(this.state._tag==="Done")return this.state.exit._tag==="Success";if(this.state.offers.size===0)return this.state._tag==="Closing"&&this.messages.length===0&&this.messagesChunk.length===0?(this.finalize(this.state.exit),this.state.exit._tag==="Success"):!1;let n=this.capacity-this.messages.length-this.messagesChunk.length;for(const r of this.state.offers){if(n===0)return!1;if(r._tag==="Single")this.messages.push(r.message),n--,r.resume(CS),this.state.offers.delete(r);else{for(;r.offset<r.remaining.length;r.offset++){if(n===0)return!1;this.messages.push(r.remaining[r.offset]),n--}r.resume(QM),this.state.offers.delete(r)}}return!1}scheduleReleaseTaker(){this.scheduleRunning||(this.scheduleRunning=!0,this.scheduler.scheduleTask(this.releaseTaker,0))}unsafeTakeAll(){if(this.messagesChunk.length>0){const n=this.messages.length>0?Nn(this.messagesChunk,lr(this.messages)):this.messagesChunk;return this.messagesChunk=Vu,this.messages=[],n}else if(this.messages.length>0){const n=lr(this.messages);return this.messages=[],n}else if(this.state._tag!=="Done"&&this.state.offers.size>0)return this.capacity=1,this.releaseCapacity(),this.capacity=0,Ln(this.messages.pop());return Vu}finalize(n){if(this.state._tag==="Done")return;const r=this.state;this.state={_tag:"Done",exit:n};for(const a of r.takers)a(n);r.takers.clear();for(const a of r.awaiters)a(n);r.awaiters.clear()}}const mge=e=>Dt(t=>pe(new hge(t.currentScheduler,typeof e=="number"?e:(e==null?void 0:e.capacity)??Number.POSITIVE_INFINITY,typeof e=="number"?"suspend":(e==null?void 0:e.strategy)??"suspend"))),gge=e=>{const t=Yt(e.takeAll,([n,r])=>r?n.length===0?Ls:ln(n):L_(ln(n),t));return t},pge=Tk,yge=e=>Me(e,pge),_ge=mge,bge=gge,Sge=Symbol.for("@effect/matcher/Matcher"),vge={[Sge]:{_input:Ge,_filters:Ge,_result:Ge,_return:Ge},_tag:"ValueMatcher",add(e){return this.value._tag==="Right"?this:e._tag==="When"&&e.guard(this.provided)===!0?Rk(this.provided,rt(e.evaluate(this.provided))):e._tag==="Not"&&e.guard(this.provided)===!1?Rk(this.provided,rt(e.evaluate(this.provided))):this},pipe(){return Fe(this,arguments)}};function Rk(e,t){const n=Object.create(vge);return n.provided=e,n.value=t,n}const pB=(e,t)=>({_tag:"When",guard:e,evaluate:t}),Ck=e=>{if(typeof e=="function")return e;if(Array.isArray(e)){const t=e.map(Ck),n=t.length;return r=>{if(!Array.isArray(r))return!1;for(let a=0;a<n;a++)if(t[a](r[a])===!1)return!1;return!0}}else if(e!==null&&typeof e=="object"){const t=Object.entries(e).map(([r,a])=>[r,Ck(a)]),n=t.length;return r=>{if(typeof r!="object"||r===null)return!1;for(let a=0;a<n;a++){const[o,l]=t[a];if(!(o in r)||l(r[o])===!1)return!1}return!0}}return t=>t===e},wge=e=>Rk(e,et(e)),Ege=(e,t)=>n=>n.add(pB(Ck(e),t)),Tge=e=>(...t)=>{const n=t[t.length-1],r=t.slice(0,-1),a=r.length===1?o=>o[e]===r[0]:o=>r.includes(o[e]);return o=>o.add(pB(a,n))},Rge=Tge("_tag"),Cge=e=>{if(e._tag==="ValueMatcher")return e.value;const t=e.cases.length;if(t===1){const n=e.cases[0];return r=>n._tag==="When"&&n.guard(r)===!0||n._tag==="Not"&&n.guard(r)===!1?rt(n.evaluate(r)):et(r)}return n=>{for(let r=0;r<t;r++){const a=e.cases[r];if(a._tag==="When"&&a.guard(n)===!0)return rt(a.evaluate(n));if(a._tag==="Not"&&a.guard(n)===!1)return rt(a.evaluate(n))}return et(n)}},WM="effect/Match/exhaustive: absurd",kge=e=>{const t=Cge(e);if(yU(t)){if(t._tag==="Right")return t.right;throw new Error(WM)}return n=>{const r=t(n);if(r._tag==="Right")return r.right;throw new Error(WM)}},yB=wge,LR=Ege,FR=Rge,_B=kge,Age=tge,Oge=nge,Dge=Hde,xge=rh,$ge=M(e=>To(e[0]),(e,...t)=>{const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}),qge=M(e=>To(e[0]),(e,...t)=>{const n={...e};for(const r of t)delete n[r];return n}),rm=Symbol.for("effect/Schema");function tn(e){var t,n,r;return n=rm,t=rm,r=class{constructor(){b(this,n,kk)}static annotations(o){return tn(ui(this.ast,o))}static pipe(){return Fe(this,arguments)}static toString(){return String(e)}},b(r,"ast",e),b(r,"Type"),b(r,"Encoded"),b(r,"Context"),b(r,t,kk),r}const kk={_A:e=>e,_I:e=>e,_R:e=>e},JM={schemaId:RY,message:zU,missingMessage:qA,identifier:NA,title:Ro,description:e_,examples:UU,default:PU,documentation:CY,jsonSchema:jU,arbitrary:HU,pretty:BU,equivalence:MA,concurrency:VU,batching:KU,parseIssueTitle:GU,parseOptions:QU,decodingFallback:YU},ru=e=>{if(!e)return{};const t={...e};for(const n in JM)if(n in e){const r=JM[n];t[r]=e[n],delete t[n]}return t},ui=(e,t)=>bf(e,ru(t));const Gm=e=>String(e.ast),wE=e=>tn(uC(e.ast)),vo=e=>tn(Jn(e.ast)),oD=(e,t)=>{const n=id(e,t);return(r,a)=>Pp(n(r,a),Vm)},Nge=(e,t)=>{const n=Mme(e,t);return(r,a)=>Xy(n(r,a),Vm)},cD=oD,Mge=Nge,c0=(e,t)=>{const n=Km(e,t);return(r,a)=>Pp(n(r,a),Vm)},Ige=(e,t)=>{const n=Nme(e,t);return(r,a)=>Xy(n(r,a),Vm)},Rp=c0,Qm=Ige,Lge=(e,t)=>{const n=Lme(e,t);return(r,a)=>Xy(n(r,a),Vm)},Ni=e=>Me(e,rm)&&To(e[rm]);function Fge(e){return LA(e)?zr.make(rW(e,t=>new vv(t))):new vv(e[0])}function bB(e,t=Fge(e)){var n;return n=class extends tn(t){static annotations(a){return bB(this.literals,ui(this.ast,a))}},b(n,"literals",[...e]),n}function At(...e){return In(e)?bB(e):EE}const zge=e=>tn(new eP(e)),Uge=e=>new JY(Object.keys(e).filter(t=>typeof e[e[t]]!="number").map(t=>[t,e[t]])),SB=(e,t=Uge(e))=>{var n;return n=class extends tn(t){static annotations(a){return SB(this.enums,ui(this.ast,a))}},b(n,"enums",{...e}),n},XM=e=>SB(e),Pge=(e,t,n)=>lD(e,new Z0(e.map(r=>r.ast),(...r)=>t.decode(...r.map(tn)),(...r)=>t.encode(...r.map(tn)),ru(n))),jge=(e,t)=>{const n=()=>(a,o,l)=>e(a)?Di(a):Vl(new pr(l,a)),r=n;return lD([],new Z0([],n,r,ru(t)))};function lD(e,t){var n;return n=class extends tn(t){static annotations(a){return lD(this.typeParameters,ui(this.ast,a))}},b(n,"typeParameters",[...e]),n}const od=function(){if(Array.isArray(arguments[0])){const n=arguments[0],r=arguments[1],a=arguments[2];return Pge(n,r,a)}const e=arguments[0],t=arguments[1];return jge(e,t)},ZM=Symbol.for("effect/SchemaId/Brand"),vB=(e,t)=>n=>mD(n,new r_(n.ast,function(o,l,d){const h=e.either(o);return Lr(h)?Ce(new pr(d,o,h.left.map(p=>p.message).join(", "))):be()},ru({schemaId:ZM,[ZM]:{constructor:e},...t})));class wB extends tn($h){}class co extends tn(HY){}class uD extends tn(UY){}class EE extends tn(ew){}class Ak extends tn(tP){}class br extends tn(nP){}class ie extends tn(aC){}class Ut extends tn(oC){}class wc extends tn(cC){}const Hge=e=>zr.make(e.map(t=>t.ast));function EB(e,t=Hge(e)){var n;return n=class extends tn(t){static annotations(a){return EB(this.members,ui(this.ast,a))}},b(n,"members",[...e]),n}function bt(...e){return LA(e)?EB(e):In(e)?e[0]:EE}const TB=e=>bt(e,uD),sm=e=>bt(e,wB),Bge=(e,t)=>new n_(e.map(n=>Ni(n)?new Wl(n.ast,!1):n.ast),t.map(n=>Ni(n)?new t_(n.ast):n.ast),!0);function l0(e,t,n=Bge(e,t)){var r;return r=class extends tn(n){static annotations(o){return l0(this.elements,this.rest,ui(this.ast,o))}},b(r,"elements",[...e]),b(r,"rest",[...t]),r}function RB(...e){return Array.isArray(e[0])?l0(e[0],e.slice(1)):l0(e,[])}function CB(e,t){var n;return n=class extends l0([],[e],t){static annotations(a){return CB(this.value,ui(this.ast,a))}},b(n,"value",e),n}const Et=e=>CB(e),Ok=e=>e?'"?:"':'":"';class TE extends Wl{constructor(n,r,a,o,l){super(n,r,o);b(this,"isReadonly");b(this,"defaultValue");b(this,"_tag","PropertySignatureDeclaration");this.isReadonly=a,this.defaultValue=l}toString(){const n=Ok(this.isOptional),r=String(this.type);return`PropertySignature<${n}, ${r}, never, ${n}, ${r}>`}}class Vge extends Wl{constructor(n,r,a,o,l){super(n,r,o);b(this,"isReadonly");b(this,"fromKey");this.isReadonly=a,this.fromKey=l}}class u0 extends Wl{constructor(n,r,a,o,l){super(n,r,o);b(this,"isReadonly");b(this,"defaultValue");this.isReadonly=a,this.defaultValue=l}}const Kge=e=>e===void 0?"never":Fs(e)?JSON.stringify(e):String(e);class f0{constructor(t,n,r,a){b(this,"from");b(this,"to");b(this,"decode");b(this,"encode");b(this,"_tag","PropertySignatureTransformation");this.from=t,this.to=n,this.decode=r,this.encode=a}toString(){return`PropertySignature<${Ok(this.to.isOptional)}, ${this.to.type}, ${Kge(this.from.fromKey)}, ${Ok(this.from.isOptional)}, ${this.from.type}>`}}const kB=(e,t)=>{switch(e._tag){case"PropertySignatureDeclaration":return new TE(e.type,e.isOptional,e.isReadonly,{...e.annotations,...t},e.defaultValue);case"PropertySignatureTransformation":return new f0(e.from,new u0(e.to.type,e.to.isOptional,e.to.isReadonly,{...e.to.annotations,...t},e.to.defaultValue),e.decode,e.encode)}},AB=Symbol.for("effect/PropertySignature"),fD=e=>Me(e,AB);var tz,nz;nz=rm,tz=AB;const ax=class ax{constructor(t){b(this,"ast");b(this,nz);b(this,tz,null);b(this,"_TypeToken");b(this,"_Key");b(this,"_EncodedToken");b(this,"_HasDefault");this.ast=t}pipe(){return Fe(this,arguments)}annotations(t){return new ax(kB(this.ast,ru(t)))}toString(){return String(this.ast)}};let d0=ax;const h0=e=>new d0(e);class RE extends d0{constructor(n,r){super(n);b(this,"from");this.from=r}annotations(n){return new RE(kB(this.ast,ru(n)),this.from)}}const OB=e=>new RE(new TE(e.ast,!1,!0,{},void 0),e),dD=M(2,(e,t)=>{const n=e.ast;switch(n._tag){case"PropertySignatureDeclaration":return h0(new TE(n.type,n.isOptional,n.isReadonly,n.annotations,t));case"PropertySignatureTransformation":return h0(new f0(n.from,new u0(n.to.type,n.to.isOptional,n.to.isReadonly,n.to.annotations,t),n.decode,n.encode))}}),eI=(e,t)=>on(e,{onNone:()=>Ce(t()),onSome:n=>Ce(n===void 0?t():n)}),m0=e=>pW(e,m0,t=>{const n=m0(t.to);if(n)return new Xa(t.from,n,t.transformation)}),Gge=M(2,(e,t)=>{const n=e.ast;switch(n._tag){case"PropertySignatureDeclaration":{const r=Jn(n.type);return h0(new f0(new Vge(n.type,n.isOptional,n.isReadonly,n.annotations),new u0(m0(r)??r,!1,!0,{},n.defaultValue),a=>eI(a,t),Ge))}case"PropertySignatureTransformation":{const r=n.to.type;return h0(new f0(n.from,new u0(m0(r)??r,!1,n.to.isReadonly,n.to.annotations,n.to.defaultValue),a=>eI(n.decode(a),t),n.encode))}}}),DB=M(2,(e,t)=>e.pipe(Gge(t.decoding),dD(t.constructor))),Br=e=>{const t=e.ast===$h||e.ast===ew?$h:sm(e).ast;return new RE(new TE(t,!0,!0,{},void 0),e)},Qge=uP([qA]),Yge=(e,t)=>{const n=Ai(e),r=[];if(n.length>0){const o=[],l=[],d=[];for(let h=0;h<n.length;h++){const p=n[h],S=e[p];if(fD(S)){const v=S.ast;switch(v._tag){case"PropertySignatureDeclaration":{const R=v.type,O=v.isOptional,x=v.annotations;o.push(new Wn(p,R,O,!0,Qge(v))),l.push(new Wn(p,Jn(R),O,!0,x)),r.push(new Wn(p,R,O,!0,x));break}case"PropertySignatureTransformation":{const R=v.from.fromKey??p;o.push(new Wn(R,v.from.type,v.from.isOptional,!0,v.from.annotations)),l.push(new Wn(p,v.to.type,v.to.isOptional,!0,v.to.annotations)),d.push(new oW(R,p,v.decode,v.encode));break}}}else o.push(new Wn(p,S.ast,!1,!0)),l.push(new Wn(p,Jn(S.ast),!1,!0)),r.push(new Wn(p,S.ast,!1,!0))}if(In(d)){const h=[],p=[];for(const S of t){const{indexSignatures:v,propertySignatures:R}=V3(S.key.ast,S.value.ast);R.forEach(O=>{o.push(O),l.push(new Wn(O.name,Jn(O.type),O.isOptional,O.isReadonly,O.annotations))}),v.forEach(O=>{h.push(O),p.push(new pm(O.parameter,Jn(O.type),O.isReadonly))})}return new Xa(new ri(o,h,{[gh]:"Struct (Encoded side)"}),new ri(l,p,{[gh]:"Struct (Type side)"}),new wv(d))}}const a=[];for(const o of t){const{indexSignatures:l,propertySignatures:d}=V3(o.key.ast,o.value.ast);d.forEach(h=>r.push(h)),l.forEach(h=>a.push(h))}return new ri(r,a)},xB=(e,t)=>{const n=Ai(e);for(const r of n){const a=e[r];if(t[r]===void 0&&fD(a)){const o=a.ast,l=o._tag==="PropertySignatureDeclaration"?o.defaultValue:o.to.defaultValue;l!==void 0&&(t[r]=l())}}return t};function hD(e,t,n=Yge(e,t)){var r;return r=class extends tn(n){static annotations(o){return hD(this.fields,this.records,ui(this.ast,o))}static pick(...o){return Ie($ge(e,...o))}static omit(...o){return Ie(qge(e,...o))}},b(r,"fields",{...e}),b(r,"records",[...t]),b(r,"make",(o,l)=>{const d=xB(e,{...o});return kE(l)?d:vE(r)(d)}),r}function Ie(e,...t){return hD(e,t)}const Wge=e=>At(e).pipe(OB,dD(()=>e)),kt=(e,t)=>Ie({_tag:Wge(e),...t});function $B(e,t,n){var r;return r=class extends hD({},[{key:e,value:t}],n){static annotations(o){return $B(e,t,ui(this.ast,o))}},b(r,"key",e),b(r,"value",t),r}const Ym=e=>$B(e.key,e.value),Oy=(...e)=>t=>tn(nc(t.ast,e)),Dy=M(2,(e,t)=>{const n=Qu(Jn(e.ast),t),r=tn(n.isOptional?US(n.type):n.type);return Fi(e.pipe(Oy(t)),r,{strict:!0,decode:o=>o[t],encode:o=>n.isOptional&&o===void 0?{}:{[t]:o}})});function mD(e,t){var n;return n=class extends tn(t){static annotations(a){return mD(this.from,ui(this.ast,a))}},b(n,"make",(a,o)=>kE(o)?a:vE(n)(a)),b(n,"from",e),n}const Jge=(e,t)=>n=>{const r=on(WU(n.ast),{onNone:()=>[e],onSome:o=>[...o,e]}),a=bf(n.ast,ru({[FU]:r,...t}));return mD(n,a)},g0=e=>tn(bp(e.ast)),qB=e=>tn(th(e.ast)),up=(e,t,n)=>{if(B3(e)&&B3(t)){const r=[...e.propertySignatures];for(const a of t.propertySignatures){const o=a.name,l=r.findIndex(d=>d.name===o);if(l===-1)r.push(a);else{const{isOptional:d,type:h}=r[l];r[l]=new Wn(o,p0(h,a.type,n.concat(o)),d,!0)}}return new ri(r,e.indexSignatures.concat(t.indexSignatures))}throw new Error(IU(e,t,n))},Xge=dW([NA]),fp=(e,t)=>t.map(n=>new r_(n,e.filter,Xge(e))),p0=(e,t,n)=>zr.make(rc([e],[t],n)),Lu=e=>FA(e)?e.types:[e],rc=(e,t,n)=>_v(e,r=>_v(t,a=>{switch(a._tag){case"Literal":{if(Fs(a.literal)&&iC(r)||pc(a.literal)&&P3(r)||mf(a.literal)&&j3(r))return[a];break}case"StringKeyword":{if(a===aC){if(iC(r)||Ip(r)&&Fs(r.literal))return[r];if(ph(r))return fp(r,rc(Lu(r.from),[a],n))}else if(r===aC)return[a];break}case"NumberKeyword":{if(a===oC){if(P3(r)||Ip(r)&&pc(r.literal))return[r];if(ph(r))return fp(r,rc(Lu(r.from),[a],n))}else if(r===oC)return[a];break}case"BooleanKeyword":{if(a===cC){if(j3(r)||Ip(r)&&mf(r.literal))return[r];if(ph(r))return fp(r,rc(Lu(r.from),[a],n))}else if(r===cC)return[a];break}case"Union":return rc(Lu(r),a.types,n);case"Suspend":return[new _f(()=>p0(r,a.f(),n))];case"Refinement":return fp(a,rc(Lu(r),Lu(a.from),n));case"TypeLiteral":{switch(r._tag){case"Union":return rc(r.types,[a],n);case"Suspend":return[new _f(()=>p0(r.f(),a,n))];case"Refinement":return fp(r,rc(Lu(r.from),[a],n));case"TypeLiteral":return[up(r,a,n)];case"Transformation":{const o=r.transformation,l=up(r.from,a,n),d=up(r.to,Jn(a),n);switch(o._tag){case"TypeLiteralTransformation":return[new Xa(l,d,new wv(o.propertySignatureTransformations))];case"ComposeTransformation":return[new Xa(l,d,zA)];case"FinalTransformation":return[new Xa(l,d,new aP((h,p,S,v)=>$s(o.decode(h,p,S,v),R=>({...h,...R})),(h,p,S,v)=>$s(o.encode(h,p,S,v),R=>({...h,...R}))))]}}}break}case"Transformation":{if(sW(r)){if(lC(a.transformation)&&lC(r.transformation))return[new Xa(up(r.from,a.from,n),up(r.to,a.to,n),new wv(a.transformation.propertySignatureTransformations.concat(r.transformation.propertySignatureTransformations)))]}else return rc([a],[r],n);break}}throw new Error(IU(r,a,n))})),NB=M(2,(e,t)=>tn(p0(e.ast,t.ast,[]))),Zge=M(e=>Ni(e[1]),(e,t)=>pD(e,t,mW(e.ast,t.ast))),xy=e=>tn(new _f(()=>e().ast)),MB=Symbol.for("effect/SchemaId/Refine");function IB(e,t,n){var r,a,o;return o=class extends(a=tn(n),r=MB,a){static annotations(d){return IB(this.from,this.filter,ui(this.ast,d))}},b(o,r,e),b(o,"from",e),b(o,"filter",t),b(o,"make",(d,h)=>kE(h)?d:vE(o)(d)),o}const tI=(e,t,n)=>{if(mf(e))return e?be():Ce(new pr(t,n));if(Fs(e))return Ce(new pr(t,n,e));if(e!==void 0){if("_tag"in e)return Ce(e);const r=new pr(t,n,e.message);return Ce(In(e.path)?new rs(e.path,n,r):r)}return be()},epe=(e,t,n)=>{if(pY(e))return tI(e,t,n);if(In(e)){const r=OU(e,a=>tI(a,t,n));if(In(r))return Ce(r.length===1?r[0]:new ir(t,n,r))}return be()};function gD(e,t){return n=>{function r(o,l,d){return epe(e(o,l,d),d,o)}const a=new r_(n.ast,r,ru(t));return IB(n,r,a)}}function pD(e,t,n){var r;return r=class extends tn(n){static annotations(o){return pD(this.from,this.to,ui(this.ast,o))}},b(r,"from",e),b(r,"to",t),r}const Kl=M(e=>Ni(e[0])&&Ni(e[1]),(e,t,n)=>pD(e,t,new Xa(e.ast,t.ast,new aP(n.decode,n.encode)))),Fi=M(e=>Ni(e[0])&&Ni(e[1]),(e,t,n)=>Kl(e,t,{strict:!0,decode:(r,a,o,l)=>Di(n.decode(r,l)),encode:(r,a,o,l)=>Di(n.encode(r,l))})),tpe=M(2,(e,t)=>e.annotations(t)),nI=e=>e instanceof Error?e.message:String(e),npe=e=>Kl(ie.annotations({description:"a string to be decoded into JSON"}),Ak,{strict:!0,decode:(t,n,r)=>HM({try:()=>JSON.parse(t,e==null?void 0:e.reviver),catch:a=>new pr(r,t,nI(a))}),encode:(t,n,r)=>HM({try:()=>JSON.stringify(t,e==null?void 0:e.replacer,e==null?void 0:e.space),catch:a=>new pr(r,t,nI(a))})}).annotations({title:"parseJson",schemaId:zY}),am=(e,t)=>Ni(e)?Zge(am(t),e):npe(e),rpe=EY,spe=e=>t=>t.pipe(gD(n=>Number.isSafeInteger(n),{schemaId:rpe,title:"int",description:"an integer",jsonSchema:{type:"integer"},...e})),ape=TY,ipe=(e,t,n)=>r=>r.pipe(gD(a=>a>=e&&a<=t,{schemaId:ape,title:`between(${e}, ${t})`,description:`a number between ${e} and ${t}`,jsonSchema:{minimum:e,maximum:t},...n}));class jf extends Ut.pipe(spe({identifier:"Int"})){}const yD=(e,t,n,r)=>qme(e,{onFailure:a=>new ir(n,r,a),onSuccess:t});class CE extends od(BG,{identifier:"Uint8ArrayFromSelf",pretty:()=>t=>`new Uint8Array(${JSON.stringify(Array.from(t))})`,arbitrary:()=>t=>t.uint8Array(),equivalence:()=>Zy(at)}){}class ope extends Ut.pipe(ipe(0,255,{identifier:"Uint8",description:"a 8-bit unsigned integer"})){}class LB extends Fi(Et(ope).annotations({description:"an array of 8-bit unsigned integers to be decoded into a Uint8Array"}),CE,{strict:!0,decode:t=>Uint8Array.from(t),encode:t=>Array.from(t)}).annotations({identifier:"Uint8Array"}){}const cpe=(e,t,n)=>Kl(ie.annotations({description:"a string to be decoded into a Uint8Array"}),CE,{strict:!0,decode:(r,a,o)=>Xy(t(r),l=>new pr(o,r,l.message)),encode:r=>Di(n(r))}).annotations({identifier:e}),lpe=cpe("Uint8ArrayFromBase64",lme,cme),upe=e=>tn(zS(e.ast)),Cp=M(e=>Ni(e[0]),(e,t)=>Kl(e,upe(vo(e)),{strict:!0,decode:(n,r,a)=>n.length>0?Di(n[0]):t?Di(t()):Vl(new pr(a,n,"Unable to retrieve the first element of an empty array")),encode:n=>Di(Va(n))})),rI=Symbol.for("effect/SchemaId/ValidDate"),fpe=e=>t=>t.pipe(gD(n=>!Number.isNaN(n.getTime()),{schemaId:rI,[rI]:{noInvalidDate:!0},title:"validDate",description:"a valid Date",...e})),sI=wY;class FB extends od(Xz,{identifier:"DateFromSelf",schemaId:sI,[sI]:{noInvalidDate:!1},description:"a potentially invalid Date instance",pretty:()=>t=>`new Date(${JSON.stringify(t)})`,arbitrary:()=>t=>t.date({noInvalidDate:!1}),equivalence:()=>LG}){}class dpe extends Fi(ie.annotations({description:"a string to be decoded into a Date"}),FB,{strict:!0,decode:t=>new Date(t),encode:t=>$U(t)}).annotations({identifier:"DateFromString"}){}class y0 extends dpe.pipe(fpe({identifier:"Date"})){}const hpe=Ie({_tag:At("None")}).annotations({description:"NoneEncoded"}),mpe=e=>Ie({_tag:At("Some"),value:e}).annotations({description:`SomeEncoded<${Gm(e)}>`}),gpe=e=>bt(hpe,mpe(e)).annotations({description:`OptionEncoded<${Gm(e)}>`}),zB=e=>e._tag==="None"?be():Ce(e.value),ppe=(e,t)=>n=>n.oneof(t,n.record({_tag:n.constant("None")}),n.record({_tag:n.constant("Some"),value:e(n)})).map(zB),ype=e=>on({onNone:()=>"none()",onSome:t=>`some(${e(t)})`}),aI=e=>(t,n,r)=>DQ(t)?Mn(t)?Di(be()):yD(e(t.value,n),Ce,r,t):Vl(new pr(r,t)),_pe=e=>od([e],{decode:t=>aI(Km(t)),encode:t=>aI(id(t))},{description:`Option<${Gm(e)}>`,pretty:ype,arbitrary:ppe,equivalence:MQ}),bpe={_tag:"None"},Spe=e=>({_tag:"Some",value:e});function Bp(e){const t=e;return Fi(gpe(t),_pe(vo(t)),{strict:!0,decode:r=>zB(r),encode:r=>on(r,{onNone:()=>bpe,onSome:Spe})})}const vpe=(e,t)=>n=>{const r=n.array(e(n));return(t.depthIdentifier!==void 0?n.oneof(t,n.constant([]),r):r).map(a=>new Set(a))},wpe=e=>t=>`new Set([${Array.from(t.values()).map(n=>e(n)).join(", ")}])`,Epe=e=>{const t=Zy(e);return Ol((n,r)=>t(Array.from(n.values()),Array.from(r.values())))},iI=e=>(t,n,r)=>UG(t)?yD(e(Array.from(t.values()),n),a=>new Set(a),r,t):Vl(new pr(r,t)),Tpe=(e,t)=>od([e],{decode:n=>iI(Km(Et(n))),encode:n=>iI(id(Et(n)))},{description:t,pretty:wpe,arbitrary:vpe,equivalence:Epe}),Rpe=e=>Tpe(e,`ReadonlySet<${Gm(e)}>`);function _D(e){return Fi(Et(e),Rpe(vo(e)),{strict:!0,decode:t=>new Set(t),encode:t=>Array.from(t)})}const Cpe=e=>Ni(e)||fD(e),UB=e=>Ai(e).every(t=>Cpe(e[t])),bD=e=>"fields"in e?e.fields:bD(e[MB]),SD=e=>UB(e)?Ie(e):Ni(e)?e:Ie(bD(e)),vD=e=>UB(e)?e:bD(e),cd=e=>(t,n)=>kh({kind:"Class",identifier:e,schema:SD(t),fields:vD(t),Base:qoe,annotations:n}),PB=e=>dD(OB(At(e)),()=>e),zi=e=>(t,n,r)=>{class a extends D6{}a.prototype.name=t;const o=vD(n),l=SD(n),d={_tag:PB(t)},h=Vp(d,o),p="message"in h;class S extends kh({kind:"TaggedError",identifier:t,schema:NB(l,Ie(d)),fields:h,Base:a,annotations:r,disableToString:!0}){}return b(S,"_tag",t),p||Object.defineProperty(S.prototype,"message",{get(){return`{ ${Ai(o).map(v=>`${$A(v)}: ${ni(this[v])}`).join(", ")} }`},enumerable:!1,configurable:!0}),S},Vp=(e,t)=>{const n={...e};for(const r of Ai(t)){if(r in e)throw new Error(LU(r));n[r]=t[r]}return n};function kE(e){return mf(e)?e:(e==null?void 0:e.disableValidation)??!1}const oI=xt("effect/Schema/astCache",()=>new WeakMap),kpe=e=>e===void 0?[]:Array.isArray(e)?e:[e],kh=({Base:e,annotations:t,disableToString:n,fields:r,identifier:a,kind:o,schema:l})=>{var q,D;const d=Symbol.for(`effect/Schema/${o}/${a}`),[h,p,S]=kpe(t),v=vo(l),R=v.annotations({identifier:a,...h}),O=v.annotations({[gh]:`${a} (Type side)`,...h}),x=l.annotations({[gh]:`${a} (Constructor)`,...h}),z=l.annotations({[gh]:`${a} (Encoded side)`,...S}),A=l.annotations({[X0]:a,...S,...h,...p}),E=I=>Me(I,d)&&bn(O)(I),T=(D=class extends e{constructor(I={},$=!1){I={...I},o!=="Class"&&delete I._tag,I=xB(r,I),kE($)||(I=vE(x)(I)),super(I,!0)}static get ast(){let I=oI.get(this);if(I)return I;const $=od([l],{decode:()=>(H,K,V)=>H instanceof this||E(H)?Di(H):Vl(new pr(V,H)),encode:()=>(H,K)=>H instanceof this?Di(H):$s(id(O)(H,K),V=>new this(V,!0))},{identifier:a,pretty:H=>K=>`${a}(${H(K)})`,arbitrary:H=>K=>H(K).map(V=>new this(V)),equivalence:Ge,[Sv]:R.ast,...h});return I=Fi(z,$,{strict:!0,decode:H=>new this(H,!0),encode:Ge}).annotations({[Sv]:A.ast,...p}).ast,oI.set(this,I),I}static pipe(){return Fe(this,arguments)}static annotations(I){return tn(this.ast).annotations(I)}static toString(){return`(${String(z)} <-> ${a})`}static make(...I){return new this(...I)}static extend(I){return($,H)=>{const K=vD($),V=SD($),j=Vp(r,K);return kh({kind:o,identifier:I,schema:NB(l,V),fields:j,Base:this,annotations:H})}}static transformOrFail(I){return($,H,K)=>{const V=Vp(r,$);return kh({kind:o,identifier:I,schema:Kl(l,vo(Ie(V)),H),fields:V,Base:this,annotations:K})}}static transformOrFailFrom(I){return($,H,K)=>{const V=Vp(r,$);return kh({kind:o,identifier:I,schema:Kl(wE(l),Ie(V),H),fields:V,Base:this,annotations:K})}}get[(q=rm,d)](){return d}},b(D,q,kk),b(D,"fields",{...r}),b(D,"identifier",a),D);return n!==!0&&Object.defineProperty(T.prototype,"toString",{value(){return`${a}({ ${Ai(r).map(I=>`${$A(I)}: ${ni(this[I])}`).join(", ")} })`},configurable:!0,writable:!0}),T},Ape=Ie({_tag:At("None")}).annotations({identifier:"FiberIdNoneEncoded"}),Ope=Ie({_tag:At("Runtime"),id:jf,startTimeMillis:jf}).annotations({identifier:"FiberIdRuntimeEncoded"}),Dpe=Ie({_tag:At("Composite"),left:xy(()=>Dk),right:xy(()=>Dk)}).annotations({identifier:"FiberIdCompositeEncoded"}),Dk=bt(Ape,Ope,Dpe).annotations({identifier:"FiberIdEncoded"}),xpe=e=>e.letrec(t=>({None:e.record({_tag:e.constant("None")}),Runtime:e.record({_tag:e.constant("Runtime"),id:e.integer(),startTimeMillis:e.integer()}),Composite:e.record({_tag:e.constant("Composite"),left:t("FiberId"),right:t("FiberId")}),FiberId:e.oneof(t("None"),t("Runtime"),t("Composite"))})).FiberId.map(_0),xk=e=>{switch(e._tag){case"None":return"FiberId.none";case"Runtime":return`FiberId.runtime(${e.id}, ${e.startTimeMillis})`;case"Composite":return`FiberId.composite(${xk(e.right)}, ${xk(e.left)})`}},_0=e=>{switch(e._tag){case"None":return ai;case"Runtime":return ZJ(e.id,e.startTimeMillis);case"Composite":return eX(_0(e.left),_0(e.right))}},$pe=e=>Ie({_tag:At("Die"),defect:e}),qpe=Ie({_tag:At("Empty")}),Npe=e=>Ie({_tag:At("Fail"),error:e}),Mpe=Ie({_tag:At("Interrupt"),fiberId:Dk});let Ipe=0;const $k=(e,t)=>{const n=e,r=t,a=xy(()=>o),o=bt(qpe,Npe(n),$pe(r),Mpe,Ie({_tag:At("Sequential"),left:a,right:a}),Ie({_tag:At("Parallel"),left:a,right:a})).annotations({title:`CauseEncoded<${Gm(e)}>`,[X0]:`CauseEncoded${Ipe++}`});return o},Lpe=(e,t)=>n=>n.letrec(r=>({Empty:n.record({_tag:n.constant("Empty")}),Fail:n.record({_tag:n.constant("Fail"),error:e(n)}),Die:n.record({_tag:n.constant("Die"),defect:t(n)}),Interrupt:n.record({_tag:n.constant("Interrupt"),fiberId:xpe(n)}),Sequential:n.record({_tag:n.constant("Sequential"),left:r("Cause"),right:r("Cause")}),Parallel:n.record({_tag:n.constant("Parallel"),left:r("Cause"),right:r("Cause")}),Cause:n.oneof(r("Empty"),r("Fail"),r("Die"),r("Interrupt"),r("Sequential"),r("Parallel"))})).Cause.map(Xu),Fpe=e=>t=>{const n=r=>{switch(r._tag){case"Empty":return"Cause.empty";case"Fail":return`Cause.fail(${e(r.error)})`;case"Die":return`Cause.die(${Ey(r)})`;case"Interrupt":return`Cause.interrupt(${xk(r.fiberId)})`;case"Sequential":return`Cause.sequential(${n(r.left)}, ${n(r.right)})`;case"Parallel":return`Cause.parallel(${n(r.left)}, ${n(r.right)})`}};return n(t)},cI=e=>(t,n,r)=>Xie(t)?yD(e(hh(t),n),Xu,r,t):Vl(new pr(r,t)),zpe=({defect:e,error:t})=>od([t,e],{decode:(n,r)=>cI(Km($k(n,r))),encode:(n,r)=>cI(id($k(n,r)))},{title:`Cause<${t.ast}>`,pretty:Fpe,arbitrary:Lpe});function Xu(e){switch(e._tag){case"Empty":return Yie;case"Fail":return Pl(e.error);case"Die":return Nf(e.defect);case"Interrupt":return Ww(_0(e.fiberId));case"Sequential":return Jie(Xu(e.left),Xu(e.right));case"Parallel":return Wie(Xu(e.left),Xu(e.right))}}function hh(e){switch(e._tag){case"Empty":return{_tag:"Empty"};case"Fail":return{_tag:"Fail",error:e.error};case"Die":return{_tag:"Die",defect:e.defect};case"Interrupt":return{_tag:"Interrupt",fiberId:e.fiberId};case"Sequential":return{_tag:"Sequential",left:hh(e.left),right:hh(e.right)};case"Parallel":return{_tag:"Parallel",left:hh(e.left),right:hh(e.right)}}}const Upe=({defect:e,error:t})=>{const n=t,r=e;return Fi($k(n,r),zpe({error:vo(n),defect:vo(r)}),{strict:!1,decode:o=>Xu(o),encode:o=>hh(o)})};class im extends Fi(Ak,Ak,{strict:!0,decode:t=>{if(To(t)&&"message"in t&&typeof t.message=="string"){const n=new Error(t.message,{cause:t});return"name"in t&&typeof t.name=="string"&&(n.name=t.name),n.stack="stack"in t&&typeof t.stack=="string"?t.stack:"",n}return String(t)},encode:t=>t instanceof Error?{name:t.name,message:t.message}:p4(t)}).annotations({identifier:"Defect"}){}const jB=Symbol.for("effect/Schema/Serializable/symbol"),Ppe=e=>oD(e[jB])(e),wD=Symbol.for("effect/Schema/Serializable/symbolResult"),lI=e=>e[wD].failure,uI=e=>e[wD].success,Os=e=>(t,n,r)=>{var o;const a=Vp({_tag:PB(t)},n.payload);return o=class extends kh({kind:"TaggedRequest",identifier:t,schema:Ie(a),fields:a,Base:ule,annotations:r}){get[jB](){return this.constructor}get[wD](){return{failure:n.failure,success:n.success}}},b(o,"_tag",t),b(o,"success",n.success),b(o,"failure",n.failure),o},jpe=e=>Si(e.ast,[]),Hpe=Es(MA),Si=(e,t)=>{const n=Hpe(e);if(mn(n))switch(e._tag){case"Declaration":return n.value(...e.typeParameters.map(r=>Si(r,t)));case"Refinement":return n.value(Si(e.from,t));default:return n.value()}switch(e._tag){case"NeverKeyword":throw new Error(yY(e,t));case"Transformation":return Si(e.to,t);case"Declaration":case"Literal":case"StringKeyword":case"TemplateLiteral":case"UniqueSymbol":case"SymbolKeyword":case"UnknownKeyword":case"AnyKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"UndefinedKeyword":case"VoidKeyword":case"Enums":case"ObjectKeyword":return at;case"Refinement":return Si(e.from,t);case"Suspend":{const r=xA(()=>Si(e.f(),t));return(a,o)=>r()(a,o)}case"TupleType":{const r=e.elements.map((o,l)=>Si(o.type,t.concat(l))),a=e.rest.map(o=>Si(o.type,t));return Ol((o,l)=>{const d=o.length;if(d!==l.length)return!1;let h=0;for(;h<Math.min(d,e.elements.length);h++)if(!r[h](o[h],l[h]))return!1;if(In(a)){const[p,...S]=a;for(;h<d-S.length;h++)if(!p(o[h],l[h]))return!1;for(let v=0;v<S.length;v++)if(h+=v,!S[v](o[h],l[h]))return!1}return!0})}case"TypeLiteral":{if(e.propertySignatures.length===0&&e.indexSignatures.length===0)return at;const r=e.propertySignatures.map(o=>Si(o.type,t.concat(o.name))),a=e.indexSignatures.map(o=>Si(o.type,t));return Ol((o,l)=>{const d=Object.keys(o),h=Object.getOwnPropertySymbols(o);for(let v=0;v<r.length;v++){const R=e.propertySignatures[v],O=R.name,x=Object.prototype.hasOwnProperty.call(o,O),z=Object.prototype.hasOwnProperty.call(l,O);if(R.isOptional&&x!==z||x&&z&&!r[v](o[O],l[O]))return!1}let p,S;for(let v=0;v<a.length;v++){const R=e.indexSignatures[v],O=ry(R.parameter),x=IA(O);if(x){if(p=p||Object.getOwnPropertySymbols(l),h.length!==p.length)return!1}else if(S=S||Object.keys(l),d.length!==S.length)return!1;const z=x?h:d;for(let A=0;A<z.length;A++){const E=z[A];if(!Object.prototype.hasOwnProperty.call(l,E)||!a[v](o[E],l[E]))return!1}}return!0})}case"Union":{const r=lB(e.types,!0),a=Ai(r.keys),o=a.length;return Ol((l,d)=>{let h=[];if(o>0&&K0(l))for(let S=0;S<o;S++){const v=a[S],R=r.keys[v].buckets;if(Object.prototype.hasOwnProperty.call(l,v)){const O=String(l[v]);Object.prototype.hasOwnProperty.call(R,O)&&(h=h.concat(R[O]))}}r.otherwise.length>0&&(h=h.concat(r.otherwise));const p=h.map(S=>[Si(S,t),bn({ast:S})]);for(let S=0;S<p.length;S++){const[v,R]=p[S];if(R(l)&&R(d)&&v(l,d))return!0}return!1})}}},Bpe=KH,Vpe=Che,Ec=xhe,HB=$he,Kpe=qhe,Gl=_E,Gpe=QH,BB=YH,Hf=Ay,su=WH,Qpe=Phe,VB=Ome,KB=Hhe,Ype=Bhe,Wpe=Vhe,Jpe=Qhe,ls=Yhe,Xpe=Whe,GB=rD,b0=Xhe,ea=Zhe,Zpe=ZH,eye=eB,tye=nme,AE=rme,fI=Symbol.for("effect/Subscribable"),nye=V6,rye="effect/SubscriptionRef",sye=Symbol.for(rye),aye={_A:e=>e};var rz,sz,az,iz,oz,cz;class iye extends(cz=ko,oz=Ul,iz=fI,az=Hne,sz=nye,rz=sye,cz){constructor(n,r,a){super();b(this,"ref");b(this,"pubsub");b(this,"semaphore");b(this,oz,Ul);b(this,iz,fI);b(this,az,P2);b(this,sz,K6);b(this,rz,aye);b(this,"get");this.ref=n,this.pubsub=r,this.semaphore=a,this.get=Lp(this.ref)}commit(){return this.get}get changes(){return F(Lp(this.ref),ft(n=>Mt(YH(this.pubsub,{scoped:!0}),r=>Ahe(Uhe(n),r))),this.semaphore.withPermits(1),eB)}modify(n){return this.modifyEffect(r=>fr(n(r)))}modifyEffect(n){return F(Lp(this.ref),ft(n),ft(([r,a])=>F(j2(this.ref,a),gc(r),RO(NO(this.pubsub,a)))),this.semaphore.withPermits(1))}}const oye=e=>F(tE([D5(),Uw(e),sE(1)]),Mt(([t,n,r])=>new iye(n,t,r))),cye=M(2,(e,t)=>F(j2(e.ref,t),RO(NO(e.pubsub,t)),e.semaphore.withPermits(1))),QB=oye,JS=cye,ED=Yde,lye=HH,YB=Wde,uye=Jde,fye=e=>t=>ea(t,n=>it(()=>e(n))),WB=e=>t=>Qpe(t,n=>F(e(n),Mt(()=>n))),dye=()=>lye([]),dI=(e,t)=>uye(e,n=>OA(n,t)),hI=e=>YB(e,[]),hye=(e,t,n)=>Dge(function*(){const r=yield*ED(e);if(r.length<t)return yield*xge;{const a=r.splice(0,Math.min(n,r.length));return yield*YB(e,r),a}}),mye=e=>ED(e),gye=e=>ED(e).pipe(Mt(t=>t.length)),mI=M(2,(e,t)=>F(e.changes,Ec(t),b0(1),Jpe,Mt(lw))),gI=Symbol.for("effect/Subscribable");var lz,uz,fz;class pye extends(fz=ko,uz=gI,lz=Ul,fz){constructor(n,r){super();b(this,"get");b(this,"changes");b(this,uz,gI);b(this,lz,Ul);this.get=n,this.changes=r}commit(){return this.get}}const OE=e=>new pye(e.get,e.changes);M(2,(e,t)=>OE({get:Mt(e.get,t),changes:su(e.changes,t)}));M(2,(e,t)=>OE({get:ft(e.get,t),changes:VB(e.changes,t)}));OE({get:pO,changes:Ype});const yye=e=>`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}.${e.getMilliseconds().toString().padStart(3,"0")}`,_ye=e=>cge(uge,fge({formatDate:t=>`${yye(t)} ${e}`})),bye={};var Sye={};const Tc=()=>typeof process<"u"&&Sye!==void 0||bye!==void 0?!1:!!(typeof globalThis<"u"&&globalThis.__DEV__),JB=e=>{const t=e==null?void 0:e.toString();if(t!=="[object Object]")return t;try{return JSON.stringify(e,null,2)}catch(n){return console.log(e),"Error while printing error: "+n}},pI=(e,t)=>{try{return new e(t)}catch{return e(t)}},qk=e=>e!==void 0&&e.toLowerCase()!=="false"&&e.toLowerCase()!=="0",yt=(e,...t)=>{if(console.error(e,...t),Tc())debugger;throw new Error(`This should never happen: ${e}`)};var vye=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Zu="1.9.0",yI=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function wye(e){var t=new Set([e]),n=new Set,r=e.match(yI);if(!r)return function(){return!1};var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(a.prerelease!=null)return function(h){return h===e};function o(d){return n.add(d),!1}function l(d){return t.add(d),!0}return function(h){if(t.has(h))return!0;if(n.has(h))return!1;var p=h.match(yI);if(!p)return o(h);var S={major:+p[1],minor:+p[2],patch:+p[3],prerelease:p[4]};return S.prerelease!=null||a.major!==S.major?o(h):a.major===0?a.minor===S.minor&&a.patch<=S.patch?l(h):o(h):a.minor<=S.minor?l(h):o(h)}}var Eye=wye(Zu),Tye=Zu.split(".")[0],$y=Symbol.for("opentelemetry.js.api."+Tye),qy=vye;function TD(e,t,n,r){var a;r===void 0&&(r=!1);var o=qy[$y]=(a=qy[$y])!==null&&a!==void 0?a:{version:Zu};if(!r&&o[e]){var l=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(l.stack||l.message),!1}if(o.version!==Zu){var l=new Error("@opentelemetry/api: Registration of version v"+o.version+" for "+e+" does not match previously registered API v"+Zu);return n.error(l.stack||l.message),!1}return o[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+Zu+"."),!0}function Ny(e){var t,n,r=(t=qy[$y])===null||t===void 0?void 0:t.version;if(!(!r||!Eye(r)))return(n=qy[$y])===null||n===void 0?void 0:n[e]}function RD(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Zu+".");var n=qy[$y];n&&delete n[e]}var Rye=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,o=[],l;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(d){l={error:d}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return o},Cye=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,o;r<a;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},kye=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return dp("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return dp("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return dp("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return dp("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return dp("verbose",this._namespace,t)},e}();function dp(e,t,n){var r=Ny("diag");if(r)return n.unshift(t),r[e].apply(r,Cye([],Rye(n),!1))}var ga;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(ga||(ga={}));function Aye(e,t){e<ga.NONE?e=ga.NONE:e>ga.ALL&&(e=ga.ALL),t=t||{};function n(r,a){var o=t[r];return typeof o=="function"&&e>=a?o.bind(t):function(){}}return{error:n("error",ga.ERROR),warn:n("warn",ga.WARN),info:n("info",ga.INFO),debug:n("debug",ga.DEBUG),verbose:n("verbose",ga.VERBOSE)}}var Oye=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,o=[],l;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(d){l={error:d}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return o},Dye=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,o;r<a;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},xye="diag",S0=function(){function e(){function t(a){return function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];var d=Ny("diag");if(d)return d[a].apply(d,Dye([],Oye(o),!1))}}var n=this,r=function(a,o){var l,d,h;if(o===void 0&&(o={logLevel:ga.INFO}),a===n){var p=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((l=p.stack)!==null&&l!==void 0?l:p.message),!1}typeof o=="number"&&(o={logLevel:o});var S=Ny("diag"),v=Aye((d=o.logLevel)!==null&&d!==void 0?d:ga.INFO,a);if(S&&!o.suppressOverrideMessage){var R=(h=new Error().stack)!==null&&h!==void 0?h:"<failed to generate stacktrace>";S.warn("Current logger will be overwritten from "+R),v.warn("Current logger will overwrite one already registered from "+R)}return TD("diag",v,n,!0)};n.setLogger=r,n.disable=function(){RD(xye,n)},n.createComponentLogger=function(a){return new kye(a)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function $ye(e){return Symbol.for(e)}var qye=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,a){var o=new e(n._currentContext);return o._currentContext.set(r,a),o},n.deleteValue=function(r){var a=new e(n._currentContext);return a._currentContext.delete(r),a}}return e}(),Nye=new qye,Mye=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,o=[],l;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(d){l={error:d}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return o},Iye=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,o;r<a;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},Lye=function(){function e(){}return e.prototype.active=function(){return Nye},e.prototype.with=function(t,n,r){for(var a=[],o=3;o<arguments.length;o++)a[o-3]=arguments[o];return n.call.apply(n,Iye([r],Mye(a),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),Fye=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,o=[],l;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(d){l={error:d}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return o},zye=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,o;r<a;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},zR="context",Uye=new Lye,CD=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return TD(zR,t,S0.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var a,o=[],l=3;l<arguments.length;l++)o[l-3]=arguments[l];return(a=this._getContextManager()).with.apply(a,zye([t,n,r],Fye(o),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return Ny(zR)||Uye},e.prototype.disable=function(){this._getContextManager().disable(),RD(zR,S0.instance())},e}(),Ql;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(Ql||(Ql={}));var XB="0000000000000000",ZB="00000000000000000000000000000000",Pye={traceId:ZB,spanId:XB,traceFlags:Ql.NONE},Kp=function(){function e(t){t===void 0&&(t=Pye),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),kD=$ye("OpenTelemetry Context Key SPAN");function AD(e){return e.getValue(kD)||void 0}function jye(){return AD(CD.getInstance().active())}function OD(e,t){return e.setValue(kD,t)}function Hye(e){return e.deleteValue(kD)}function Bye(e,t){return OD(e,new Kp(t))}function e8(e){var t;return(t=AD(e))===null||t===void 0?void 0:t.spanContext()}var Vye=/^([0-9a-f]{32})$/i,Kye=/^[0-9a-f]{16}$/i;function Gye(e){return Vye.test(e)&&e!==ZB}function Qye(e){return Kye.test(e)&&e!==XB}function t8(e){return Gye(e.traceId)&&Qye(e.spanId)}function Yye(e){return new Kp(e)}var UR=CD.getInstance(),n8=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=UR.active());var a=!!(n!=null&&n.root);if(a)return new Kp;var o=r&&e8(r);return Wye(o)&&t8(o)?new Kp(o):new Kp},e.prototype.startActiveSpan=function(t,n,r,a){var o,l,d;if(!(arguments.length<2)){arguments.length===2?d=n:arguments.length===3?(o=n,d=r):(o=n,l=r,d=a);var h=l??UR.active(),p=this.startSpan(t,o,h),S=OD(h,p);return UR.with(S,d,void 0,p)}},e}();function Wye(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var Jye=new n8,Xye=function(){function e(t,n,r,a){this._provider=t,this.name=n,this.version=r,this.options=a}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,a){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Jye},e}(),Zye=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new n8},e}(),e_e=new Zye,_I=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var a;return(a=this.getDelegateTracer(t,n,r))!==null&&a!==void 0?a:new Xye(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:e_e},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,n,r)},e}(),Ku;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(Ku||(Ku={}));var Al;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(Al||(Al={}));var Nk="[_0-9a-z-*/]",t_e="[a-z]"+Nk+"{0,255}",n_e="[a-z0-9]"+Nk+"{0,240}@[a-z]"+Nk+"{0,13}",r_e=new RegExp("^(?:"+t_e+"|"+n_e+")$"),s_e=/^[ -~]{0,255}[!-~]$/,a_e=/,|=/;function i_e(e){return r_e.test(e)}function o_e(e){return s_e.test(e)&&!a_e.test(e)}var bI=32,c_e=512,SI=",",vI="=",l_e=function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return e.prototype.set=function(t,n){var r=this._clone();return r._internalState.has(t)&&r._internalState.delete(t),r._internalState.set(t,n),r},e.prototype.unset=function(t){var n=this._clone();return n._internalState.delete(t),n},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(n,r){return n.push(r+vI+t.get(r)),n},[]).join(SI)},e.prototype._parse=function(t){t.length>c_e||(this._internalState=t.split(SI).reverse().reduce(function(n,r){var a=r.trim(),o=a.indexOf(vI);if(o!==-1){var l=a.slice(0,o),d=a.slice(o+1,r.length);i_e(l)&&o_e(d)&&n.set(l,d)}return n},new Map),this._internalState.size>bI&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,bI))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}();function u_e(e){return new l_e(e)}var Js=CD.getInstance(),PR="trace",f_e=function(){function e(){this._proxyTracerProvider=new _I,this.wrapSpanContext=Yye,this.isSpanContextValid=t8,this.deleteSpan=Hye,this.getSpan=AD,this.getActiveSpan=jye,this.getSpanContext=e8,this.setSpan=OD,this.setSpanContext=Bye}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=TD(PR,this._proxyTracerProvider,S0.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return Ny(PR)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){RD(PR,S0.instance()),this._proxyTracerProvider=new _I},e}(),_s=f_e.getInstance();const wI=1000000000n,jR=e=>[Number(e/wI),Number(e%wI)],HR=e=>Object.entries(e).reduce((t,[n,r])=>(t[n]=r8(r),t),{}),r8=e=>typeof e=="string"||typeof e=="number"||typeof e=="boolean"?e:typeof e=="bigint"?Number(e):gf(e),XS=Symbol.for("@effect/opentelemetry/Tracer/OtelSpan"),d_e={internal:Ku.INTERNAL,client:Ku.CLIENT,server:Ku.SERVER,producer:Ku.PRODUCER,consumer:Ku.CONSUMER};var dz;dz=XS;class s8{constructor(t,n,r,a,o,l,d,h){b(this,"name");b(this,"parent");b(this,"context");b(this,"links");b(this,"kind");b(this,dz);b(this,"_tag","Span");b(this,"span");b(this,"spanId");b(this,"traceId");b(this,"attributes",new Map);b(this,"sampled");b(this,"status");this.name=r,this.parent=a,this.context=o,this.links=l,this.kind=h,this[XS]=XS;const p=t.active();this.span=n.startSpan(r,{startTime:jR(d),links:l.length>0?l.map(v=>({context:Ik(v.span),attributes:HR(v.attributes)})):void 0,kind:d_e[this.kind]},a._tag==="Some"?i8(p,a.value,o):_s.deleteSpan(p));const S=this.span.spanContext();this.spanId=S.spanId,this.traceId=S.traceId,this.status={_tag:"Started",startTime:d},this.sampled=(S.traceFlags&Ql.SAMPLED)===Ql.SAMPLED}attribute(t,n){this.span.setAttribute(t,r8(n)),this.attributes.set(t,n)}addLinks(t){this.links.push(...t),this.span.addLinks(t.map(n=>({context:Ik(n.span),attributes:HR(n.attributes)})))}end(t,n){const r=jR(t);if(this.status={_tag:"Ended",endTime:t,exit:n,startTime:this.status.startTime},n._tag==="Success")this.span.setStatus({code:Al.OK});else if(ql(n.cause))this.span.setStatus({code:Al.OK,message:Ey(n.cause)}),this.span.setAttribute("span.label","⚠︎ Interrupted"),this.span.setAttribute("status.interrupted",!0);else{const a=roe(n.cause)[0];a?(a.stack=Ey(n.cause,{renderErrorCause:!0}),this.span.recordException(a,r),this.span.setStatus({code:Al.ERROR,message:a.message})):this.span.setStatus({code:Al.OK})}this.span.end(r)}event(t,n,r){this.span.addEvent(t,r?HR(r):void 0,jR(n))}}const a8=Ps("@effect/opentelemetry/Tracer/OtelTracer"),h_e=Mt(a8,e=>cj({span(t,n,r,a,o,l){return new s8(Js,e,t,n,r,a.slice(),o,l)},context(t,n){const r=n.currentSpan;return r===void 0?t():Js.with(i8(Js.active(),r),t)}})),Mk=Ps("@effect/opentelemetry/Tracer/OtelTraceFlags"),v0=Ps("@effect/opentelemetry/Tracer/OtelTraceState"),m_e=e=>{let t=vf();return e.traceFlags&&(t=_a(t,Mk,e.traceFlags)),typeof e.traceState=="string"?t=on(p_e(e.traceState),{onNone:()=>t,onSome:n=>_a(t,v0,n)}):e.traceState&&(t=_a(t,v0,e.traceState)),{_tag:"ExternalSpan",traceId:e.traceId,spanId:e.spanId,sampled:e.traceFlags?(e.traceFlags&Ql.SAMPLED)===Ql.SAMPLED:!0,context:t}},g_e=ft(CO,e=>XS in e?fr(e.span):If(new Xw)),p_e=wU(u_e),i8=(e,t,n)=>t instanceof s8?_s.setSpan(e,t.span):_s.setSpanContext(e,Ik(t,n)),Ik=(e,t)=>({spanId:e.spanId,traceId:e.traceId,isRemote:e._tag==="ExternalSpan",traceFlags:Dn(t?EI(e,t,Mk):Ea(e.context,Mk),()=>Ql.SAMPLED),traceState:Qa(t?EI(e,t,v0):Ea(e.context,v0))}),EI=(e,t,n)=>lc(Ea(t,n),()=>Ea(e.context,n)),y_e=h_e,__e=m_e,DE=g_e,o8=a8,kp=(e,t,n=" ")=>e.split(`
`).map(r=>n.repeat(t)+r).join(`
`),b_e=e=>e==null,S_e=e=>e!=null,TI=()=>{const e=performance.now(),t={_performanceStartTime:e,setAttribute:()=>null,setAttributes:()=>null,addEvent:()=>null,setStatus:()=>null,updateName:()=>null,recordException:()=>null,end:()=>{const r=performance.now()-e,a=r/1e3,o=r%1e3*1e6;t._duration=[a,o]},spanContext:()=>({traceId:"livestore-noop-trace-id",spanId:"livestore-noop-span-id"}),_duration:[0,0]};return t},v_e=()=>new w_e;class w_e{constructor(){b(this,"startSpan",()=>TI())}startActiveSpan(t,n,r,a){let o;if(!(arguments.length<2))return arguments.length===2?o=n:arguments.length===3?o=r:o=a,o(TI())}}const RI={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_LIVESTORE_SYNC_URL:"http://localhost:8787"};var CI={};const My=e=>{if(typeof process<"u"&&CI!==void 0)return CI[e];if(RI!==void 0)return RI[e]},hp=My("LS_TRACE_VERBOSE")!==void 0||My("VITE_LS_TRACE_VERBOSE")!==void 0,Rc=qk(My("LS_DEV"))||qk(My("VITE_LS_DEV"));qk(My("CI"));const DD=typeof navigator<"u"&&navigator.product==="ReactNative",df=(e,t)=>{if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,a;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!df(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!df(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==void 0&&e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==void 0&&e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){var o=a[r];if(!df(e[o],t[o]))return!1}return!0}return e!==e&&t!==t},E_e=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],T_e=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],R_e=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],C_e=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],kI=(e,t,n)=>{let r=e;return typeof t=="string"||Array.isArray(t)?r=e.toLocaleString(t,n):(t===!0||n!==void 0)&&(r=e.toLocaleString(void 0,n)),r};function k_e(e,t){if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);t={bits:!1,binary:!1,space:!0,...t};const n=t.bits?t.binary?C_e:R_e:t.binary?T_e:E_e,r=t.space?" ":"";if(t.signed&&e===0)return` 0${r}${n[0]}`;const a=e<0,o=a?"-":t.signed?"+":"";a&&(e=-e);let l;if(t.minimumFractionDigits!==void 0&&(l={minimumFractionDigits:t.minimumFractionDigits}),t.maximumFractionDigits!==void 0&&(l={maximumFractionDigits:t.maximumFractionDigits,...l}),e<1){const S=kI(e,t.locale,l);return o+S+r+n[0]}const d=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),n.length-1);e/=(t.binary?1024:1e3)**d,l||(e=e.toPrecision(3));const h=kI(Number(e),t.locale,l),p=n[d];return o+h+r+p}const c8=e=>Array.isArray(e);function Bf(e){debugger;throw new Error(`A case was not handled for value: ${A_e(JB(e),1e3)}`)}const AI=(e,t)=>{if(e===!1){debugger;throw new Error(`This should never happen: ${t}`)}},A_e=(e,t)=>e.length>t?e.slice(0,t)+"...":e,OI=e=>{debugger;throw new Error(`Not yet implemented: ${e}`)},DI=(e,t)=>{let n=!1,r=!1;const a=()=>{r?(e(),r=!1,setTimeout(a,t)):n=!1};return()=>{if(n){r=!0;return}e(),n=!0,setTimeout(a,t)}},O_e=e=>{const t=new Map;return n=>{if(t.has(n))return t.get(n);const r=e(n);return t.set(n,r),r}},D_e=e=>typeof(e==null?void 0:e.then)=="function",ld=e=>ke(function*(){const t=yield*k_();return yield*Ss(n=>gr(t,n)),yield*e(t).pipe(C_(t))}),x_e=e=>D_(()=>e()).pipe(Ry(t=>nu(t)?t:D_e(t)?Lf(()=>t):fr(t))),$_e=(...e)=>Ss(()=>TO(...e)),en=e=>Sa(e,t=>ke(function*(){if(ql(t))return;const n=yield*DE.pipe(Ff("NoSuchElementException",a=>fr(void 0))),r=t.toString().split(`
`)[0];yield*Cy(r,t).pipe(a=>n===void 0?a:Nl({spanId:n.spanContext().spanId,traceId:n.spanContext().traceId})(a))})),Ja=(e,t)=>Tle(TO(e).pipe(Nl(t??{})),Nle,()=>yw(dge)),xD=({label:e,duration:t})=>n=>ke(function*(){const r=yield*Lm();let a=!1;const o=wO(t).pipe(Zs(()=>(a=!0,ki(`${e}: Took longer than ${t}ms`))),vs(r),Li),l=Date.now(),d=yield*n.pipe(tr,gle(oE(function*(){const h=Date.now();yield*wa(o),a&&(yield*ki(`${e}: Interrupted after ${h-l}ms`))})));if(a){const h=Date.now();yield*ki(`${e}: Actual duration: ${h-l}ms`)}return yield*wa(o),yield*d}),q_e=e=>t=>Zs(t,n=>it(()=>e(n))),l8=e=>t=>SO(it(()=>performance.mark(`${e}:start`)),()=>t,()=>it(()=>{performance.mark(`${e}:end`),performance.measure(e,`${e}:start`,`${e}:end`)})),u8=()=>{const e=kce();return e._tag==="None"||e.value.currentSpan===void 0?"No current fiber":""},N_e=()=>console.log(u8());globalThis.getSpanTrace=u8;globalThis.logSpanTrace=N_e;class xE extends HA("@effect/platform/Transferable/Collector")(){}const f8=()=>{let e=[];const t=a=>{e.push(...a)},n=()=>e,r=()=>{const a=e;return e=[],a};return xE.of({unsafeAddAll:t,addAll:a=>it(()=>t(a)),unsafeRead:n,read:it(n),unsafeClear:r,clear:it(r)})},M_e=it(f8),I_e=e=>ft(Sle(xE),on({onNone:()=>wt,onSome:t=>t.addAll(e)})),d8=M(2,(e,t)=>Kl(wE(e),e,{strict:!0,decode:Di,encode:n=>gc(I_e(t(n)),n)})),$E=d8(br,e=>[e]),Ah=d8(CE,e=>[e.buffer]),L_e=Symbol.for("@effect/platform/WorkerError"),xI=L_e;var hz,mz;const bl=class bl extends(mz=zi()("WorkerError",{reason:At("spawn","decode","send","unknown","encode"),cause:im}),hz=xI,mz){constructor(){super(...arguments);b(this,hz,xI)}get message(){switch(this.reason){case"send":return"An error occurred calling .postMessage";case"spawn":return"An error occurred while spawning a worker";case"decode":return"An error occurred during decoding";case"encode":return"An error occurred during encoding";case"unknown":return"An unexpected error occurred"}}};b(bl,"Cause",Upe({error:bl,defect:im})),b(bl,"encodeCause",kl(bl.Cause)),b(bl,"decodeCause",Pf(bl.Cause));let Cc=bl;const $I=Symbol.for("@effect/platform/Worker/PlatformWorker"),$D=Ps("@effect/platform/Worker/PlatformWorker"),qI=Symbol.for("@effect/platform/Worker/WorkerManager"),Iy=Ps("@effect/platform/Worker/WorkerManager"),h8=Ps("@effect/platform/Worker/Spawner"),F_e=ke(function*(){const e=yield*$D;let t=0;return Iy.of({[qI]:qI,spawn({encode:n,initialMessage:r}){return ke(function*(){const a=t++;let o=0;const l=new Map,d=f8(),h=n?A=>Sn(d.clear,EO(n(A),xE,d)):fr,p=yield*jt(),S=yield*e.spawn(a);yield*S.run(A=>A[0]===0?ste(p,wt):v(A[1])).pipe(yle(A=>os(l.values(),E=>Iu in E?cf(E,A):E.failCause(A))),Sa(ki),nE(RH(1e3)),Nl({package:"@effect/platform",module:"Worker"}),Bn,jn),yield*Ss(()=>Sn(os(l.values(),A=>Iu in A?yN(A):A.end,{discard:!0}),it(()=>l.clear())));const v=A=>Zn(()=>{const E=l.get(A[0]);if(!E)return wt;switch(A[1]){case 0:return Iu in E?On(E,A[2][0]):E.offerAll(A[2]);case 1:return A.length===2?Iu in E?yN(E):E.end:Iu in E?On(E,A[2][0]):Sn(E.offerAll(A[2]),E.end);case 2:case 3:{if(A[1]===2)return Iu in E?D2(E,A[2]):E.fail(A[2]);const T=Cc.decodeCause(A[2]);return Iu in E?cf(E,T):E.failCause(T)}}}),R=(A,E)=>Zh(T=>{const q=T.getFiberRef(b5),D=Ea(q,oj).pipe(NQ($=>$._tag==="Span")),I=o++;return E.pipe(Zs($=>(l.set(I,$),h(A).pipe(Zs(H=>S.send([I,0,H,D._tag==="Some"?[D.value.traceId,D.value.spanId,D.value.sampled]:void 0],d.unsafeRead())),Mm(H=>yge($)?$.failCause(H):cf($,H))))),Mt($=>({id:I,mailbox:$})))}),O=({id:A},E)=>{const T=it(()=>l.delete(A));return Dm(E)?Sn(Wa(S.send([A,1])),T):T},x=A=>Gpe(sme(R(A,_ge()),({mailbox:E})=>bge(E),O)),z=A=>SO(R(A,jt()),({mailbox:E})=>qn(E),O);return yield*qn(p),r&&(yield*it(r).pipe(ft(z),sd(A=>new Cc({reason:"spawn",cause:A})))),{id:a,execute:x,executeEffect:z}})}})}),z_e=Ple(Iy,F_e),m8=e=>ke(function*(){const n=yield*(yield*Iy).spawn({...e,encode(o){return sd(Ppe(o),l=>new Cc({reason:"encode",cause:l}))}}),r=o=>{const l=Rp(uI(o)),d=Rp(lI(o));return F(n.execute(o),Vpe(h=>ft(d(h),If)),VB(l))},a=o=>{const l=Rp(uI(o)),d=Rp(lI(o));return Cle(n.executeEffect(o),{onFailure:h=>ft(d(h),If),onSuccess:l})};return Ge({id:n.id,execute:r,executeEffect:a})}),U_e=e=>ke(function*(){const t=yield*Iy,n=new Set,r=F(m8(e),Zs(l=>it(()=>n.add(l))),Zs(l=>Ss(()=>it(()=>n.delete(l)))),e.onCreate?Zs(e.onCreate):Ge,EO(Iy,t)),a=yield*"timeToLive"in e?Oge({acquire:r,min:e.minSize,max:e.maxSize,concurrency:e.concurrency,targetUtilization:e.targetUtilization,timeToLive:e.timeToLive}):Age({acquire:r,size:e.size,concurrency:e.concurrency,targetUtilization:e.targetUtilization}),o={backing:a,broadcast:l=>os(n,d=>d.executeEffect(l),{concurrency:"unbounded",discard:!0}),execute:l=>eye(Mt(a.get,d=>d.execute(l))),executeEffect:l=>zf(ft(a.get,d=>d.executeEffect(l)))};return yield*zf(a.get),o}),P_e=e=>x_(h8,e),j_e=()=>e=>$D.of({[$I]:$I,spawn(t){return ke(function*(){const n=yield*h8;let r;const a=[];return{run:d=>Im(h=>ke(function*(){const p=yield*h5,S=yield*e.setup({worker:n(t),scope:p});r=S,yield*Hl(p,it(()=>{r=void 0}));const v=(yield*Lm()).pipe(rde(IW(xoe))),R=yield*Sme(),O=EH(v);if(yield*e.listen({port:S,scope:p,emit(x){wme(R,O(d(x)))},deferred:R.deferred}),a.length>0){for(const[x,z]of a)S.postMessage([0,x],z);a.length=0}return yield*h(Eme(R))}).pipe(zf)),send:(d,h)=>D_({try:()=>{r===void 0?a.push([d,h]):r.postMessage([0,d],h)},catch:p=>new Cc({reason:"send",cause:p})})}})}}),H_e=j_e,B_e=$D,V_e=z_e,K_e=m8,G_e=U_e,Q_e=P_e,qD=(e,t)=>(n,r)=>ke(function*(){const a=yield*M_e;return[yield*cD(e,t)(n,r).pipe(EO(xE,a)),a.unsafeRead()]}),kS=(e,t)=>(n,r)=>{const a=Mge(e,t)(n,r);return a._tag==="Left"?yt("encodeSyncDebug failed:",a.left):a.right},Y_e=e=>Kl(vo(e),wE(e),{decode:Fme(e),encode:Ime(e)});Y_e(lpe);const Vf=bt(ie,Ut,wc,uD,Et(xy(()=>Vf)),Ym({key:ie,value:xy(()=>Vf)})).annotations({title:"JsonValue"}),ws=Symbol("WebChannel"),Ly=kt("WebChannel.DebugPing",{message:ie,payload:Br(ie)}),w0=kt("WebChannel.Ping",{requestId:ie}),E0=kt("WebChannel.Pong",{requestId:ie}),W_e=bt(w0,E0),NI=e=>({send:bt(e.send,Ly,w0,E0),listen:bt(e.listen,Ly,w0,E0)}),P_=e=>Me(e,"send")&&Me(e,"listen")?NI(e):NI({send:e,listen:e}),qE=e=>t=>t.pipe(HB(oE(function*(n){return n._tag==="Right"&&bn(Ly)(n.right)?(yield*ss(`WebChannel:ping [${e}] ${n.right.message}`,n.right.payload),!1):!0}))),ND=({channelName:e,schema:t})=>ld(n=>ke(function*(){const r=P_(t),a=new BroadcastChannel(e);yield*Ss(()=>D_(()=>a.close()).pipe(_O));const o=p=>ke(function*(){const S=yield*cD(r.send)(p);a.postMessage(S)}),l=AE(a,"message").pipe(su(p=>Qm(r.listen)(p.data)),qE(e)),d=yield*jt().pipe(Pn(tu(Ra))),h=!1;return{[ws]:ws,send:o,listen:l,closedDeferred:d,shutdown:gr(n,er("shutdown")),schema:r,supportsTransferables:h}}).pipe(Ft(`WebChannel:broadcastChannel(${e})`))),Lk=({listenWindow:e,sendWindow:t,targetOrigin:n="*",ids:r,schema:a})=>ld(o=>ke(function*(){const l=P_(a),d={sendTotal:0,listenTotal:0,targetOrigin:n,ids:r},h=Ie({message:l.listen,from:At(r.other),to:At(r.own)}).annotations({title:"webmesh.WindowMessageListen"}),p=Ie({message:l.send,from:At(r.own),to:At(r.other)}).annotations({title:"webmesh.WindowMessageSend"}),S=x=>ke(function*(){d.sendTotal++;const[z,A]=yield*qD(p)({message:x,from:r.own,to:r.other});t.postMessage(z,n,A)}),v=AE(e,"message").pipe(Ec(x=>bn(wE(h))(x.data)),su(x=>(d.listenTotal++,Qm(l.listen)(x.data.message))),qE("window")),R=yield*jt().pipe(Pn(tu(Ra))),O=!0;return{[ws]:ws,send:S,listen:v,closedDeferred:R,shutdown:gr(o,er("shutdown")),schema:l,supportsTransferables:O,debugInfo:d}}).pipe(Ft("WebChannel:windowChannel"))),J_e=({port:e,schema:t,debugId:n})=>ld(r=>ke(function*(){const a=P_(t),o=n===void 0?"messagePort":`messagePort:${n}`,l=S=>ke(function*(){const[v,R]=yield*qD(a.send)(S);e.postMessage(v,R)}),d=AE(e,"message").pipe(su(S=>Qm(a.listen)(S.data)),qE(o));e.start();const h=yield*jt().pipe(Pn(tu(Ra))),p=!0;return yield*Ss(()=>D_(()=>e.close()).pipe(_O)),{[ws]:ws,send:l,listen:d,closedDeferred:h,shutdown:gr(r,er("shutdown")),schema:a,supportsTransferables:p}}).pipe(Ft("WebChannel:messagePortChannel")));xt("livestore:sameThreadChannels",()=>new Map);const MI=({port:e,schema:t,debugId:n})=>ld(r=>ke(function*(){const a=P_(t),o=n===void 0?"messagePort":`messagePort:${n}`,l=new Map,d=kt("ChannelRequest",{id:ie,payload:bt(a.listen,a.send)}).annotations({title:"webmesh.ChannelRequest"}),h=kt("ChannelRequestAck",{reqId:ie}).annotations({title:"webmesh.ChannelRequestAck"}),p=bt(d,h).annotations({title:"webmesh.ChannelMessage"}),S={sendTotal:0,sendPending:0,listenTotal:0,id:n},v=z=>ke(function*(){S.sendTotal++,S.sendPending++;const A=crypto.randomUUID(),[E,T]=yield*qD(p)({_tag:"ChannelRequest",id:A,payload:z}),q=yield*jt();l.set(A,q),e.postMessage(E,T),yield*q,l.delete(A),S.sendPending--}),R=AE(e,"message").pipe(su(z=>Qm(p)(z.data)),ea(z=>ke(function*(){z._tag==="Right"&&(z.right._tag==="ChannelRequestAck"?yield*On(l.get(z.right.reqId),void 0):z.right._tag==="ChannelRequest"&&(S.listenTotal++,e.postMessage(kl(p)({_tag:"ChannelRequestAck",reqId:z.right.id}))))})),Kpe(z=>z._tag==="Left"?Ce(z):z.right._tag==="ChannelRequest"?Ce(rt(z.right.payload)):be()),z=>z,qE(o));e.start();const O=yield*jt().pipe(Pn(tu(Ra))),x=!0;return yield*Ss(()=>D_(()=>e.close()).pipe(_O)),{[ws]:ws,send:v,listen:R,closedDeferred:O,shutdown:gr(r,er("shutdown")),schema:a,supportsTransferables:x,debugInfo:S}}).pipe(Ft("WebChannel:messagePortChannelWithAck"))),II=(e,t)=>ke(function*(){const n=yield*Xs().pipe(Pn(Ns)),r={current:void 0};if(yield*e.listen.pipe(t!=null&&t.heartbeat?HB(oE(function*(o){if(o._tag==="Right"&&bn(W_e)(o.right)){if(o.right._tag==="WebChannel.Ping")yield*e.send(E0.make({requestId:o.right.requestId}));else{const{deferred:l,requestId:d}=r.current??yt("No pending ping");d!==o.right.requestId&&yt("Received pong for unexpected requestId",d,o.right.requestId),yield*On(l,void 0)}return!1}return!0})):Ge,WB(o=>IO(n,o)),ls,jn),t!=null&&t.heartbeat){const{interval:o,timeout:l}=t.heartbeat;yield*ke(function*(){for(;;){yield*wO(o);const d=crypto.randomUUID();yield*e.send(w0.make({requestId:d}));const h=yield*jt();r.current={deferred:h,requestId:d},yield*h.pipe(em(l),Ff("TimeoutException",()=>e.shutdown))}}).pipe(Ft("WebChannel:heartbeat"),jn)}const a=Hf(n,{maxChunkSize:1});return{[ws]:ws,send:e.send,listen:a,closedDeferred:e.closedDeferred,shutdown:e.shutdown,schema:e.schema,supportsTransferables:e.supportsTransferables,debugInfo:{innerDebugInfo:e.debugInfo,listenQueueSize:n}}}),g8=e=>t=>{if(Me(console,"createTask")===!1)return t;const n=ke(function*(){const a=yield*Ale;return cj({span:(o,...l)=>{const d=a.span(o,...l),h=e(o);return d.runInTask=p=>h.run(p),d},context:(o,l)=>{const d=Ea(oj)(l.currentContext);if(d._tag==="None")return a.context(o,l);const h=d.value;if(h._tag==="ExternalSpan")return a.context(o,l);const p=h;return"runInTask"in p&&typeof p.runInTask=="function"?p.runInTask(()=>a.context(o,l)):a.context(o,l)}})}),r=F(n,Mt(w5),v5);return vs(t,r)},X_e=H_e()({setup({scope:e,worker:t}){const n="port"in t?t.port:t;return gc(Hl(e,it(()=>{n.postMessage([1])})),n)},listen({deferred:e,emit:t,port:n,scope:r}){function a(l){t(l.data)}function o(l){x2(e,new Cc({reason:"unknown",cause:l.error??l.message}))}return n.addEventListener("message",a),n.addEventListener("error",o),"start"in n&&n.start(),Hl(r,it(()=>{n.removeEventListener("message",a),n.removeEventListener("error",o)}))}}),Z_e=x_(B_e,X_e),ebe=Hle(V_e,Z_e),tbe=e=>jle(ebe,Q_e(e)),LI=tbe,nbe=F(TH(Ef(10),4),sde(RH(Tv(1))),ade(ide),ode(kP(Tv(10)))),rbe=(e,t)=>gO((n,r)=>{r.aborted||navigator.locks.request(t,{signal:r,mode:"exclusive",ifAvailable:!1},a=>(n(wt),aE(qn(e)))).catch(a=>{if(!(a.code===20&&a.message==="signal is aborted without reason"))throw a})}),sbe=(e,t)=>gO((n,r)=>{navigator.locks.request(t,{mode:"exclusive",ifAvailable:!0},a=>{n(fr(a!==null));const o=new Promise(l=>{r.addEventListener("abort",()=>{l()})});return Promise.race([aE(qn(e)),o])})}),abe=dP(),T0=vB(abe)(jf),ibe=dP(),om=vB(ibe)(jf),Fy=0,Sr=Ie({global:om,client:T0}).annotations({title:"LiveStore.EventSequenceNumber"}),xi=e=>e.client===0?`e${e.global}`:`e${e.global}+${e.client}`,MD=(e,t)=>e.global===t.global&&e.client===t.client,obe={global:0,client:Fy},ZS=(e,t)=>e.global>t.global||e.global===t.global&&e.client>t.client,R0=(e,t)=>e.global>t.global||e.global===t.global&&e.client>=t.client,cbe=(e,t)=>e.global>t.global||e.global===t.global&&e.client>t.client?e:t,lbe=e=>bn(Sr)(e)?e:Pf(Sr)(e),ID=(e,t)=>t?{seqNum:{global:e.global,client:e.client+1},parentSeqNum:e}:{seqNum:{global:e.global+1,client:Fy},parentSeqNum:{global:e.global,client:Fy}},p8=e=>{const t=["text","integer","real","blob"];return typeof e=="object"&&e!==null&&"columnType"in e&&t.includes(e.columnType)},LD=Symbol.for("NoDefault"),ube=e=>typeof e=="object"&&e!==null&&"sql"in e&&typeof e.sql=="string",j_=e=>t=>{const n=(t==null?void 0:t.nullable)??!1,r=(t==null?void 0:t.schema)??_8(e),a=n===!0?TB(r):r,o=(t==null?void 0:t.default)===void 0||t.default===LD?be():Ce(t.default);return{columnType:e,schema:a,default:o,nullable:n,primaryKey:(t==null?void 0:t.primaryKey)??!1}},fbe=e=>j_(e),Ri=j_("text"),ba=j_("integer"),dbe=j_("real"),y8=j_("blob"),NE=(e,t)=>n=>{const r=(n==null?void 0:n.nullable)??!1,a=t._tag==="baseSchemaFn"?t.baseSchemaFn(n==null?void 0:n.schema):t.baseSchema,o=r===!0?TB(a):a,l=(n==null?void 0:n.default)===void 0||n.default===LD?be():Ce(n.default);return{columnType:e,schema:o,default:l,nullable:r,primaryKey:(n==null?void 0:n.primaryKey)??!1}},FD=NE("text",{_tag:"baseSchemaFn",baseSchemaFn:e=>am(e??br)}),hbe=NE("text",{_tag:"baseSchema",baseSchema:y0}),mbe=NE("integer",{_tag:"baseSchema",baseSchema:Fi(Ut,FB,{decode:e=>new Date(e),encode:e=>e.getTime()})}),gbe=NE("integer",{_tag:"baseSchema",baseSchema:Fi(Ut,wc,{decode:e=>e===1,encode:e=>e?1:0})}),_8=e=>{switch(e){case"text":return ie;case"integer":return Ut;case"real":return Ut;case"blob":return CE;default:return Bf(e)}},pbe=e=>Array.isArray(e)?Object.fromEntries(e.map(t=>[t.name,t])):e,b8=(e,t,n)=>{const r={_tag:"table",name:e,columns:ybe(t),indexes:_be(n??[])};return{name:e,columns:t,indexes:n,ast:r}},S8=e=>Ie(Object.fromEntries(e.ast.columns.map(t=>[t.name,t.schema]))).annotations({title:e.name}),v8=e=>Ie(Object.fromEntries(e.ast.columns.map(t=>[t.name,t.nullable===!0||t.default._tag==="Some"?Br(t.schema):t.schema]))).annotations({title:e.name}),ybe=e=>Object.entries(e).map(([t,n])=>({_tag:"column",name:t,schema:n.schema,default:n.default,nullable:n.nullable??!1,primaryKey:n.primaryKey??!1,type:{_tag:n.columnType}})),_be=e=>e.map(t=>({_tag:"index",columns:t.columns,name:t.name,unique:t.isUnique??!1})),bbe=Object.freeze(Object.defineProperty({__proto__:null,NoDefault:LD,blob:y8,boolean:gbe,column:fbe,datetime:hbe,datetimeInteger:mbe,defaultSchemaForColumnType:_8,insertStructSchemaForTable:v8,integer:ba,isColumnDefinition:p8,isSqlDefaultValue:ube,json:FD,makeDbSchema:pbe,real:dbe,structSchemaForTable:S8,table:b8,text:Ri},Symbol.toStringTag,{value:"Module"})),Sbe=e=>{let t=0,n,r;if(e.length===0)return t;for(n=0;n<e.length;n++)r=e.charCodeAt(n),t=(t<<5)-t+r,t=Math.trunc(t);return t},vbe=e=>Sbe(JSON.stringify(ev(e))),ev=e=>{switch(e._tag){case"table":return{_tag:"table",name:e.name,columns:e.columns.map(t=>ev(t)),indexes:e.indexes.map(t=>ev(t))};case"column":return{_tag:"column",name:e.name,type:e.type._tag,primaryKey:e.primaryKey,nullable:e.nullable,default:e.default};case"index":return{_tag:"index",columns:e.columns,name:e.name,unique:e.unique,primaryKey:e.primaryKey};case"foreignKey":return{_tag:"foreignKey",references:e.references,key:e.key,columns:e.columns};case"dbSchema":return{_tag:"dbSchema",tables:e.tables.map(ev)};default:throw new Error(`Unreachable: ${e}`)}},kc=Symbol.for("QueryBuilderAst"),Kf=Symbol.for("QueryBuilder"),lo=e=>Me(e,Kf),wbe=Ie({mergeCounter:Ut,eventNum:Sr});Ie({fileName:ie},{key:ie,value:br}).annotations({title:"LiveStore.PersistenceInfo"});const BR=Ie({done:Ut,total:Ut}),Ebe=bt(Ie({stage:At("loading")}),Ie({stage:At("migrating"),progress:BR}),Ie({stage:At("rehydrating"),progress:BR}),Ie({stage:At("syncing"),progress:BR}),Ie({stage:At("done")})).annotations({title:"BootStatus"}),$i=Symbol.for("@livestore/session-id"),sc=class sc extends zi()("LiveStore.UnexpectedError",{cause:im,note:Br(ie),payload:Br(br)}){};b(sc,"mapToUnexpectedError",t=>t.pipe(sd(n=>bn(sc)(n)?n:new sc({cause:n})),d5(n=>new sc({cause:n})))),b(sc,"mapToUnexpectedErrorStream",t=>t.pipe(KB(n=>bn(sc)(n)?n:new sc({cause:n}))));let Ct=sc;class C0 extends zi()("LiveStore.IntentionalShutdownCause",{reason:At("devtools-reset","devtools-import","adapter-reset","manual")}){}class tv extends zi()("LiveStore.StoreInterrupted",{reason:ie}){}class Ap extends zi()("LiveStore.SqliteError",{query:Br(Ie({sql:ie,bindValues:bt(Ym({key:ie,value:br}),Et(br))})),code:Br(bt(Ut,ie)),cause:im,note:Br(ie)}){}const Tbe=Ie({tableName:ie,hashes:Ie({expected:Ut,actual:Br(Ut)})}),Rbe=Ie({migrations:Et(Tbe)}),AS=(e,t,n)=>e.length===0?"":`WHERE ${e.map(({col:a,op:o,value:l})=>{if(l===null){if(o!=="="&&o!=="!=")throw new Error(`Unsupported operator for NULL value: ${o}`);return`${a} ${o==="="?"IS":"IS NOT"} NULL`}const d=t.sqliteDef.columns[a];if(d===void 0)throw new Error(`Column ${a} not found`);if(o==="IN"||o==="NOT IN"){if(!Array.isArray(l))return yt(`Expected array value for ${o} operator but got`,l);if(l.length===0)return o==="IN"?"0=1":"1=1";const p=l.map(v=>kl(d.schema)(v));n.push(...p);const S=p.map(()=>"?").join(", ");return`${a} ${o} (${S})`}else{const p=kl(d.schema)(l);return n.push(p),`${a} ${o} ?`}}).join(" AND ")}`,VR=e=>!e||e.length===0?"":` RETURNING ${e.join(", ")}`,FI=e=>{const t=[];if(e._tag==="InsertQuery"){const S=Object.keys(e.values),v=S.map(()=>"?").join(", "),R=kl(e.tableDef.insertSchema)(e.values);S.forEach(A=>{t.push(R[A])});let O="INSERT",x="";if(e.onConflict)if(e.onConflict.action._tag==="replace")O="INSERT OR REPLACE";else if(x=` ON CONFLICT (${e.onConflict.targets.join(", ")}) `,e.onConflict.action._tag==="ignore")x+="DO NOTHING";else{const A=e.onConflict.action.update,E=Object.keys(A);if(E.length===0)throw new Error("No update columns provided for ON CONFLICT DO UPDATE");const T=E.map(q=>A[q]===void 0?`${q} = excluded.${q}`:`${q} = ?`).join(", ");E.forEach(q=>{const D=A[q];if(D!==void 0){const I=e.tableDef.sqliteDef.columns[q];if(I===void 0)throw new Error(`Column ${q} not found`);const $=kl(I.schema)(D);t.push($)}}),x+=`DO UPDATE SET ${T}`}let z=`${O} INTO '${e.tableDef.sqliteDef.name}' (${S.join(", ")}) VALUES (${v})`;return z+=x,z+=VR(e.returning),{query:z,bindValues:t}}if(e._tag==="UpdateQuery"){const S=Object.keys(e.values);if(S.length===0)return console.warn(`UPDATE query requires at least one column to set (for table ${e.tableDef.sqliteDef.name}). Running no-op query instead to skip this update query.`),{query:"SELECT 1",bindValues:[]};const v=kl(g0(e.tableDef.rowSchema))(e.values);S.forEach(x=>{t.push(v[x])});let R=`UPDATE '${e.tableDef.sqliteDef.name}' SET ${S.map(x=>`${x} = ?`).join(", ")}`;const O=AS(e.where,e.tableDef,t);return O&&(R+=` ${O}`),R+=VR(e.returning),{query:R,bindValues:t}}if(e._tag==="DeleteQuery"){let S=`DELETE FROM '${e.tableDef.sqliteDef.name}'`;const v=AS(e.where,e.tableDef,t);return v&&(S+=` ${v}`),S+=VR(e.returning),{query:S,bindValues:t}}if(e._tag==="CountQuery")return{query:[`SELECT COUNT(*) as count FROM '${e.tableDef.sqliteDef.name}'`,AS(e.where,e.tableDef,t)].filter(v=>v.length>0).join(" "),bindValues:t};if(e._tag==="RowQuery"){const S=e.tableDef.sqliteDef.columns.id;if(S===void 0)throw new Error("Column id not found for ROW query");const v=e.id===$i?e.id:kl(S.schema)(e.id);return{query:`SELECT * FROM '${e.tableDef.sqliteDef.name}' WHERE id = ?`,bindValues:[v]}}const r=`SELECT ${e.select.columns.length===0?"*":e.select.columns.join(", ")}`,a=`FROM '${e.tableDef.sqliteDef.name}'`,o=AS(e.where,e.tableDef,t),l=e.orderBy.length>0?`ORDER BY ${e.orderBy.map(({col:S,direction:v})=>`${S} ${v}`).join(", ")}`:"",d=e.limit._tag==="Some"?"LIMIT ?":"",h=e.offset._tag==="Some"?"OFFSET ?":"";return e.offset._tag==="Some"&&t.push(e.offset.value),e.limit._tag==="Some"&&t.push(e.limit.value),{query:[r,a,o,l,h,d].map(S=>S.trim()).filter(S=>S.length>0).join(" "),bindValues:t}},ys=(e,t=Cbe(e))=>{const n={select(){mp(t);const r=[...arguments];if(r.length===1){const[o]=r;return ys(e,{...t,resultSchemaSingle:t.resultSchemaSingle.pipe(Dy(o)),select:{columns:[o]}})}const a=r;return ys(e,{...t,resultSchemaSingle:a.length===0?t.resultSchemaSingle:t.resultSchemaSingle.pipe(Oy(...a)),select:{columns:a}})},where:function(){if(t._tag==="InsertQuery")return gp("Cannot use where with insert");if(t._tag==="RowQuery")return gp("Cannot use where with row");if(arguments.length===1){const h=arguments[0],p=Object.entries(h).filter(([,S])=>S!==void 0).map(([S,v])=>Me(v,"op")&&Me(v,"value")?{col:S,op:v.op,value:v.value}:{col:S,op:"=",value:v});switch(t._tag){case"CountQuery":case"SelectQuery":case"UpdateQuery":case"DeleteQuery":return ys(e,{...t,where:[...t.where,...p]});default:return Bf(t)}}const[r,a,o]=arguments,l=o===void 0?"=":a,d=o===void 0?a:o;switch(t._tag){case"CountQuery":case"SelectQuery":case"UpdateQuery":case"DeleteQuery":return ys(e,{...t,where:[...t.where,{col:r,op:l,value:d}]});default:return Bf(t)}},orderBy(){if(mp(t),arguments.length===0||arguments.length>2)return gp();if(arguments.length===1){const o=arguments[0];return ys(e,{...t,orderBy:[...t.orderBy,...o]})}const[r,a]=arguments;return ys(e,{...t,orderBy:[...t.orderBy,{col:r,direction:a}]})},limit:r=>(mp(t),ys(e,{...t,limit:Ce(r)})),offset:r=>(mp(t),ys(e,{...t,offset:Ce(r)})),count:()=>Obe(t)||t._tag==="InsertQuery"||t._tag==="UpdateQuery"||t._tag==="DeleteQuery"?gp():ys(e,{_tag:"CountQuery",tableDef:e,where:t.where,resultSchema:Ie({count:Ut}).pipe(Dy("count"),Et,Cp())}),first:r=>(mp(t),t.limit._tag==="Some"?gp(".first() can't be called after .limit()"):ys(e,{...t,limit:Ce(1),pickFirst:(r==null?void 0:r.fallback)!==void 0&&r.fallback!=="throws"?{fallback:r.fallback}:"throws"})),insert:r=>{const a=Object.fromEntries(Object.entries(r).filter(([,o])=>o!==void 0));return ys(e,{_tag:"InsertQuery",tableDef:e,values:a,onConflict:void 0,returning:void 0,resultSchema:co})},onConflict:(r,a,o)=>{const l=Array.isArray(r)?r:[r];kbe(t);const d=yB(a).pipe(LR("ignore",()=>({targets:l,action:{_tag:"ignore"}})),LR("replace",()=>({targets:l,action:{_tag:"replace"}})),LR("update",()=>({targets:l,action:{_tag:"update",update:o}})),_B);return ys(e,{...t,onConflict:d})},returning:(...r)=>(Abe(t),ys(e,{...t,returning:r,resultSchema:e.rowSchema.pipe(Oy(...r),Et)})),update:r=>{const a=Object.fromEntries(Object.entries(r).filter(([,o])=>o!==void 0));return ys(e,{_tag:"UpdateQuery",tableDef:e,values:a,where:[],returning:void 0,resultSchema:co})},delete:()=>ys(e,{_tag:"DeleteQuery",tableDef:e,where:[],returning:void 0,resultSchema:co})};return{[Kf]:Kf,[kc]:t,ResultType:"only-for-type-inference",asSql:()=>FI(t),toString:()=>{try{return FI(t).query}catch(r){return console.debug("QueryBuilder.toString(): Error converting query builder to string",r,t),"Error converting query builder to string"}},...n}},Cbe=e=>({_tag:"SelectQuery",columns:[],pickFirst:!1,select:{columns:[]},orderBy:[],offset:be(),limit:be(),tableDef:e,where:[],resultSchemaSingle:e.rowSchema});function mp(e){if(e._tag!=="SelectQuery")return yt("Expected SelectQuery but got "+e._tag)}function kbe(e){if(e._tag!=="InsertQuery")return yt("Expected InsertQuery but got "+e._tag)}function Abe(e){if(e._tag!=="InsertQuery"&&e._tag!=="UpdateQuery"&&e._tag!=="DeleteQuery")return yt("Expected WriteQuery but got "+e._tag)}const Obe=e=>e._tag==="RowQuery",gp=e=>yt("Invalid query builder"+(e?`: ${e}`:"")),ME=e=>{const t=e[kc];switch(t._tag){case"SelectQuery":{const n=Et(t.resultSchemaSingle);if(t.pickFirst===!1)return n;if(t.pickFirst==="throws")return n.pipe(Cp());{const r=t.pickFirst.fallback();return bt(n,RB(At(r))).pipe(Cp(()=>r))}}case"CountQuery":return Ie({count:Ut}).pipe(Dy("count"),Et,Cp());case"InsertQuery":case"UpdateQuery":case"DeleteQuery":return t.returning&&t.returning.length>0?t.tableDef.rowSchema.pipe(Oy(...t.returning),Et):Ut;case"RowQuery":return t.tableDef.rowSchema.pipe(Dy("value"),tpe({title:`${t.tableDef.sqliteDef.name}.value`}),Et,Cp());default:Bf(t)}},{datetime:zI,integer:Dbe,json:xbe,text:Op}=bbe,$c=e=>{const{name:t,columns:n,...r}=e,a=t,o={isClientDocumentTable:!1},l=p8(n)?{value:n}:n,d=b8(a,l,(r==null?void 0:r.indexes)??[]),h=S8(d),p=v8(d),S={sqliteDef:d,options:o,rowSchema:h,insertSchema:p},v=ys(S);for(const R of Object.keys(v))S[R]=v[R];return S[kc]=v[kc],S[Kf]=v[Kf],S},$be="__livestore_schema",qbe=$c({name:$be,columns:{tableName:Ri({primaryKey:!0}),schemaHash:ba({nullable:!1}),updatedAt:Ri({nullable:!1})}}),Nbe="__livestore_schema_event_defs",Mbe=$c({name:Nbe,columns:{eventName:Ri({primaryKey:!0}),schemaHash:ba({nullable:!1}),updatedAt:Ri({nullable:!1})}}),w8="__livestore_session_changeset",Ibe=$c({name:w8,columns:{seqNumGlobal:ba({schema:om}),seqNumClient:ba({schema:T0}),changeset:y8({nullable:!0}),debug:FD({nullable:!0})},indexes:[{columns:["seqNumGlobal","seqNumClient"],name:"idx_session_changeset_id"}]}),E8="__livestore_leader_merge_counter",Lbe=$c({name:E8,columns:{id:ba({primaryKey:!0,schema:At(0)}),mergeCounter:ba({primaryKey:!0})}}),zD=[qbe,Mbe,Ibe,Lbe],Fbe=e=>zD.some(t=>t.sqliteDef.name===e),zbe="eventlog";$c({name:zbe,columns:{seqNumGlobal:ba({primaryKey:!0,schema:om}),seqNumClient:ba({primaryKey:!0,schema:T0}),parentSeqNumGlobal:ba({schema:om}),parentSeqNumClient:ba({schema:T0}),name:Ri({}),argsJson:Ri({schema:am(br)}),clientId:Ri({}),sessionId:Ri({}),schemaHash:ba({}),syncMetadataJson:Ri({schema:am(Bp(Vf))})},indexes:[{columns:["seqNumGlobal"],name:"idx_eventlog_seqNumGlobal"},{columns:["seqNumGlobal","seqNumClient"],name:"idx_eventlog_seqNum"}]});const Ube="__livestore_sync_status";$c({name:Ube,columns:{head:ba({primaryKey:!0})}});const UI=bt(ie,Ut,LB,uD),T8=bt(Et(UI),Ym({key:ie,value:UI})).pipe(Jge("PreparedBindValues")),Oh=(e,...t)=>{let n="";for(const[r,a]of t.entries())n+=e[r]+String(a);return n+e[e.length-1]},Gp=(e,t)=>{if(Array.isArray(e))return e;const n={};for(const[r,a]of Object.entries(e))t.includes(r)&&(n[`$${r}`]=a);return n},UD=e=>{const{name:t,schema:n,...r}=e,a=o=>{const l=Lge(n)(o);return l._tag==="Left"&&yt(`Invalid event args for event '${t}':`,l.left.message,`
`),{name:t,args:o}};return Object.defineProperty(a,"name",{value:t}),Object.defineProperty(a,"schema",{value:n}),Object.defineProperty(a,"encoded",{value:o=>({name:t,args:o})}),Object.defineProperty(a,"options",{value:{clientOnly:(r==null?void 0:r.clientOnly)??!1,facts:r!=null&&r.facts?(o,l)=>{var h,p;const d=r.facts(o,l);return{modify:{set:(h=d.modify)!=null&&h.set?new Set(d.modify.set):new Set,unset:(p=d.modify)!=null&&p.unset?new Set(d.modify.unset):new Set},require:d.require?new Set(d.require):new Set}}:void 0,derived:(r==null?void 0:r.derived)??!1}}),a},PD=e=>UD({...e,clientOnly:!1}),R8=(e,t)=>t,Pbe=(e,t)=>t,k0=UD({name:"livestore.RawSql",schema:Ie({sql:ie,bindValues:Br(Ym({key:ie,value:br})),writeTables:Br(_D(ie))}),clientOnly:!0,derived:!0}),jbe=R8(k0,({sql:e,bindValues:t,writeTables:n})=>({sql:e,bindValues:t??{},writeTables:n})),Hbe=({name:e,schema:t,...n})=>{const r={partialSet:n.partialSet??!0,default:{id:n.default.id,value:n.default.value}},a={id:Ri({primaryKey:!0}),value:FD({schema:t})},o=$c({name:e,columns:a});o.options.isClientDocumentTable=!0;const{eventDef:l,materializer:d}=Vbe({name:e,valueSchema:t,defaultValue:r.default.value,partialSet:r.partialSet}),h=(...v)=>{const[R,O=r.default.id]=v;return l({id:O,value:R})};Object.defineProperty(h,"name",{value:`${e}Set`}),Object.defineProperty(h,"schema",{value:Ie({id:ie,value:r.partialSet?g0(t):t}).annotations({title:`${e}Set:Args`})}),Object.defineProperty(h,"options",{value:{derived:!0,clientOnly:!0,facts:void 0}});const p={get:Kbe(()=>S),set:h,Value:"only-for-type-inference",default:r.default,valueSchema:t,[cm]:{derived:{setEventDef:l,setMaterializer:d},options:r}},S={...o,...p};return S},Bbe=(e,t)=>typeof e!="object"||typeof t!="object"||e===null||t===null?t:Object.keys(e).reduce((n,r)=>(n[r]=t[r]??e[r],n),{}),Vbe=({name:e,valueSchema:t,defaultValue:n,partialSet:r})=>{const a=UD({name:`${e}Set`,schema:Ie({id:bt(ie,zge($i)),value:r?g0(t):t}).annotations({title:`${e}Set:Args`}),clientOnly:!0,derived:!0}),o=R8(a,({id:l,value:d})=>{if(l===$i)return yt("SessionIdSymbol needs to be replaced before materializing the set event");if(FS(t.ast).length===0||r===!1){const p=am(t),S=kS(p)(d??n),v=kS(p)(d);return{sql:`INSERT INTO '${e}' (id, value) VALUES (?, ?) ON CONFLICT (id) DO UPDATE SET value = ?`,bindValues:[l,S,v],writeTables:new Set([e])}}else{const p=am(g0(t)),S=kS(p)(Bbe(n,d));let v="value";const R=[],O=Object.keys(d),x=t.pipe(Oy(...O)),z=kS(x)(d);for(const T in z){const q=z[T];q!==void 0&&(v=`json_set(${v}, ?, json(?))`,R.push(`$.${T}`,JSON.stringify(q)))}const A=R.length>0?`ON CONFLICT (id) DO UPDATE SET value = ${v}`:"ON CONFLICT (id) DO NOTHING";return{sql:`
      INSERT INTO '${e}' (id, value)
      VALUES (?, ?)
      ${A}
    `,bindValues:[l,S,...R],writeTables:new Set([e])}}});return{eventDef:a,materializer:o}},IE=e=>e.options.isClientDocumentTable===!0,Kbe=e=>(...t)=>{const n=e(),[r=n[cm].options.default.id,a={}]=t,o=a.default??n[cm].options.default.value,l={_tag:"RowQuery",tableDef:n,id:r,explicitDefaultValues:o},d=Oh`SELECT * FROM '${n.sqliteDef.name}' WHERE id = ?`;return{[Kf]:Kf,[kc]:l,ResultType:"only-for-type-inference",asSql:()=>({query:d,bindValues:[r]}),toString:()=>d.toString()}},cm=Symbol("ClientDocumentTableDef"),Gbe=Symbol.for("livestore.LiveStoreSchema"),Qbe=e=>{var a;const t=e.state,n=e.state.sqlite.tables;for(const o of zD)n.set(o.sqliteDef.name,o);const r=new Map;if(c8(e.events))for(const o of e.events)r.set(o.name,o);else for(const o of Object.values(e.events??{}))r.has(o.name)&&yt(`Duplicate event name: ${o.name}. Please use unique names for events.`),r.set(o.name,o);r.set(k0.name,k0);for(const o of n.values())IE(o)&&r.has(o.set.name)===!1&&r.set(o.set.name,o.set);return{LiveStoreSchemaSymbol:Gbe,_DbSchemaType:Symbol.for("livestore.DbSchemaType"),_EventDefMapType:Symbol.for("livestore.EventDefMapType"),state:t,eventsDefsMap:r,devtools:{alias:((a=e.devtools)==null?void 0:a.alias)??"default"}}},Fk=(e,t)=>{const n=e.eventsDefsMap.get(t);if(n===void 0)return yt(`No mutation definition found for \`${t}\`.`);const r=e.state.materializers.get(t);return r===void 0?yt(`No materializer found for \`${t}\`.`):{eventDef:n,materializer:r}},Ybe=({eventDef:e,materializer:t,dbState:n,event:r})=>{var h;const a=r.decoded===void 0?cB(e.schema)(r.encoded.args):r.decoded.args,o=b_e((h=r.decoded)==null?void 0:h.args)?void 0:aD(e.schema)(r.decoded.args);return C8(t(a,{eventDef:e,query:p=>{if(lo(p)){const{query:S,bindValues:v}=p.asSql(),R=n.select(S,Gp(v,S)),O=ME(p);return Pf(O)(R)}else{const{query:S,bindValues:v}=p;return n.select(S,Gp(v,S))}},currentFacts:new Map})).map(p=>{const S=p.sql,v=typeof p=="string"?o:p.bindValues,R=typeof p=="string"?void 0:p.writeTables;return{statementSql:S,bindValues:Gp(v??{},S),writeTables:R}})},Wbe=e=>Xn(JSON.stringify(e)),C8=e=>{if(c8(e))return e.flatMap(C8);if(lo(e)){const{query:t,bindValues:n}=e.asSql();return[{sql:t,bindValues:n,writeTables:void 0}]}else return typeof e=="string"?[{sql:e,bindValues:{},writeTables:void 0}]:[{sql:e.sql,bindValues:e.bindValues,writeTables:e.writeTables}]},k8=(e,t)=>{zk(e,$i,t)},zk=(e,t,n)=>{if(Array.isArray(e))for(const r in e)e[r]===t?e[r]=n:zk(e[r],t,n);else if(typeof e=="object"&&e!==null)for(const r in e)e[r]===t?e[r]=n:zk(e[r],t,n)},Jbe=e=>{const t=Array.isArray(e.tables)?e.tables:Object.values(e.tables),n=new Map;for(const o of t){const l=o.sqliteDef;n.has(l.ast.name)&&yt(`Duplicate table name: ${l.ast.name}. Please use unique names for tables.`),n.set(l.ast.name,o)}for(const o of zD)n.set(o.sqliteDef.name,o);const r=new Map;for(const[o,l]of Object.entries(e.materializers))r.set(o,l);r.set(k0.name,jbe);for(const o of t)IE(o)&&r.set(o[cm].derived.setEventDef.name,o[cm].derived.setMaterializer);const a=vbe({_tag:"dbSchema",tables:[...n.values()].map(o=>o.sqliteDef.ast)});return{sqlite:{tables:n,migrations:e.migrations??{strategy:"auto"},hash:a},materializers:r}};Ie({name:ie,args:br,seqNum:Sr,parentSeqNum:Sr,clientId:ie,sessionId:ie}).annotations({title:"LiveStoreEvent.AnyDecoded"});const Xbe=Ie({name:ie,args:br,seqNum:Sr,parentSeqNum:Sr,clientId:ie,sessionId:ie}).annotations({title:"LiveStoreEvent.AnyEncoded"}),Zbe=Ie({name:ie,args:br,seqNum:om,parentSeqNum:om,clientId:ie,sessionId:ie}).annotations({title:"LiveStoreEvent.AnyEncodedGlobal"}),eSe=Ie({name:ie,args:br}),tSe=e=>bt(...[...e.eventsDefsMap.values()].map(t=>Ie({name:At(t.name),args:t.schema,seqNum:Sr,parentSeqNum:Sr,clientId:ie,sessionId:ie}))).annotations({title:"EventDef"}),A8=O_e(tSe),Wp=class Wp extends cd("LiveStoreEvent.EncodedWithMeta")({name:ie,args:br,seqNum:Sr,parentSeqNum:Sr,clientId:ie,sessionId:ie,meta:Ie({sessionChangeset:bt(kt("sessionChangeset",{data:LB,debug:br.pipe(Br)}),kt("no-op",{}),kt("unset",{})),syncMetadata:Bp(Vf),materializerHashLeader:Bp(Ut),materializerHashSession:Bp(Ut)}).pipe(qB,Br,DB({constructor:()=>({sessionChangeset:{_tag:"unset"},syncMetadata:be(),materializerHashLeader:be(),materializerHashSession:be()}),decoding:()=>({sessionChangeset:{_tag:"unset"},syncMetadata:be(),materializerHashLeader:be(),materializerHashSession:be()})}))}){constructor(){super(...arguments);b(this,"toJSON",()=>({seqNum:`${xi(this.seqNum)} → ${xi(this.parentSeqNum)} (${this.clientId}, ${this.sessionId})`,name:this.name,args:this.args}));b(this,"rebase",(n,r)=>new Wp({...this,...ID(n,r)}));b(this,"toGlobal",()=>({...this,seqNum:this.seqNum.global,parentSeqNum:this.parentSeqNum.global}))}};b(Wp,"fromGlobal",(n,r)=>new Wp({...n,seqNum:{global:n.seqNum,client:Fy},parentSeqNum:{global:n.parentSeqNum,client:Fy},meta:{sessionChangeset:{_tag:"unset"},syncMetadata:r.syncMetadata,materializerHashLeader:r.materializerHashLeader,materializerHashSession:r.materializerHashSession}}));let li=Wp;const PI=(e,t)=>e.seqNum.global===t.seqNum.global&&e.seqNum.client===t.seqNum.client&&e.name===t.name&&e.clientId===t.clientId&&e.sessionId===t.sessionId&&JSON.stringify(e.args)===JSON.stringify(t.args);class REe extends zi()("IsOfflineError",{}){}class CEe extends zi()("InvalidPushError",{reason:bt(kt("Unexpected",{message:ie}),kt("ServerAhead",{minimumExpectedNum:Ut,providedNum:Ut}))}){}class kEe extends zi()("InvalidPullError",{message:ie}){}class nSe extends zi()("LeaderAheadError",{minimumExpectedNum:Sr,providedNum:Sr}){}class ro extends cd("SyncState")({pending:Et(li),upstreamHead:Sr,localHead:Sr}){constructor(){super(...arguments);b(this,"toJSON",()=>({pending:this.pending.map(n=>n.toJSON()),upstreamHead:xi(this.upstreamHead),localHead:xi(this.localHead)}))}}class O8 extends kt("upstream-rebase",{rollbackEvents:Et(li),newEvents:Et(li)}){}class D8 extends kt("upstream-advance",{newEvents:Et(li)}){}class rSe extends kt("local-push",{newEvents:Et(li)}){}class sSe extends bt(O8,D8,rSe){}class x8 extends bt(O8,D8){}class LE extends cd("MergeContext")({payload:sSe,syncState:ro}){constructor(){super(...arguments);b(this,"toJSON",()=>({payload:yB(this.payload).pipe(FR("local-push",()=>({_tag:"local-push",newEvents:this.payload.newEvents.map(r=>r.toJSON())})),FR("upstream-advance",()=>({_tag:"upstream-advance",newEvents:this.payload.newEvents.map(r=>r.toJSON())})),FR("upstream-rebase",r=>({_tag:"upstream-rebase",newEvents:r.newEvents.map(a=>a.toJSON()),rollbackEvents:r.rollbackEvents.map(a=>a.toJSON())})),_B),syncState:this.syncState.toJSON()}))}}class Dp extends cd("MergeResultAdvance")({_tag:At("advance"),newSyncState:ro,newEvents:Et(li),confirmedEvents:Et(li),mergeContext:LE}){constructor(){super(...arguments);b(this,"toJSON",()=>({_tag:this._tag,newSyncState:this.newSyncState.toJSON(),newEvents:this.newEvents.map(n=>n.toJSON()),confirmedEvents:this.confirmedEvents.map(n=>n.toJSON()),mergeContext:this.mergeContext.toJSON()}))}}class Uk extends cd("MergeResultRebase")({_tag:At("rebase"),newSyncState:ro,newEvents:Et(li),rollbackEvents:Et(li),mergeContext:LE}){constructor(){super(...arguments);b(this,"toJSON",()=>({_tag:this._tag,newSyncState:this.newSyncState.toJSON(),newEvents:this.newEvents.map(n=>n.toJSON()),rollbackEvents:this.rollbackEvents.map(n=>n.toJSON()),mergeContext:this.mergeContext.toJSON()}))}}class $8 extends cd("MergeResultReject")({_tag:At("reject"),expectedMinimumId:Sr,mergeContext:LE}){constructor(){super(...arguments);b(this,"toJSON",()=>({_tag:this._tag,expectedMinimumId:xi(this.expectedMinimumId),mergeContext:this.mergeContext.toJSON()}))}}class q8 extends cd("MergeResultUnexpectedError")({_tag:At("unexpected-error"),cause:Ct}){}class AEe extends bt(Dp,Uk,$8,q8){}const Pk=e=>{if(Rc)debugger;return q8.make({_tag:"unexpected-error",cause:new Ct({cause:e})})},jI=({syncState:e,payload:t,isClientEvent:n,isEqualEvent:r,ignoreClientEvents:a=!1})=>{var l,d,h;N8(e),aSe(t);const o=LE.make({payload:t,syncState:e});switch(t._tag){case"upstream-rebase":{const p=[...t.rollbackEvents,...e.pending],S=((l=t.newEvents.at(-1))==null?void 0:l.seqNum)??e.upstreamHead,v=HI({events:e.pending,baseEventSequenceNumber:S,isClientEvent:n});return Fu(Uk.make({_tag:"rebase",newSyncState:new ro({pending:v,upstreamHead:S,localHead:((d=v.at(-1))==null?void 0:d.seqNum)??S}),newEvents:[...t.newEvents,...v],rollbackEvents:p,mergeContext:o}))}case"upstream-advance":{if(t.newEvents.length===0)return Fu(Dp.make({_tag:"advance",newSyncState:new ro({pending:e.pending,upstreamHead:e.upstreamHead,localHead:e.localHead}),newEvents:[],confirmedEvents:[],mergeContext:o}));for(let v=1;v<t.newEvents.length;v++)if(ZS(t.newEvents[v-1].seqNum,t.newEvents[v].seqNum))return Pk(`Events must be sorted in ascending order by event number. Received: [${t.newEvents.map(R=>xi(R.seqNum)).join(", ")}]`);if(ZS(e.upstreamHead,t.newEvents[0].seqNum)||MD(e.upstreamHead,t.newEvents[0].seqNum))return Pk(`Incoming events must be greater than upstream head. Expected greater than: ${xi(e.upstreamHead)}. Received: [${t.newEvents.map(v=>xi(v.seqNum)).join(", ")}]`);const p=t.newEvents.at(-1).seqNum,S=jk({existingEvents:e.pending,incomingEvents:t.newEvents,isEqualEvent:r,isClientEvent:n,ignoreClientEvents:a});if(S===-1){const v=new Set(e.pending.map(A=>`${A.seqNum.global},${A.seqNum.client}`)),R=t.newEvents.filter(A=>!v.has(`${A.seqNum.global},${A.seqNum.client}`));let O=0;const[x,z]=lY(e.pending,(A,E)=>{if(a&&n(A))return O++,!1;const T=t.newEvents.at(E-O);return T?r(A,T)===!1:!0});return Fu(Dp.make({_tag:"advance",newSyncState:new ro({pending:z,upstreamHead:p,localHead:((h=z.at(-1))==null?void 0:h.seqNum)??cbe(e.localHead,p)}),newEvents:R,confirmedEvents:x,mergeContext:o}))}else{const v=e.pending.slice(S),R=HI({events:v,baseEventSequenceNumber:p,isClientEvent:n}),O=jk({existingEvents:t.newEvents,incomingEvents:e.pending,isEqualEvent:r,isClientEvent:n,ignoreClientEvents:a});return Fu(Uk.make({_tag:"rebase",newSyncState:new ro({pending:R,upstreamHead:p,localHead:R.at(-1).seqNum}),newEvents:[...t.newEvents.slice(O),...R],rollbackEvents:v,mergeContext:o}))}}case"local-push":{if(t.newEvents.length===0)return Fu(Dp.make({_tag:"advance",newSyncState:e,newEvents:[],confirmedEvents:[],mergeContext:o}));const p=t.newEvents.at(0);if(ZS(p.seqNum,e.localHead)===!1){const v=ID(e.localHead,!0).seqNum;return Fu($8.make({_tag:"reject",expectedMinimumId:v,mergeContext:o}))}else return Fu(Dp.make({_tag:"advance",newSyncState:new ro({pending:[...e.pending,...t.newEvents],upstreamHead:e.upstreamHead,localHead:t.newEvents.at(-1).seqNum}),newEvents:t.newEvents,confirmedEvents:[],mergeContext:o}))}default:Bf(t)}},jk=({existingEvents:e,incomingEvents:t,isEqualEvent:n,isClientEvent:r,ignoreClientEvents:a})=>{if(a){const o=e.filter(h=>!r(h)),l=jk({existingEvents:o,incomingEvents:t,isEqualEvent:n,isClientEvent:r,ignoreClientEvents:!1});if(l===-1)return-1;const d=e[l].seqNum;return e.findIndex(h=>MD(h.seqNum,d))}return e.findIndex((o,l)=>{const d=t[l];return d&&!n(o,d)})},HI=({events:e,baseEventSequenceNumber:t,isClientEvent:n})=>{let r=t;return e.map(a=>{const o=n(a),l=a.rebase(r,o);return r=l.seqNum,l})},aSe=e=>{for(let t=1;t<e.newEvents.length;t++)if(R0(e.newEvents[t-1].seqNum,e.newEvents[t].seqNum))return Pk(`Events must be ordered in monotonically ascending order by eventNum. Received: [${e.newEvents.map(n=>xi(n.seqNum)).join(", ")}]`)},N8=e=>{for(let t=0;t<e.pending.length;t++){const n=e.pending[t],r=e.pending[t+1];if(r===void 0)break;R0(n.seqNum,r.seqNum)&&yt(`Events must be ordered in monotonically ascending order by eventNum. Received: [${e.pending.map(o=>xi(o.seqNum)).join(", ")}]`,{event:n,nextEvent:r}),r.seqNum.global>n.seqNum.global?r.seqNum.client!==0&&yt(`New global events must point to clientId 0 in the parentSeqNum. Received: (${xi(r.seqNum)})`,e.pending,{event:n,nextEvent:r}):MD(r.parentSeqNum,n.seqNum)===!1&&yt("Events must be linked in a continuous chain via the parentSeqNum",e.pending,{event:n,nextEvent:r})}},Fu=e=>(e._tag==="unexpected-error"||e._tag==="reject"||(N8(e.newSyncState),ZS(e.newSyncState.upstreamHead,e.newSyncState.localHead)&&yt("Local head must be greater than or equal to upstream head",{localHead:e.newSyncState.localHead,upstreamHead:e.newSyncState.upstreamHead}),R0(e.newSyncState.localHead,e.mergeContext.syncState.localHead)===!1&&yt("New local head must be greater than or equal to the previous local head",{localHead:e.newSyncState.localHead,previousLocalHead:e.mergeContext.syncState.localHead}),R0(e.newSyncState.upstreamHead,e.mergeContext.syncState.upstreamHead)===!1&&yt("New upstream head must be greater than or equal to the previous upstream head",{upstreamHead:e.newSyncState.upstreamHead,previousUpstreamHead:e.mergeContext.syncState.upstreamHead})),e),iSe=({schema:e,clientSession:t,runtime:n,materializeEvent:r,rollback:a,refreshTables:o,span:l,params:d,confirmUnsavedChanges:h})=>{const p=A8(e),S={current:new ro({localHead:t.leaderThread.initialState.leaderHead,upstreamHead:t.leaderThread.initialState.leaderHead,pending:[]})},v=Xs().pipe(Ga),R=T=>Fk(e,T.name).eventDef.options.clientOnly,O=dye().pipe(Ga),x=(T,{otelContext:q})=>{let D=S.current.localHead;const I=T.map(({name:K,args:V})=>{const j=Fk(e,K),te=ID(D,j.eventDef.options.clientOnly);return D=te.seqNum,new li(aD(p)({name:K,args:V,...te,clientId:t.clientId,sessionId:t.sessionId}))}),$=jI({syncState:S.current,payload:{_tag:"local-push",newEvents:I},isClientEvent:R,isEqualEvent:PI});if($._tag==="unexpected-error")return yt("Unexpected error in client-session-sync-processor",$.cause);if(l.addEvent("local-push",{batchSize:I.length,mergeResult:hp?JSON.stringify($):void 0}),$._tag!=="advance")return yt(`Expected advance, got ${$._tag}`);S.current=$.newSyncState,v.offer($.newSyncState).pipe(Ga);const H=new Set;for(const K of $.newEvents){const V=Pf(p)(K),{writeTables:j,sessionChangeset:te,materializerHash:Ee}=r(V,{otelContext:q,withChangeset:!0,materializerHashLeader:be()});for(const xe of j)H.add(xe);K.meta.sessionChangeset=te,K.meta.materializerHashSession=Ee}return dI(O,I).pipe(Ga),{writeTables:H}},z={rebaseCount:0,advanceCount:0,rejectCount:0},A=_s.setSpan(Js.active(),l),E=ke(function*(){if(h&&typeof window<"u"&&typeof window.addEventListener=="function"){const I=$=>{S.current.pending.length>0&&$.preventDefault()};yield*Pn(it(()=>window.addEventListener("beforeunload",I)),()=>it(()=>window.removeEventListener("beforeunload",I)))}const T=yield*tB(),q=ke(function*(){const I=yield*hye(O,1,d.leaderPushBatchSize);yield*t.leaderThread.events.push(I).pipe(Ff("LeaderAheadError",()=>(z.rejectCount++,hI(O))))}).pipe(tm,Bn,en);yield*o0(T,q);const D=()=>{var I;return((I=t.sqliteDb.select(Oh`SELECT mergeCounter FROM ${E8} WHERE id = 0`)[0])==null?void 0:I.mergeCounter)??0};yield*GB(()=>t.leaderThread.events.pull({cursor:{mergeCounter:D(),eventNum:S.current.localHead}})).pipe(ea(({payload:I,mergeCounter:$})=>ke(function*(){t.devtools.enabled&&(yield*t.devtools.pullLatch.await);const H=jI({syncState:S.current,payload:I,isClientEvent:R,isEqualEvent:PI});if(H._tag==="unexpected-error")return yield*If(H.cause);if(H._tag==="reject")return yt("Unexpected reject in client-session-sync-processor",H);if(S.current=H.newSyncState,v.offer(H.newSyncState).pipe(Ga),H._tag==="rebase"){l.addEvent("merge:pull:rebase",{payloadTag:I._tag,payload:hp?JSON.stringify(I):void 0,newEventsCount:H.newEvents.length,rollbackCount:H.rollbackEvents.length,res:hp?JSON.stringify(H):void 0,leaderMergeCounter:$}),z.rebaseCount++,yield*gme(T),yield*hI(O),yield*o0(T,q),Rc&&ss("merge:pull:rebase: rollback",H.rollbackEvents.length,...H.rollbackEvents.slice(0,10).map(V=>V.toJSON()),{leaderMergeCounter:$}).pipe(vs(n),Ga);for(let V=H.rollbackEvents.length-1;V>=0;V--){const j=H.rollbackEvents[V];j.meta.sessionChangeset._tag!=="no-op"&&j.meta.sessionChangeset._tag!=="unset"&&(a(j.meta.sessionChangeset.data),j.meta.sessionChangeset={_tag:"unset"})}yield*dI(O,H.newSyncState.pending)}else l.addEvent("merge:pull:advance",{payloadTag:I._tag,payload:hp?JSON.stringify(I):void 0,newEventsCount:H.newEvents.length,res:hp?JSON.stringify(H):void 0,leaderMergeCounter:$}),z.advanceCount++;if(H.newEvents.length===0)return;const K=new Set;for(const V of H.newEvents){const j=Pf(p)(V),{writeTables:te,sessionChangeset:Ee,materializerHash:xe}=r(j,{otelContext:A,withChangeset:!0,materializerHashLeader:V.meta.materializerHashLeader});for(const fe of te)K.add(fe);V.meta.sessionChangeset=Ee,V.meta.materializerHashSession=xe}o(K)}).pipe(en,Mm(H=>t.shutdown(H)))),ls,tm,Bn,Ft("client-session-sync-processor:pull"),en,jn)});return{push:x,boot:E,syncState:OE({get:ke(function*(){const T=S.current;return S===void 0?yt("Not initialized"):T}),changes:Hf(v)}),debug:{print:()=>ke(function*(){console.log("debugInfo",z),console.log("syncState",S.current);const T=yield*gye(O);console.log("pushQueueSize",T);const q=yield*mye(O);console.log("pushQueueItems",q.map(D=>D.toJSON()))}).pipe(vs(n),Ga),debugInfo:()=>z}}},oSe="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Za=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=oSe[n[e]&63];return t};const M8=kt("RequestSessions",{}),I8=kt("SessionInfo",{storeId:ie,clientId:ie,sessionId:ie,schemaAlias:ie,isLeader:wc}),L8=bt(M8,I8),F8=({webChannel:e,sessionInfo:t})=>ke(function*(){yield*e.send(t),yield*e.listen.pipe(Gl(),Ec(bn(M8)),ea(()=>e.send(t)),ls)});var vi,Hy;class A0{constructor(t){Ir(this,vi,new Map);Ir(this,Hy);b(this,"onEvict");b(this,"set",(t,n)=>{if(Ne(this,vi).set(t,n),Ne(this,vi).size>Ne(this,Hy)){const r=Ne(this,vi).keys().next().value,a=Ne(this,vi).get(r);Ne(this,vi).delete(r),this.onEvict&&this.onEvict(r,a)}});b(this,"get",t=>Ne(this,vi).get(t));b(this,"delete",t=>{Ne(this,vi).delete(t)});b(this,"keys",()=>Ne(this,vi).keys());Mu(this,Hy,t)}}vi=new WeakMap,Hy=new WeakMap;var gz,ef,N0;gz=Symbol.iterator;class cSe{constructor(t){Ir(this,ef);Ir(this,N0,t=>{this.onEvict&&this.onEvict(t)});b(this,"onEvict");b(this,"add",t=>{Ne(this,ef).set(t,t)});b(this,gz,()=>Ne(this,ef).keys());Mu(this,ef,new A0(t)),Ne(this,ef).onEvict=Ne(this,N0)}}ef=new WeakMap,N0=new WeakMap;var pz,ha;pz=Symbol.iterator;const M0=class M0{constructor(t){Ir(this,ha,[]);b(this,"sizeLimit");b(this,"onEvict");b(this,"push",t=>{if(Ne(this,ha).push(t),Ne(this,ha).length>this.sizeLimit){const n=Ne(this,ha).shift();n&&this.onEvict&&this.onEvict(n)}});b(this,"get",t=>Ne(this,ha)[t]);b(this,"delete",t=>{Ne(this,ha).splice(t,1)});b(this,pz,()=>Ne(this,ha)[Symbol.iterator]());b(this,"map",t=>Ne(this,ha).map(t));b(this,"clear",()=>{Mu(this,ha,[])});b(this,"sort",t=>Ne(this,ha).sort(t));this.sizeLimit=t}get length(){return Ne(this,ha).length}};ha=new WeakMap,b(M0,"make",(t,n=[])=>{const r=new M0(t);for(const a of n)r.push(a);return r});let uo=M0;const lSe=Ie({queryStr:ie,bindValues:sm(T8),durationMs:Ut,rowsCount:sm(Ut),queriedTables:_D(ie),startTimePerfNow:Ut}),uSe=e=>od([e],{decode:t=>(n,r,a)=>{if(n instanceof uo){const o=Km(Et(t))([...n],r);return $s(o,l=>uo.make(n.sizeLimit,l))}return Vl(new pr(a,n))},encode:t=>(n,r,a)=>{if(n instanceof uo){const o=id(Et(t))([...n],r);return $s(o,l=>uo.make(n.sizeLimit,l))}return Vl(new pr(a,n))}},{description:`BoundArray<${Gm(e)}>`,pretty:()=>t=>`BoundArray(${t.length})`,arbitrary:()=>t=>t.anything(),equivalence:()=>(t,n)=>t===n}),BI=e=>Fi(Ie({size:Ut,items:Et(e)}),uSe(vo(e)),{encode:t=>({size:t.sizeLimit,items:[...t]}),decode:t=>uo.make(t.size,t.items)}),jD=Ie({slowQueries:BI(lSe),queryFrameDuration:Ut,queryFrameCount:Ut,events:BI(RB(ie,br))});qB(jD);const xs="0.3.1",VI=4,fSe=Ie({isConnected:wc,timestampMs:Ut,latchClosed:wc}),Qp=ie,HD=ie,z8=ie,nv=At(xs),FE=(e,t)=>kt(e,{liveStoreVersion:nv,...t}).annotations({identifier:e}),dSe=(e,t)=>FE(e,{clientId:HD,...t}),hSe=(e,t)=>FE(e,{clientId:HD,sessionId:z8,...t}),$r=(e,t)=>FE(e,{clientId:HD,sessionId:z8,requestId:Qp,...t}),nr=(e,t)=>dSe(e,{requestId:Qp,...t}),BD=(e,t)=>{const n=kt(`${e}.Response.Success`,{requestId:Qp,liveStoreVersion:nv,...t.success}).annotations({identifier:`${e}.Response.Success`}),r=t.error?kt(`${e}.Response.Error`,{requestId:Qp,liveStoreVersion:nv,...t.error}).annotations({identifier:`${e}.Response.Error`}):EE;return{Request:kt(`${e}.Request`,{requestId:Qp,liveStoreVersion:nv,...t.payload}).annotations({identifier:`${e}.Request`}),Response:bt(n,r),Success:n,Error:r}};class mSe extends $r("LSD.ClientSession.DebugInfoReq",{}){}class U8 extends $r("LSD.ClientSession.DebugInfoRes",{debugInfo:jD}){}class gSe extends $r("LSD.ClientSession.DebugInfoHistorySubscribe",{subscriptionId:ie}){}class P8 extends $r("LSD.ClientSession.DebugInfoHistoryRes",{debugInfoHistory:Et(jD),subscriptionId:ie}){}class pSe extends $r("LSD.ClientSession.DebugInfoHistoryUnsubscribe",{subscriptionId:ie}){}class ySe extends $r("LSD.ClientSession.DebugInfoResetReq",{}){}class j8 extends $r("LSD.ClientSession.DebugInfoResetRes",{}){}class _Se extends $r("LSD.ClientSession.DebugInfoRerunQueryReq",{queryStr:ie,bindValues:sm(T8),queriedTables:_D(ie)}){}class H8 extends $r("LSD.ClientSession.DebugInfoRerunQueryRes",{}){}let bSe=class extends $r("LSD.ClientSession.SyncHeadSubscribe",{subscriptionId:ie}){},SSe=class extends $r("LSD.ClientSession.SyncHeadUnsubscribe",{subscriptionId:ie}){},B8=class extends $r("LSD.ClientSession.SyncHeadRes",{local:Sr,upstream:Sr,subscriptionId:ie}){};class vSe extends $r("LSD.ClientSession.ReactivityGraphSubscribe",{includeResults:wc,subscriptionId:ie}){}class wSe extends $r("LSD.ClientSession.ReactivityGraphUnsubscribe",{subscriptionId:ie}){}class V8 extends $r("LSD.ClientSession.ReactivityGraphRes",{reactivityGraph:br,subscriptionId:ie}){}class ESe extends $r("LSD.ClientSession.LiveQueriesSubscribe",{subscriptionId:ie}){}class TSe extends $r("LSD.ClientSession.LiveQueriesUnsubscribe",{subscriptionId:ie}){}class RSe extends Ie({_tag:At("computed","db","graphql","signal"),id:Ut,label:ie,hash:ie,runs:Ut,executionTimes:Et(Ut),lastestResult:br,activeSubscriptions:Et(Ie({frames:Et(Ie({name:ie,filePath:ie}))}))}){}class K8 extends $r("LSD.ClientSession.LiveQueriesRes",{liveQueries:Et(RSe),subscriptionId:ie}){}let CSe=class extends $r("LSD.ClientSession.Ping",{}){},G8=class extends $r("LSD.ClientSession.Pong",{}){},VD=class extends hSe("LSD.ClientSession.Disconnect",{}){};const kSe=bt(mSe,gSe,pSe,ySe,_Se,vSe,wSe,ESe,TSe,VD,CSe,bSe,SSe).annotations({identifier:"LSD.ClientSession.MessageToApp"}),ASe=bt(U8,P8,j8,H8,V8,K8,VD,G8,B8).annotations({identifier:"LSD.ClientSession.MessageFromApp"});class MEe extends nr("LSD.Leader.ResetAllDataReq",{mode:At("all-data","only-app-db")}){}class OSe extends nr("LSD.Leader.DatabaseFileInfoReq",{}){}class KI extends Ie({fileSize:Ut,persistenceInfo:Ie({fileName:ie},{key:ie,value:br})}){}class DSe extends nr("LSD.Leader.DatabaseFileInfoRes",{state:KI,eventlog:KI}){}class xSe extends nr("LSD.Leader.NetworkStatusSubscribe",{subscriptionId:ie}){}class $Se extends nr("LSD.Leader.NetworkStatusUnsubscribe",{subscriptionId:ie}){}class qSe extends nr("LSD.Leader.NetworkStatusRes",{networkStatus:fSe,subscriptionId:ie}){}class NSe extends nr("LSD.Leader.SyncingInfoReq",{}){}class MSe extends Ie({enabled:wc,metadata:Ym({key:ie,value:br})}){}class ISe extends nr("LSD.Leader.SyncingInfoRes",{syncingInfo:MSe}){}class LSe extends nr("LSD.Leader.SyncHistorySubscribe",{subscriptionId:ie}){}class FSe extends nr("LSD.Leader.SyncHistoryUnsubscribe",{subscriptionId:ie}){}class zSe extends nr("LSD.Leader.SyncHistoryRes",{eventEncoded:Zbe,metadata:Bp(Vf),subscriptionId:ie}){}class USe extends nr("LSD.Leader.SyncHeadSubscribe",{subscriptionId:ie}){}class PSe extends nr("LSD.Leader.SyncHeadUnsubscribe",{subscriptionId:ie}){}class jSe extends nr("LSD.Leader.SyncHeadRes",{local:Sr,upstream:Sr,subscriptionId:ie}){}class HSe extends nr("LSD.Leader.SnapshotReq",{}){}class BSe extends nr("LSD.Leader.SnapshotRes",{snapshot:Ah}){}const Q8=BD("LSD.Leader.LoadDatabaseFile",{payload:{data:Ah},success:{},error:{cause:bt(kt("unsupported-file",{}),kt("unsupported-database",{}),kt("unexpected-error",{cause:im}))}});class VSe extends FE("LSD.Leader.SyncPull",{payload:x8}){}class KSe extends nr("LSD.Leader.CommitEventReq",{eventEncoded:eSe}){}class GSe extends nr("LSD.Leader.CommitEventRes",{}){}class QSe extends nr("LSD.Leader.EventlogReq",{}){}class YSe extends nr("LSD.Leader.EventlogRes",{eventlog:Ah}){}class WSe extends nr("LSD.Leader.Ping",{}){}class JSe extends nr("LSD.Leader.Pong",{}){}class Y8 extends nr("LSD.Leader.Disconnect",{}){}const KD=BD("LSD.Leader.SetSyncLatch",{payload:{closeLatch:wc},success:{}}),GD=BD("LSD.Leader.ResetAllData",{payload:{mode:At("all-data","only-app-db")},success:{}}),XSe=bt(HSe,Q8.Request,QSe,GD.Request,xSe,$Se,Y8,KSe,WSe,OSe,LSe,FSe,NSe,USe,PSe,KD.Request).annotations({identifier:"LSD.Leader.MessageToApp"});bt(BSe,Q8.Response,YSe,Y8,VSe,qSe,GSe,JSe,DSe,zSe,ISe,jSe,GD.Success,KD.Success).annotations({identifier:"LSD.Leader.MessageFromApp"});const ZSe=bt(kt("node",{url:ie}),kt("web",{}),kt("browser-extension",{}));ZSe.pipe(Dy("_tag"),vo);const eve={client:{session:({storeId:e,clientId:t,sessionId:n})=>`client-session-${e}-${t}-${n}`,leader:({storeId:e,clientId:t})=>`client-leader-${e}-${t}`}},W8={sessionInfo:()=>"session-info",devtoolsClientSession:({storeId:e,clientId:t,sessionId:n})=>`devtools-channel(client-session-${e}-${t}-${n})`,devtoolsClientLeader:({storeId:e,clientId:t,sessionId:n})=>`devtools-channel(client-leader-${e}-${t}-${n})`},tve={devtoolsClientSession:(e,{storeId:t,clientId:n,sessionId:r})=>e===W8.devtoolsClientSession({storeId:t,clientId:n,sessionId:r}),devtoolsClientLeader:(e,{storeId:t,clientId:n})=>e.startsWith(`devtools-channel(client-leader-${t}-${n}`)},nve=e=>e.makeBroadcastChannel({channelName:W8.sessionInfo(),schema:L8}),rve=({otelTracer:e,parentSpanContext:t})=>n=>{const r=x_(o8,e??v_e()),a=v5(Mt(y_e,w5)).pipe(Ble(r));return n.pipe(t?fh(__e(_s.getSpanContext(t))):Ge,vs(a))},O0=e=>{const t=e._duration;return t[0]*1e3+t[1]/1e6},GI=e=>e._performanceStartTime,H_=ie.pipe(Br,DB({constructor:()=>Za(10),decoding:()=>Za(10)})),ud={id:H_,target:ie,source:ie,channelName:ie,hops:Et(ie)},J8=wB.pipe(Br);class rv extends kt("DirectChannelRequest",{...ud,remainingHops:Et(ie).pipe(Br),channelVersion:Ut,reqId:sm(ie),sourceId:ie}){}class X8 extends kt("DirectChannelResponseSuccess",{...ud,reqId:ie,port:$E,remainingHops:Et(ie),channelVersion:Ut}){}class QD extends kt("DirectChannelResponseNoTransferables",{...ud,reqId:ie,remainingHops:Et(ie)}){}class Z8 extends kt("ProxyChannelRequest",{...ud,remainingHops:J8,channelIdCandidate:ie}){}class eV extends kt("ProxyChannelResponseSuccess",{...ud,reqId:ie,remainingHops:Et(ie),combinedChannelId:ie,channelIdCandidate:ie}){}class tV extends kt("ProxyChannelPayload",{...ud,remainingHops:J8,payload:br,combinedChannelId:ie}){}class nV extends kt("ProxyChannelPayloadAck",{...ud,reqId:ie,remainingHops:Et(ie),combinedChannelId:ie}){}class Hk extends kt("NetworkEdgeAdded",{id:H_,source:ie,target:ie}){}class Bk extends kt("NetworkTopologyRequest",{id:H_,hops:Et(ie),source:ie,target:At("-")}){}class Vk extends kt("NetworkTopologyResponse",{id:H_,reqId:ie,remainingHops:Et(ie),nodeName:ie,edges:Et(ie),source:ie,target:At("-")}){}const sv=kt("BroadcastChannelPacket",{id:H_,channelName:ie,payload:br,hops:Et(ie),source:ie,target:At("-")});class Kk extends bt(rv,X8,QD){}class rV extends bt(Z8,eV,tV,nV){}class YD extends bt(Kk,rV,Hk,Bk,Vk,sv){}class OS extends kt("DirectChannelPing",{}){}class DS extends kt("DirectChannelPong",{}){}class sve extends zi()("EdgeAlreadyExistsError",{target:ie}){}const Yp=e=>({packetId:e.id,"span.label":e.id+(Me(e,"reqId")&&e.reqId!==void 0?` for ${e.reqId}`:""),...e._tag!=="DirectChannelResponseSuccess"&&e._tag!=="ProxyChannelPayload"?{packet:e}:{}});Ie({channelName:ie,source:ie,mode:bt(At("proxy"),At("direct"))});const ave=jt,ive=({nodeName:e,incomingPacketsQueue:t,target:n,checkTransferableEdges:r,channelName:a,schema:o,sendPacket:l,channelVersion:d,scope:h,sourceId:p})=>ke(function*(){const S=yield*ave(),v=yield*DE.pipe(yO(()=>fr(void 0))),R={send:bt(o.send,OS,DS),listen:bt(o.listen,OS,DS)},O={current:{_tag:"Initial"}},x=({packet:T,respondToSender:q})=>ke(function*(){const D=O.current;if(v==null||v.addEvent(`process:${T._tag}`,{channelState:D._tag,packetId:T.id,packetReqId:T.reqId,packetChannelVersion:Me("channelVersion")(T)?T.channelVersion:void 0}),D._tag==="Initial")return yt();if(T._tag==="DirectChannelResponseNoTransferables")return yield*D2(S,T),"close";if(T.channelVersion>d)return v==null||v.addEvent(`incoming packet has higher version (${T.channelVersion}), closing channel`),yield*gr(h,er("higher-version-expected")),"close";if(T.channelVersion<d){const I=rv.make({source:e,sourceId:p,target:n,channelName:a,channelVersion:d,hops:[],remainingHops:T.hops,reqId:void 0});v==null||v.addEvent(`incoming packet has lower version (${T.channelVersion}), sending request to reconnect (${I.id})`),yield*l(I);return}if(D._tag==="Established"&&T._tag==="DirectChannelRequest")return T.sourceId===D.otherSourceId?void 0:(v==null||v.addEvent("force-new-channel"),yield*gr(h,er("force-new-channel")),"close");switch(T._tag){case"DirectChannelRequest":{if(D._tag!=="RequestSent")return;if(T.reqId!==D.reqPacketId){const $=rv.make({source:e,sourceId:p,target:n,channelName:a,channelVersion:d,hops:[],remainingHops:T.hops,reqId:T.id});v==null||v.addEvent(`Re-sending new request (${$.id}) for incoming request (${T.id})`),yield*l($)}if(e>n){v==null||v.addEvent("winner side: creating direct channel and sending response");const $=new MessageChannel,H=yield*MI({port:$.port1,schema:R,debugId:d}).pipe(Ry(II));yield*q(X8.make({reqId:T.id,target:n,source:e,channelName:T.channelName,hops:[],remainingHops:T.hops.slice(0,-1),port:$.port2,channelVersion:d})),O.current={_tag:"winner:ResponseSent",channel:H,otherSourceId:T.sourceId},yield*H.listen.pipe(Gl(),Ec(bn(OS)),b0(1),ls),yield*H.send(DS.make({})),v==null||v.addEvent("winner side: established"),O.current={_tag:"Established",otherSourceId:T.sourceId},yield*On(S,H)}else v==null||v.addEvent("loser side: waiting for response"),O.current={_tag:"loser:WaitingForResponse",otherSourceId:T.sourceId};break}case"DirectChannelResponseSuccess":{if(D._tag!=="loser:WaitingForResponse")return yt(`Expected to find direct channel response from ${n}, but was in ${D._tag} state`);const I=yield*MI({port:T.port,schema:R,debugId:d}).pipe(Ry(II)),$=yield*I.listen.pipe(Gl(),Ec(bn(DS)),b0(1),ls,vO);yield*I.send(OS.make({})).pipe(em(10),nE({times:2})),yield*$,v==null||v.addEvent("loser side: established"),O.current={_tag:"Established",otherSourceId:D.otherSourceId},yield*On(S,I);return}default:return Bf(T)}}).pipe(Ft(`handleMessagePacket:${T._tag}:${T.source}→${T.target}`,{attributes:Yp(T)}));yield*ke(function*(){for(;;){const T=yield*nm(t);if((yield*x(T))==="close")return}}).pipe(Bn,en,jn);const z=O.current;return z._tag!=="Initial"?yt(`Expected channel to be in Initial state, but was in ${z._tag} state`):(yield*ke(function*(){const T=rv.make({source:e,sourceId:p,target:n,channelName:a,channelVersion:d,hops:[],reqId:void 0});O.current={_tag:"RequestSent",reqPacketId:T.id};const q=r(T);if(q!==void 0)return yield*Ja(`No transferable edges found for ${T.source}→${T.target}`),yield*If(q);yield*l(T),v==null||v.addEvent(`initial edge request sent (${T.id})`)}),yield*S)}).pipe(kO(`makeDirectChannel:${d}`)),ove=({schema:e,newEdgeAvailablePubSub:t,channelName:n,checkTransferableEdges:r,nodeName:a,incomingPacketsQueue:o,target:l,sendPacket:d})=>ld(h=>ke(function*(){const p=Za(),S=yield*Xs(),v=yield*mhe(),R=yield*jt(),O={pendingSends:0,totalSends:0,connectCounter:0,isConnected:!1,innerChannelRef:{current:void 0}};yield*ke(function*(){const q=yield*jt();for(;;){O.connectCounter++;const H=O.connectCounter;yield*Ja(`Connecting#${H}`);const K=yield*k_();yield*Ss(Ee=>gr(K,Ee));const V=yield*BB(t).pipe(ea(Ee=>Ja(`new-conn:${Ee}`)),b0(1),ls,gc("new-edge"),vO),j=ive({nodeName:a,sourceId:p,incomingPacketsQueue:o,target:l,checkTransferableEdges:r,channelName:n,schema:e,channelVersion:H,sendPacket:d,scope:K}).pipe(C_(K),Is(K),kle(be())),te=yield*p5(j,V.pipe(mle));if(te==="new-edge")yield*gr(K,xm("new-edge"));else{const Ee=yield*te.pipe(tr);if(Ee._tag==="Failure")yield*gr(K,Ee),S6(Ee.cause)&&bn(QD)(Ee.cause.error)&&(yield*V.pipe(tr));else{const xe=Ee.value;yield*On(q,{channel:xe,makeDirectChannelScope:K,channelVersion:H});break}}}const{channel:D,makeDirectChannelScope:I,channelVersion:$}=yield*q;yield*Ja(`Connected#${$}`),O.isConnected=!0,O.innerChannelRef.current=D,yield*On(R,void 0),yield*D.listen.pipe(Gl(),WB(H=>IO(S,H)),ls,en,Is(I)),yield*ke(function*(){for(;;){const[H,K]=yield*dhe(v);yield*D.send(H),yield*On(K,void 0),yield*hhe(v)}}).pipe(Is(I)),yield*D.closedDeferred,yield*gr(I,er("channel-closed")),yield*Ja(`Disconnected#${$}`),O.isConnected=!1,O.innerChannelRef.current=void 0}).pipe(zf,tm,en,jn);const x=yield*CO.pipe(Wa),z=q=>ke(function*(){const D=yield*jt();O.pendingSends++,O.totalSends++,yield*fhe(v,[q,D]),yield*D,O.pendingSends--}).pipe(zf,fh(x)),A=Hf(S,{maxChunkSize:1}).pipe(su(rt)),E=yield*jt().pipe(Pn(tu(Ra)));return{webChannel:{[ws]:ws,send:z,listen:A,closedDeferred:E,supportsTransferables:!0,schema:e,debugInfo:O,shutdown:gr(h,er("shutdown"))},initialEdgeDeferred:R}})),cve=({queue:e,nodeName:t,newEdgeAvailablePubSub:n,sendPacket:r,target:a,channelName:o,schema:l})=>ld(d=>ke(function*(){const h={current:{_tag:"Initial"}},p={kind:"proxy-channel",pendingSends:0,totalSends:0,connectCounter:0,isConnected:!1},S=Za(5);yield*rk({channelIdCandidate:S});const v=yield*CO.pipe(Wa),R=yield*QB(!1),O=ke(function*(){return yield*mI(R,te=>te!==!1)}),x=j=>ke(function*(){yield*Ja(`Connected (${j})`).pipe(fh(v)),h.current={_tag:"Established",listenSchema:l.listen,listenQueue:q,ackMap:D,combinedChannelId:j},yield*JS(R,h.current),p.isConnected=!0}),z=Zn(()=>r(Z8.make({channelName:o,hops:[],source:t,target:a,channelIdCandidate:S}))),A=j=>[S,j].sort().join("_"),E=yield*Xs().pipe(Pn(Ns)),T=({packet:j,respondToSender:te})=>ke(function*(){const xe=`target:${j.source}, channelName:${j.channelName}`,fe=h.current;switch(j._tag){case"ProxyChannelRequest":{const De=A(j.channelIdCandidate);fe._tag==="Established"?fe.combinedChannelId===De||(yield*ki(`[${t}] Received ProxyChannelRequest with different channel ID (${De}) while established with ${fe.combinedChannelId}. Re-establishing.`),yield*JS(R,!1),h.current={_tag:"Pending",initiatedVia:"incoming-request"},yield*Ja("Reconnecting (received conflicting ProxyChannelRequest)").pipe(fh(v)),p.isConnected=!1,p.connectCounter++,yield*z):fe._tag==="Initial"&&(yield*JS(R,!1),h.current={_tag:"Pending",initiatedVia:"incoming-request"},yield*Ja("Connecting (received ProxyChannelRequest)").pipe(fh(v)),p.isConnected=!1,p.connectCounter++),yield*te(eV.make({reqId:j.id,remainingHops:j.hops,hops:[],target:a,source:t,channelName:o,combinedChannelId:De,channelIdCandidate:S}));return}case"ProxyChannelResponseSuccess":{if(fe._tag!=="Pending"){if(fe._tag==="Established"&&fe.combinedChannelId!==j.combinedChannelId)return yt(`ProxyChannel[${xe}]: Expected proxy channel to have the same combinedChannelId as the packet:
${fe.combinedChannelId} (channel) === ${j.combinedChannelId} (packet)`);if(fe._tag==="Established")return;yield*ki(`[${t}] Ignoring ResponseSuccess ${j.id} received in unexpected state ${fe._tag}`);return}const De=A(j.channelIdCandidate);if(De!==j.combinedChannelId)return yield*Ty(`ProxyChannel[${xe}]: Expected proxy channel to have the same combinedChannelId as the packet:
${De} (channel) === ${j.combinedChannelId} (packet)`);yield*x(j.combinedChannelId);const ae=h.current;if(ae._tag==="Established"){const Te=yield*Wue(E);for(const Re of Te){if(ae.combinedChannelId!==Re.combinedChannelId){yield*ki(`[${t}] Discarding buffered payload ${Re.id}: Combined channel ID mismatch during drain. Expected ${ae.combinedChannelId}, got ${Re.combinedChannelId}`);continue}const Xe=yield*c0(ae.listenSchema)(Re.payload);yield*ae.listenQueue.pipe(Hn(Xe))}}else yield*Cy(`[${t}] State is not Established immediately after setStateToEstablished was called. Cannot drain buffer. State: ${ae._tag}`);return}case"ProxyChannelPayload":{if(fe._tag==="Established"&&fe.combinedChannelId!==j.combinedChannelId)return yield*Ty(`ProxyChannel[${xe}]: Expected proxy channel to have the same combinedChannelId as the packet:
${fe.combinedChannelId} (channel) === ${j.combinedChannelId} (packet)`);if(yield*te(nV.make({reqId:j.id,remainingHops:j.hops,hops:[],target:a,source:t,channelName:o,combinedChannelId:fe._tag==="Established"?fe.combinedChannelId:j.combinedChannelId})),fe._tag==="Established"){const De=yield*c0(fe.listenSchema)(j.payload);yield*fe.listenQueue.pipe(Hn(De))}else yield*Hn(E,j);return}case"ProxyChannelPayloadAck":{if(fe._tag!=="Established"){yield*Ja(`Not yet connected to ${a}. dropping message`),yield*ki(`[${t}] Received Ack but not established (State: ${fe._tag}). Dropping Ack for ${j.reqId}`);return}const De=fe.ackMap.get(j.reqId)??yt(`[ProxyChannel[${xe}]] Expected ack for ${j.reqId}`);yield*On(De,void 0),fe.ackMap.delete(j.reqId);return}default:return Bf(j)}}).pipe(Ft(`handleProxyPacket:${j._tag}:${j.source}->${j.target}`,{attributes:Yp(j)}));yield*Hf(e).pipe(ea(T),ls,en,jn);const q=yield*Xs();yield*Ja("Connecting");const D=new Map;{if(h.current._tag!=="Initial")return yt("Expected proxy channel to be Initial");h.current={_tag:"Pending",initiatedVia:"outgoing-request"},yield*z;const j=yield*BB(n).pipe(ea(()=>z),ls,jn),{combinedChannelId:te}=yield*O;yield*wa(j),yield*x(te)}const I=j=>ke(function*(){const te=yield*oD(l.send)(j),Ee=yield*tB(),xe=yield*jt();p.pendingSends++,p.totalSends++;const fe=ke(function*(){const{combinedChannelId:ae}=yield*mI(R,Re=>Re!==!1);yield*ke(function*(){const Re=yield*jt(),Xe=tV.make({channelName:o,payload:te,hops:[],source:t,target:a,combinedChannelId:ae});D.set(Xe.id,Re),yield*r(Xe),yield*Re,yield*On(xe,void 0),p.pendingSends--}).pipe(em(100),nE(TH(10)),Wa)}).pipe(Sa(Cy)),De=yield*R.changes.pipe(Ec(ae=>ae===!1),ea(()=>o0(Ee,fe)),ls,vO);yield*o0(Ee,fe),yield*xe,yield*wa(De)}).pipe(zf,Ft("sendAckWithRetry:ProxyChannelPayload"),fh(v)),$=Hf(q).pipe(su(rt)),H=yield*jt().pipe(Pn(tu(Ra))),K=yield*Lm();return{[ws]:ws,send:I,listen:$,closedDeferred:H,supportsTransferables:!1,schema:l,shutdown:gr(d,Ra),debugInfo:p,debug:{ping:(j="ping")=>I(Ly.make({message:j})).pipe(vs(K),en,Li)}}}).pipe(kO("makeProxyChannel"))),I0=class I0{constructor({timeout:t}){b(this,"values",new Map);b(this,"timeoutHandle");b(this,"timeoutMs");b(this,"onShutdown",()=>clearTimeout(this.timeoutHandle));this.timeoutMs=Nh(t)}add(t){this.values.set(t,Date.now()),this.scheduleCleanup()}has(t){return this.values.has(t)}delete(t){this.values.delete(t)}scheduleCleanup(){this.timeoutHandle===void 0&&(this.timeoutHandle=setTimeout(()=>{this.cleanup(),this.timeoutHandle=void 0},this.timeoutMs))}cleanup(){const t=Date.now();for(const[n,r]of this.values.entries())t-r>=this.timeoutMs&&this.values.delete(n)}};b(I0,"make",t=>ke(function*(){const n=new I0({timeout:t});return yield*Ss(()=>it(()=>n.onShutdown())),n}));let Gk=I0;const lve=e=>ke(function*(){const t=new Map,n=yield*Gk.make(RP(1)),r=yield*D5().pipe(Pn(ak)),a=new Map,o=yield*Xs().pipe(Pn(Ns)),l=new Map,d=new Map,h=D=>{var I;if(D._tag==="DirectChannelRequest"&&(t.size===0||((I=t.get(D.target))==null?void 0:I.channel.supportsTransferables)===!1)||![...t.values()].some($=>$.channel.supportsTransferables===!0))return QD.make({reqId:D.id,channelName:D.channelName,source:D.target,target:D.source,remainingHops:D.hops,hops:[]})},p=D=>ke(function*(){var I,$;if(bn(Hk)(D)){yield*Ja("NetworkEdgeAdded",{packet:D,nodeName:e}),yield*NO(r,D.target);const H=Array.from(t).filter(([K])=>K!==D.source).map(([K,V])=>V.channel);yield*os(H,K=>K.send(D),{concurrency:"unbounded"});return}if(bn(sv)(D)){const H=Array.from(t).filter(([j])=>!D.hops.includes(j)).map(([j,te])=>te.channel),K={...D,hops:[...D.hops,e]};if(yield*os(H,j=>j.send(K),{concurrency:"unbounded"}),D.source===e)return;const V=d.get(D.channelName);V!==void 0&&(yield*Hn(V,D));return}if(bn(Bk)(D)){if(D.source!==e){const V=D.hops.at(-1)??yt(`${e}: Expected hops for packet`,D),j=t.get(V).channel,te=Vk.make({reqId:D.id,source:D.source,target:D.target,remainingHops:D.hops.slice(0,-1),nodeName:e,edges:Array.from(t.keys())});yield*j.send(te)}const H=Array.from(t).filter(([V])=>!D.hops.includes(V)).map(([V,j])=>j.channel),K={...D,hops:[...D.hops,e]};yield*os(H,V=>V.send(K),{concurrency:"unbounded"});return}if(bn(Vk)(D)){if(D.source===e)l.get(D.reqId).set(D.nodeName,new Set(D.edges));else{const K=D.remainingHops.at(-1)??yt(`${e}: Expected remaining hops for packet`,D);yield*(((I=t.get(K))==null?void 0:I.channel)??yt(`${e}: Expected edge channel (${K}) for packet`,D,"Available edges:",Array.from(t.keys()))).send({...D,remainingHops:D.remainingHops.slice(0,-1)})}return}if(t.has(D.target)){const H=t.get(D.target).channel,K=D.source===e?[]:[...D.hops,e];yield*rk({hasDirectEdge:!0}),yield*H.send({...D,hops:K})}else if(D.remainingHops!==void 0){const H=D.remainingHops.at(-1)??yt(`${e}: Expected remaining hops for packet`,D),K=($=t.get(H))==null?void 0:$.channel;if(K===void 0){yield*ki(`${e}: Expected to find hop target ${H} in edges. Dropping packet.`,D);return}yield*K.send({...D,remainingHops:D.remainingHops.slice(0,-1),hops:[...D.hops,e]})}else{const H=D.source===e?[]:[...D.hops,e],K=Array.from(t).filter(([j])=>j!==D.source).map(([j,te])=>({name:j,channel:te.channel}));H.length===0&&K.length===0&&Rc&&(yield*ki(e,"no route found to",D.target,D._tag,"TODO handle better"));const V={...D,hops:H};yield*rk({edgesToForwardTo:K.map(({name:j})=>j)}),yield*os(K,({channel:j})=>j.send(V),{concurrency:"unbounded"})}}).pipe(Ft(`sendPacket:${D._tag}:${D.source}→${D.target}`,{attributes:Yp(D)}),Wa),S=({target:D,edgeChannel:I,replaceIfExists:$=!1})=>ke(function*(){if(t.has(D))if($)yield*v(D).pipe(Wa);else return yield*new sve({target:D});const H=yield*I.listen.pipe(Gl(),ea(V=>ke(function*(){const j=yield*c0(YD)(V);if(!n.has(j.id))switch(n.add(j.id),j._tag){case"NetworkEdgeAdded":case"NetworkTopologyRequest":case"NetworkTopologyResponse":{yield*p(j);break}default:if(j.target===e){const te=`target:${j.source}, channelName:${j.channelName}`;if(!a.has(te)){const fe=yield*Xs().pipe(Pn(Ns));a.set(te,{queue:fe,debugInfo:void 0})}const Ee=a.get(te).queue,xe=fe=>I.send(fe).pipe(Ft(`respondToSender:${fe._tag}:${fe.source}→${fe.target}`,{attributes:Yp(fe)}),Wa);bn(rV)(j)?yield*Hn(Ee,{packet:j,respondToSender:xe}):bn(Kk)(j)&&(yield*Hn(Ee,{packet:j,respondToSender:xe})),(j._tag==="ProxyChannelRequest"||j._tag==="DirectChannelRequest")&&(yield*Hn(o,{channelName:j.channelName,source:j.source,mode:j._tag==="ProxyChannelRequest"?"proxy":"direct"}))}else{if(bn(Kk)(j)){const te=h(j);if(te!==void 0)return yield*Ja(`No transferable edges found for ${j.source}→${j.target}`),yield*I.send(te).pipe(Ft(`sendNoTransferableResponse:${j.source}→${j.target}`,{attributes:Yp(te)}))}yield*p(j)}}})),ls,Bn,Wa,en,jn);t.set(D,{channel:I,listenFiber:H});const K=Hk.make({source:e,target:D});yield*p(K).pipe(Wa)}).pipe(Nl({"addEdge:target":D,nodeName:e}),Ft(`addEdge:${e}→${D}`,{attributes:{supportsTransferables:I.supportsTransferables}})),v=D=>ke(function*(){t.has(D)||(yield*new Xw(`No edge found for ${D}`)),yield*wa(t.get(D).listenFiber),t.delete(D)}),R=({target:D,channelName:I})=>it(()=>a.has(`target:${D}, channelName:${I}`)),O=({target:D,channelName:I,schema:$,mode:H,timeout:K=Tv(1),closeExisting:V=!1})=>ke(function*(){var xe;const j=P_($),te=`target:${D}, channelName:${I}`;if(a.has(te)){const fe=(xe=a.get(te).debugInfo)==null?void 0:xe.channel;fe&&(V?(yield*fe.shutdown,a.delete(te)):yt(`Channel ${te} already exists`,fe))}if(a.has(te)===!1){const fe=yield*Xs().pipe(Pn(Ns));a.set(te,{queue:fe,debugInfo:void 0})}const Ee=a.get(te).queue;if(yield*Ss(()=>it(()=>a.delete(te))),H==="direct"){const fe=yield*Xs().pipe(Pn(Ns));yield*x5(Ee,1,10).pipe(Zs(Te=>IO(fe,Te)),tm,Bn,en,jn);const{webChannel:De,initialEdgeDeferred:ae}=yield*ove({nodeName:e,incomingPacketsQueue:fe,newEdgeAvailablePubSub:r,target:D,channelName:I,schema:j,sendPacket:p,checkTransferableEdges:h});return a.set(te,{queue:Ee,debugInfo:{channel:De,target:D}}),yield*ae,De}else{const fe=yield*cve({nodeName:e,newEdgeAvailablePubSub:r,target:D,channelName:I,schema:j,queue:Ee,sendPacket:p});return a.set(te,{queue:Ee,debugInfo:{channel:fe,target:D}}),fe}}).pipe(kO(`makeChannel:${e}→${D}(${I})`,{attributes:{target:D,channelName:I,mode:H,timeout:K}}),Nl({nodeName:e,target:D,channelName:I}));let x=!1;const z=GB(()=>{if(x)return yt("listenForChannel already started");x=!0;const D=$=>`${$.channelName}:${$.source}:${$.mode}`,I=new Set;return Hf(o).pipe(Ec($=>{const H=D($);return I.has(H)?!1:(I.add(H),!0)}))}),A=({channelName:D,schema:I})=>ld($=>ke(function*(){if(d.has(D))return yt(`Broadcast channel ${D} already exists`,d.get(D));const H={},K=yield*Xs().pipe(Pn(Ns));d.set(D,K);const V=Ee=>ke(function*(){const xe=yield*cD(I)(Ee),fe=sv.make({channelName:D,payload:xe,source:e,target:"-",hops:[]});yield*p(fe)}),j=Hf(K).pipe(Ec(bn(sv)),su(Ee=>Qm(I)(Ee.payload))),te=yield*jt().pipe(Pn(tu(Ra)));return{[ws]:ws,send:V,listen:j,closedDeferred:te,supportsTransferables:!1,schema:{listen:I,send:I},shutdown:gr($,Ra),debugInfo:H}})),E=it(()=>new Set(t.keys())),T=yield*Lm();return{nodeName:e,addEdge:S,removeEdge:v,hasChannel:R,makeChannel:O,listenForChannel:z,makeBroadcastChannel:A,edgeKeys:E,debug:{print:()=>{var D,I,$,H;console.log("Webmesh debug info for node:",e),console.log("Edges:",t.size);for(const[K,V]of t)console.log(`  ${K}: supportsTransferables=${V.channel.supportsTransferables}`);console.log("Channels:",a.size);for(const[K,V]of a)console.log(kp(K,2),`
`,Object.entries({target:(D=V.debugInfo)==null?void 0:D.target,supportsTransferables:(I=V.debugInfo)==null?void 0:I.channel.supportsTransferables,...($=V.debugInfo)==null?void 0:$.channel.debugInfo}).map(([j,te])=>kp(`${j}=${te}`,4)).join(`
`),"    ",(H=V.debugInfo)==null?void 0:H.channel,`
`,kp(`Queue: ${V.queue.unsafeSize().pipe(Qa)}`,4),V.queue);console.log("Broadcast channels:",d.size);for(const[K,V]of d)console.log(kp(K,2))},ping:D=>{ke(function*(){const I=$=>Ly.make({message:`ping from ${e} via ${$}`,payload:D});for(const[$,H]of t)yield*ss(`sending ping via edge ${$}`),yield*H.channel.send(I(`edge ${$}`));for(const[$,H]of a){if(H.debugInfo===void 0){yield*ss(`channel ${$} has no debug info`);continue}yield*ss(`sending ping via channel ${$}`),yield*H.debugInfo.channel.send(I(`channel ${$}`))}}).pipe(vs(T),en,Li)},requestTopology:(D=1e3)=>ke(function*(){const I=Bk.make({source:e,target:"-",hops:[]}),$=new Map;$.set(e,new Set(t.keys())),l.set(I.id,$),yield*p(I),yield*ss(`Waiting ${D}ms for topology response`),yield*wO(D),yield*ss(`Topology response (from ${e}):`);for(const[H,K]of $)yield*ss(`  node '${H}' has edge to: ${Array.from(K.values()).join(", ")}`)}).pipe(vs(T),en,aE)}}}).pipe(Ft(`makeMeshNode:${e}`),Nl({"makeMeshNode.nodeName":e})),uve=({storeId:e,clientId:t,sessionId:n,isLeader:r,devtoolsEnabled:a,connectDevtoolsToStore:o,lockStatus:l,leaderThread:d,schema:h,sqliteDb:p,shutdown:S,connectWebmeshNode:v,webmeshMode:R,registerBeforeUnload:O,debugInstanceId:x})=>ke(function*(){const z=a?{enabled:!0,pullLatch:yield*dM(!0),pushLatch:yield*dM(!0)}:{enabled:!1};return a&&(yield*ke(function*(){const A=yield*lve(eve.client.session({storeId:e,clientId:t,sessionId:n}));globalThis.__debugWebmeshNode=A;const E=h.devtools.alias,T=I8.make({storeId:e,clientId:t,sessionId:n,schemaAlias:E,isLeader:r});yield*v({webmeshNode:A,sessionInfo:T});const q=yield*nve(A);yield*F8({webChannel:q,sessionInfo:T}).pipe(en,jn),yield*A.listenForChannel.pipe(Ec(D=>tve.devtoolsClientSession(D.channelName,{storeId:e,clientId:t,sessionId:n})&&D.mode===R),ea(Dle(function*({channelName:D,source:I}){const $=yield*A.makeChannel({target:I,channelName:D,schema:{listen:kSe,send:ASe},mode:R}),H=$.send(VD.make({clientId:t,liveStoreVersion:xs,sessionId:n})).pipe(Wa);yield*Ss(()=>H),yield*Pn(it(()=>O(()=>H.pipe(Li))),K=>it(()=>K())),yield*o($)},en,jn)),ls)}).pipe(Ft("@livestore/common:make-client-session:devtools"),en,jn)),{sqliteDb:p,leaderThread:d,devtools:z,lockStatus:l,clientId:t,sessionId:n,shutdown:S,debugInstanceId:x}}),sV=e=>(...t)=>{const[n,r,a]=t;if(lo(n)){const{query:o,bindValues:l}=n.asSql();return e(o,l,r)}else return e(n,r,a)},aV=e=>(...t)=>{const[n,r]=t;if(lo(n)){const{query:a,bindValues:o}=n.asSql(),l=ME(n),d=e(a,o);return Pf(l)(d)}else return e(n,r)},zy=Symbol.for("NOT_REFRESHED_YET"),fve=e=>typeof e=="object"&&e!==null&&"_tag"in e&&e._tag==="thunk",QI=()=>({_tag:"unknown"}),dve=e=>({_tag:"Some",value:e}),hve=()=>({_tag:"None"});let mve=0;const gve=()=>`graph-${++mve}`;class pve{constructor(){b(this,"id",gve());b(this,"atoms",new Set);b(this,"effects",new Set);b(this,"context");b(this,"debugRefreshInfos",new uo(200));b(this,"currentDebugRefresh");b(this,"deferredEffects",new Map);b(this,"refreshCallbacks",new Set);b(this,"nodeIdCounter",0);b(this,"uniqueNodeId",()=>`node-${++this.nodeIdCounter}`);b(this,"refreshInfoIdCounter",0);b(this,"uniqueRefreshInfoId",()=>`refresh-info-${++this.refreshInfoIdCounter}`);b(this,"runEffects",(t,n)=>{var a;(((a=this.context)==null?void 0:a.effectsWrapper)??(o=>o()))(()=>{this.currentDebugRefresh={refreshedAtoms:[],startMs:performance.now()};for(const h of t)h.doEffect(n==null?void 0:n.otelContext,n.debugRefreshReason);const o=this.currentDebugRefresh.refreshedAtoms,l=performance.now()-this.currentDebugRefresh.startMs;this.currentDebugRefresh=void 0;const d={id:this.uniqueRefreshInfoId(),reason:n.debugRefreshReason,skippedRefresh:!1,refreshedAtoms:o,durationMs:l,completedTimestamp:Date.now(),graphSnapshot:this.getSnapshot({includeResults:!1})};this.debugRefreshInfos.push(d),this.runRefreshCallbacks()})});b(this,"runDeferredEffects",t=>{for(const[n,r]of this.deferredEffects)this.runEffects(new Set([n]),{debugRefreshReason:{_tag:"runDeferredEffects",originalRefreshReasons:Array.from(r),manualRefreshReason:t==null?void 0:t.debugRefreshReason},otelContext:t==null?void 0:t.otelContext})});b(this,"runRefreshCallbacks",()=>{for(const t of this.refreshCallbacks)t()});b(this,"getSnapshot",t=>{const{includeResults:n=!1}=t??{},r=[];for(const l of this.atoms)r.push(WI(l,n));const a=[];for(const l of this.effects)a.push(_ve(l));const o=[];for(const[l]of this.deferredEffects)o.push(l.id);return{atoms:r,effects:a,deferredEffects:o}});b(this,"subscribeToRefresh",t=>(this.refreshCallbacks.add(t),()=>{this.refreshCallbacks.delete(t)}))}makeRef(t,n){const r={_tag:"ref",id:this.uniqueNodeId(),isDirty:!1,isDestroyed:!1,previousResult:t,computeResult:()=>r.previousResult,sub:new Set,super:new Set,label:n==null?void 0:n.label,meta:n==null?void 0:n.meta,equal:(n==null?void 0:n.equal)??df,refreshes:0};return this.atoms.add(r),r}makeThunk(t,n){const r={_tag:"thunk",id:this.uniqueNodeId(),previousResult:zy,isDirty:!0,isDestroyed:!1,computeResult:(a,o)=>{if(r.isDirty){const l=this.currentDebugRefresh===void 0;l&&(this.currentDebugRefresh={refreshedAtoms:[],startMs:performance.now()}),r.sub=new Set;const d=(O,x)=>(this.addEdge(r,O),YI(O,x,o));let h;const S=t(d,O=>{h=O},this.context??yve(this),a,o),v=r.equal(r.previousResult,S)===!1,R={atom:WI(r,!1),resultChanged:v,debugInfo:h??QI()};if(this.currentDebugRefresh.refreshedAtoms.push(R),r.isDirty=!1,r.previousResult=S,r.recomputations++,l){const O=this.currentDebugRefresh.refreshedAtoms,x=performance.now()-this.currentDebugRefresh.startMs;this.currentDebugRefresh=void 0,this.debugRefreshInfos.push({id:this.uniqueRefreshInfoId(),reason:o??{_tag:"makeThunk",label:n==null?void 0:n.label},skippedRefresh:!1,refreshedAtoms:O,durationMs:x,completedTimestamp:Date.now(),graphSnapshot:this.getSnapshot({includeResults:!1})})}return S}else return r.previousResult},sub:new Set,super:new Set,recomputations:0,label:n==null?void 0:n.label,meta:n==null?void 0:n.meta,equal:(n==null?void 0:n.equal)??df,__getResult:t};return this.atoms.add(r),r}destroyNode(t){if(t._tag==="ref"||t._tag==="thunk")for(const n of t.super)this.destroyNode(n);if(t._tag!=="ref")for(const n of t.sub)this.removeEdge(t,n);t._tag==="effect"?(this.deferredEffects.delete(t),this.effects.delete(t)):this.atoms.delete(t),t.isDestroyed=!0}destroy(){for(const t of this.atoms)this.destroyNode(t)}makeEffect(t,n){const r={_tag:"effect",id:this.uniqueNodeId(),isDestroyed:!1,doEffect:(a,o)=>{r.invocations++,r.sub=new Set,t((d,h,p)=>(this.addEdge(r,d),YI(d,h,p)),a,o)},sub:new Set,label:n==null?void 0:n.label,invocations:0};return this.effects.add(r),r}setRef(t,n,r){this.setRefs([[t,n]],r)}setRefs(t,n){const r=new Set;for(const[a,o]of t)a.previousResult=o,a.refreshes++,Qk(a,r);if(n!=null&&n.skipRefresh)for(const a of r)this.deferredEffects.has(a)===!1&&this.deferredEffects.set(a,new Set),(n==null?void 0:n.debugRefreshReason)!==void 0&&this.deferredEffects.get(a).add(n.debugRefreshReason);else this.runEffects(r,{debugRefreshReason:(n==null?void 0:n.debugRefreshReason)??QI(),otelContext:n==null?void 0:n.otelContext})}addEdge(t,n){t.sub.add(n),n.super.add(t),this.currentDebugRefresh===void 0&&this.runRefreshCallbacks()}removeEdge(t,n){t.sub.delete(n);const r=new Set;Qk(n,r);for(const a of r)this.deferredEffects.set(a,new Set);n.super.delete(t),this.currentDebugRefresh===void 0&&this.runRefreshCallbacks()}}const YI=(e,t,n)=>{if(e.isDestroyed&&yt(`LiveStore Error: Attempted to compute destroyed ${e._tag} (${e.id}): ${e.label??""}`),e.isDirty){const r=e.computeResult(t,n);return e.isDirty=!1,e.previousResult=r,r}else return e.previousResult},Qk=(e,t)=>{for(const n of e.super)n._tag==="thunk"?(n.isDirty=!0,Qk(n,t)):t.add(n)},yve=e=>{throw new Error(`LiveStore Error: \`context\` not set on ReactiveGraph (${e.id})`)},WI=(e,t)=>{const n=[];for(const o of e.sub)n.push(o.id);const r=[];for(const o of e.super)r.push(o.id);const a=t?dve(e.previousResult===zy?'"SYMBOL_NOT_REFRESHED_YET"':JSON.stringify(e.previousResult)):hve();return e._tag==="ref"?{_tag:e._tag,id:e.id,label:e.label,meta:e.meta,isDirty:e.isDirty,sub:n,super:r,isDestroyed:e.isDestroyed,refreshes:e.refreshes,previousResult:a}:{_tag:"thunk",id:e.id,label:e.label,meta:e.meta,isDirty:e.isDirty,sub:n,super:r,isDestroyed:e.isDestroyed,recomputations:e.recomputations,previousResult:a}},_ve=e=>{const t=[];for(const n of e.sub)t.push(n.id);return{_tag:e._tag,id:e.id,label:e.label,sub:t,invocations:e.invocations,isDestroyed:e.isDestroyed}},bve=()=>new pve;let Sve=0;const JI=Symbol.for("LiveQuery"),XI=e=>typeof e=="string"||typeof e=="number"?e.toString():e.filter(S_e).join(",");var yz;yz=JI;class vve{constructor(){b(this,"__result!");b(this,"id",Sve++);b(this,yz,JI);b(this,"activeSubscriptions",new Set);b(this,"executionTimes",[]);b(this,"isDestroyed",!1);b(this,"run",t=>this.results$.computeResult(t.otelContext,t.debugRefreshReason));b(this,"dependencyQueriesRef",new Set)}get runs(){return this.results$._tag==="thunk"?this.results$.recomputations:0}}const wve=(e,t,n,r)=>{const a=(o,l,d)=>{if(o._tag==="thunk"||o._tag==="ref")return e(o,n,d);if(o._tag==="def"||o._tag==="signal-def"){const h=o.make(t);return r.add(h),a(h.value,l,d)}return o._tag==="signal"&&Me(o,"ref")?e(o.ref,n,d):e(o.results$,n,d)};return a},Eve=(e,t)=>(n,r)=>{let a=n.defRcMap.get(e);return a?(a.rc++,a):(a={rc:1,value:t(n,r),deref:()=>{a.rc--,a.rc===0&&(a.value.destroy(),n.defRcMap.delete(e))}},n.defRcMap.set(e,a),a)},ZI=(e,t)=>`${e.sqliteDef.name}.get:${t===void 0?e.default.id:t===$i?"sessionId":t}`,iV=({id:e,explicitDefaultValues:t,table:n,otelContext:r})=>({store:a})=>{if(IE(n)===!1)return yt(`Cannot insert row for table "${n.sqliteDef.name}" which does not have 'deriveEvents: true' set`);const o=r??a.otel.queriesSpanContext,l=e===$i?a.sessionId:e;a.sqliteDbWrapper.cachedSelect(`SELECT 1 FROM '${n.sqliteDef.name}' WHERE id = ?`,[l],{otelContext:o}).length!==1&&a.commit({otelContext:o,skipRefresh:!0,label:`${n.sqliteDef.name}.set:${l}`},n.set(t,l))},Tve=["begin","rollback","commit","savepoint","release"],eL=200;var tf,Dh,L0;class Rve{constructor(){Ir(this,tf,new A0(eL));Ir(this,Dh,new Map);b(this,"getKey",(t,n)=>n==null?t:Array.isArray(n)?t+`
`+n.join(`
`):t+`
`+Object.values(n).join(`
`));b(this,"get",t=>Ne(this,tf).get(t));b(this,"set",(t,n,r)=>{Ne(this,tf).set(n,r);for(const a of t){let o=Ne(this,Dh).get(a);o==null&&(o=new cSe(eL),o.onEvict=Ne(this,L0),Ne(this,Dh).set(a,o)),o.add(n)}});Ir(this,L0,t=>{Ne(this,tf).delete(t)});b(this,"ignoreQuery",t=>Tve.some(n=>t.startsWith(n)));b(this,"invalidate",t=>{for(const n of t){const r=Ne(this,Dh).get(n);if(r!=null)for(const a of r)Ne(this,tf).delete(a)}})}}tf=new WeakMap,Dh=new WeakMap,L0=new WeakMap;const oV=()=>({slowQueries:new uo(200),queryFrameDuration:0,queryFrameCount:0,events:new uo(1e3)});class Cve{constructor({db:t,otel:n}){b(this,"_tag","SqliteDb");b(this,"cachedStmts",new A0(200));b(this,"tablesUsedCache",new A0(200));b(this,"resultCache",new Rve);b(this,"db");b(this,"otelTracer");b(this,"otelRootSpanContext");b(this,"tablesUsedStmt");b(this,"debugInfo",oV());b(this,"metadata");b(this,"execute",sV((t,n)=>this.cachedExecute(t,n)));b(this,"select",aV((t,n)=>this.cachedSelect(t,n)));this.db=t,this.otelTracer=n.tracer,this.otelRootSpanContext=n.rootSpanContext,this.tablesUsedStmt=t.prepare("SELECT tbl_name FROM tables_used(?) AS u JOIN sqlite_master ON sqlite_master.name = u.name WHERE u.schema = 'main';"),this.cachedStmts.onEvict=(r,a)=>a.finalize(),kve(this)}prepare(t){return this.db.prepare(t)}import(t){return this.db.import(t)}close(){this.db.close()}destroy(){this.db.destroy()}session(){return this.db.session()}makeChangeset(t){return this.db.makeChangeset(t)}txn(t){this.execute(Oh`begin transaction;`);let n=!1,r;try{r=t()}catch(a){throw n=!0,this.execute(Oh`rollback;`),a}return n||this.execute(Oh`commit;`),r}withChangeset(t){const n=this.db.session(),r=t(),a=n.changeset();return n.finish(),{result:r,changeset:a?{_tag:"sessionChangeset",data:a,debug:null}:{_tag:"no-op"}}}rollback(t){this.db.makeChangeset(t).invert().apply()}getTablesUsed(t){const n=Ave(t);if(n!==void 0)return new Set([n]);const r=this.tablesUsedCache.get(t);if(r)return r;const a=this.tablesUsedStmt,o=new Set;try{const l=a.select([t]);for(const d of l)o.add(d.tbl_name)}catch(l){return console.error("Error getting tables used",l,"for query",t),new Set}return this.tablesUsedCache.set(t,o),o}cachedExecute(t,n,r){return this.otelTracer.startActiveSpan("livestore.in-memory-db:execute",{attributes:{"sql.query":t}},(r==null?void 0:r.otelContext)??this.otelRootSpanContext,a=>{try{let o=this.cachedStmts.get(t);o===void 0&&(o=this.db.prepare(t),this.cachedStmts.set(t,o)),o.execute(n),(r==null?void 0:r.hasNoEffects)!==!0&&!this.resultCache.ignoreQuery(t)&&this.resultCache.invalidate((r==null?void 0:r.writeTables)??this.getTablesUsed(t)),a.end();const l=O0(a);return this.debugInfo.queryFrameDuration+=l,this.debugInfo.queryFrameCount++,l>5&&Tc()&&this.debugInfo.slowQueries.push({queryStr:t,bindValues:n,durationMs:l,rowsCount:void 0,queriedTables:new Set,startTimePerfNow:GI(a)}),{durationMs:l}}catch(o){if(a.recordException(o),a.end(),Rc)debugger;throw new Ap({cause:o,query:{bindValues:n??{},sql:t}})}})}cachedSelect(t,n,r){const{queriedTables:a,skipCache:o=!1,otelContext:l}=r??{};return this.otelTracer.startActiveSpan("sql-in-memory-select",{},l??this.otelRootSpanContext,d=>{try{d.setAttribute("sql.query",t);const h=this.resultCache.getKey(t,n),p=this.resultCache.get(h);if(o===!1&&p!==void 0)return d.setAttribute("sql.rowsCount",p.length),d.setAttribute("sql.cached",!0),d.end(),p;let S=this.cachedStmts.get(t);S===void 0&&(S=this.db.prepare(t),this.cachedStmts.set(t,S));const v=S.select(n);d.setAttribute("sql.rowsCount",v.length),d.setAttribute("sql.cached",!1);const R=a??this.getTablesUsed(t);this.resultCache.set(R,h,v),d.end();const O=O0(d);return this.debugInfo.queryFrameDuration+=O,this.debugInfo.queryFrameCount++,O>5&&Tc()&&this.debugInfo.slowQueries.push({queryStr:t,bindValues:n,durationMs:O,rowsCount:v.length,queriedTables:R,startTimePerfNow:GI(d)}),v}finally{d.end()}})}export(){for(const t of this.cachedStmts.keys())this.cachedStmts.delete(t);return this.db.export()}}const kve=e=>{e.execute(Oh`
      PRAGMA page_size=32768;
      PRAGMA cache_size=10000;
      PRAGMA synchronous='OFF';
      PRAGMA temp_store='MEMORY';
      PRAGMA foreign_keys='ON'; -- we want foreign key constraints to be enforced
    `)},Ave=e=>{const[t,n]=e.trim().match(/^delete\s+from\s+(\w+)$/i)??[];return n};class Ove{constructor(){b(this,"map");b(this,"add",t=>{const n=this.map.get(t)??0;this.map.set(t,n+1)});b(this,"remove",t=>{const n=this.map.get(t)??0;n===1?this.map.delete(t):this.map.set(t,n-1)});b(this,"has",t=>this.map.has(t));this.map=new Map}get size(){return this.map.size}*[Symbol.iterator](){for(const t of this.map.keys())yield t}}const Yk=(e,t,n="application/octet-stream")=>{const r=e instanceof Blob?e:new Blob([e],{type:n}),a=window.URL.createObjectURL(r);Dve(a,t),setTimeout(()=>window.URL.revokeObjectURL(a),1e3)},Dve=(e,t)=>{const n=document.createElement("a");n.href=e,n.download=t,document.body.append(n),n.style.display="none",n.click(),n.remove()},xve=()=>{Tc()&&(globalThis.__debugLiveStoreUtils={downloadBlob:Yk,runSync:e=>Ga(e),runFork:e=>Li(e)})};Tc()&&xve();class $ve extends iQ{constructor({clientSession:n,schema:r,otelOptions:a,context:o,batchUpdates:l,storeId:d,effectContext:h,params:p,confirmUnsavedChanges:S,__runningInDevtools:v}){super();b(this,"storeId");b(this,"reactivityGraph");b(this,"sqliteDbWrapper");b(this,"clientSession");b(this,"schema");b(this,"context");b(this,"otel");b(this,"tableRefs");b(this,"effectContext");b(this,"activeQueries");b(this,"__eventSchema");b(this,"syncProcessor");b(this,"boot");b(this,"subscribe",(n,r)=>this.otel.tracer.startActiveSpan("LiveStore.subscribe",{attributes:{label:r==null?void 0:r.label,queryLabel:n.label}},(r==null?void 0:r.otelContext)??this.otel.queriesSpanContext,a=>{var v;const o=_s.setSpan(Js.active(),a),l=n._tag==="def"||n._tag==="signal-def"?n.make(this.reactivityGraph.context):{value:n,deref:()=>{}},d=l.value,h=`subscribe:${r==null?void 0:r.label}`,p=this.reactivityGraph.makeEffect((R,O,x)=>r.onUpdate(R(d.results$,o,x)),{label:h});return r!=null&&r.stackInfo&&d.activeSubscriptions.add(r.stackInfo),(v=r==null?void 0:r.onSubscribe)==null||v.call(r,d),this.activeQueries.add(d),(r==null?void 0:r.skipInitialRun)!==!0&&!d.isDestroyed&&p.doEffect(o,{_tag:"subscribe.initial",label:`subscribe-initial-run:${r==null?void 0:r.label}`}),()=>{var R;try{this.reactivityGraph.destroyNode(p),this.activeQueries.remove(d),r!=null&&r.stackInfo&&d.activeSubscriptions.delete(r.stackInfo),l.deref(),(R=r==null?void 0:r.onUnsubsubscribe)==null||R.call(r)}finally{a.end()}}}));b(this,"subscribeStream",(n,r)=>Bpe(a=>ke(this,function*(){const o=yield*DE.pipe(Ff("NoSuchElementException",()=>fr(void 0))),l=o?_s.setSpan(Js.active(),o):Js.active();yield*Pn(it(()=>this.subscribe(n,{onUpdate:d=>a.single(d),otelContext:l,label:r==null?void 0:r.label})),d=>it(()=>d()))})));b(this,"query",(n,r)=>{if(typeof n=="object"&&"query"in n&&"bindValues"in n)return this.sqliteDbWrapper.cachedSelect(n.query,Gp(n.bindValues,n.query),{otelContext:r==null?void 0:r.otelContext});if(lo(n)){const a=n[kc];a._tag==="RowQuery"&&iV({table:a.tableDef,id:a.id,explicitDefaultValues:a.explicitDefaultValues,otelContext:r==null?void 0:r.otelContext})(this.reactivityGraph.context);const o=n.asSql(),l=ME(n),d=this.sqliteDbWrapper.cachedSelect(o.query,o.bindValues,{otelContext:r==null?void 0:r.otelContext,queriedTables:new Set([n[kc].tableDef.sqliteDef.name])});return Pf(l)(d)}else if(n._tag==="def"){const a=n.make(this.reactivityGraph.context),o=this.query(a.value,r);return a.deref(),o}else return n._tag==="signal-def"?n.make(this.reactivityGraph.context).value.get():n.run({otelContext:r==null?void 0:r.otelContext,debugRefreshReason:r==null?void 0:r.debugRefreshReason})});b(this,"setSignal",(n,r)=>{const a=n.make(this.reactivityGraph.context),o=typeof r=="function"?r(a.value.get()):r;a.value.set(o),a.rc>1&&a.deref()});b(this,"commit",(n,...r)=>{const{events:a,options:o}=this.getCommitArgs(n,r);for(const p of a)k8(p.args,this.clientSession.sessionId);if(a.length===0)return;const l=(o==null?void 0:o.skipRefresh)??!1;_s.getSpan(this.otel.commitsSpanContext).addEvent("commit");let h;return this.otel.tracer.startActiveSpan("LiveStore:commit",{attributes:{"livestore.eventsCount":a.length,"livestore.eventTags":a.map(p=>p.name),"livestore.commitLabel":o==null?void 0:o.label},links:o==null?void 0:o.spanLinks},(o==null?void 0:o.otelContext)??this.otel.commitsSpanContext,p=>{const S=_s.setSpan(Js.active(),p);try{const{writeTables:v}=(()=>{try{const x=()=>this.syncProcessor.push(a,{otelContext:S});return a.length>1?this.sqliteDbWrapper.txn(x):x()}catch(x){throw console.error(x),p.setStatus({code:Al.ERROR,message:x.toString()}),x}finally{p.end()}})(),R=[];for(const x of v){const z=this.tableRefs[x];AI(z!==void 0,`No table ref found for ${x}`),R.push([z,null])}const O={_tag:"commit",events:a,writeTables:Array.from(v)};this.reactivityGraph.setRefs(R,{debugRefreshReason:O,otelContext:S,skipRefresh:l})}catch(v){throw console.error(v),p.setStatus({code:Al.ERROR,message:v.toString()}),v}finally{p.end(),h=O0(p)}return{durationMs:h}})});b(this,"events",n=>OI("store.events() is not yet implemented but planned soon"));b(this,"eventsStream",n=>OI("store.eventsStream() is not yet implemented but planned soon"));b(this,"manualRefresh",n=>{const{label:r}=n??{};this.otel.tracer.startActiveSpan("LiveStore:manualRefresh",{attributes:{"livestore.manualRefreshLabel":r}},this.otel.commitsSpanContext,a=>{const o=_s.setSpan(Js.active(),a);this.reactivityGraph.runDeferredEffects({otelContext:o}),a.end()})});b(this,"shutdown",async n=>{await this.clientSession.shutdown(n??Pl(C0.make({reason:"manual"}))).pipe(this.runEffectFork,Tl,aE)});b(this,"_dev",{downloadDb:(n="local")=>{ke(this,function*(){const r=n==="local"?this.sqliteDbWrapper.export():yield*this.clientSession.leaderThread.export;Yk(r,`livestore-${Date.now()}.db`)}).pipe(this.runEffectFork)},downloadEventlogDb:()=>{ke(this,function*(){const n=yield*this.clientSession.leaderThread.getEventlogData;Yk(n,`livestore-eventlog-${Date.now()}.db`)}).pipe(this.runEffectFork)},hardReset:(n="all-data")=>{ke(this,function*(){const r=this.clientSession.clientId;yield*this.clientSession.leaderThread.sendDevtoolsMessage(GD.Request.make({liveStoreVersion:xs,mode:n,requestId:Za(),clientId:r}))}).pipe(this.runEffectFork)},overrideNetworkStatus:n=>{const r=this.clientSession.clientId;this.clientSession.leaderThread.sendDevtoolsMessage(KD.Request.make({clientId:r,closeLatch:n==="offline",liveStoreVersion:xs,requestId:Za()})).pipe(this.runEffectFork)},syncStates:()=>{ke(this,function*(){const n=yield*this.syncProcessor.syncState;console.log("Session sync state:",n.toJSON());const r=yield*this.clientSession.leaderThread.getSyncState;console.log("Leader sync state:",r.toJSON())}).pipe(this.runEffectFork)},version:xs,otel:{rootSpanContext:()=>{var n;return(n=_s.getSpan(this.otel.rootSpanContext))==null?void 0:n.spanContext()}}});b(this,"toJSON",()=>({_tag:"livestore.Store",reactivityGraph:this.reactivityGraph.getSnapshot({includeResults:!0})}));b(this,"runEffectFork",n=>n.pipe(Is(this.effectContext.lifetimeScope),en,EH(this.effectContext.runtime)));b(this,"getCommitArgs",(n,r)=>{let a,o;return typeof n=="function"?a=n(l=>a.push(l)):(n==null?void 0:n.label)!==void 0||(n==null?void 0:n.skipRefresh)!==void 0||(n==null?void 0:n.otelContext)!==void 0||(n==null?void 0:n.spanLinks)!==void 0?(o=n,a=r):n===void 0?a=[]:a=[n,...r],{events:a,options:o}});this.storeId=d,this.sqliteDbWrapper=new Cve({otel:a,db:n.sqliteDb}),this.clientSession=n,this.schema=r,this.context=o,this.effectContext=h;const R=bve(),O=a.tracer.startSpan("LiveStore:sync",{},a.rootSpanContext);this.syncProcessor=iSe({schema:r,clientSession:n,runtime:h.runtime,materializeEvent:(D,{otelContext:I,withChangeset:$,materializerHashLeader:H})=>{const{eventDef:K,materializer:V}=Fk(r,D.name),j=Ybe({eventDef:K,materializer:V,dbState:this.sqliteDbWrapper,event:{decoded:D,encoded:void 0}}),te=Tc()?Ce(Wbe(j)):be();H._tag==="Some"&&te._tag==="Some"&&H.value!==te.value&&this.shutdown(Pl(Ct.make({cause:`Materializer hash mismatch detected for event "${D.name}".`,note:"Please make sure your event materializer is a pure function without side effects."})));const Ee=new Set,xe=()=>{for(const{statementSql:De,bindValues:ae,writeTables:Te=this.sqliteDbWrapper.getTablesUsed(De)}of j){try{this.sqliteDbWrapper.cachedExecute(De,ae,{otelContext:I,writeTables:Te})}catch(Re){throw Ct.make({cause:Re,note:`Error executing materializer for event "${D.name}".
Statement: ${De}
Bind values: ${JSON.stringify(ae)}`})}for(const Re of Te)Ee.add(Re)}};let fe={_tag:"unset"};return $===!0?fe=this.sqliteDbWrapper.withChangeset(xe).changeset:xe(),{writeTables:Ee,sessionChangeset:fe,materializerHash:te}},rollback:D=>{this.sqliteDbWrapper.rollback(D)},refreshTables:D=>{const I=[];for(const $ of D){const H=this.tableRefs[$];AI(H!==void 0,`No table ref found for ${$}`),I.push([H,null])}R.setRefs(I)},span:O,params:{leaderPushBatchSize:p.leaderPushBatchSize},confirmUnsavedChanges:S}),this.__eventSchema=A8(r),this.tableRefs={},this.activeQueries=new Ove;const x=a.tracer.startSpan("LiveStore:commits",{},a.rootSpanContext),z=_s.setSpan(Js.active(),x),A=a.tracer.startSpan("LiveStore:queries",{},a.rootSpanContext),E=_s.setSpan(Js.active(),A);this.reactivityGraph=R,this.reactivityGraph.context={store:this,defRcMap:new Map,reactivityGraph:new WeakRef(R),otelTracer:a.tracer,rootOtelContext:E,effectsWrapper:l},this.otel={tracer:a.tracer,rootSpanContext:a.rootSpanContext,commitsSpanContext:z,queriesSpanContext:E};const T=new Set(v?this.schema.state.sqlite.tables.keys():Array.from(this.schema.state.sqlite.tables.keys()).filter(D=>!Fbe(D))),q=new Map(Array.from(this.reactivityGraph.atoms.values()).filter(D=>{var I;return D._tag==="ref"&&((I=D.label)==null?void 0:I.startsWith("tableRef:"))===!0}).map(D=>[D.label.slice(9),D]));for(const D of T)this.tableRefs[D]=q.get(D)??this.reactivityGraph.makeRef(null,{equal:()=>!1,label:`tableRef:${D}`,meta:{liveStoreRefType:"table"}});this.boot=ke(this,function*(){yield*Ss(()=>it(()=>{for(const D of Object.values(this.tableRefs))for(const I of D.super)this.reactivityGraph.removeEdge(I,D);O.end(),x.end(),A.end()})),yield*this.syncProcessor.boot})}get sessionId(){return this.clientSession.sessionId}get clientId(){return this.clientSession.clientId}}const tL=globalThis.requestAnimationFrame===void 0?e=>setTimeout(e,1e3):globalThis.requestAnimationFrame,qve=globalThis.cancelAnimationFrame===void 0?e=>clearTimeout(e):globalThis.cancelAnimationFrame,Nve=({storeDevtoolsChannel:e,store:t})=>ke(function*(){const n=new Map,r=new Map,a=new Map,o=new Map,{clientId:l,sessionId:d}=t.clientSession;yield*Ss(()=>it(()=>{for(const v of n.values())v();for(const v of r.values())v();for(const v of a.values())v();for(const v of o.values())v()}));const h=new Set,p=v=>e.send(v).pipe(en,Li),S=v=>{var x,z,A,E;if(v.clientId!==l||v.sessionId!==d||v._tag==="LSD.ClientSession.Disconnect")return;const R=v.requestId;if(h.has(R))return;h.add(R);const O=globalThis.requestIdleCallback??(T=>T());switch(v._tag){case"LSD.ClientSession.ReactivityGraphSubscribe":{const T=v.includeResults,{subscriptionId:q}=v,D=()=>O(()=>p(V8.make({reactivityGraph:t.reactivityGraph.getSnapshot({includeResults:T}),requestId:Za(10),clientId:l,sessionId:d,liveStoreVersion:xs,subscriptionId:q})),{timeout:500});D();const I=DI(D,20);n.set(q,t.reactivityGraph.subscribeToRefresh(I));break}case"LSD.ClientSession.DebugInfoReq":{p(U8.make({debugInfo:t.sqliteDbWrapper.debugInfo,requestId:R,clientId:l,sessionId:d,liveStoreVersion:xs}));break}case"LSD.ClientSession.DebugInfoHistorySubscribe":{const{subscriptionId:T}=v,q=[];let D=!1,I;const $=()=>{q.push(t.sqliteDbWrapper.debugInfo),t.sqliteDbWrapper.debugInfo=oV(),q.length>10&&(p(P8.make({debugInfoHistory:q,requestId:Za(10),clientId:l,sessionId:d,liveStoreVersion:xs,subscriptionId:T})),q.length=0),D===!1&&(I=tL($))};I=tL($);const H=()=>{D=!0,I!==void 0&&(qve(I),I=void 0)};a.set(T,H);break}case"LSD.ClientSession.DebugInfoHistoryUnsubscribe":{const{subscriptionId:T}=v;(x=a.get(T))==null||x(),a.delete(T);break}case"LSD.ClientSession.DebugInfoResetReq":{t.sqliteDbWrapper.debugInfo.slowQueries.clear(),p(j8.make({requestId:R,clientId:l,sessionId:d,liveStoreVersion:xs}));break}case"LSD.ClientSession.DebugInfoRerunQueryReq":{const{queryStr:T,bindValues:q,queriedTables:D}=v;t.sqliteDbWrapper.cachedSelect(T,q,{queriedTables:D,skipCache:!0}),p(H8.make({requestId:R,clientId:l,sessionId:d,liveStoreVersion:xs}));break}case"LSD.ClientSession.ReactivityGraphUnsubscribe":{const{subscriptionId:T}=v;(z=n.get(T))==null||z(),n.delete(T);break}case"LSD.ClientSession.LiveQueriesSubscribe":{const{subscriptionId:T}=v,q=()=>O(()=>p(K8.make({liveQueries:[...t.activeQueries].map(I=>({_tag:I._tag,id:I.id,label:I.label,hash:I.def.hash,runs:I.runs,executionTimes:I.executionTimes.map($=>Number($.toString().slice(0,5))),lastestResult:I.results$.previousResult===zy?"SYMBOL_NOT_REFRESHED_YET":I.results$.previousResult,activeSubscriptions:Array.from(I.activeSubscriptions)})),requestId:Za(10),liveStoreVersion:xs,clientId:l,sessionId:d,subscriptionId:T})),{timeout:500});q();const D=DI(q,20);r.set(T,t.reactivityGraph.subscribeToRefresh(D));break}case"LSD.ClientSession.LiveQueriesUnsubscribe":{const{subscriptionId:T}=v;(A=r.get(T))==null||A(),r.delete(T);break}case"LSD.ClientSession.SyncHeadSubscribe":{const{subscriptionId:T}=v,q=D=>p(B8.make({local:D.localHead,upstream:D.upstreamHead,requestId:Za(10),clientId:l,sessionId:d,liveStoreVersion:xs,subscriptionId:T}));q(t.syncProcessor.syncState.pipe(Ga)),o.set(T,t.syncProcessor.syncState.changes.pipe(ea(D=>q(D)),ls,Bn,en,_5));break}case"LSD.ClientSession.SyncHeadUnsubscribe":{const{subscriptionId:T}=v;(E=o.get(T))==null||E(),o.delete(T);break}case"LSD.ClientSession.Ping":{p(G8.make({requestId:R,clientId:l,sessionId:d,liveStoreVersion:xs}));break}default:console.warn("[LSD.ClientSession] Unknown message",v)}};yield*e.listen.pipe(Gl(),fye(v=>S(v)),ls,Ft("LSD.devtools.onMessage"))}).pipe(Ct.mapToUnexpectedError,Ft("LSD.devtools.connectStoreToDevtools")),Mve={leaderPushBatchSize:100},F0=class F0 extends HA("@livestore/livestore/effect/LiveStoreContextRunning")(){};b(F0,"fromDeferred",ke(function*(){const n=yield*yield*Ive;return x_(F0,n)}).pipe(Vle));let Wk=F0;class Ive extends HA("@livestore/livestore/effect/DeferredStoreContext")(){}const Lve=({schema:e,adapter:t,storeId:n,context:r={},boot:a,batchUpdates:o,disableDevtools:l,onBootStatus:d,shutdownDeferred:h,params:p,debug:S,confirmUnsavedChanges:v=!0,syncPayload:R})=>ke(function*(){const O=yield*k_();yield*Fve(n),yield*Ss(z=>gr(O,z));const x=(S==null?void 0:S.instanceId)??Za(10);return yield*ke(function*(){const z=yield*DE.pipe(Wa),A=_s.setSpan(Js.active(),z),E=yield*o8,T=yield*Xs().pipe(Pn(Ns));yield*nm(T).pipe(q_e(V=>d==null?void 0:d(V)),Zs(V=>V.stage==="done"?Ns(T):wt),tm,en,jn);const q=yield*jt(),D=V=>ke(function*(){const j=yield*q;yield*Nve({storeDevtoolsChannel:V,store:j})}),I=yield*Lm(),$=V=>ke(function*(){yield*gr(O,Or(V)).pipe(xD({label:"@livestore/livestore:shutdown",duration:500}),em(1e3),Ff("TimeoutException",()=>Cy("@livestore/livestore:shutdown: Timed out after 1 second"))),h&&(yield*cf(h,V)),yield*ss("LiveStore shutdown complete")}).pipe(Ft("@livestore/livestore:shutdown"),vs(I),en,Li,Tl),H=yield*t({schema:e,storeId:n,devtoolsEnabled:nL(l),bootStatusQueue:T,shutdown:$,connectDevtoolsToStore:D,debugInstanceId:x,syncPayload:R}).pipe(l8("livestore:makeAdapter"),Ft("createStore:makeAdapter"));Rc&&H.leaderThread.initialState.migrationsReport.migrations.length>0&&(yield*ss("[@livestore/livestore:createStore] migrationsReport",...H.leaderThread.initialState.migrationsReport.migrations.map(V=>V.hashes.actual===void 0?`Table '${V.tableName}' doesn't exist yet. Creating table...`:`Schema hash mismatch for table '${V.tableName}' (DB: ${V.hashes.actual}, expected: ${V.hashes.expected}), migrating table...`)));const K=new $ve({clientSession:H,schema:e,context:r,otelOptions:{tracer:E,rootSpanContext:A},effectContext:{lifetimeScope:O,runtime:I},__runningInDevtools:nL(l)===!1,confirmUnsavedChanges:v,batchUpdates:V=>V(),storeId:n,params:{leaderPushBatchSize:(p==null?void 0:p.leaderPushBatchSize)??Mve.leaderPushBatchSize}});return yield*K.boot,a!==void 0&&(yield*x_e(()=>a(K,{migrationsReport:H.leaderThread.initialState.migrationsReport,parentSpan:z})).pipe(Ct.mapToUnexpectedError,vs(x_(Wk,{stage:"running",store:K})),Ft("createStore:boot"))),yield*dle(),o!==void 0&&(K.reactivityGraph.context.effectsWrapper=o),yield*On(q,K),K}).pipe(Ft("createStore",{attributes:{debugInstanceId:x,storeId:n}}),Nl({debugInstanceId:x,storeId:n}),Rc?g8(z=>console.createTask(z)):Ge,C_(O))}),Fve=e=>ke(function*(){if(!/^[a-zA-Z0-9_-]+$/.test(e))return yield*Ct.make({cause:`Invalid storeId: ${e}. Only alphanumeric characters, underscores, and hyphens are allowed.`,payload:{storeId:e}})}),nL=e=>e===!0||e===!1?!e:Tc()===!0,zve=jt(),Uve="function() { [bytecode] }",Pve=e=>e===Uve?{_tag:"invalid",reason:"react-native"}:{_tag:"valid"},jve=e=>Me(e,"query")&&Me(e,"schema"),cV=(e,t)=>{const{queryString:n,extraDeps:r}=Hve(e),a=[n,t!=null&&t.deps?XI(t.deps):void 0,XI(r)].filter(Boolean).join("-");if(Pve(a)._tag==="invalid")throw new Error("On Expo/React Native, db queries must provide a `deps` option");if(a.trim()==="")return yt(`Invalid query hash for query: ${e}`);const o=(t==null?void 0:t.label)??n,l={_tag:"def",make:Eve(a,(d,h)=>new Bve({reactivityGraph:d.reactivityGraph.deref(),queryInput:e,label:o,map:t==null?void 0:t.map,otelContext:h,def:l})),label:o,hash:a};return l},rL=e=>e===void 0?[]:Object.entries(e).map(([t,n])=>`${t}:${n===$i?"SessionIdSymbol":n}`).join(","),Hve=e=>{if(lo(e)){const{query:t,bindValues:n}=e.asSql();return{queryString:t,extraDeps:rL(n)}}return jve(e)?{queryString:e.query,extraDeps:rL(e.bindValues)}:typeof e=="function"?{queryString:e.toString(),extraDeps:[]}:yt(`Invalid query input: ${e}`)};class Bve extends vve{constructor({queryInput:n,label:r,reactivityGraph:a,map:o,otelContext:l,def:d}){super();b(this,"_tag","db");b(this,"queryInput$");b(this,"results$");b(this,"label");b(this,"reactivityGraph");b(this,"mapResult");b(this,"def");b(this,"destroy",()=>{this.isDestroyed=!0,this.queryInput$!==void 0&&this.reactivityGraph.destroyNode(this.queryInput$),this.reactivityGraph.destroyNode(this.results$);for(const n of this.dependencyQueriesRef)n.deref()});let h=r??"db(unknown)";this.reactivityGraph=a,this.def=d,this.mapResult=o===void 0?E=>E:o;const p={current:typeof n=="function"||lo(n)?void 0:n.schema},S={current:void 0};let v;const R=(E,T)=>{try{const q=E.asSql(),D=ME(E),I=E[kc];return{queryInputRaw:{query:q.query,schema:D,bindValues:q.bindValues,queriedTables:new Set([I.tableDef.sqliteDef.name])},label:I._tag==="RowQuery"?ZI(I.tableDef,I.id):E.toString(),execBeforeFirstRun:I._tag==="RowQuery"?iV({table:I.tableDef,explicitDefaultValues:I.explicitDefaultValues,id:I.id,otelContext:T}):void 0}}catch(q){throw new Ct({cause:q,note:`Error building query for ${E.toString()}`,payload:{qb:E}})}};if(typeof n=="function")v=this.reactivityGraph.makeThunk((E,T,q,D)=>{const I=performance.now(),$=n(wve(E,q,D??q.rootOtelContext,this.dependencyQueriesRef),q),H=performance.now()-I;let K;if(lo($)){const V=R($,D);K=V.queryInputRaw,this.label=V.label,S.current=V.execBeforeFirstRun}else K=$;return T({_tag:"computed",label:`${this.label}:queryInput`,query:K.query,durationMs:H}),p.current=K.schema,K},{label:`${h}:query`,meta:{liveStoreThunkType:"db.query"},equal:(E,T)=>E.query===T.query&&df(E.bindValues,T.bindValues)}),this.queryInput$=v;else{let E;if(lo(n)){const T=R(n,l);E=T.queryInputRaw,h=T.label,S.current=T.execBeforeFirstRun}else E=n;if(p.current=E.schema,v=E,r===void 0&&lo(n)){const T=n[kc];T._tag==="RowQuery"&&(h=`db(${ZI(T.tableDef,T.id)})`)}}const O={current:void 0},x=E=>(T,q)=>T===zy||q===zy?!1:jpe(E)(T,q),z=o===void 0?p.current===void 0?(E,T)=>x(p.current)(E,T):x(p.current):void 0,A=this.reactivityGraph.makeThunk((E,T,q,D,I)=>q.otelTracer.startActiveSpan("db:...",{attributes:{"livestore.debugRefreshReason":Me(I,"label")?I.label:I==null?void 0:I._tag}},D??q.rootOtelContext,$=>{const H=_s.setSpan(Js.active(),$),{store:K}=q;S.current!==void 0&&(S.current(q,H),S.current=void 0);const V=fve(v)?E(v,H,I):v,j=V.query,te=V.bindValues;O.current===void 0&&(O.current=K.sqliteDbWrapper.getTablesUsed(j)),te!==void 0&&k8(te,K.clientSession.sessionId);for(const ae of O.current){const Te=K.tableRefs[ae]??yt(`No table ref found for ${ae}`);E(Te,H,I)}$.setAttribute("sql.query",j),$.updateName(`db:${j.slice(0,50)}`);const Ee=K.sqliteDbWrapper.cachedSelect(j,te?Gp(te,j):void 0,{queriedTables:O.current,otelContext:H});$.setAttribute("sql.rowsCount",Ee.length);const xe=Qm(p.current)(Ee);if(xe._tag==="Left"){const ae=jp.formatErrorSync(xe.left),Te=String(p.current.ast),Re=te===void 0?"":`
Bind values: ${JSON.stringify(te)}`;return yt(`Error parsing SQL query result (${h}).

Query: ${j}${Re}

Expected schema: ${Te}

Error: ${ae}

Result:`,Ee,`
`)}const fe=this.mapResult(xe.right);$.end();const De=O0($);return this.executionTimes.push(De),T({_tag:"db",label:`${h}:results`,query:j,durationMs:De}),fe}),{label:`${h}:results`,meta:{liveStoreThunkType:"db.result"},equal:z});this.results$=A,this.label=h}}const Vve=e=>{const t=/at (\S+) \((.+)\)/g;let n;const r=[];let a=!1;for(;(n=t.exec(e))!==null;){const[,o,l]=n;if((o.startsWith("use")||o.startsWith("Module.use"))&&o.endsWith("QueryRef")===!1)a=!0,r.unshift({name:o.replace(/^Module\./,""),filePath:l});else if(a){o!=="Object.react-stack-bottom-frame"&&r.unshift({name:o,filePath:l});break}}return{frames:r}},Kve=e=>e.frames.map(t=>`${t.name} (${t.filePath})`).join(`
`),sL=(e,t,n,r)=>{const a=oe.useRef(void 0),o=oe.useRef(!1),l=oe.useMemo(()=>{if(o.current){const p=zu.get(e);if(p!==void 0&&p._tag==="active")return p.resource}if(a.current!==void 0&&a.current!==e){const p=a.current,S=zu.get(p);S!==void 0&&S._tag==="active"&&(S.rc--,S.rc===0&&(n(S.resource),zu.set(p,{_tag:"destroyed"}),o.current=!0))}const d=zu.get(e);if(d!==void 0&&d._tag==="active")return d.rc++,d.resource;const h=t();return zu.set(e,{_tag:"active",rc:1,resource:h}),h},[e]);return oe.useEffect(()=>()=>{if(o.current){o.current=!1;return}const d=zu.get(e);d===void 0||d._tag==="destroyed"||(d.rc--,d.rc===0&&(n(d.resource),zu.delete(e)))},[e]),a.current=e,l},zu=new Map,Gve=Error.stackTraceLimit,Qve=e=>{const[t,n]=Pr.useState(0),r=Pr.useRef(e),a=Pr.useRef(e);r.current!==e&&(r.current=e,a.current=e);const o=Pr.useCallback(l=>{const d=typeof l=="function"?l(a.current):l;a.current=d,n(h=>h+1)},[n]);return[a,o]},Yve=(e,t)=>lV(e,t).valueRef.current,lV=(e,t)=>{var R;const n=(t==null?void 0:t.store)??((R=Pr.useContext(j0))==null?void 0:R.store)??yt("No store provided to useQuery"),r=`${n.storeId}_${n.clientId}_${n.sessionId}_${e.hash}`,a=Pr.useMemo(()=>{Error.stackTraceLimit=10;const O=new Error().stack;return Error.stackTraceLimit=Gve,Vve(O)},[]),{queryRcRef:o,span:l,otelContext:d}=sL(r,()=>{const O=e.label,x=n.otel.tracer.startSpan((t==null?void 0:t.otelSpanName)??`LiveStore:useQuery:${O}`,{attributes:{label:O,firstStackInfo:JSON.stringify(a)}},(t==null?void 0:t.otelContext)??n.otel.queriesSpanContext),z=_s.setSpan(Js.active(),x);return{queryRcRef:e.make(n.reactivityGraph.context,z),span:x,otelContext:z}},()=>{}),h=o.value;Pr.useDebugValue(`LiveStore:useQuery:${h.id}:${h.label}`);const p=Pr.useMemo(()=>{try{return h.run({otelContext:d,debugRefreshReason:{_tag:"react",api:"useQuery",label:`useQuery:initial-run:${h.label}`,stackInfo:a}})}catch(O){throw console.error("[@livestore/react:useQuery] Error running query",O),new Error(`[@livestore/react:useQuery] Error running query: ${O.name}

Query: ${h.label}

React trace:

${kp(Kve(a),4)}

Stack trace:
`,{cause:O})}},[d,h,a]),[S,v]=Qve(p);return Pr.useEffect(()=>(h.activeSubscriptions.add(a),l.updateName((t==null?void 0:t.otelSpanName)??`LiveStore:useQuery:${h.label}`),n.subscribe(h,{onUpdate:O=>{df(O,S.current)===!1&&v(O)},onUnsubsubscribe:()=>{h.activeSubscriptions.delete(a)},label:h.label,otelContext:d})),[a,h,v,n,S,d,l,t==null?void 0:t.otelSpanName]),sL(r,()=>({queryRcRef:o,span:l}),({queryRcRef:O,span:x})=>{O.deref(),x.end()}),{valueRef:S,queryRcRef:o}},WD=(e,t,n,r)=>{var O;const a=typeof t=="string"||t===$i?t:e[cm].options.default.id,o=typeof t=="string"||t===$i?n:t,{default:l}=o??{};Pr.useMemo(()=>Wve(e),[e]);const d=e.sqliteDef.name,h=(r==null?void 0:r.store)??((O=Pr.useContext(j0))==null?void 0:O.store)??yt("No store provided to useClientDocument"),p=a===$i?h.clientSession.sessionId:a,S=Pr.useMemo(()=>cV(e.get(a,{default:l}),{deps:[p,e.sqliteDef.name,JSON.stringify(l)]}),[e,a,l,p]),v=lV(S,{otelSpanName:`LiveStore:useClientDocument:${d}:${p}`,store:r==null?void 0:r.store}),R=Pr.useMemo(()=>x=>{const z=typeof x=="function"?x(v.valueRef.current):x;v.valueRef.current!==z&&h.commit(e.set(Jve(z),a))},[a,v.valueRef,h,e]);return[v.valueRef.current,R,p,v.queryRcRef.value]},Wve=e=>{if(IE(e)===!1)return yt(`useClientDocument called on table "${e.sqliteDef.name}" which is not a client document table`)},Jve=e=>typeof e=="object"&&e!==null?Object.fromEntries(Object.entries(e).filter(([t,n])=>n!==void 0)):e,Xve=e=>(e.useQuery=t=>Yve(t,{store:e}),e.useClientDocument=(t,n,r)=>WD(t,n,r,{store:e}),e),uV=e=>{const t=Pr.useContext(j0);if(t===void 0)throw new Error("useStore can only be used inside StoreContext.Provider");if(t.stage!=="running")throw new Error("useStore can only be used after the store is running");return{store:Xve(t.store)}},Zve=e=>DD?Pe.jsx(Pe.Fragment,{}):Pe.jsx(Pe.Fragment,{children:bn(Ct)(e)?e.toString():JB(e)}),e0e=e=>{const t=e._tag==="LiveStore.StoreInterrupted"?`interrupted due to: ${e.reason}`:e.reason==="devtools-import"?"devtools import":e.reason==="devtools-reset"?"devtools reset":e.reason==="adapter-reset"?"adapter reset":e.reason==="manual"?"manual shutdown":"unknown reason";return DD?Pe.jsx(Pe.Fragment,{}):Pe.jsxs(Pe.Fragment,{children:["LiveStore Shutdown due to ",t]})},t0e=e=>DD?Pe.jsx(Pe.Fragment,{}):Pe.jsxs(Pe.Fragment,{children:["LiveStore is loading (",e.stage,")..."]}),n0e=({renderLoading:e=t0e,renderError:t=Zve,renderShutdown:n=e0e,otelOptions:r,children:a,schema:o,storeId:l="default",boot:d,adapter:h,batchUpdates:p,disableDevtools:S,signal:v,confirmUnsavedChanges:R=!0,syncPayload:O,debug:x})=>{const z=r0e({storeId:l,schema:o,otelOptions:r,boot:d,adapter:h,batchUpdates:p,disableDevtools:S,signal:v,confirmUnsavedChanges:R,syncPayload:O,debug:x});return z.stage==="error"?t(z.error):z.stage==="shutdown"?n(z.cause):z.stage!=="running"?e(z):(globalThis.__debugLiveStore??(globalThis.__debugLiveStore={}),Object.keys(globalThis.__debugLiveStore).length===0&&(globalThis.__debugLiveStore._=z.store),globalThis.__debugLiveStore[(x==null?void 0:x.instanceId)??l]=z.store,Pe.jsx(j0.Provider,{value:z,children:a}))},r0e=({schema:e,storeId:t,otelOptions:n,boot:r,adapter:a,batchUpdates:o,disableDevtools:l,signal:d,context:h,params:p,confirmUnsavedChanges:S,syncPayload:v,debug:R})=>{const[O,x]=Pr.useState(0),z=Pr.useRef({value:{stage:"loading"},componentScope:void 0,shutdownDeferred:void 0,previousShutdownDeferred:void 0,counter:0}),A=R==null?void 0:R.instanceId,E=Pr.useRef({schema:e,otelOptions:n,boot:r,adapter:a,batchUpdates:o,disableDevtools:l,signal:d,context:h,params:p,confirmUnsavedChanges:S,syncPayload:v,debugInstanceId:A}),T=(D,I,$)=>ke(function*(){yield*gr(D,xm($)),yield*D2(I,$)}).pipe(Sa(H=>ss("[@livestore/livestore/react] interupting",H)),Li),q={schema:E.current.schema!==e,otelOptions:E.current.otelOptions!==n,boot:E.current.boot!==r,adapter:E.current.adapter!==a,batchUpdates:E.current.batchUpdates!==o,disableDevtools:E.current.disableDevtools!==l,signal:E.current.signal!==d,context:E.current.context!==h,params:E.current.params!==p,confirmUnsavedChanges:E.current.confirmUnsavedChanges!==S,syncPayload:E.current.syncPayload!==v,debugInstanceId:E.current.debugInstanceId!==A};if(q.schema||q.otelOptions||q.boot||q.adapter||q.batchUpdates||q.disableDevtools||q.signal||q.context||q.params||q.confirmUnsavedChanges||q.syncPayload){if(E.current={schema:e,otelOptions:n,boot:r,adapter:a,batchUpdates:o,disableDevtools:l,signal:d,context:h,params:p,confirmUnsavedChanges:S,syncPayload:v,debugInstanceId:A},z.current.componentScope!==void 0&&z.current.shutdownDeferred!==void 0){const D=Object.keys(q).filter(I=>q[I]);T(z.current.componentScope,z.current.shutdownDeferred,new tv({reason:`re-rendering due to changed input props: ${D.join(", ")}`})),z.current.componentScope=void 0,z.current.shutdownDeferred=void 0}z.current={value:{stage:"loading"},componentScope:void 0,shutdownDeferred:void 0,previousShutdownDeferred:z.current.shutdownDeferred,counter:z.current.counter+1}}return Pr.useEffect(()=>{const D=z.current.counter,I=H=>{z.current.counter===D&&(z.current.value=H,x(K=>K+1))};d==null||d.addEventListener("abort",()=>{z.current.componentScope!==void 0&&z.current.shutdownDeferred!==void 0&&z.current.counter===D&&(T(z.current.componentScope,z.current.shutdownDeferred,new tv({reason:"Aborted via provided AbortController"})),z.current.componentScope=void 0,z.current.shutdownDeferred=void 0)});const $=ke(function*(){z.current.previousShutdownDeferred&&(yield*qn(z.current.previousShutdownDeferred));const H=yield*k_().pipe(Pn(gr)),K=yield*zve;z.current.componentScope=H,z.current.shutdownDeferred=K,yield*ke(function*(){const j=yield*Lve({schema:e,storeId:t,boot:r,adapter:a,batchUpdates:o,disableDevtools:l,shutdownDeferred:K,context:h,params:p,confirmUnsavedChanges:S,syncPayload:v,onBootStatus:te=>{z.current.value.stage==="running"||z.current.value.stage==="error"||I(te)},debug:{instanceId:A}}).pipe(Sa(te=>cf(K,te)));I({stage:"running",store:j})}).pipe(C_(H),Is(H));const V=j=>it(()=>I({stage:"shutdown",cause:j}));yield*qn(K).pipe(Sa(j=>ss("[@livestore/livestore/react] shutdown",Ey(j))),Ff("LiveStore.IntentionalShutdownCause",j=>V(j)),Ff("LiveStore.StoreInterrupted",j=>V(j)),Ele(j=>it(()=>I({stage:"error",error:j}))),wle(j=>it(()=>I({stage:"error",error:j}))),tr)}).pipe(zf,Ft("@livestore/react:useCreateStore"),Rc?g8(H=>console.createTask(H)):Ge,rve({parentSpanContext:n==null?void 0:n.rootSpanContext,otelTracer:n==null?void 0:n.tracer}),en,Nl({thread:"window"}),vs(_ye("window")),lge(F2),_5);return()=>{$(),z.current.componentScope!==void 0&&z.current.shutdownDeferred!==void 0&&(T(z.current.componentScope,z.current.shutdownDeferred,new tv({reason:"unmounting component"})),z.current.componentScope=void 0,z.current.shutdownDeferred=void 0)}},[e,n,r,a,o,l,d,t,h,p,S,v,A]),z.current.value};var hf=(e=>(e.SQUARE="SQUARE",e.CIRCLE="CIRCLE",e))(hf||{}),JD=(e=>(e.DINE_IN="DINE_IN",e.TAKE_AWAY="TAKE_AWAY",e.DELIVERY="DELIVERY",e))(JD||{}),XD=(e=>(e.NEW="NEW",e.PREPARING="PREPARING",e.READY="READY",e.SERVED="SERVED",e.CANCELLED="CANCELLED",e.CLOSED="CLOSED",e))(XD||{});const ZD=Ie({id:jf,name:ie,price:Ut,quantity:jf}),s0e=Ie({items:Et(ZD)}),a0e=Ie({type:XM(JD),id:ie,items:Et(ZD),createdAt:y0,updatedAt:y0,status:XM(XD),omsId:ie,accountId:jf}),i0e=PD({name:"v1.OrderCreated",schema:a0e}),o0e=PD({name:"v1.OMSCreated",schema:Ie({id:ie})}),c0e=PD({name:"v1.OrderUpdated",schema:Ie({id:ie,status:Br(ie),updatedAt:Br(y0),items:Br(Et(ZD))})}),l0e=$c({name:"orders",columns:{id:Op({primaryKey:!0}),type:Op(),status:Op(),items:xbe(),createdAt:zI(),updatedAt:zI(),omsId:Op(),accountId:Dbe()}}),u0e=$c({name:"oms",columns:{id:Op({primaryKey:!0})}}),f0e=Hbe({name:"orderDraft",schema:s0e,default:{id:$i,value:{items:[]}}}),Ml={orders:l0e,oms:u0e,orderDraft:f0e},D0={OMSCreated:o0e,orderCreated:i0e,orderUpdated:c0e,orderDraftSet:Ml.orderDraft.set},d0e=Pbe(D0,{"v1.OMSCreated":({id:e})=>Ml.oms.insert({id:e}),"v1.OrderCreated":e=>Ml.orders.insert(e),"v1.OrderUpdated":e=>Ml.orders.update(e)}),h0e=Jbe({tables:Ml,materializers:d0e}),m0e=Qbe({events:D0,state:h0e});var Jk=(e=>(e[e.Read=0]="Read",e[e.Write=1]="Write",e))(Jk||{});function aL({menuItems:e,currency:t="€",mode:n=0}){const[r,a]=WD(Ml.orderDraft),o=d=>{a(h=>{const p=h.items.findIndex(v=>v.id===d.id);let S;return p===-1?S=[...h.items,{...d,quantity:1}]:S=h.items.map((v,R)=>R===p?{...v,quantity:v.quantity+1}:v),{...h,items:S}})},l=d=>{a(h=>{const p=h.items.findIndex(R=>R.id===d.id);if(p===-1)return h;const S=h.items[p];let v;return S.quantity<=1?v=h.items.filter((R,O)=>O!==p):v=h.items.map((R,O)=>O===p?{...R,quantity:R.quantity-1}:R),{...h,items:v}})};return Pe.jsx("div",{className:cR.menuList,children:e.map((d,h)=>Pe.jsxs("div",{className:cR.menuItem,children:[Pe.jsx("span",{children:d.name}),Pe.jsxs("span",{children:[t," ",d.price.toFixed(2)]}),n===1?Pe.jsxs("div",{className:cR.quantityControls,children:[Pe.jsx(tC,{type:"button",onClick:()=>l(d),children:"−"}),Pe.jsx(tC,{type:"button",onClick:()=>o(d),children:"+"})]}):null,n===0?Pe.jsxs("span",{children:["x ",d.quantity]}):null]},h))})}const g0e="_page_m0ath_1",p0e={page:g0e},y0e={"nav-btn":"_nav-btn_13elb_1"},_0e={XS:{width:"10%","min-width":"20px",height:"8vh","min-height":"12px","font-size":"1.5rem","font-weight":"500"},M:{width:"25%","min-width":"100px",height:"30vh","min-height":"50px","font-size":"2rem","font-weight":"700"}};function Xk({text:e,destination:t,size:n}){const r=_0e[n];return Pe.jsx("a",{className:y0e["nav-btn"],href:t,style:{width:r.width,height:r.height,minWidth:r["min-width"],minHeight:r["min-height"],fontSize:r["font-size"],fontWeight:r["font-weight"]},children:e})}const b0e="_header_1it76_1",S0e="_h1_1it76_6",v0e="_h2_1it76_10",w0e="_h3_1it76_14",E0e="_h4_1it76_18",T0e="_h5_1it76_22",R0e="_h6_1it76_26",iL={header:b0e,h1:S0e,h2:v0e,h3:w0e,h4:E0e,h5:T0e,h6:R0e};function Uy({level:e=3,text:t}){const n=`h${e}`,r=iL[`h${e}`];return Pe.jsx(n,{className:`${iL.header} ${r}`,children:t})}function fV({headerText:e,children:t}){return Pe.jsxs("div",{className:p0e.page,children:[Pe.jsx(Xk,{text:"Back",destination:"/",size:"XS"}),e&&Pe.jsx(Uy,{level:1,text:e}),t]})}const C0e="_input_ej4xs_1",k0e={input:C0e},A0e=({value:e=0,onChange:t})=>Pe.jsx("input",{type:"number",className:k0e.input,value:e,onChange:t});function O0e(){const{store:e}=uV(),[t,n]=oe.useState(0),r=S=>{n(Number(S.target.value))},{itemsDTO:a}=Uz(),o=a.map(SG),[l]=WD(Ml.orderDraft),d=l.items.map(vG),h=()=>{if(t===void 0||t<=0){alert("Please enter a valid table number.");return}else if(l.items.length===0){alert("Please select at least one item.");return}e.commit(D0.orderCreated({id:crypto.randomUUID(),items:l.items,createdAt:new Date,updatedAt:new Date,status:XD.NEW,type:JD.DINE_IN,omsId:e.clientId,accountId:t}),D0.orderDraftSet({items:[]})),n(0)},p=()=>{h()};return Pe.jsx(fV,{children:Pe.jsxs("div",{className:fS.contentContainer,children:[Pe.jsx("div",{className:fS.menuContainer,children:Pe.jsxs($3,{children:[Pe.jsx(Uy,{level:3,text:_G}),Pe.jsx(aL,{menuItems:o,mode:Jk.Write})]})}),Pe.jsx("div",{className:fS.selectedItems,children:Pe.jsxs($3,{children:[Pe.jsx(Uy,{level:3,text:bG}),Pe.jsx(aL,{menuItems:d,mode:Jk.Read}),Pe.jsxs("div",{className:fS.inputContainer,children:[Pe.jsx(A0e,{value:t,onChange:r}),Pe.jsx(tC,{type:"submit",onClick:()=>p(),children:"Assign to Table"})]})]})})]})})}const je=0,D0e=1,Py=10,ex=12,B_=14,ml=21,KR=25,x0e=27,Zk=100,$0e=101,zE=522,dV=778,oL=2,x0=4,$0=8,hV=64,mV=256,gV=2048,pV=16384,yV=524288,q0e=2048,cL=1,lL=2,uL=3,fL=4,dL=5,N0e=512;class _V{constructor(t,n){b(this,"name");b(this,"mxPathname",64);b(this,"_module");this.name=t,this._module=n}close(){}isReady(){return!0}hasAsyncMethod(t){return!1}xOpen(t,n,r,a,o){return B_}xDelete(t,n,r){return je}xAccess(t,n,r,a){return je}xFullPathname(t,n,r,a){return je}xGetLastError(t,n,r){return je}xClose(t){return je}xRead(t,n,r,a,o){return je}xWrite(t,n,r,a,o){return je}xTruncate(t,n,r){return je}xSync(t,n){return je}xFileSize(t,n){return je}xLock(t,n){return je}xUnlock(t,n){return je}xCheckReservedLock(t,n){return je}xFileControl(t,n,r){return ex}xSectorSize(t){return N0e}xDeviceCharacteristics(t){return 0}}const M0e=Object.getPrototypeOf(async function(){}).constructor;var ei,xp,eA,bV,_z;let I0e=(_z=class extends _V{constructor(n,r){super(n,r);Ir(this,ei)}hasAsyncMethod(n){const r=`j${n.slice(1)}`;return this[r]instanceof M0e}getFilename(n){throw new Error("unimplemented")}jOpen(n,r,a,o){return B_}jDelete(n,r){return je}jAccess(n,r,a){return je}jFullPathname(n,r){const{read:a,written:o}=new TextEncoder().encodeInto(n,r);return a<n.length||o>=r.length?Py:(r[o]=0,je)}jGetLastError(n){return je}jClose(n){return je}jRead(n,r,a){return r.fill(0),zE}jWrite(n,r,a){return dV}jTruncate(n,r){return je}jSync(n,r){return je}jFileSize(n,r){return je}jLock(n,r){return je}jUnlock(n,r){return je}jCheckReservedLock(n,r){return r.setInt32(0,0,!0),je}jFileControl(n,r,a){return ex}jSectorSize(n){return super.xSectorSize(n)}jDeviceCharacteristics(n){return 0}xOpen(n,r,a,o,l){var p;const d=Zt(this,ei,bV).call(this,r,o),h=Zt(this,ei,xp).call(this,"Int32",l);return(p=this.log)==null||p.call(this,"jOpen",d,a,"0x"+o.toString(16)),this.jOpen(d,a,o,h)}xDelete(n,r,a){var l;const o=this._module.UTF8ToString(r);return(l=this.log)==null||l.call(this,"jDelete",o,a),this.jDelete(o,a)}xAccess(n,r,a,o){var h;const l=this._module.UTF8ToString(r),d=Zt(this,ei,xp).call(this,"Int32",o);return(h=this.log)==null||h.call(this,"jAccess",l,a),this.jAccess(l,a,d)}xFullPathname(n,r,a,o){var h;const l=this._module.UTF8ToString(r),d=this._module.HEAPU8.subarray(o,o+a);return(h=this.log)==null||h.call(this,"jFullPathname",l,a),this.jFullPathname(l,d)}xGetLastError(n,r,a){var l;const o=this._module.HEAPU8.subarray(a,a+r);return(l=this.log)==null||l.call(this,"jGetLastError",r),this.jGetLastError(o)}xClose(n){var r;return(r=this.log)==null||r.call(this,"jClose",n),this.jClose(n)}xRead(n,r,a,o,l){var p;const d=Zt(this,ei,eA).call(this,r,a),h=GR(o,l);return(p=this.log)==null||p.call(this,"jRead",n,a,h),this.jRead(n,d,h)}xWrite(n,r,a,o,l){var p;const d=Zt(this,ei,eA).call(this,r,a),h=GR(o,l);return(p=this.log)==null||p.call(this,"jWrite",n,d,h),this.jWrite(n,d,h)}xTruncate(n,r,a){var l;const o=GR(r,a);return(l=this.log)==null||l.call(this,"jTruncate",n,o),this.jTruncate(n,o)}xSync(n,r){var a;return(a=this.log)==null||a.call(this,"jSync",n,r),this.jSync(n,r)}xFileSize(n,r){var o;const a=Zt(this,ei,xp).call(this,"BigInt64",r);return(o=this.log)==null||o.call(this,"jFileSize",n),this.jFileSize(n,a)}xLock(n,r){var a;return(a=this.log)==null||a.call(this,"jLock",n,r),this.jLock(n,r)}xUnlock(n,r){var a;return(a=this.log)==null||a.call(this,"jUnlock",n,r),this.jUnlock(n,r)}xCheckReservedLock(n,r){var o;const a=Zt(this,ei,xp).call(this,"Int32",r);return(o=this.log)==null||o.call(this,"jCheckReservedLock",n),this.jCheckReservedLock(n,a)}xFileControl(n,r,a){var l;const o=new DataView(this._module.HEAPU8.buffer,this._module.HEAPU8.byteOffset+a);return(l=this.log)==null||l.call(this,"jFileControl",n,r,o),this.jFileControl(n,r,o)}xSectorSize(n){var r;return(r=this.log)==null||r.call(this,"jSectorSize",n),this.jSectorSize(n)}xDeviceCharacteristics(n){var r;return(r=this.log)==null||r.call(this,"jDeviceCharacteristics",n),this.jDeviceCharacteristics(n)}},ei=new WeakSet,xp=function(n,r){const a=n==="Int32"?4:8,o=`get${n}`,l=`set${n}`,d=()=>new DataView(this._module.HEAPU8.buffer,this._module.HEAPU8.byteOffset+r,a);let h=d();return new Proxy(h,{get(p,S){if(h.buffer.byteLength===0&&(h=d()),S===o)return function(R,O){if(!O)throw new Error("must be little endian");return h[S](R,O)};if(S===l)return function(R,O,x){if(!x)throw new Error("must be little endian");return h[S](R,O,x)};if(typeof S=="string"&&S.match(/^(get)|(set)/))throw new Error("invalid type");const v=h[S];return typeof v=="function"?v.bind(h):v}})},eA=function(n,r){let a=this._module.HEAPU8.subarray(n,n+r);return new Proxy(a,{get:(o,l,d)=>{a.buffer.byteLength===0&&(a=this._module.HEAPU8.subarray(n,n+r));const h=a[l];return typeof h=="function"?h.bind(a):h}})},bV=function(n,r){if(r&hV){let a=n,o=1;const l=[];for(;o;){const d=this._module.HEAPU8[a++];if(d)l.push(d);else switch(this._module.HEAPU8[a]||(o=null),o){case 1:l.push(63),o=2;break;case 2:l.push(61),o=3;break;case 3:l.push(38),o=2;break}}return new TextDecoder().decode(new Uint8Array(l))}return n?this._module.UTF8ToString(n):null},_z);function GR(e,t){return t*4294967296+e+(e<0?2**32:0)}class tx extends I0e{constructor(n,r){super(n,r);b(this,"mapNameToFile",new Map);b(this,"mapIdToFile",new Map)}static async create(n,r){const a=new tx(n,r);return await a.isReady(),a}close(){for(const n of this.mapIdToFile.keys())this.jClose(n)}jOpen(n,r,a,o){const d=new URL(n||Math.random().toString(36).slice(2),"file://").pathname;let h=this.mapNameToFile.get(d);if(!h)if(a&x0)h={pathname:d,flags:a,size:0,data:new ArrayBuffer(0)},this.mapNameToFile.set(d,h);else return B_;return this.mapIdToFile.set(r,h),o.setInt32(0,a,!0),je}jClose(n){const r=this.mapIdToFile.get(n);return this.mapIdToFile.delete(n),r.flags&$0&&this.mapNameToFile.delete(r.pathname),je}jRead(n,r,a){const o=this.mapIdToFile.get(n),l=Math.min(a,o.size),h=Math.min(a+r.byteLength,o.size)-l;return h&&r.set(new Uint8Array(o.data,l,h)),h<r.byteLength?(r.fill(0,h),zE):je}jWrite(n,r,a){const o=this.mapIdToFile.get(n);if(a+r.byteLength>o.data.byteLength){const l=Math.max(a+r.byteLength,2*o.data.byteLength),d=new ArrayBuffer(l);new Uint8Array(d).set(new Uint8Array(o.data,0,o.size)),o.data=d}return new Uint8Array(o.data,a,r.byteLength).set(r),o.size=Math.max(o.size,a+r.byteLength),je}jTruncate(n,r){const a=this.mapIdToFile.get(n);return a.size=Math.min(a.size,r),je}jFileSize(n,r){const a=this.mapIdToFile.get(n);return r.setBigInt64(0,BigInt(a.size),!0),je}jDelete(n,r){const o=new URL(n,"file://").pathname;return this.mapNameToFile.delete(o),je}jAccess(n,r,a){const l=new URL(n,"file://").pathname,d=this.mapNameToFile.get(l);return a.setInt32(0,d?1:0,!0),je}}let hL;const SV=e=>{if(e.vfs_registered.has("memory-vfs")===!1){const r=new tx("memory-vfs",e.module);e.vfs_register(r,!1),hL=r}return{dbPointer:e.open_v2Sync(":memory:",void 0,"memory-vfs"),vfs:hL}},mL=({sqlite3:e,metadata:t})=>{const n=[],{dbPointer:r}=t;let a=!1;const o={_tag:"SqliteDb",metadata:t,prepare:l=>{try{const d=e.statements(r,l.trim(),{unscoped:!0});let h=!1;const p={execute:(S,v)=>{for(const R of d){S!==void 0&&Object.keys(S).length>0&&e.bind_collection(R,S);try{e.step(R)}finally{v!=null&&v.onRowsChanged&&v.onRowsChanged(e.changes(r)),e.reset(R)}}},select:S=>{if(d.length!==1)throw new Ap({query:{bindValues:S,sql:l},code:-1,cause:"Expected only one statement when using `select`"});const v=d[0];S!==void 0&&Object.keys(S).length>0&&e.bind_collection(v,S);const R=[];try{let O;try{O=e.column_names(v)}catch{}for(;e.step(v)===Zk;)if(O!==void 0){const x={};for(let z=0;z<O.length;z++)x[O[z]]=e.column(v,z);R.push(x)}}catch(O){throw new Ap({query:{bindValues:S,sql:l},code:O.code,cause:O})}finally{e.reset(v)}return R},finalize:()=>{if(!h){h=!0;for(const S of d)e.finalize(S)}},sql:l};return n.push(p),p}catch(d){throw new Ap({query:{sql:l,bindValues:{}},code:d.code,cause:d})}},export:()=>e.serialize(r,"main"),execute:sV((l,d,h)=>{const p=o.prepare(l);p.execute(d,h),p.finalize()}),select:aV((l,d)=>{const h=o.prepare(l),p=h.select(d);return h.finalize(),p}),destroy:()=>{o.close(),t.deleteDb()},close:()=>{if(!a){for(const l of n)l.finalize();e.close(r),a=!0}},import:l=>{if(l instanceof Uint8Array){const p=SV(e);e.deserialize(p.dbPointer,"main",l,l.length,l.length,3),e.backup(r,"main",p.dbPointer,"main"),e.close(p.dbPointer)}else e.backup(r,"main",l.metadata.dbPointer,"main");t.configureDb(o)},session:()=>{const l=e.session_create(r,"main");return e.session_attach(l,null),{changeset:()=>e.session_changeset(l).changeset??void 0,finish:()=>{e.session_delete(l)}}},makeChangeset:l=>({invert:()=>{const h=e.changeset_invert(l);return o.makeChangeset(h)},apply:()=>{try{e.changeset_apply(r,l),l=void 0}catch(h){throw new Ap({code:h.code??-1,cause:h,note:"Failed calling makeChangeset.apply"})}}})};return t.configureDb(o),o},L0e=Object.getPrototypeOf(async()=>{}).constructor;var ti,$p,tA,vV;class F0e extends _V{constructor(n,r){super(n,r);Ir(this,ti)}hasAsyncMethod(n){const r=`j${n.slice(1)}`;return this[r]instanceof L0e}getFilename(n){throw new Error("unimplemented")}jOpen(n,r,a,o){return B_}jDelete(n,r){return je}jAccess(n,r,a){return je}jFullPathname(n,r){const{read:a,written:o}=new TextEncoder().encodeInto(n,r);return a<n.length||o>=r.length?Py:(r[o]=0,je)}jGetLastError(n){return je}jClose(n){return je}jRead(n,r,a){return r.fill(0),zE}jWrite(n,r,a){return dV}jTruncate(n,r){return je}jSync(n,r){return je}jFileSize(n,r){return je}jLock(n,r){return je}jUnlock(n,r){return je}jCheckReservedLock(n,r){return r.setInt32(0,0,!0),je}jFileControl(n,r,a){return ex}jSectorSize(n){return super.xSectorSize(n)}jDeviceCharacteristics(n){return 0}xOpen(n,r,a,o,l){var p;const d=Zt(this,ti,vV).call(this,r,o),h=Zt(this,ti,$p).call(this,"Int32",l);return(p=this.log)==null||p.call(this,"jOpen",d,a,"0x"+o.toString(16)),this.jOpen(d,a,o,h)}xDelete(n,r,a){var l;const o=this._module.UTF8ToString(r);return(l=this.log)==null||l.call(this,"jDelete",o,a),this.jDelete(o,a)}xAccess(n,r,a,o){var h;const l=this._module.UTF8ToString(r),d=Zt(this,ti,$p).call(this,"Int32",o);return(h=this.log)==null||h.call(this,"jAccess",l,a),this.jAccess(l,a,d)}xFullPathname(n,r,a,o){var h;const l=this._module.UTF8ToString(r),d=this._module.HEAPU8.subarray(o,o+a);return(h=this.log)==null||h.call(this,"jFullPathname",l,a),this.jFullPathname(l,d)}xGetLastError(n,r,a){var l;const o=this._module.HEAPU8.subarray(a,a+r);return(l=this.log)==null||l.call(this,"jGetLastError",r),this.jGetLastError(o)}xClose(n){var r;return(r=this.log)==null||r.call(this,"jClose",n),this.jClose(n)}xRead(n,r,a,o,l){var p;const d=Zt(this,ti,tA).call(this,r,a),h=QR(o,l);return(p=this.log)==null||p.call(this,"jRead",n,a,h),this.jRead(n,d,h)}xWrite(n,r,a,o,l){var p;const d=Zt(this,ti,tA).call(this,r,a),h=QR(o,l);return(p=this.log)==null||p.call(this,"jWrite",n,d,h),this.jWrite(n,d,h)}xTruncate(n,r,a){var l;const o=QR(r,a);return(l=this.log)==null||l.call(this,"jTruncate",n,o),this.jTruncate(n,o)}xSync(n,r){var a;return(a=this.log)==null||a.call(this,"jSync",n,r),this.jSync(n,r)}xFileSize(n,r){var o;const a=Zt(this,ti,$p).call(this,"BigInt64",r);return(o=this.log)==null||o.call(this,"jFileSize",n),this.jFileSize(n,a)}xLock(n,r){var a;return(a=this.log)==null||a.call(this,"jLock",n,r),this.jLock(n,r)}xUnlock(n,r){var a;return(a=this.log)==null||a.call(this,"jUnlock",n,r),this.jUnlock(n,r)}xCheckReservedLock(n,r){var o;const a=Zt(this,ti,$p).call(this,"Int32",r);return(o=this.log)==null||o.call(this,"jCheckReservedLock",n),this.jCheckReservedLock(n,a)}xFileControl(n,r,a){var l;const o=new DataView(this._module.HEAPU8.buffer,this._module.HEAPU8.byteOffset+a);return(l=this.log)==null||l.call(this,"jFileControl",n,r,o),this.jFileControl(n,r,o)}xSectorSize(n){var r;return(r=this.log)==null||r.call(this,"jSectorSize",n),this.jSectorSize(n)}xDeviceCharacteristics(n){var r;return(r=this.log)==null||r.call(this,"jDeviceCharacteristics",n),this.jDeviceCharacteristics(n)}}ti=new WeakSet,$p=function(n,r){const a=n==="Int32"?4:8,o=`get${n}`,l=`set${n}`,d=()=>new DataView(this._module.HEAPU8.buffer,this._module.HEAPU8.byteOffset+r,a);let h=d();return new Proxy(h,{get(p,S){if(h.buffer.byteLength===0&&(h=d()),S===o)return function(R,O){if(!O)throw new Error("must be little endian");return h[S](R,O)};if(S===l)return function(R,O,x){if(!x)throw new Error("must be little endian");return h[S](R,O,x)};if(typeof S=="string"&&/^(get)|(set)/.test(S))throw new Error("invalid type");const v=h[S];return typeof v=="function"?v.bind(h):v}})},tA=function(n,r){let a=this._module.HEAPU8.subarray(n,n+r);return new Proxy(a,{get:(o,l,d)=>{a.buffer.byteLength===0&&(a=this._module.HEAPU8.subarray(n,n+r));const h=a[l];return typeof h=="function"?h.bind(a):h}})},vV=function(n,r){if(r&hV){let a=n,o=1;const l=[];for(;o;){const d=this._module.HEAPU8[a++];if(d)l.push(d);else switch(this._module.HEAPU8[a]||(o=null),o){case 1:{l.push(63),o=2;break}case 2:{l.push(61),o=3;break}case 3:{l.push(38),o=2;break}}}return new TextDecoder().decode(new Uint8Array(l))}return n?this._module.UTF8ToString(n):null};function QR(e,t){return t*4294967296+e+(e<0?2**32:0)}const wV=4096,nx=512,z0e=4,U0e=8,nA=nx+z0e,gL=nx,pL=nA,Uu=wV,P0e=mV|gV|pV|yV,j0e=6;var By,wl,wi,ma,eo,Ei,An,EV,TV,RV,ah,sA,ih,aA;const ix=class ix extends F0e{constructor(n,r,a){super(n,a);Ir(this,An);b(this,"log",null);Ir(this,By);Ir(this,wl);Ir(this,wi,new Map);Ir(this,ma,new Map);Ir(this,eo,new Set);Ir(this,Ei,new Map);Mu(this,By,r)}static async create(n,r,a){const o=new ix(n,r,a);return await o.isReady(),o}getOpfsFileName(n){const r=Zt(this,An,ih).call(this,n),a=Ne(this,ma).get(r);return Ne(this,wi).get(a)}resetAccessHandle(n){const r=Zt(this,An,ih).call(this,n);Ne(this,ma).get(r).truncate(Uu)}jOpen(n,r,a,o){try{const l=n?Zt(this,An,ih).call(this,n):Math.random().toString(36);let d=Ne(this,ma).get(l);if(!d&&a&x0)if(this.getSize()<this.getCapacity())[d]=Ne(this,eo).keys(),Zt(this,An,ah).call(this,d,l,a);else throw new Error("cannot create file");if(!d)throw new Error("file not found");const h={path:l,flags:a,accessHandle:d};return Ne(this,Ei).set(r,h),o.setInt32(0,a,!0),je}catch(l){return console.error(l.message),B_}}jClose(n){const r=Ne(this,Ei).get(n);return r&&(r.accessHandle.flush(),Ne(this,Ei).delete(n),r.flags&$0&&Zt(this,An,aA).call(this,r.path)),je}jRead(n,r,a){const l=Ne(this,Ei).get(n).accessHandle.read(r.subarray(),{at:Uu+a});return l<r.byteLength?(r.fill(0,l,r.byteLength),zE):je}jWrite(n,r,a){return Ne(this,Ei).get(n).accessHandle.write(r.subarray(),{at:Uu+a})===r.byteLength?je:Py}jTruncate(n,r){return Ne(this,Ei).get(n).accessHandle.truncate(Uu+r),je}jSync(n,r){return Ne(this,Ei).get(n).accessHandle.flush(),je}jFileSize(n,r){const o=Ne(this,Ei).get(n).accessHandle.getSize()-Uu;return r.setBigInt64(0,BigInt(o),!0),je}jSectorSize(n){return wV}jDeviceCharacteristics(n){return q0e}jAccess(n,r,a){const o=Zt(this,An,ih).call(this,n);return a.setInt32(0,Ne(this,ma).has(o)?1:0,!0),je}jDelete(n,r){const a=Zt(this,An,ih).call(this,n);return Zt(this,An,aA).call(this,a),je}async close(){Zt(this,An,TV).call(this)}async isReady(){if(!Ne(this,wl)){let n=await navigator.storage.getDirectory();for(const r of Ne(this,By).split("/"))r&&(n=await n.getDirectoryHandle(r,{create:!0}));Mu(this,wl,n),await Zt(this,An,EV).call(this),this.getCapacity()===0&&await this.addCapacity(j0e)}return!0}getSize(){return Ne(this,ma).size}getCapacity(){return Ne(this,wi).size}async addCapacity(n){for(let r=0;r<n;++r){const a=Math.random().toString(36).replace("0.",""),l=await(await Ne(this,wl).getFileHandle(a,{create:!0})).createSyncAccessHandle();Ne(this,wi).set(l,a),Zt(this,An,ah).call(this,l,"",0)}return n}async removeCapacity(n){let r=0;for(const a of Array.from(Ne(this,eo))){if(r==n||this.getSize()===this.getCapacity())return r;const o=Ne(this,wi).get(a);a.close(),await Ne(this,wl).removeEntry(o),Ne(this,wi).delete(a),Ne(this,eo).delete(a),++r}return r}};By=new WeakMap,wl=new WeakMap,wi=new WeakMap,ma=new WeakMap,eo=new WeakMap,Ei=new WeakMap,An=new WeakSet,EV=async function(){const n=[];for await(const[r,a]of Ne(this,wl))a.kind==="file"&&n.push([r,a]);await Promise.all(n.map(async([r,a])=>{const o=await a.createSyncAccessHandle();Ne(this,wi).set(o,r);const l=Zt(this,An,RV).call(this,o);l?Ne(this,ma).set(l,o):Ne(this,eo).add(o)}))},TV=function(){for(const n of Ne(this,wi).keys())n.close();Ne(this,wi).clear(),Ne(this,ma).clear(),Ne(this,eo).clear()},RV=function(n){const r=new Uint8Array(nA);n.read(r,{at:0});const o=new DataView(r.buffer,r.byteOffset).getUint32(gL);if(r[0]&&(o&$0||(o&P0e)===0))return console.warn(`Remove file with unexpected flags ${o.toString(16)}`),Zt(this,An,ah).call(this,n,"",0),"";const l=new Uint32Array(U0e/4);n.read(l,{at:pL});const d=Zt(this,An,sA).call(this,r);if(l.every((h,p)=>h===d[p])){const h=r.indexOf(0);return h===0&&n.truncate(Uu),new TextDecoder().decode(r.subarray(0,h))}else return console.warn("Disassociating file with bad digest."),Zt(this,An,ah).call(this,n,"",0),""},ah=function(n,r,a){const o=new Uint8Array(nA);if(new TextEncoder().encodeInto(r,o).written>=nx)throw new Error("path too long");new DataView(o.buffer,o.byteOffset).setUint32(gL,a);const h=Zt(this,An,sA).call(this,o);n.write(o,{at:0}),n.write(h,{at:pL}),n.flush(),r?(Ne(this,ma).set(r,n),Ne(this,eo).delete(n)):(n.truncate(Uu),Ne(this,eo).add(n))},sA=function(n){if(!n[0])return new Uint32Array([4274806656,2899230775]);let r=3735928559,a=1103547991;for(const o of n)r=Math.imul(r^o,2654435761),a=Math.imul(a^o,1597334677);return r=Math.imul(r^r>>>16,2246822507)^Math.imul(a^a>>>13,3266489909),a=Math.imul(a^a>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),new Uint32Array([r>>>0,a>>>0])},ih=function(n){return(typeof n=="string"?new URL(n,"file://localhost/"):n).pathname},aA=function(n){const r=Ne(this,ma).get(n);r&&(Ne(this,ma).delete(n),Zt(this,An,ah).call(this,r,"",0))};let rA=ix;const H0e=sE(1).pipe(Ga),yL=new Map,B0e=({sqlite3:e,directory:t,fileName:n})=>ke(function*(){const r=t.replaceAll(/["*/:<>?\\|]/g,"_"),o=`opfs${r.length===0?"":`-${r}`}`;if(e.vfs_registered.has(o)===!1){const h=yield*Lf(()=>rA.create(o,t,e.module));e.vfs_register(h,!1),yL.set(o,h)}const l=e.open_v2Sync(n,void 0,o),d=yL.get(o);return{dbPointer:l,vfs:d}}).pipe(H0e.withPermits(1)),V0e=4096,CV=512,K0e=4,G0e=8,kV=CV+K0e,Q0e=CV,_L=kV,Y0e=V0e,W0e=mV|gV|pV|yV,J0e=new TextDecoder,X0e=async e=>{const t=new Uint8Array(await e.slice(0,kV).arrayBuffer()),r=new DataView(t.buffer,t.byteOffset).getUint32(Q0e);if(t[0]&&(r&$0||(r&W0e)===0))return console.warn(`Remove file with unexpected flags ${r.toString(16)}`),"";const a=new Uint32Array(await e.slice(_L,_L+G0e).arrayBuffer()),o=Z0e(t);if(a.every((l,d)=>l===o[d])){const l=t.indexOf(0);return J0e.decode(t.subarray(0,l))}else return console.warn("Disassociating file with bad digest."),""},Z0e=e=>{if(!e[0])return new Uint32Array([4274806656,2899230775]);let t=3735928559,n=1103547991;for(const r of e)t=Math.imul(t^r,2654435761),n=Math.imul(n^r,1597334677);return t=Math.imul(t^t>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(t^t>>>13,3266489909),new Uint32Array([t>>>0,n>>>0])},ewe=({sqlite3:e})=>t=>ke(function*(){if(t._tag==="in-memory"){const{dbPointer:l,vfs:d}=SV(e);return mL({sqlite3:e,metadata:{_tag:"in-memory",vfs:d,dbPointer:l,deleteDb:()=>{},configureDb:t.configureDb??(()=>{}),persistenceInfo:{fileName:":memory:"}}})}const n=60;let r=t.fileName;t.fileName.length>n&&(yield*ki(`dbFilename too long: '${t.fileName}'. Max ${n} chars, got ${t.fileName.length}. Hashing...`),r=`hash-${Xn(t.fileName)}.db`);const{dbPointer:a,vfs:o}=yield*B0e({sqlite3:e,directory:t.opfsDirectory,fileName:r});return mL({sqlite3:e,metadata:{_tag:"opfs",vfs:o,dbPointer:a,deleteDb:()=>o.resetAccessHandle(t.fileName),configureDb:t.configureDb??(()=>{}),persistenceInfo:{fileName:r,opfsDirectory:t.opfsDirectory,opfsFileName:o.getOpfsFileName(r)}}})}),bL=0x7fffffffffffffffn,SL=-0x8000000000000000n;class Pa extends Error{constructor(t,n){super(t),this.code=n}}const Zd=!1;function twe(e){const t={};e.retryOps=[];const n=e._getSqliteFree(),r=e._malloc(8),a=[r,r+4];function o(A){if(typeof A!="string")return 0;const E=new TextEncoder().encode(A),T=e._sqlite3_malloc(E.byteLength+1);return e.HEAPU8.set(E,T),e.HEAPU8[T+E.byteLength]=0,T}function l(A,E){return BigInt(E)<<32n|BigInt(A)&0xffffffffn}const d=function(){const A=BigInt(Number.MAX_SAFE_INTEGER)>>32n,E=BigInt(Number.MIN_SAFE_INTEGER)>>32n;return function(T,q){return q>A||q<E?l(T,q):q*4294967296+(T&2147483647)-(T&2147483648)}}(),h=new Set;function p(A){if(!h.has(A))throw new Pa("not a database",ml)}const S=new Map;function v(A){if(!S.has(A))throw new Pa("not a statement",ml)}t.bind_collection=function(A,E){v(A);const T=Array.isArray(E),q=t.bind_parameter_count(A);for(let D=1;D<=q;++D){const I=T?D-1:t.bind_parameter_name(A,D),$=E[I];$!==void 0&&t.bind(A,D,$)}return je},t.bind=function(A,E,T){switch(v(A),typeof T){case"number":return T===(T|0)?t.bind_int(A,E,T):t.bind_double(A,E,T);case"string":return t.bind_text(A,E,T);default:return T instanceof Uint8Array||Array.isArray(T)?t.bind_blob(A,E,T):T===null?t.bind_null(A,E):typeof T=="bigint"?t.bind_int64(A,E,T):T===void 0?x0e:(console.warn("unknown binding converted to null",T),t.bind_null(A,E))}},t.bind_blob=function(){const A="sqlite3_bind_blob",E=e.cwrap(A,...Ke("nnnnn:n"));return function(T,q,D){v(T);const I=D.byteLength??D.length,$=e._sqlite3_malloc(I);e.HEAPU8.subarray($).set(D);const H=E(T,q,$,I,n);return x(A,H,S.get(T))}}(),t.bind_parameter_count=function(){const E=e.cwrap("sqlite3_bind_parameter_count",...Ke("n:n"));return function(T){return v(T),E(T)}}(),t.bind_double=function(){const A="sqlite3_bind_double",E=e.cwrap(A,...Ke("nnn:n"));return function(T,q,D){v(T);const I=E(T,q,D);return x(A,I,S.get(T))}}(),t.bind_int=function(){const A="sqlite3_bind_int",E=e.cwrap(A,...Ke("nnn:n"));return function(T,q,D){if(v(T),D>2147483647||D<-2147483648)return KR;const I=E(T,q,D);return x(A,I,S.get(T))}}(),t.bind_int64=function(){const A="sqlite3_bind_int64",E=e.cwrap(A,...Ke("nnnn:n"));return function(T,q,D){if(v(T),D>bL||D<SL)return KR;const I=D&0xffffffffn,$=D>>32n,H=E(T,q,Number(I),Number($));return x(A,H,S.get(T))}}(),t.bind_null=function(){const A="sqlite3_bind_null",E=e.cwrap(A,...Ke("nn:n"));return function(T,q){v(T);const D=E(T,q);return x(A,D,S.get(T))}}(),t.bind_parameter_name=function(){const E=e.cwrap("sqlite3_bind_parameter_name",...Ke("n:s"));return function(T,q){return v(T),E(T,q)}}(),t.bind_text=function(){const A="sqlite3_bind_text",E=e.cwrap(A,...Ke("nnnnn:n"));return function(T,q,D){v(T);const I=o(D),$=E(T,q,I,-1,n);return x(A,$,S.get(T))}}(),t.changes=function(){const E=e.cwrap("sqlite3_changes",...Ke("n:n"));return function(T){return p(T),E(T)}}(),t.deserialize=function(){const E=e.cwrap("sqlite3_deserialize",...Ke("nnnnnn:n"));return function(T,q,D,I,$,H){p(T);const K=e._sqlite3_malloc(I);return e.HEAPU8.subarray(K).set(D),E(T,q,K,I,$,H)}}();const R=1;t.serialize=function(){const E=e.cwrap("sqlite3_serialize",...Ke("nsnn:n"));return function(T,q){p(T);const D=a[0];let I=E(T,q,D,0);if(I===0){I=E(T,q,D,R);const $=e.getValue(D,"*"),H=e.HEAPU8.subarray(I,I+$);return new Uint8Array(H.slice())}else{const $=e.getValue(D,"*"),H=e.HEAPU8.subarray(I,I+$);return new Uint8Array(H)}}}(),t.backup=function(){const A=e.cwrap("sqlite3_backup_init",...Ke("nsns:n")),E=e.cwrap("sqlite3_backup_step",...Ke("nn:n")),T=e.cwrap("sqlite3_backup_finish",...Ke("n:n"));return function(q,D,I,$){p(q),p(I);const H=A(q,D,I,$);if(H===0){const K=e.ccall("sqlite3_errmsg","string",["number"],[q]);throw new Pa(`backup failed: ${K}`,D0e)}return E(H,-1),T(H)}}(),t.clear_bindings=function(){const A="sqlite3_clear_bindings",E=e.cwrap(A,...Ke("n:n"));return function(T){v(T);const q=E(T);return x(A,q,S.get(T))}}(),t.close=function(){const A="sqlite3_close",E=e.cwrap(A,...Ke("n:n"),{async:Zd});return function(T){p(T);const q=E(T);return h.delete(T),x(A,q,T)}}(),t.column=function(A,E){v(A);const T=t.column_type(A,E);switch(T){case fL:return t.column_blob(A,E);case lL:return t.column_double(A,E);case cL:const q=t.column_int(A,E),D=e.getTempRet0();return d(q,D);case dL:return null;case uL:return t.column_text(A,E);default:throw new Pa("unknown type",T)}},t.column_blob=function(){const E=e.cwrap("sqlite3_column_blob",...Ke("nn:n"));return function(T,q){v(T);const D=t.column_bytes(T,q),I=E(T,q);if(I===0)return null;const $=e.HEAPU8.subarray(I,I+D);return new Uint8Array($)}}(),t.column_bytes=function(){const E=e.cwrap("sqlite3_column_bytes",...Ke("nn:n"));return function(T,q){return v(T),E(T,q)}}(),t.column_count=function(){const E=e.cwrap("sqlite3_column_count",...Ke("n:n"));return function(T){return v(T),E(T)}}(),t.column_double=function(){const E=e.cwrap("sqlite3_column_double",...Ke("nn:n"));return function(T,q){return v(T),E(T,q)}}(),t.column_int=function(){const E=e.cwrap("sqlite3_column_int64",...Ke("nn:n"));return function(T,q){return v(T),E(T,q)}}(),t.column_int64=function(){const E=e.cwrap("sqlite3_column_int64",...Ke("nn:n"));return function(T,q){v(T);const D=E(T,q),I=e.getTempRet0();return l(D,I)}}(),t.column_name=function(){const E=e.cwrap("sqlite3_column_name",...Ke("nn:s"));return function(T,q){return v(T),E(T,q)}}(),t.column_names=function(A){const E=[],T=t.column_count(A);for(let q=0;q<T;++q)E.push(t.column_name(A,q));return E},t.column_text=function(){const E=e.cwrap("sqlite3_column_text",...Ke("nn:s"));return function(T,q){return v(T),E(T,q)}}(),t.column_type=function(){const E=e.cwrap("sqlite3_column_type",...Ke("nn:n"));return function(T,q){return v(T),E(T,q)}}(),t.create_function=function(A,E,T,q,D,I,$,H){p(A);function K(j){return(te,Ee,xe)=>j(te,e.HEAP32.subarray(xe/4,xe/4+Ee))}const V=e.create_function(A,E,T,q,D,I&&K(I),$&&K($),H);return x("sqlite3_create_function",V,A)},t.data_count=function(){const E=e.cwrap("sqlite3_data_count",...Ke("n:n"));return function(T){return v(T),E(T)}}(),t.exec=function(A,E,T){const q=t.statements(A,E,{unscoped:!0});for(const D of q){let I;for(;t.step(D)===Zk;)if(T){I=I??t.column_names(D);const $=t.row(D);T($,I),T($,I)}}for(const D of q)t.finalize(D);return je},t.finalize=function(){const E=e.cwrap("sqlite3_finalize",...Ke("n:n"),{async:Zd});return function(T){const q=E(T);return S.delete(T),q}}(),t.get_autocommit=function(){const E=e.cwrap("sqlite3_get_autocommit",...Ke("n:n"));return function(T){return E(T)}}(),t.libversion=function(){const E=e.cwrap("sqlite3_libversion",...Ke(":s"));return function(){return E()}}(),t.libversion_number=function(){const E=e.cwrap("sqlite3_libversion_number",...Ke(":n"));return function(){return E()}}(),t.limit=function(){const E=e.cwrap("sqlite3_limit",...Ke("nnn:n"));return function(T,q,D){return E(T,q,D)}}(),t.open_v2=function(){const A="sqlite3_open_v2",E=e.cwrap(A,...Ke("snnn:n"),{async:Zd});return async function(T,q,D){q=q||x0|oL,D=o(D);try{const I=await z(()=>E(T,a[0],q,D)),$=e.getValue(a[0],"*");return h.add($),e.ccall("RegisterExtensionFunctions","void",["number"],[$]),x(A,I,$),$}finally{e._sqlite3_free(D)}}}(),t.open_v2Sync=function(){const A="sqlite3_open_v2",E=e.cwrap(A,...Ke("snnn:n"),{async:Zd});return function(T,q,D){q=q||x0|oL,D=o(D);try{const I=E(T,a[0],q,D),$=e.getValue(a[0],"*");return h.add($),e.ccall("RegisterExtensionFunctions","void",["number"],[$]),x(A,I,$),$}finally{e._sqlite3_free(D)}}}(),t.progress_handler=function(A,E,T,q){p(A),e.progress_handler(A,E,T,q)},t.reset=function(){const A="sqlite3_reset",E=e.cwrap(A,...Ke("n:n"),{async:Zd});return function(T){v(T);const q=E(T);return x(A,q,S.get(T))}}(),t.result=function(A,E){switch(typeof E){case"number":E===(E|0)?t.result_int(A,E):t.result_double(A,E);break;case"string":t.result_text(A,E);break;default:if(E instanceof Uint8Array||Array.isArray(E))t.result_blob(A,E);else if(E===null)t.result_null(A);else{if(typeof E=="bigint")return t.result_int64(A,E);console.warn("unknown result converted to null",E),t.result_null(A)}break}},t.result_blob=function(){const E=e.cwrap("sqlite3_result_blob",...Ke("nnnn:n"));return function(T,q){const D=q.byteLength??q.length,I=e._sqlite3_malloc(D);e.HEAPU8.subarray(I).set(q),E(T,I,D,n)}}(),t.result_double=function(){const E=e.cwrap("sqlite3_result_double",...Ke("nn:n"));return function(T,q){E(T,q)}}(),t.result_int=function(){const E=e.cwrap("sqlite3_result_int",...Ke("nn:n"));return function(T,q){E(T,q)}}(),t.result_int64=function(){const E=e.cwrap("sqlite3_result_int64",...Ke("nnn:n"));return function(T,q){if(q>bL||q<SL)return KR;const D=q&0xffffffffn,I=q>>32n;E(T,Number(D),Number(I))}}(),t.result_null=function(){const E=e.cwrap("sqlite3_result_null",...Ke("n:n"));return function(T){E(T)}}(),t.result_text=function(){const E=e.cwrap("sqlite3_result_text",...Ke("nnnn:n"));return function(T,q){const D=o(q);E(T,D,-1,n)}}(),t.row=function(A){const E=[],T=t.data_count(A);for(let q=0;q<T;++q){const D=t.column(A,q);E.push((D==null?void 0:D.buffer)===e.HEAPU8.buffer?D.slice():D)}return E},t.set_authorizer=function(A,E,T){p(A);function q($,H,K,V,j,te){return[$,H,e.UTF8ToString(K),e.UTF8ToString(V),e.UTF8ToString(j),e.UTF8ToString(te)]}function D($){return(H,K,V,j,te,Ee)=>$(...q(H,K,V,j,te,Ee))}const I=e.set_authorizer(A,D(E),T);return x("sqlite3_set_authorizer",I,A)},t.sql=function(){const E=e.cwrap("sqlite3_sql",...Ke("n:s"));return function(T){return v(T),E(T)}}(),t.statements=function(A,E,T={}){const q=e.cwrap("sqlite3_prepare_v3","number",["number","number","number","number","number","number"],{async:!1}),D=[],I=new TextEncoder().encode(E),$=I.byteLength-I.byteLength%4+12,H=e._sqlite3_malloc($),K=H+I.byteLength+1;e.HEAPU8.set(I,H),e.HEAPU8[K-1]=0;const V=H+$-8,j=H+$-4;let te;function Ee(){te&&!T.unscoped&&t.finalize(te),te=0}e.setValue(j,H,"*");do{Ee();const xe=e.getValue(j,"*"),fe=q(A,xe,K-j,T.flags||0,V,j);fe!==je&&x("sqlite3_prepare_v3",fe,A),te=e.getValue(V,"*"),te&&(S.set(te,A),D.push(te))}while(te);return D},t.step=function(){const A="sqlite3_step",E=e.cwrap(A,...Ke("n:n"),{async:Zd});return function(T){v(T);const q=E(T);return x(A,q,S.get(T),[Zk,$0e])}}(),t.commit_hook=function(A,E){p(A),e.commit_hook(A,E)},t.update_hook=function(A,E){p(A);function T(D,I,$,H,K){return[D,e.UTF8ToString(I),e.UTF8ToString($),l(H,K)]}function q(D){return(I,$,H,K,V)=>D(...T(I,$,H,K,V))}e.update_hook(A,q(E))},t.session_create=function(){const A="sqlite3session_create",E=e.cwrap(A,...Ke("nsn:n"));return function(T,q){p(T);const D=e._malloc(4),I=E(T,q,D);return I!==je&&x(A,I,T),e.getValue(D,"i32")}}(),t.session_attach=function(){const A="sqlite3session_attach",E=e.cwrap(A,...Ke("ns:n"));return function(T,q){if(typeof T!="number")throw new Pa("Invalid session object",ml);const D=E(T,q);return x(A,D)}}(),t.session_enable=function(){const E=e.cwrap("sqlite3session_enable",...Ke("nn:n"));return function(T,q){const D=q?1:0;if(typeof T!="number")throw new Pa("Invalid session object",ml);if(E(T,D)!==D)throw new Pa("Failed to enable session",ml)}}(),t.session_changeset=function(){const A="sqlite3session_changeset",E=e.cwrap(A,...Ke("nnn:n"));return function(T){if(typeof T!="number")throw new Pa("Invalid session object",ml);const q=e._malloc(4),D=e._malloc(4);try{const I=E(T,q,D);if(I===je){const $=e.getValue(q,"i32"),H=e.getValue(D,"i32");if(H===0)return{result:I,size:0,changeset:null};const K=new Uint8Array(e.HEAPU8.subarray(H,H+$));return e._sqlite3_free(H),{result:I,size:$,changeset:K}}return x(A,I)}finally{e._free(q),e._free(D)}}}(),t.session_delete=function(){const E=e.cwrap("sqlite3session_delete",...Ke("n:v"));return function(T){if(typeof T!="number")throw new Pa("Invalid session object",ml);return E(T)}}(),t.changeset_start=function(){const A="sqlite3changeset_start",E=e.cwrap(A,...Ke("nnn:n"));return function(T){const q=e._sqlite3_malloc(T.length);e.HEAPU8.subarray(q).set(T);const D=e._malloc(4);try{const I=E(D,T.length,q);return I!==je&&x(A,I),e.getValue(D,"i32")}finally{e._sqlite3_free(q),e._free(D)}}}(),t.changeset_finalize=function(){const E=e.cwrap("sqlite3changeset_finalize",...Ke("n:n"));return function(T){return E(T)}}(),t.changeset_invert=function(){const A="sqlite3changeset_invert",E=e.cwrap(A,...Ke("nn:nn"));return function(T){const q=e._sqlite3_malloc(T.length);e.HEAPU8.subarray(q).set(T);const D=e._malloc(4),I=e._malloc(4),$=E(T.length,q,D,I);$!==je&&x(A,$);const H=e.getValue(D,"i32"),K=e.getValue(I,"i32"),V=new Uint8Array(e.HEAPU8.buffer,K,H).slice();return e._sqlite3_free(q),e._sqlite3_free(K),V}}(),t.session_changeset_inverted=function(){const A="sqlite3session_changeset",E=e.cwrap(A,...Ke("nnn:n")),T="sqlite3changeset_invert",q=e.cwrap(T,...Ke("nn:nn"));return function(D){if(typeof D!="number")throw new Pa("Invalid session object",ml);const I=e._malloc(4),$=e._malloc(4),H=e._malloc(4),K=e._malloc(4);try{const V=E(D,I,$);if(V!==je)return x(A,V);const j=e.getValue(I,"i32"),te=e.getValue($,"i32"),Ee=q(j,te,H,K);if(Ee!==je)return x(T,Ee);const xe=e.getValue(H,"i32"),fe=e.getValue(K,"i32"),De=new Uint8Array(e.HEAPU8.buffer,fe,xe);return e._sqlite3_free(te),e._sqlite3_free(fe),{result:V,size:j,changeset:new Uint8Array(De)}}finally{e._free(I),e._free($),e._free(H),e._free(K)}}}(),t.changeset_apply=function(){const A="sqlite3changeset_apply",E=e.cwrap(A,...Ke("nnnnnn:n"));return function(T,q,D){const I=e._sqlite3_malloc(q.length);e.HEAPU8.subarray(I).set(q);const $=1,H=()=>$,K=E(T,q.length,I,null,H,null);return e._sqlite3_free(I),K!==je&&x(A,K),K}}(),t.value=function(A){const E=t.value_type(A);switch(E){case fL:return t.value_blob(A);case lL:return t.value_double(A);case cL:const T=t.value_int(A),q=e.getTempRet0();return d(T,q);case dL:return null;case uL:return t.value_text(A);default:throw new Pa("unknown type",E)}},t.value_blob=function(){const E=e.cwrap("sqlite3_value_blob",...Ke("n:n"));return function(T){const q=t.value_bytes(T),D=E(T);return e.HEAPU8.subarray(D,D+q)}}(),t.value_bytes=function(){const E=e.cwrap("sqlite3_value_bytes",...Ke("n:n"));return function(T){return E(T)}}(),t.value_double=function(){const E=e.cwrap("sqlite3_value_double",...Ke("n:n"));return function(T){return E(T)}}(),t.value_int=function(){const E=e.cwrap("sqlite3_value_int64",...Ke("n:n"));return function(T){return E(T)}}(),t.value_int64=function(){const E=e.cwrap("sqlite3_value_int64",...Ke("n:n"));return function(T){const q=E(T),D=e.getTempRet0();return l(q,D)}}(),t.value_text=function(){const E=e.cwrap("sqlite3_value_text",...Ke("n:s"));return function(T){return E(T)}}(),t.value_type=function(){const E=e.cwrap("sqlite3_value_type",...Ke("n:n"));return function(T){return E(T)}}();const O=new Set;t.vfs_register=function(A,E){if(O.has(A.name))return;const T=e.vfs_register(A,E),q=x("sqlite3_vfs_register",T);return O.add(A.name),q},t.vfs_registered=O;function x(A,E,T=null,q=[je]){if(q.includes(E))return E;const D=T?e.ccall("sqlite3_errmsg","string",["number"],[T]):A;throw new Pa(D,E)}async function z(A){let E;do e.retryOps.length&&(await Promise.all(e.retryOps),e.retryOps=[]),E=await A();while(E&&e.retryOps.length);return E}return t}function Ke(e){const t=[],n=e.match(/([ns@]*):([nsv@])/);switch(n[2]){case"n":t.push("number");break;case"s":t.push("string");break;case"v":t.push(null);break}const r=[];for(let a of n[1])switch(a){case"n":r.push("number");break;case"s":r.push("string");break}return t.push(r),t}var nwe=(()=>{var e=import.meta.url;return function(t={}){var n,r=t,a,o,l=new Promise((f,m)=>{a=f,o=m}),d=typeof window=="object",h=typeof WorkerGlobalScope<"u";typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";var p=Object.assign({},r),S="./this.program",v=(f,m)=>{throw m},R="";function O(f){return r.locateFile?r.locateFile(f,R):R+f}var x,z;(d||h)&&(h?R=self.location.href:typeof document<"u"&&document.currentScript&&(R=document.currentScript.src),e&&(R=e),R.startsWith("blob:")?R="":R=R.substr(0,R.replace(/[?#].*/,"").lastIndexOf("/")+1),h&&(z=f=>{var m=new XMLHttpRequest;return m.open("GET",f,!1),m.responseType="arraybuffer",m.send(null),new Uint8Array(m.response)}),x=f=>fetch(f,{credentials:"same-origin"}).then(m=>m.ok?m.arrayBuffer():Promise.reject(new Error(m.status+" : "+m.url))));var A=r.print||console.log.bind(console),E=r.printErr||console.error.bind(console);Object.assign(r,p),p=null,r.arguments&&r.arguments,r.thisProgram&&(S=r.thisProgram);var T=r.wasmBinary,q,D=!1,I,$,H,K,V,j,te,Ee,xe;function fe(){var f=q.buffer;r.HEAP8=$=new Int8Array(f),r.HEAP16=K=new Int16Array(f),r.HEAPU8=H=new Uint8Array(f),r.HEAPU16=V=new Uint16Array(f),r.HEAP32=j=new Int32Array(f),r.HEAPU32=te=new Uint32Array(f),r.HEAPF32=Ee=new Float32Array(f),r.HEAPF64=xe=new Float64Array(f)}var De=[],ae=[],Te=[],Re=[];function Xe(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)ge(r.preRun.shift());ji(De)}function Q(){!r.noFSInit&&!C.initialized&&C.init(),C.ignorePermissions=!1,ji(ae)}function de(){ji(Te)}function Le(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)ht(r.postRun.shift());ji(Re)}function ge(f){De.unshift(f)}function ve(f){ae.unshift(f)}function ht(f){Re.unshift(f)}var tt=0,Kn=null;function Gt(f){return f}function En(f){var m;tt++,(m=r.monitorRunDependencies)==null||m.call(r,tt)}function St(f){var _;if(tt--,(_=r.monitorRunDependencies)==null||_.call(r,tt),tt==0&&Kn){var m=Kn;Kn=null,m()}}function Tn(f){var _;(_=r.onAbort)==null||_.call(r,f),f="Aborted("+f+")",E(f),D=!0,f+=". Build with -sASSERTIONS for more info.";var m=new WebAssembly.RuntimeError(f);throw o(m),m}var Ui="data:application/octet-stream;base64,",na=f=>f.startsWith(Ui);function js(){if(r.locateFile){var f="wa-sqlite.wasm";return na(f)?f:O(f)}return new URL("/assets/wa-sqlite-CWx0VZcQ.wasm",import.meta.url).href}var Pi;function fi(f){if(f==Pi&&T)return new Uint8Array(T);if(z)return z(f);throw"both async and sync fetching of the wasm failed"}function qc(f){return T?Promise.resolve().then(()=>fi(f)):x(f).then(m=>new Uint8Array(m),()=>fi(f))}function Oo(f,m,_){return qc(f).then(w=>WebAssembly.instantiate(w,m)).then(_,w=>{E(`failed to asynchronously prepare wasm: ${w}`),Tn(w)})}function au(f,m,_,w){return!f&&typeof WebAssembly.instantiateStreaming=="function"&&!na(m)&&typeof fetch=="function"?fetch(m,{credentials:"same-origin"}).then(N=>{var P=WebAssembly.instantiateStreaming(N,_);return P.then(w,function(G){return E(`wasm streaming compile failed: ${G}`),E("falling back to ArrayBuffer instantiation"),Oo(m,_,w)})}):Oo(m,_,w)}function iu(){return{a:Bc}}function ou(){function f(w,N){return U=w.exports,q=U.la,fe(),jc=U.of,ve(U.ma),St(),U}En();function m(w){f(w.instance)}var _=iu();if(r.instantiateWasm)try{return r.instantiateWasm(_,f)}catch(w){E(`Module.instantiateWasm callback failed with error: ${w}`),o(w)}return Pi??(Pi=js()),au(T,Pi,_,m).catch(o),{}}var Je,Wt;class ds{constructor(m){b(this,"name","ExitStatus");this.message=`Program terminated with exit(${m})`,this.status=m}}var ji=f=>{for(;f.length>0;)f.shift()(r)};function Hs(f,m="i8"){switch(m.endsWith("*")&&(m="*"),m){case"i1":return $[f];case"i8":return $[f];case"i16":return K[f>>1];case"i32":return j[f>>2];case"i64":Tn("to do getValue(i64) use WASM_BIGINT");case"float":return Ee[f>>2];case"double":return xe[f>>3];case"*":return te[f>>2];default:Tn(`invalid type for getValue: ${m}`)}}r.noExitRuntime;function qr(f,m,_="i8"){switch(_.endsWith("*")&&(_="*"),_){case"i1":$[f]=m;break;case"i8":$[f]=m;break;case"i16":K[f>>1]=m;break;case"i32":j[f>>2]=m;break;case"i64":Tn("to do setValue(i64) use WASM_BIGINT");case"float":Ee[f>>2]=m;break;case"double":xe[f>>3]=m;break;case"*":te[f>>2]=m;break;default:Tn(`invalid type for setValue: ${_}`)}}var Do=f=>fg(f),cu=()=>Kc(),lu=typeof TextDecoder<"u"?new TextDecoder:void 0,Zr=(f,m=0,_=NaN)=>{for(var w=m+_,N=m;f[N]&&!(N>=w);)++N;if(N-m>16&&f.buffer&&lu)return lu.decode(f.subarray(m,N));for(var P="";m<N;){var G=f[m++];if(!(G&128)){P+=String.fromCharCode(G);continue}var W=f[m++]&63;if((G&224)==192){P+=String.fromCharCode((G&31)<<6|W);continue}var he=f[m++]&63;if((G&240)==224?G=(G&15)<<12|W<<6|he:G=(G&7)<<18|W<<12|he<<6|f[m++]&63,G<65536)P+=String.fromCharCode(G);else{var qe=G-65536;P+=String.fromCharCode(55296|qe>>10,56320|qe&1023)}}return P},Aa=(f,m)=>f?Zr(H,f,m):"",Hi=(f,m,_,w)=>Tn(`Assertion failed: ${Aa(f)}, at: `+[m?Aa(m):"unknown filename",_,w?Aa(w):"unknown function"]),vt={isAbs:f=>f.charAt(0)==="/",splitPath:f=>{var m=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return m.exec(f).slice(1)},normalizeArray:(f,m)=>{for(var _=0,w=f.length-1;w>=0;w--){var N=f[w];N==="."?f.splice(w,1):N===".."?(f.splice(w,1),_++):_&&(f.splice(w,1),_--)}if(m)for(;_;_--)f.unshift("..");return f},normalize:f=>{var m=vt.isAbs(f),_=f.substr(-1)==="/";return f=vt.normalizeArray(f.split("/").filter(w=>!!w),!m).join("/"),!f&&!m&&(f="."),f&&_&&(f+="/"),(m?"/":"")+f},dirname:f=>{var m=vt.splitPath(f),_=m[0],w=m[1];return!_&&!w?".":(w&&(w=w.substr(0,w.length-1)),_+w)},basename:f=>{if(f==="/")return"/";f=vt.normalize(f),f=f.replace(/\/$/,"");var m=f.lastIndexOf("/");return m===-1?f:f.substr(m+1)},join:(...f)=>vt.normalize(f.join("/")),join2:(f,m)=>vt.normalize(f+"/"+m)},Wm=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return f=>crypto.getRandomValues(f);Tn("initRandomDevice")},Bs=f=>(Bs=Wm())(f),pn={resolve:(...f)=>{for(var m="",_=!1,w=f.length-1;w>=-1&&!_;w--){var N=w>=0?f[w]:C.cwd();if(typeof N!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!N)return"";m=N+"/"+m,_=vt.isAbs(N)}return m=vt.normalizeArray(m.split("/").filter(P=>!!P),!_).join("/"),(_?"/":"")+m||"."},relative:(f,m)=>{f=pn.resolve(f).substr(1),m=pn.resolve(m).substr(1);function _(qe){for(var Qe=0;Qe<qe.length&&qe[Qe]==="";Qe++);for(var pt=qe.length-1;pt>=0&&qe[pt]==="";pt--);return Qe>pt?[]:qe.slice(Qe,pt-Qe+1)}for(var w=_(f.split("/")),N=_(m.split("/")),P=Math.min(w.length,N.length),G=P,W=0;W<P;W++)if(w[W]!==N[W]){G=W;break}for(var he=[],W=G;W<w.length;W++)he.push("..");return he=he.concat(N.slice(G)),he.join("/")}},Nc=[],Oa=f=>{for(var m=0,_=0;_<f.length;++_){var w=f.charCodeAt(_);w<=127?m++:w<=2047?m+=2:w>=55296&&w<=57343?(m+=4,++_):m+=3}return m},uu=(f,m,_,w)=>{if(!(w>0))return 0;for(var N=_,P=_+w-1,G=0;G<f.length;++G){var W=f.charCodeAt(G);if(W>=55296&&W<=57343){var he=f.charCodeAt(++G);W=65536+((W&1023)<<10)|he&1023}if(W<=127){if(_>=P)break;m[_++]=W}else if(W<=2047){if(_+1>=P)break;m[_++]=192|W>>6,m[_++]=128|W&63}else if(W<=65535){if(_+2>=P)break;m[_++]=224|W>>12,m[_++]=128|W>>6&63,m[_++]=128|W&63}else{if(_+3>=P)break;m[_++]=240|W>>18,m[_++]=128|W>>12&63,m[_++]=128|W>>6&63,m[_++]=128|W&63}}return m[_]=0,_-N};function di(f,m,_){var w=_>0?_:Oa(f)+1,N=new Array(w),P=uu(f,N,0,N.length);return m&&(N.length=P),N}var Mc=()=>{if(!Nc.length){var f=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(f=window.prompt("Input: "),f!==null&&(f+=`
`)),!f)return null;Nc=di(f,!0)}return Nc.shift()},Vr={ttys:[],init(){},shutdown(){},register(f,m){Vr.ttys[f]={input:[],output:[],ops:m},C.registerDevice(f,Vr.stream_ops)},stream_ops:{open(f){var m=Vr.ttys[f.node.rdev];if(!m)throw new C.ErrnoError(43);f.tty=m,f.seekable=!1},close(f){f.tty.ops.fsync(f.tty)},fsync(f){f.tty.ops.fsync(f.tty)},read(f,m,_,w,N){if(!f.tty||!f.tty.ops.get_char)throw new C.ErrnoError(60);for(var P=0,G=0;G<w;G++){var W;try{W=f.tty.ops.get_char(f.tty)}catch{throw new C.ErrnoError(29)}if(W===void 0&&P===0)throw new C.ErrnoError(6);if(W==null)break;P++,m[_+G]=W}return P&&(f.node.timestamp=Date.now()),P},write(f,m,_,w,N){if(!f.tty||!f.tty.ops.put_char)throw new C.ErrnoError(60);try{for(var P=0;P<w;P++)f.tty.ops.put_char(f.tty,m[_+P])}catch{throw new C.ErrnoError(29)}return w&&(f.node.timestamp=Date.now()),P}},default_tty_ops:{get_char(f){return Mc()},put_char(f,m){m===null||m===10?(A(Zr(f.output)),f.output=[]):m!=0&&f.output.push(m)},fsync(f){f.output&&f.output.length>0&&(A(Zr(f.output)),f.output=[])},ioctl_tcgets(f){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(f,m,_){return 0},ioctl_tiocgwinsz(f){return[24,80]}},default_tty1_ops:{put_char(f,m){m===null||m===10?(E(Zr(f.output)),f.output=[]):m!=0&&f.output.push(m)},fsync(f){f.output&&f.output.length>0&&(E(Zr(f.output)),f.output=[])}}},hi=(f,m)=>{H.fill(0,f,f+m)},ra=(f,m)=>Math.ceil(f/m)*m,fd=f=>{f=ra(f,65536);var m=db(65536,f);return m&&hi(m,f),m},lt={ops_table:null,mount(f){return lt.createNode(null,"/",16895,0)},createNode(f,m,_,w){if(C.isBlkdev(_)||C.isFIFO(_))throw new C.ErrnoError(63);lt.ops_table||(lt.ops_table={dir:{node:{getattr:lt.node_ops.getattr,setattr:lt.node_ops.setattr,lookup:lt.node_ops.lookup,mknod:lt.node_ops.mknod,rename:lt.node_ops.rename,unlink:lt.node_ops.unlink,rmdir:lt.node_ops.rmdir,readdir:lt.node_ops.readdir,symlink:lt.node_ops.symlink},stream:{llseek:lt.stream_ops.llseek}},file:{node:{getattr:lt.node_ops.getattr,setattr:lt.node_ops.setattr},stream:{llseek:lt.stream_ops.llseek,read:lt.stream_ops.read,write:lt.stream_ops.write,allocate:lt.stream_ops.allocate,mmap:lt.stream_ops.mmap,msync:lt.stream_ops.msync}},link:{node:{getattr:lt.node_ops.getattr,setattr:lt.node_ops.setattr,readlink:lt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:lt.node_ops.getattr,setattr:lt.node_ops.setattr},stream:C.chrdev_stream_ops}});var N=C.createNode(f,m,_,w);return C.isDir(N.mode)?(N.node_ops=lt.ops_table.dir.node,N.stream_ops=lt.ops_table.dir.stream,N.contents={}):C.isFile(N.mode)?(N.node_ops=lt.ops_table.file.node,N.stream_ops=lt.ops_table.file.stream,N.usedBytes=0,N.contents=null):C.isLink(N.mode)?(N.node_ops=lt.ops_table.link.node,N.stream_ops=lt.ops_table.link.stream):C.isChrdev(N.mode)&&(N.node_ops=lt.ops_table.chrdev.node,N.stream_ops=lt.ops_table.chrdev.stream),N.timestamp=Date.now(),f&&(f.contents[m]=N,f.timestamp=N.timestamp),N},getFileDataAsTypedArray(f){return f.contents?f.contents.subarray?f.contents.subarray(0,f.usedBytes):new Uint8Array(f.contents):new Uint8Array(0)},expandFileStorage(f,m){var _=f.contents?f.contents.length:0;if(!(_>=m)){var w=1024*1024;m=Math.max(m,_*(_<w?2:1.125)>>>0),_!=0&&(m=Math.max(m,256));var N=f.contents;f.contents=new Uint8Array(m),f.usedBytes>0&&f.contents.set(N.subarray(0,f.usedBytes),0)}},resizeFileStorage(f,m){if(f.usedBytes!=m)if(m==0)f.contents=null,f.usedBytes=0;else{var _=f.contents;f.contents=new Uint8Array(m),_&&f.contents.set(_.subarray(0,Math.min(m,f.usedBytes))),f.usedBytes=m}},node_ops:{getattr(f){var m={};return m.dev=C.isChrdev(f.mode)?f.id:1,m.ino=f.id,m.mode=f.mode,m.nlink=1,m.uid=0,m.gid=0,m.rdev=f.rdev,C.isDir(f.mode)?m.size=4096:C.isFile(f.mode)?m.size=f.usedBytes:C.isLink(f.mode)?m.size=f.link.length:m.size=0,m.atime=new Date(f.timestamp),m.mtime=new Date(f.timestamp),m.ctime=new Date(f.timestamp),m.blksize=4096,m.blocks=Math.ceil(m.size/m.blksize),m},setattr(f,m){m.mode!==void 0&&(f.mode=m.mode),m.timestamp!==void 0&&(f.timestamp=m.timestamp),m.size!==void 0&&lt.resizeFileStorage(f,m.size)},lookup(f,m){throw lt.doesNotExistError},mknod(f,m,_,w){return lt.createNode(f,m,_,w)},rename(f,m,_){if(C.isDir(f.mode)){var w;try{w=C.lookupNode(m,_)}catch{}if(w)for(var N in w.contents)throw new C.ErrnoError(55)}delete f.parent.contents[f.name],f.parent.timestamp=Date.now(),f.name=_,m.contents[_]=f,m.timestamp=f.parent.timestamp},unlink(f,m){delete f.contents[m],f.timestamp=Date.now()},rmdir(f,m){var _=C.lookupNode(f,m);for(var w in _.contents)throw new C.ErrnoError(55);delete f.contents[m],f.timestamp=Date.now()},readdir(f){var m=[".",".."];for(var _ of Object.keys(f.contents))m.push(_);return m},symlink(f,m,_){var w=lt.createNode(f,m,41471,0);return w.link=_,w},readlink(f){if(!C.isLink(f.mode))throw new C.ErrnoError(28);return f.link}},stream_ops:{read(f,m,_,w,N){var P=f.node.contents;if(N>=f.node.usedBytes)return 0;var G=Math.min(f.node.usedBytes-N,w);if(G>8&&P.subarray)m.set(P.subarray(N,N+G),_);else for(var W=0;W<G;W++)m[_+W]=P[N+W];return G},write(f,m,_,w,N,P){if(m.buffer===$.buffer&&(P=!1),!w)return 0;var G=f.node;if(G.timestamp=Date.now(),m.subarray&&(!G.contents||G.contents.subarray)){if(P)return G.contents=m.subarray(_,_+w),G.usedBytes=w,w;if(G.usedBytes===0&&N===0)return G.contents=m.slice(_,_+w),G.usedBytes=w,w;if(N+w<=G.usedBytes)return G.contents.set(m.subarray(_,_+w),N),w}if(lt.expandFileStorage(G,N+w),G.contents.subarray&&m.subarray)G.contents.set(m.subarray(_,_+w),N);else for(var W=0;W<w;W++)G.contents[N+W]=m[_+W];return G.usedBytes=Math.max(G.usedBytes,N+w),w},llseek(f,m,_){var w=m;if(_===1?w+=f.position:_===2&&C.isFile(f.node.mode)&&(w+=f.node.usedBytes),w<0)throw new C.ErrnoError(28);return w},allocate(f,m,_){lt.expandFileStorage(f.node,m+_),f.node.usedBytes=Math.max(f.node.usedBytes,m+_)},mmap(f,m,_,w,N){if(!C.isFile(f.node.mode))throw new C.ErrnoError(43);var P,G,W=f.node.contents;if(!(N&2)&&W&&W.buffer===$.buffer)G=!1,P=W.byteOffset;else{if(G=!0,P=fd(m),!P)throw new C.ErrnoError(48);W&&((_>0||_+m<W.length)&&(W.subarray?W=W.subarray(_,_+m):W=Array.prototype.slice.call(W,_,_+m)),$.set(W,P))}return{ptr:P,allocated:G}},msync(f,m,_,w,N){return lt.stream_ops.write(f,m,0,w,_,!1),0}}},Y=(f,m,_,w)=>{var N=`al ${f}`;x(f).then(P=>{m(new Uint8Array(P)),N&&St()},P=>{if(_)_();else throw`Loading data file "${f}" failed.`}),N&&En()},Z=(f,m,_,w,N,P)=>{C.createDataFile(f,m,_,w,N,P)},se=r.preloadPlugins||[],Se=(f,m,_,w)=>{typeof Browser<"u"&&Browser.init();var N=!1;return se.forEach(P=>{N||P.canHandle(m)&&(P.handle(f,m,_,w),N=!0)}),N},Oe=(f,m,_,w,N,P,G,W,he,qe)=>{var Qe=m?pn.resolve(vt.join2(f,m)):f;function pt(Pt){function Ye(nt){qe==null||qe(),W||Z(f,m,nt,w,N,he),P==null||P(),St()}Se(Pt,Qe,Ye,()=>{G==null||G(),St()})||Ye(Pt)}En(),typeof _=="string"?Y(_,pt,G):pt(_)},Ve=f=>{var m={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},_=m[f];if(typeof _>"u")throw new Error(`Unknown file open mode: ${f}`);return _},st=(f,m)=>{var _=0;return f&&(_|=365),m&&(_|=146),_},C={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(f){b(this,"name","ErrnoError");this.errno=f}},filesystems:null,syncFSRequests:0,readFiles:{},FSStream:class{constructor(){b(this,"shared",{})}get object(){return this.node}set object(f){this.node=f}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(f){this.shared.flags=f}get position(){return this.shared.position}set position(f){this.shared.position=f}},FSNode:class{constructor(f,m,_,w){b(this,"node_ops",{});b(this,"stream_ops",{});b(this,"readMode",365);b(this,"writeMode",146);b(this,"mounted",null);f||(f=this),this.parent=f,this.mount=f.mount,this.id=C.nextInode++,this.name=m,this.mode=_,this.rdev=w}get read(){return(this.mode&this.readMode)===this.readMode}set read(f){f?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(f){f?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return C.isDir(this.mode)}get isDevice(){return C.isChrdev(this.mode)}},lookupPath(f,m={}){if(f=pn.resolve(f),!f)return{path:"",node:null};var _={follow_mount:!0,recurse_count:0};if(m=Object.assign(_,m),m.recurse_count>8)throw new C.ErrnoError(32);for(var w=f.split("/").filter(pt=>!!pt),N=C.root,P="/",G=0;G<w.length;G++){var W=G===w.length-1;if(W&&m.parent)break;if(N=C.lookupNode(N,w[G]),P=vt.join2(P,w[G]),C.isMountpoint(N)&&(!W||W&&m.follow_mount)&&(N=N.mounted.root),!W||m.follow)for(var he=0;C.isLink(N.mode);){var qe=C.readlink(P);P=pn.resolve(vt.dirname(P),qe);var Qe=C.lookupPath(P,{recurse_count:m.recurse_count+1});if(N=Qe.node,he++>40)throw new C.ErrnoError(32)}}return{path:P,node:N}},getPath(f){for(var m;;){if(C.isRoot(f)){var _=f.mount.mountpoint;return m?_[_.length-1]!=="/"?`${_}/${m}`:_+m:_}m=m?`${f.name}/${m}`:f.name,f=f.parent}},hashName(f,m){for(var _=0,w=0;w<m.length;w++)_=(_<<5)-_+m.charCodeAt(w)|0;return(f+_>>>0)%C.nameTable.length},hashAddNode(f){var m=C.hashName(f.parent.id,f.name);f.name_next=C.nameTable[m],C.nameTable[m]=f},hashRemoveNode(f){var m=C.hashName(f.parent.id,f.name);if(C.nameTable[m]===f)C.nameTable[m]=f.name_next;else for(var _=C.nameTable[m];_;){if(_.name_next===f){_.name_next=f.name_next;break}_=_.name_next}},lookupNode(f,m){var _=C.mayLookup(f);if(_)throw new C.ErrnoError(_);for(var w=C.hashName(f.id,m),N=C.nameTable[w];N;N=N.name_next){var P=N.name;if(N.parent.id===f.id&&P===m)return N}return C.lookup(f,m)},createNode(f,m,_,w){var N=new C.FSNode(f,m,_,w);return C.hashAddNode(N),N},destroyNode(f){C.hashRemoveNode(f)},isRoot(f){return f===f.parent},isMountpoint(f){return!!f.mounted},isFile(f){return(f&61440)===32768},isDir(f){return(f&61440)===16384},isLink(f){return(f&61440)===40960},isChrdev(f){return(f&61440)===8192},isBlkdev(f){return(f&61440)===24576},isFIFO(f){return(f&61440)===4096},isSocket(f){return(f&49152)===49152},flagsToPermissionString(f){var m=["r","w","rw"][f&3];return f&512&&(m+="w"),m},nodePermissions(f,m){return C.ignorePermissions?0:m.includes("r")&&!(f.mode&292)||m.includes("w")&&!(f.mode&146)||m.includes("x")&&!(f.mode&73)?2:0},mayLookup(f){if(!C.isDir(f.mode))return 54;var m=C.nodePermissions(f,"x");return m||(f.node_ops.lookup?0:2)},mayCreate(f,m){var _;try{return _=C.lookupNode(f,m),20}catch{}return C.nodePermissions(f,"wx")},mayDelete(f,m,_){var w;try{w=C.lookupNode(f,m)}catch(P){return P.errno}var N=C.nodePermissions(f,"wx");if(N)return N;if(_){if(!C.isDir(w.mode))return 54;if(C.isRoot(w)||C.getPath(w)===C.cwd())return 10}else if(C.isDir(w.mode))return 31;return 0},mayOpen(f,m){return f?C.isLink(f.mode)?32:C.isDir(f.mode)&&(C.flagsToPermissionString(m)!=="r"||m&512)?31:C.nodePermissions(f,C.flagsToPermissionString(m)):44},MAX_OPEN_FDS:4096,nextfd(){for(var f=0;f<=C.MAX_OPEN_FDS;f++)if(!C.streams[f])return f;throw new C.ErrnoError(33)},getStreamChecked(f){var m=C.getStream(f);if(!m)throw new C.ErrnoError(8);return m},getStream:f=>C.streams[f],createStream(f,m=-1){return f=Object.assign(new C.FSStream,f),m==-1&&(m=C.nextfd()),f.fd=m,C.streams[m]=f,f},closeStream(f){C.streams[f]=null},dupStream(f,m=-1){var w,N;var _=C.createStream(f,m);return(N=(w=_.stream_ops)==null?void 0:w.dup)==null||N.call(w,_),_},chrdev_stream_ops:{open(f){var _,w;var m=C.getDevice(f.node.rdev);f.stream_ops=m.stream_ops,(w=(_=f.stream_ops).open)==null||w.call(_,f)},llseek(){throw new C.ErrnoError(70)}},major:f=>f>>8,minor:f=>f&255,makedev:(f,m)=>f<<8|m,registerDevice(f,m){C.devices[f]={stream_ops:m}},getDevice:f=>C.devices[f],getMounts(f){for(var m=[],_=[f];_.length;){var w=_.pop();m.push(w),_.push(...w.mounts)}return m},syncfs(f,m){typeof f=="function"&&(m=f,f=!1),C.syncFSRequests++,C.syncFSRequests>1&&E(`warning: ${C.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var _=C.getMounts(C.root.mount),w=0;function N(G){return C.syncFSRequests--,m(G)}function P(G){if(G)return P.errored?void 0:(P.errored=!0,N(G));++w>=_.length&&N(null)}_.forEach(G=>{if(!G.type.syncfs)return P(null);G.type.syncfs(G,f,P)})},mount(f,m,_){var w=_==="/",N=!_,P;if(w&&C.root)throw new C.ErrnoError(10);if(!w&&!N){var G=C.lookupPath(_,{follow_mount:!1});if(_=G.path,P=G.node,C.isMountpoint(P))throw new C.ErrnoError(10);if(!C.isDir(P.mode))throw new C.ErrnoError(54)}var W={type:f,opts:m,mountpoint:_,mounts:[]},he=f.mount(W);return he.mount=W,W.root=he,w?C.root=he:P&&(P.mounted=W,P.mount&&P.mount.mounts.push(W)),he},unmount(f){var m=C.lookupPath(f,{follow_mount:!1});if(!C.isMountpoint(m.node))throw new C.ErrnoError(28);var _=m.node,w=_.mounted,N=C.getMounts(w);Object.keys(C.nameTable).forEach(G=>{for(var W=C.nameTable[G];W;){var he=W.name_next;N.includes(W.mount)&&C.destroyNode(W),W=he}}),_.mounted=null;var P=_.mount.mounts.indexOf(w);_.mount.mounts.splice(P,1)},lookup(f,m){return f.node_ops.lookup(f,m)},mknod(f,m,_){var w=C.lookupPath(f,{parent:!0}),N=w.node,P=vt.basename(f);if(!P||P==="."||P==="..")throw new C.ErrnoError(28);var G=C.mayCreate(N,P);if(G)throw new C.ErrnoError(G);if(!N.node_ops.mknod)throw new C.ErrnoError(63);return N.node_ops.mknod(N,P,m,_)},statfs(f){var m={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:C.nextInode,ffree:C.nextInode-1,fsid:42,flags:2,namelen:255},_=C.lookupPath(f,{follow:!0}).node;return _!=null&&_.node_ops.statfs&&Object.assign(m,_.node_ops.statfs(_.mount.opts.root)),m},create(f,m=438){return m&=4095,m|=32768,C.mknod(f,m,0)},mkdir(f,m=511){return m&=1023,m|=16384,C.mknod(f,m,0)},mkdirTree(f,m){for(var _=f.split("/"),w="",N=0;N<_.length;++N)if(_[N]){w+="/"+_[N];try{C.mkdir(w,m)}catch(P){if(P.errno!=20)throw P}}},mkdev(f,m,_){return typeof _>"u"&&(_=m,m=438),m|=8192,C.mknod(f,m,_)},symlink(f,m){if(!pn.resolve(f))throw new C.ErrnoError(44);var _=C.lookupPath(m,{parent:!0}),w=_.node;if(!w)throw new C.ErrnoError(44);var N=vt.basename(m),P=C.mayCreate(w,N);if(P)throw new C.ErrnoError(P);if(!w.node_ops.symlink)throw new C.ErrnoError(63);return w.node_ops.symlink(w,N,f)},rename(f,m){var _=vt.dirname(f),w=vt.dirname(m),N=vt.basename(f),P=vt.basename(m),G,W,he;if(G=C.lookupPath(f,{parent:!0}),W=G.node,G=C.lookupPath(m,{parent:!0}),he=G.node,!W||!he)throw new C.ErrnoError(44);if(W.mount!==he.mount)throw new C.ErrnoError(75);var qe=C.lookupNode(W,N),Qe=pn.relative(f,w);if(Qe.charAt(0)!==".")throw new C.ErrnoError(28);if(Qe=pn.relative(m,_),Qe.charAt(0)!==".")throw new C.ErrnoError(55);var pt;try{pt=C.lookupNode(he,P)}catch{}if(qe!==pt){var Pt=C.isDir(qe.mode),Ye=C.mayDelete(W,N,Pt);if(Ye)throw new C.ErrnoError(Ye);if(Ye=pt?C.mayDelete(he,P,Pt):C.mayCreate(he,P),Ye)throw new C.ErrnoError(Ye);if(!W.node_ops.rename)throw new C.ErrnoError(63);if(C.isMountpoint(qe)||pt&&C.isMountpoint(pt))throw new C.ErrnoError(10);if(he!==W&&(Ye=C.nodePermissions(W,"w"),Ye))throw new C.ErrnoError(Ye);C.hashRemoveNode(qe);try{W.node_ops.rename(qe,he,P),qe.parent=he}catch(nt){throw nt}finally{C.hashAddNode(qe)}}},rmdir(f){var m=C.lookupPath(f,{parent:!0}),_=m.node,w=vt.basename(f),N=C.lookupNode(_,w),P=C.mayDelete(_,w,!0);if(P)throw new C.ErrnoError(P);if(!_.node_ops.rmdir)throw new C.ErrnoError(63);if(C.isMountpoint(N))throw new C.ErrnoError(10);_.node_ops.rmdir(_,w),C.destroyNode(N)},readdir(f){var m=C.lookupPath(f,{follow:!0}),_=m.node;if(!_.node_ops.readdir)throw new C.ErrnoError(54);return _.node_ops.readdir(_)},unlink(f){var m=C.lookupPath(f,{parent:!0}),_=m.node;if(!_)throw new C.ErrnoError(44);var w=vt.basename(f),N=C.lookupNode(_,w),P=C.mayDelete(_,w,!1);if(P)throw new C.ErrnoError(P);if(!_.node_ops.unlink)throw new C.ErrnoError(63);if(C.isMountpoint(N))throw new C.ErrnoError(10);_.node_ops.unlink(_,w),C.destroyNode(N)},readlink(f){var m=C.lookupPath(f),_=m.node;if(!_)throw new C.ErrnoError(44);if(!_.node_ops.readlink)throw new C.ErrnoError(28);return _.node_ops.readlink(_)},stat(f,m){var _=C.lookupPath(f,{follow:!m}),w=_.node;if(!w)throw new C.ErrnoError(44);if(!w.node_ops.getattr)throw new C.ErrnoError(63);return w.node_ops.getattr(w)},lstat(f){return C.stat(f,!0)},chmod(f,m,_){var w;if(typeof f=="string"){var N=C.lookupPath(f,{follow:!_});w=N.node}else w=f;if(!w.node_ops.setattr)throw new C.ErrnoError(63);w.node_ops.setattr(w,{mode:m&4095|w.mode&-4096,timestamp:Date.now()})},lchmod(f,m){C.chmod(f,m,!0)},fchmod(f,m){var _=C.getStreamChecked(f);C.chmod(_.node,m)},chown(f,m,_,w){var N;if(typeof f=="string"){var P=C.lookupPath(f,{follow:!w});N=P.node}else N=f;if(!N.node_ops.setattr)throw new C.ErrnoError(63);N.node_ops.setattr(N,{timestamp:Date.now()})},lchown(f,m,_){C.chown(f,m,_,!0)},fchown(f,m,_){var w=C.getStreamChecked(f);C.chown(w.node,m,_)},truncate(f,m){if(m<0)throw new C.ErrnoError(28);var _;if(typeof f=="string"){var w=C.lookupPath(f,{follow:!0});_=w.node}else _=f;if(!_.node_ops.setattr)throw new C.ErrnoError(63);if(C.isDir(_.mode))throw new C.ErrnoError(31);if(!C.isFile(_.mode))throw new C.ErrnoError(28);var N=C.nodePermissions(_,"w");if(N)throw new C.ErrnoError(N);_.node_ops.setattr(_,{size:m,timestamp:Date.now()})},ftruncate(f,m){var _=C.getStreamChecked(f);if((_.flags&2097155)===0)throw new C.ErrnoError(28);C.truncate(_.node,m)},utime(f,m,_){var w=C.lookupPath(f,{follow:!0}),N=w.node;N.node_ops.setattr(N,{timestamp:Math.max(m,_)})},open(f,m,_=438){if(f==="")throw new C.ErrnoError(44);m=typeof m=="string"?Ve(m):m,m&64?_=_&4095|32768:_=0;var w;if(typeof f=="object")w=f;else{f=vt.normalize(f);try{var N=C.lookupPath(f,{follow:!(m&131072)});w=N.node}catch{}}var P=!1;if(m&64)if(w){if(m&128)throw new C.ErrnoError(20)}else w=C.mknod(f,_,0),P=!0;if(!w)throw new C.ErrnoError(44);if(C.isChrdev(w.mode)&&(m&=-513),m&65536&&!C.isDir(w.mode))throw new C.ErrnoError(54);if(!P){var G=C.mayOpen(w,m);if(G)throw new C.ErrnoError(G)}m&512&&!P&&C.truncate(w,0),m&=-131713;var W=C.createStream({node:w,path:C.getPath(w),flags:m,seekable:!0,position:0,stream_ops:w.stream_ops,ungotten:[],error:!1});return W.stream_ops.open&&W.stream_ops.open(W),r.logReadFiles&&!(m&1)&&(f in C.readFiles||(C.readFiles[f]=1)),W},close(f){if(C.isClosed(f))throw new C.ErrnoError(8);f.getdents&&(f.getdents=null);try{f.stream_ops.close&&f.stream_ops.close(f)}catch(m){throw m}finally{C.closeStream(f.fd)}f.fd=null},isClosed(f){return f.fd===null},llseek(f,m,_){if(C.isClosed(f))throw new C.ErrnoError(8);if(!f.seekable||!f.stream_ops.llseek)throw new C.ErrnoError(70);if(_!=0&&_!=1&&_!=2)throw new C.ErrnoError(28);return f.position=f.stream_ops.llseek(f,m,_),f.ungotten=[],f.position},read(f,m,_,w,N){if(w<0||N<0)throw new C.ErrnoError(28);if(C.isClosed(f))throw new C.ErrnoError(8);if((f.flags&2097155)===1)throw new C.ErrnoError(8);if(C.isDir(f.node.mode))throw new C.ErrnoError(31);if(!f.stream_ops.read)throw new C.ErrnoError(28);var P=typeof N<"u";if(!P)N=f.position;else if(!f.seekable)throw new C.ErrnoError(70);var G=f.stream_ops.read(f,m,_,w,N);return P||(f.position+=G),G},write(f,m,_,w,N,P){if(w<0||N<0)throw new C.ErrnoError(28);if(C.isClosed(f))throw new C.ErrnoError(8);if((f.flags&2097155)===0)throw new C.ErrnoError(8);if(C.isDir(f.node.mode))throw new C.ErrnoError(31);if(!f.stream_ops.write)throw new C.ErrnoError(28);f.seekable&&f.flags&1024&&C.llseek(f,0,2);var G=typeof N<"u";if(!G)N=f.position;else if(!f.seekable)throw new C.ErrnoError(70);var W=f.stream_ops.write(f,m,_,w,N,P);return G||(f.position+=W),W},allocate(f,m,_){if(C.isClosed(f))throw new C.ErrnoError(8);if(m<0||_<=0)throw new C.ErrnoError(28);if((f.flags&2097155)===0)throw new C.ErrnoError(8);if(!C.isFile(f.node.mode)&&!C.isDir(f.node.mode))throw new C.ErrnoError(43);if(!f.stream_ops.allocate)throw new C.ErrnoError(138);f.stream_ops.allocate(f,m,_)},mmap(f,m,_,w,N){if((w&2)!==0&&(N&2)===0&&(f.flags&2097155)!==2)throw new C.ErrnoError(2);if((f.flags&2097155)===1)throw new C.ErrnoError(2);if(!f.stream_ops.mmap)throw new C.ErrnoError(43);if(!m)throw new C.ErrnoError(28);return f.stream_ops.mmap(f,m,_,w,N)},msync(f,m,_,w,N){return f.stream_ops.msync?f.stream_ops.msync(f,m,_,w,N):0},ioctl(f,m,_){if(!f.stream_ops.ioctl)throw new C.ErrnoError(59);return f.stream_ops.ioctl(f,m,_)},readFile(f,m={}){if(m.flags=m.flags||0,m.encoding=m.encoding||"binary",m.encoding!=="utf8"&&m.encoding!=="binary")throw new Error(`Invalid encoding type "${m.encoding}"`);var _,w=C.open(f,m.flags),N=C.stat(f),P=N.size,G=new Uint8Array(P);return C.read(w,G,0,P,0),m.encoding==="utf8"?_=Zr(G):m.encoding==="binary"&&(_=G),C.close(w),_},writeFile(f,m,_={}){_.flags=_.flags||577;var w=C.open(f,_.flags,_.mode);if(typeof m=="string"){var N=new Uint8Array(Oa(m)+1),P=uu(m,N,0,N.length);C.write(w,N,0,P,void 0,_.canOwn)}else if(ArrayBuffer.isView(m))C.write(w,m,0,m.byteLength,void 0,_.canOwn);else throw new Error("Unsupported data type");C.close(w)},cwd:()=>C.currentPath,chdir(f){var m=C.lookupPath(f,{follow:!0});if(m.node===null)throw new C.ErrnoError(44);if(!C.isDir(m.node.mode))throw new C.ErrnoError(54);var _=C.nodePermissions(m.node,"x");if(_)throw new C.ErrnoError(_);C.currentPath=m.path},createDefaultDirectories(){C.mkdir("/tmp"),C.mkdir("/home"),C.mkdir("/home/web_user")},createDefaultDevices(){C.mkdir("/dev"),C.registerDevice(C.makedev(1,3),{read:()=>0,write:(w,N,P,G,W)=>G,llseek:()=>0}),C.mkdev("/dev/null",C.makedev(1,3)),Vr.register(C.makedev(5,0),Vr.default_tty_ops),Vr.register(C.makedev(6,0),Vr.default_tty1_ops),C.mkdev("/dev/tty",C.makedev(5,0)),C.mkdev("/dev/tty1",C.makedev(6,0));var f=new Uint8Array(1024),m=0,_=()=>(m===0&&(m=Bs(f).byteLength),f[--m]);C.createDevice("/dev","random",_),C.createDevice("/dev","urandom",_),C.mkdir("/dev/shm"),C.mkdir("/dev/shm/tmp")},createSpecialDirectories(){C.mkdir("/proc");var f=C.mkdir("/proc/self");C.mkdir("/proc/self/fd"),C.mount({mount(){var m=C.createNode(f,"fd",16895,73);return m.node_ops={lookup(_,w){var N=+w,P=C.getStreamChecked(N),G={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>P.path}};return G.parent=G,G}},m}},{},"/proc/self/fd")},createStandardStreams(f,m,_){f?C.createDevice("/dev","stdin",f):C.symlink("/dev/tty","/dev/stdin"),m?C.createDevice("/dev","stdout",null,m):C.symlink("/dev/tty","/dev/stdout"),_?C.createDevice("/dev","stderr",null,_):C.symlink("/dev/tty1","/dev/stderr"),C.open("/dev/stdin",0),C.open("/dev/stdout",1),C.open("/dev/stderr",1)},staticInit(){C.nameTable=new Array(4096),C.mount(lt,{},"/"),C.createDefaultDirectories(),C.createDefaultDevices(),C.createSpecialDirectories(),C.filesystems={MEMFS:lt}},init(f,m,_){C.initialized=!0,f??(f=r.stdin),m??(m=r.stdout),_??(_=r.stderr),C.createStandardStreams(f,m,_)},quit(){C.initialized=!1;for(var f=0;f<C.streams.length;f++){var m=C.streams[f];m&&C.close(m)}},findObject(f,m){var _=C.analyzePath(f,m);return _.exists?_.object:null},analyzePath(f,m){try{var _=C.lookupPath(f,{follow:!m});f=_.path}catch{}var w={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var _=C.lookupPath(f,{parent:!0});w.parentExists=!0,w.parentPath=_.path,w.parentObject=_.node,w.name=vt.basename(f),_=C.lookupPath(f,{follow:!m}),w.exists=!0,w.path=_.path,w.object=_.node,w.name=_.node.name,w.isRoot=_.path==="/"}catch(N){w.error=N.errno}return w},createPath(f,m,_,w){f=typeof f=="string"?f:C.getPath(f);for(var N=m.split("/").reverse();N.length;){var P=N.pop();if(P){var G=vt.join2(f,P);try{C.mkdir(G)}catch{}f=G}}return G},createFile(f,m,_,w,N){var P=vt.join2(typeof f=="string"?f:C.getPath(f),m),G=st(w,N);return C.create(P,G)},createDataFile(f,m,_,w,N,P){var G=m;f&&(f=typeof f=="string"?f:C.getPath(f),G=m?vt.join2(f,m):f);var W=st(w,N),he=C.create(G,W);if(_){if(typeof _=="string"){for(var qe=new Array(_.length),Qe=0,pt=_.length;Qe<pt;++Qe)qe[Qe]=_.charCodeAt(Qe);_=qe}C.chmod(he,W|146);var Pt=C.open(he,577);C.write(Pt,_,0,_.length,0,P),C.close(Pt),C.chmod(he,W)}},createDevice(f,m,_,w){var W;var N=vt.join2(typeof f=="string"?f:C.getPath(f),m),P=st(!!_,!!w);(W=C.createDevice).major??(W.major=64);var G=C.makedev(C.createDevice.major++,0);return C.registerDevice(G,{open(he){he.seekable=!1},close(he){var qe;(qe=w==null?void 0:w.buffer)!=null&&qe.length&&w(10)},read(he,qe,Qe,pt,Pt){for(var Ye=0,nt=0;nt<pt;nt++){var nn;try{nn=_()}catch{throw new C.ErrnoError(29)}if(nn===void 0&&Ye===0)throw new C.ErrnoError(6);if(nn==null)break;Ye++,qe[Qe+nt]=nn}return Ye&&(he.node.timestamp=Date.now()),Ye},write(he,qe,Qe,pt,Pt){for(var Ye=0;Ye<pt;Ye++)try{w(qe[Qe+Ye])}catch{throw new C.ErrnoError(29)}return pt&&(he.node.timestamp=Date.now()),Ye}}),C.mkdev(N,P,G)},forceLoadFile(f){if(f.isDevice||f.isFolder||f.link||f.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{f.contents=z(f.url),f.usedBytes=f.contents.length}catch{throw new C.ErrnoError(29)}},createLazyFile(f,m,_,w,N){class P{constructor(){b(this,"lengthKnown",!1);b(this,"chunks",[])}get(Ye){if(!(Ye>this.length-1||Ye<0)){var nt=Ye%this.chunkSize,nn=Ye/this.chunkSize|0;return this.getter(nn)[nt]}}setDataGetter(Ye){this.getter=Ye}cacheLength(){var Ye=new XMLHttpRequest;if(Ye.open("HEAD",_,!1),Ye.send(null),!(Ye.status>=200&&Ye.status<300||Ye.status===304))throw new Error("Couldn't load "+_+". Status: "+Ye.status);var nt=Number(Ye.getResponseHeader("Content-length")),nn,Gr=(nn=Ye.getResponseHeader("Accept-Ranges"))&&nn==="bytes",Rs=(nn=Ye.getResponseHeader("Content-Encoding"))&&nn==="gzip",oa=1024*1024;Gr||(oa=nt);var Qr=(ms,Ki)=>{if(ms>Ki)throw new Error("invalid range ("+ms+", "+Ki+") or no bytes requested!");if(Ki>nt-1)throw new Error("only "+nt+" bytes available! programmer error!");var Tr=new XMLHttpRequest;if(Tr.open("GET",_,!1),nt!==oa&&Tr.setRequestHeader("Range","bytes="+ms+"-"+Ki),Tr.responseType="arraybuffer",Tr.overrideMimeType&&Tr.overrideMimeType("text/plain; charset=x-user-defined"),Tr.send(null),!(Tr.status>=200&&Tr.status<300||Tr.status===304))throw new Error("Couldn't load "+_+". Status: "+Tr.status);return Tr.response!==void 0?new Uint8Array(Tr.response||[]):di(Tr.responseText||"",!0)},Mo=this;Mo.setDataGetter(ms=>{var Ki=ms*oa,Tr=(ms+1)*oa-1;if(Tr=Math.min(Tr,nt-1),typeof Mo.chunks[ms]>"u"&&(Mo.chunks[ms]=Qr(Ki,Tr)),typeof Mo.chunks[ms]>"u")throw new Error("doXHR failed!");return Mo.chunks[ms]}),(Rs||!nt)&&(oa=nt=1,nt=this.getter(0).length,oa=nt,A("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=nt,this._chunkSize=oa,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!h)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var G=new P,W={isDevice:!1,contents:G}}else var W={isDevice:!1,url:_};var he=C.createFile(f,m,W,w,N);W.contents?he.contents=W.contents:W.url&&(he.contents=null,he.url=W.url),Object.defineProperties(he,{usedBytes:{get:function(){return this.contents.length}}});var qe={},Qe=Object.keys(he.stream_ops);Qe.forEach(Pt=>{var Ye=he.stream_ops[Pt];qe[Pt]=(...nt)=>(C.forceLoadFile(he),Ye(...nt))});function pt(Pt,Ye,nt,nn,Gr){var Rs=Pt.node.contents;if(Gr>=Rs.length)return 0;var oa=Math.min(Rs.length-Gr,nn);if(Rs.slice)for(var Qr=0;Qr<oa;Qr++)Ye[nt+Qr]=Rs[Gr+Qr];else for(var Qr=0;Qr<oa;Qr++)Ye[nt+Qr]=Rs.get(Gr+Qr);return oa}return qe.read=(Pt,Ye,nt,nn,Gr)=>(C.forceLoadFile(he),pt(Pt,Ye,nt,nn,Gr)),qe.mmap=(Pt,Ye,nt,nn,Gr)=>{C.forceLoadFile(he);var Rs=fd(Ye);if(!Rs)throw new C.ErrnoError(48);return pt(Pt,$,Rs,Ye,nt),{ptr:Rs,allocated:!0}},he.stream_ops=qe,he}},we={DEFAULT_POLLMASK:5,calculateAt(f,m,_){if(vt.isAbs(m))return m;var w;if(f===-100)w=C.cwd();else{var N=we.getStreamFromFD(f);w=N.path}if(m.length==0){if(!_)throw new C.ErrnoError(44);return w}return vt.join2(w,m)},doStat(f,m,_){var w=f(m);j[_>>2]=w.dev,j[_+4>>2]=w.mode,te[_+8>>2]=w.nlink,j[_+12>>2]=w.uid,j[_+16>>2]=w.gid,j[_+20>>2]=w.rdev,Wt=[w.size>>>0,(Je=w.size,+Math.abs(Je)>=1?Je>0?+Math.floor(Je/4294967296)>>>0:~~+Math.ceil((Je-+(~~Je>>>0))/4294967296)>>>0:0)],j[_+24>>2]=Wt[0],j[_+28>>2]=Wt[1],j[_+32>>2]=4096,j[_+36>>2]=w.blocks;var N=w.atime.getTime(),P=w.mtime.getTime(),G=w.ctime.getTime();return Wt=[Math.floor(N/1e3)>>>0,(Je=Math.floor(N/1e3),+Math.abs(Je)>=1?Je>0?+Math.floor(Je/4294967296)>>>0:~~+Math.ceil((Je-+(~~Je>>>0))/4294967296)>>>0:0)],j[_+40>>2]=Wt[0],j[_+44>>2]=Wt[1],te[_+48>>2]=N%1e3*1e3*1e3,Wt=[Math.floor(P/1e3)>>>0,(Je=Math.floor(P/1e3),+Math.abs(Je)>=1?Je>0?+Math.floor(Je/4294967296)>>>0:~~+Math.ceil((Je-+(~~Je>>>0))/4294967296)>>>0:0)],j[_+56>>2]=Wt[0],j[_+60>>2]=Wt[1],te[_+64>>2]=P%1e3*1e3*1e3,Wt=[Math.floor(G/1e3)>>>0,(Je=Math.floor(G/1e3),+Math.abs(Je)>=1?Je>0?+Math.floor(Je/4294967296)>>>0:~~+Math.ceil((Je-+(~~Je>>>0))/4294967296)>>>0:0)],j[_+72>>2]=Wt[0],j[_+76>>2]=Wt[1],te[_+80>>2]=G%1e3*1e3*1e3,Wt=[w.ino>>>0,(Je=w.ino,+Math.abs(Je)>=1?Je>0?+Math.floor(Je/4294967296)>>>0:~~+Math.ceil((Je-+(~~Je>>>0))/4294967296)>>>0:0)],j[_+88>>2]=Wt[0],j[_+92>>2]=Wt[1],0},doMsync(f,m,_,w,N){if(!C.isFile(m.node.mode))throw new C.ErrnoError(43);if(w&2)return 0;var P=H.slice(f,f+_);C.msync(m,P,N,_,w)},getStreamFromFD(f){var m=C.getStreamChecked(f);return m},varargs:void 0,getStr(f){var m=Aa(f);return m}};function Ue(f,m){try{return f=we.getStr(f),C.chmod(f,m),0}catch(_){if(typeof C>"u"||_.name!=="ErrnoError")throw _;return-_.errno}}function He(f,m,_,w){try{if(m=we.getStr(m),m=we.calculateAt(f,m),_&-8)return-28;var N=C.lookupPath(m,{follow:!0}),P=N.node;if(!P)return-44;var G="";return _&4&&(G+="r"),_&2&&(G+="w"),_&1&&(G+="x"),G&&C.nodePermissions(P,G)?-2:0}catch(W){if(typeof C>"u"||W.name!=="ErrnoError")throw W;return-W.errno}}function $e(f,m){try{return C.fchmod(f,m),0}catch(_){if(typeof C>"u"||_.name!=="ErrnoError")throw _;return-_.errno}}function mt(f,m,_){try{return C.fchown(f,m,_),0}catch(w){if(typeof C>"u"||w.name!=="ErrnoError")throw w;return-w.errno}}var Ht=()=>{var f=j[+we.varargs>>2];return we.varargs+=4,f},Gn=Ht;function wr(f,m,_){we.varargs=_;try{var w=we.getStreamFromFD(f);switch(m){case 0:{var N=Ht();if(N<0)return-28;for(;C.streams[N];)N++;var P;return P=C.dupStream(w,N),P.fd}case 1:case 2:return 0;case 3:return w.flags;case 4:{var N=Ht();return w.flags|=N,0}case 12:{var N=Gn(),G=0;return K[N+G>>1]=2,0}case 13:case 14:return 0}return-28}catch(W){if(typeof C>"u"||W.name!=="ErrnoError")throw W;return-W.errno}}function Kr(f,m){try{var _=we.getStreamFromFD(f);return we.doStat(C.stat,_.path,m)}catch(w){if(typeof C>"u"||w.name!=="ErrnoError")throw w;return-w.errno}}var Tt=(f,m)=>m+2097152>>>0<4194305-!!f?(f>>>0)+m*4294967296:NaN;function mi(f,m,_){var w=Tt(m,_);try{return isNaN(w)?61:(C.ftruncate(f,w),0)}catch(N){if(typeof C>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}var Fn=(f,m,_)=>uu(f,H,m,_);function Vs(f,m){try{if(m===0)return-28;var _=C.cwd(),w=Oa(_)+1;return m<w?-68:(Fn(_,f,m),w)}catch(N){if(typeof C>"u"||N.name!=="ErrnoError")throw N;return-N.errno}}function Er(f,m){try{return f=we.getStr(f),we.doStat(C.lstat,f,m)}catch(_){if(typeof C>"u"||_.name!=="ErrnoError")throw _;return-_.errno}}function Ks(f,m,_){try{return m=we.getStr(m),m=we.calculateAt(f,m),m=vt.normalize(m),m[m.length-1]==="/"&&(m=m.substr(0,m.length-1)),C.mkdir(m,_,0),0}catch(w){if(typeof C>"u"||w.name!=="ErrnoError")throw w;return-w.errno}}function Rn(f,m,_,w){try{m=we.getStr(m);var N=w&256,P=w&4096;return w=w&-6401,m=we.calculateAt(f,m,P),we.doStat(N?C.lstat:C.stat,m,_)}catch(G){if(typeof C>"u"||G.name!=="ErrnoError")throw G;return-G.errno}}function Ic(f,m,_,w){we.varargs=w;try{m=we.getStr(m),m=we.calculateAt(f,m);var N=w?Ht():0;return C.open(m,_,N).fd}catch(P){if(typeof C>"u"||P.name!=="ErrnoError")throw P;return-P.errno}}function Da(f,m,_,w){try{if(m=we.getStr(m),m=we.calculateAt(f,m),w<=0)return-28;var N=C.readlink(m),P=Math.min(w,Oa(N)),G=$[_+P];return Fn(N,_,w+1),$[_+P]=G,P}catch(W){if(typeof C>"u"||W.name!=="ErrnoError")throw W;return-W.errno}}function Gs(f){try{return f=we.getStr(f),C.rmdir(f),0}catch(m){if(typeof C>"u"||m.name!=="ErrnoError")throw m;return-m.errno}}function It(f,m){try{return f=we.getStr(f),we.doStat(C.stat,f,m)}catch(_){if(typeof C>"u"||_.name!=="ErrnoError")throw _;return-_.errno}}function zn(f,m,_){try{return m=we.getStr(m),m=we.calculateAt(f,m),_===0?C.unlink(m):_===512?C.rmdir(m):Tn("Invalid flags passed to unlinkat"),0}catch(w){if(typeof C>"u"||w.name!=="ErrnoError")throw w;return-w.errno}}var sa=f=>te[f>>2]+j[f+4>>2]*4294967296;function xo(f,m,_,w){try{m=we.getStr(m),m=we.calculateAt(f,m,!0);var N=Date.now(),P,G;if(!_)P=N,G=N;else{var W=sa(_),he=j[_+8>>2];he==1073741823?P=N:he==1073741822?P=-1:P=W*1e3+he/(1e3*1e3),_+=16,W=sa(_),he=j[_+8>>2],he==1073741823?G=N:he==1073741822?G=-1:G=W*1e3+he/(1e3*1e3)}return(G!=-1||P!=-1)&&C.utime(m,P,G),0}catch(qe){if(typeof C>"u"||qe.name!=="ErrnoError")throw qe;return-qe.errno}}var Lc=f=>f%4===0&&(f%100!==0||f%400===0),Un=[0,31,60,91,121,152,182,213,244,274,305,335],aa=[0,31,59,90,120,151,181,212,243,273,304,334],$o=f=>{var m=Lc(f.getFullYear()),_=m?Un:aa,w=_[f.getMonth()]+f.getDate()-1;return w};function ia(f,m,_){var w=Tt(f,m),N=new Date(w*1e3);j[_>>2]=N.getSeconds(),j[_+4>>2]=N.getMinutes(),j[_+8>>2]=N.getHours(),j[_+12>>2]=N.getDate(),j[_+16>>2]=N.getMonth(),j[_+20>>2]=N.getFullYear()-1900,j[_+24>>2]=N.getDay();var P=$o(N)|0;j[_+28>>2]=P,j[_+36>>2]=-(N.getTimezoneOffset()*60);var G=new Date(N.getFullYear(),0,1),W=new Date(N.getFullYear(),6,1).getTimezoneOffset(),he=G.getTimezoneOffset(),qe=(W!=he&&N.getTimezoneOffset()==Math.min(he,W))|0;j[_+32>>2]=qe}function Qs(f,m,_,w,N,P,G,W){var he=Tt(N,P);try{if(isNaN(he))return 61;var qe=we.getStreamFromFD(w),Qe=C.mmap(qe,f,he,m,_),pt=Qe.ptr;return j[G>>2]=Qe.allocated,te[W>>2]=pt,0}catch(Pt){if(typeof C>"u"||Pt.name!=="ErrnoError")throw Pt;return-Pt.errno}}function V_(f,m,_,w,N,P,G){var W=Tt(P,G);try{var he=we.getStreamFromFD(N);_&2&&we.doMsync(f,he,m,w,W)}catch(qe){if(typeof C>"u"||qe.name!=="ErrnoError")throw qe;return-qe.errno}}var jE=(f,m,_,w)=>{var N=new Date().getFullYear(),P=new Date(N,0,1),G=new Date(N,6,1),W=P.getTimezoneOffset(),he=G.getTimezoneOffset(),qe=Math.max(W,he);te[f>>2]=qe*60,j[m>>2]=+(W!=he);var Qe=Ye=>{var nt=Ye>=0?"-":"+",nn=Math.abs(Ye),Gr=String(Math.floor(nn/60)).padStart(2,"0"),Rs=String(nn%60).padStart(2,"0");return`UTC${nt}${Gr}${Rs}`},pt=Qe(W),Pt=Qe(he);he<W?(Fn(pt,_,17),Fn(Pt,w,17)):(Fn(pt,w,17),Fn(Pt,_,17))},dd=()=>Date.now(),K_=()=>performance.now(),hd=()=>2147483648,HE=f=>{var m=q.buffer,_=(f-m.byteLength+65535)/65536|0;try{return q.grow(_),fe(),1}catch{}},Ys=f=>{var m=H.length;f>>>=0;var _=hd();if(f>_)return!1;for(var w=1;w<=4;w*=2){var N=m*(1+.2/w);N=Math.min(N,f+100663296);var P=Math.min(_,ra(Math.max(f,N),65536)),G=HE(P);if(G)return!0}return!1},fu={},G_=()=>S||"./this.program",qo=()=>{if(!qo.strings){var f=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",m={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:f,_:G_()};for(var _ in fu)fu[_]===void 0?delete m[_]:m[_]=fu[_];var w=[];for(var _ in m)w.push(`${_}=${m[_]}`);qo.strings=w}return qo.strings},Fc=(f,m)=>{for(var _=0;_<f.length;++_)$[m++]=f.charCodeAt(_);$[m]=0},Q_=(f,m)=>{var _=0;return qo().forEach((w,N)=>{var P=m+_;te[f+N*4>>2]=P,Fc(w,P),_+=w.length+1}),0},Y_=(f,m)=>{var _=qo();te[f>>2]=_.length;var w=0;return _.forEach(N=>w+=N.length+1),te[m>>2]=w,0};function zc(f){try{var m=we.getStreamFromFD(f);return C.close(m),0}catch(_){if(typeof C>"u"||_.name!=="ErrnoError")throw _;return _.errno}}function BE(f,m){try{var _=0,w=0,N=0,P=we.getStreamFromFD(f),G=P.tty?2:C.isDir(P.mode)?3:C.isLink(P.mode)?7:4;return $[m]=G,K[m+2>>1]=N,Wt=[_>>>0,(Je=_,+Math.abs(Je)>=1?Je>0?+Math.floor(Je/4294967296)>>>0:~~+Math.ceil((Je-+(~~Je>>>0))/4294967296)>>>0:0)],j[m+8>>2]=Wt[0],j[m+12>>2]=Wt[1],Wt=[w>>>0,(Je=w,+Math.abs(Je)>=1?Je>0?+Math.floor(Je/4294967296)>>>0:~~+Math.ceil((Je-+(~~Je>>>0))/4294967296)>>>0:0)],j[m+16>>2]=Wt[0],j[m+20>>2]=Wt[1],0}catch(W){if(typeof C>"u"||W.name!=="ErrnoError")throw W;return W.errno}}var W_=(f,m,_,w)=>{for(var N=0,P=0;P<_;P++){var G=te[m>>2],W=te[m+4>>2];m+=8;var he=C.read(f,$,G,W,w);if(he<0)return-1;if(N+=he,he<W)break}return N};function J_(f,m,_,w){try{var N=we.getStreamFromFD(f),P=W_(N,m,_);return te[w>>2]=P,0}catch(G){if(typeof C>"u"||G.name!=="ErrnoError")throw G;return G.errno}}function Jm(f,m,_,w,N){var P=Tt(m,_);try{if(isNaN(P))return 61;var G=we.getStreamFromFD(f);return C.llseek(G,P,w),Wt=[G.position>>>0,(Je=G.position,+Math.abs(Je)>=1?Je>0?+Math.floor(Je/4294967296)>>>0:~~+Math.ceil((Je-+(~~Je>>>0))/4294967296)>>>0:0)],j[N>>2]=Wt[0],j[N+4>>2]=Wt[1],G.getdents&&P===0&&w===0&&(G.getdents=null),0}catch(W){if(typeof C>"u"||W.name!=="ErrnoError")throw W;return W.errno}}function VE(f){var _;try{var m=we.getStreamFromFD(f);return(_=m.stream_ops)!=null&&_.fsync?m.stream_ops.fsync(m):0}catch(w){if(typeof C>"u"||w.name!=="ErrnoError")throw w;return w.errno}}var KE=(f,m,_,w)=>{for(var N=0,P=0;P<_;P++){var G=te[m>>2],W=te[m+4>>2];m+=8;var he=C.write(f,$,G,W,w);if(he<0)return-1;if(N+=he,he<W)break}return N};function md(f,m,_,w){try{var N=we.getStreamFromFD(f),P=KE(N,m,_);return te[w>>2]=P,0}catch(G){if(typeof C>"u"||G.name!=="ErrnoError")throw G;return G.errno}}var qt=function(){const f=typeof Asyncify=="object"?Asyncify.handleAsync.bind(Asyncify):null;r.handleAsync=f;const m=new Map;r.setCallback=(_,w)=>m.set(_,w),r.getCallback=_=>m.get(_),r.deleteCallback=_=>m.delete(_),qt=function(_,w,...N){const P=m.get(w);let G=null;const W=typeof P=="function"?P:P[G=Aa(N.shift())];if(_){if(f)return f(()=>W.apply(P,N));throw new Error("Synchronous WebAssembly cannot call async function")}const he=W.apply(P,N);if(typeof(he==null?void 0:he.then)=="function")throw console.error("unexpected Promise",W),new Error(`${G} unexpectedly returned a Promise`);return he}};function Xm(...f){return qt(!1,...f)}function Uc(...f){return qt(!0,...f)}function Pc(...f){return qt(!1,...f)}function X_(...f){return qt(!0,...f)}function Zm(...f){return qt(!1,...f)}function Z_(...f){return qt(!0,...f)}function du(...f){return qt(!1,...f)}function eg(...f){return qt(!0,...f)}function hu(...f){return qt(!1,...f)}function Bi(...f){return qt(!0,...f)}function tg(...f){return qt(!1,...f)}function gd(...f){return qt(!0,...f)}function eb(...f){return qt(!1,...f)}function pd(...f){return qt(!0,...f)}function yd(...f){return qt(!1,...f)}function tb(...f){return qt(!0,...f)}function hs(...f){return qt(!1,...f)}function No(...f){return qt(!0,...f)}function _d(...f){return qt(!1,...f)}function mu(...f){return qt(!0,...f)}function GE(...f){return qt(!1,...f)}function ng(...f){return qt(!0,...f)}function rg(...f){return qt(!1,...f)}function gu(...f){return qt(!0,...f)}function bd(...f){return qt(!1,...f)}function nb(...f){return qt(!0,...f)}function QE(...f){return qt(!1,...f)}function YE(...f){return qt(!0,...f)}function WE(...f){return qt(!1,...f)}function sg(...f){return qt(!0,...f)}function JE(...f){return qt(!1,...f)}function XE(...f){return qt(!0,...f)}var ZE=f=>{I=f,v(f,new ds(f))},e1=(f,m)=>{I=f,ZE(f)},t1=f=>{if(f instanceof ds||f=="unwind")return I;v(1,f)},ag=(f,m)=>{f<128?m.push(f):m.push(f%128|128,f>>7)},n1=f=>{for(var m={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},_={parameters:[],results:f[0]=="v"?[]:[m[f[0]]]},w=1;w<f.length;++w)_.parameters.push(m[f[w]]);return _},r1=(f,m)=>{var _=f.slice(0,1),w=f.slice(1),N={i:127,p:127,j:126,f:125,d:124,e:111};m.push(96),ag(w.length,m);for(var P=0;P<w.length;++P)m.push(N[w[P]]);_=="v"?m.push(0):m.push(1,N[_])},s1=(f,m)=>{if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(n1(m),f);var _=[1];r1(m,_);var w=[0,97,115,109,1,0,0,0,1];ag(_.length,w),w.push(..._),w.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var N=new WebAssembly.Module(new Uint8Array(w)),P=new WebAssembly.Instance(N,{e:{f}}),G=P.exports.f;return G},jc,ig=f=>jc.get(f),a1=(f,m)=>{if(Hc)for(var _=f;_<f+m;_++){var w=ig(_);w&&Hc.set(w,_)}},Hc,i1=f=>(Hc||(Hc=new WeakMap,a1(0,jc.length)),Hc.get(f)||0),og=[],o1=()=>{if(og.length)return og.pop();try{jc.grow(1)}catch(f){throw f instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":f}return jc.length-1},rb=(f,m)=>jc.set(f,m),c1=(f,m)=>{var _=i1(f);if(_)return _;var w=o1();try{rb(w,f)}catch(P){if(!(P instanceof TypeError))throw P;var N=s1(f,m);rb(w,N)}return Hc.set(f,w),w},sb=f=>{var m=r["_"+f];return m},ab=(f,m)=>{$.set(f,m)},ib=f=>Vc(f),l1=f=>{var m=Oa(f)+1,_=ib(m);return Fn(f,_,m),_},Vi=(f,m,_,w,N)=>{var P={string:nt=>{var nn=0;return nt!=null&&nt!==0&&(nn=l1(nt)),nn},array:nt=>{var nn=ib(nt.length);return ab(nt,nn),nn}};function G(nt){return m==="string"?Aa(nt):m==="boolean"?!!nt:nt}var W=sb(f),he=[],qe=0;if(w)for(var Qe=0;Qe<w.length;Qe++){var pt=P[_[Qe]];pt?(qe===0&&(qe=cu()),he[Qe]=pt(w[Qe])):he[Qe]=w[Qe]}var Pt=W(...he);function Ye(nt){return qe!==0&&Do(qe),G(nt)}return Pt=Ye(Pt),Pt},u1=(f,m,_,w)=>{var N=!_||_.every(G=>G==="number"||G==="boolean"),P=m!=="string";return P&&N&&!w?sb(f):(...G)=>Vi(f,m,_,G)},cg=f=>ug(),pu=(f,m,_)=>{if(_??(_=2147483647),_<2)return 0;_-=2;for(var w=m,N=_<f.length*2?_/2:f.length,P=0;P<N;++P){var G=f.charCodeAt(P);K[m>>1]=G,m+=2}return K[m>>1]=0,m-w},f1=(f,m,_)=>{if(_??(_=2147483647),_<4)return 0;for(var w=m,N=w+_-4,P=0;P<f.length;++P){var G=f.charCodeAt(P);if(G>=55296&&G<=57343){var W=f.charCodeAt(++P);G=65536+((G&1023)<<10)|W&1023}if(j[m>>2]=G,m+=4,m+4>N)break}return j[m>>2]=0,m-w},ob=f=>{for(var m="";;){var _=H[f++];if(!_)return m;m+=String.fromCharCode(_)}},lg=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,cb=(f,m)=>{for(var _=f,w=_>>1,N=w+m/2;!(w>=N)&&V[w];)++w;if(_=w<<1,_-f>32&&lg)return lg.decode(H.subarray(f,_));for(var P="",G=0;!(G>=m/2);++G){var W=K[f+G*2>>1];if(W==0)break;P+=String.fromCharCode(W)}return P},lb=(f,m)=>{for(var _=0,w="";!(_>=m/4);){var N=j[f+_*4>>2];if(N==0)break;if(++_,N>=65536){var P=N-65536;w+=String.fromCharCode(55296|P>>10,56320|P&1023)}else w+=String.fromCharCode(N)}return w};function ub(f){for(var m=[],_=0;_<f.length;_++){var w=f[_];w>255&&(w&=255),m.push(String.fromCharCode(w))}return m.join("")}C.createPreloadedFile=Oe,C.staticInit(),lt.doesNotExistError=new C.ErrnoError(44),lt.doesNotExistError.stack="<generic error, no stack>",qt();var Bc={a:Hi,Y:Ue,$:He,Z:$e,X:mt,b:wr,W:Kr,y:mi,Q:Vs,U:Er,N:Ks,S:Rn,L:Ic,J:Da,I:Gs,V:It,G:zn,F:xo,w:ia,u:Qs,v:V_,M:jE,n:dd,m:K_,D:Ys,O:Q_,P:Y_,o:zc,E:BE,K:J_,x:Jm,R:VE,H:md,s:Xm,t:Uc,ga:Pc,ka:X_,i:Zm,j:Z_,c:du,d:eg,ca:hu,da:Bi,ea:tg,fa:gd,g:eb,h:pd,z:yd,A:tb,e:hs,f:No,aa:_d,ba:mu,B:GE,C:ng,p:rg,q:gu,ha:bd,ia:nb,ja:QE,r:YE,k:WE,l:sg,T:JE,_:XE},U=ou();r._sqlite3_status64=(f,m,_,w)=>(r._sqlite3_status64=U.na)(f,m,_,w),r._sqlite3_status=(f,m,_,w)=>(r._sqlite3_status=U.oa)(f,m,_,w),r._sqlite3_db_status=(f,m,_,w,N)=>(r._sqlite3_db_status=U.pa)(f,m,_,w,N),r._sqlite3_msize=f=>(r._sqlite3_msize=U.qa)(f),r._sqlite3_vfs_find=f=>(r._sqlite3_vfs_find=U.ra)(f),r._sqlite3_vfs_register=(f,m)=>(r._sqlite3_vfs_register=U.sa)(f,m),r._sqlite3_vfs_unregister=f=>(r._sqlite3_vfs_unregister=U.ta)(f),r._sqlite3_release_memory=f=>(r._sqlite3_release_memory=U.ua)(f),r._sqlite3_soft_heap_limit64=(f,m)=>(r._sqlite3_soft_heap_limit64=U.va)(f,m),r._sqlite3_memory_used=()=>(r._sqlite3_memory_used=U.wa)(),r._sqlite3_hard_heap_limit64=(f,m)=>(r._sqlite3_hard_heap_limit64=U.xa)(f,m),r._sqlite3_memory_highwater=f=>(r._sqlite3_memory_highwater=U.ya)(f),r._sqlite3_malloc=f=>(r._sqlite3_malloc=U.za)(f),r._sqlite3_malloc64=(f,m)=>(r._sqlite3_malloc64=U.Aa)(f,m),r._sqlite3_free=f=>(r._sqlite3_free=U.Ba)(f),r._sqlite3_realloc=(f,m)=>(r._sqlite3_realloc=U.Ca)(f,m),r._sqlite3_realloc64=(f,m,_)=>(r._sqlite3_realloc64=U.Da)(f,m,_),r._sqlite3_str_vappendf=(f,m,_)=>(r._sqlite3_str_vappendf=U.Ea)(f,m,_),r._sqlite3_str_append=(f,m,_)=>(r._sqlite3_str_append=U.Fa)(f,m,_),r._sqlite3_str_appendchar=(f,m,_)=>(r._sqlite3_str_appendchar=U.Ga)(f,m,_),r._sqlite3_str_appendall=(f,m)=>(r._sqlite3_str_appendall=U.Ha)(f,m),r._sqlite3_str_appendf=(f,m,_)=>(r._sqlite3_str_appendf=U.Ia)(f,m,_),r._sqlite3_str_finish=f=>(r._sqlite3_str_finish=U.Ja)(f),r._sqlite3_str_errcode=f=>(r._sqlite3_str_errcode=U.Ka)(f),r._sqlite3_str_length=f=>(r._sqlite3_str_length=U.La)(f),r._sqlite3_str_value=f=>(r._sqlite3_str_value=U.Ma)(f),r._sqlite3_str_reset=f=>(r._sqlite3_str_reset=U.Na)(f),r._sqlite3_str_new=f=>(r._sqlite3_str_new=U.Oa)(f),r._sqlite3_vmprintf=(f,m)=>(r._sqlite3_vmprintf=U.Pa)(f,m),r._sqlite3_mprintf=(f,m)=>(r._sqlite3_mprintf=U.Qa)(f,m),r._sqlite3_vsnprintf=(f,m,_,w)=>(r._sqlite3_vsnprintf=U.Ra)(f,m,_,w),r._sqlite3_snprintf=(f,m,_,w)=>(r._sqlite3_snprintf=U.Sa)(f,m,_,w),r._sqlite3_log=(f,m,_)=>(r._sqlite3_log=U.Ta)(f,m,_),r._sqlite3_randomness=(f,m)=>(r._sqlite3_randomness=U.Ua)(f,m),r._sqlite3_stricmp=(f,m)=>(r._sqlite3_stricmp=U.Va)(f,m),r._sqlite3_strnicmp=(f,m,_)=>(r._sqlite3_strnicmp=U.Wa)(f,m,_),r._sqlite3_os_init=()=>(r._sqlite3_os_init=U.Xa)(),r._sqlite3_os_end=()=>(r._sqlite3_os_end=U.Ya)(),r._sqlite3_serialize=(f,m,_,w)=>(r._sqlite3_serialize=U.Za)(f,m,_,w),r._sqlite3_prepare_v2=(f,m,_,w,N)=>(r._sqlite3_prepare_v2=U._a)(f,m,_,w,N),r._sqlite3_step=f=>(r._sqlite3_step=U.$a)(f),r._sqlite3_column_int64=(f,m)=>(r._sqlite3_column_int64=U.ab)(f,m),r._sqlite3_reset=f=>(r._sqlite3_reset=U.bb)(f),r._sqlite3_exec=(f,m,_,w,N)=>(r._sqlite3_exec=U.cb)(f,m,_,w,N),r._sqlite3_column_int=(f,m)=>(r._sqlite3_column_int=U.db)(f,m),r._sqlite3_finalize=f=>(r._sqlite3_finalize=U.eb)(f),r._sqlite3_deserialize=(f,m,_,w,N,P,G,W)=>(r._sqlite3_deserialize=U.fb)(f,m,_,w,N,P,G,W),r._sqlite3_database_file_object=f=>(r._sqlite3_database_file_object=U.gb)(f),r._sqlite3_backup_init=(f,m,_,w)=>(r._sqlite3_backup_init=U.hb)(f,m,_,w),r._sqlite3_backup_step=(f,m)=>(r._sqlite3_backup_step=U.ib)(f,m),r._sqlite3_backup_finish=f=>(r._sqlite3_backup_finish=U.jb)(f),r._sqlite3_backup_remaining=f=>(r._sqlite3_backup_remaining=U.kb)(f),r._sqlite3_backup_pagecount=f=>(r._sqlite3_backup_pagecount=U.lb)(f),r._sqlite3_clear_bindings=f=>(r._sqlite3_clear_bindings=U.mb)(f),r._sqlite3_value_blob=f=>(r._sqlite3_value_blob=U.nb)(f),r._sqlite3_value_text=f=>(r._sqlite3_value_text=U.ob)(f),r._sqlite3_value_bytes=f=>(r._sqlite3_value_bytes=U.pb)(f),r._sqlite3_value_bytes16=f=>(r._sqlite3_value_bytes16=U.qb)(f),r._sqlite3_value_double=f=>(r._sqlite3_value_double=U.rb)(f),r._sqlite3_value_int=f=>(r._sqlite3_value_int=U.sb)(f),r._sqlite3_value_int64=f=>(r._sqlite3_value_int64=U.tb)(f),r._sqlite3_value_subtype=f=>(r._sqlite3_value_subtype=U.ub)(f),r._sqlite3_value_pointer=(f,m)=>(r._sqlite3_value_pointer=U.vb)(f,m),r._sqlite3_value_text16=f=>(r._sqlite3_value_text16=U.wb)(f),r._sqlite3_value_text16be=f=>(r._sqlite3_value_text16be=U.xb)(f),r._sqlite3_value_text16le=f=>(r._sqlite3_value_text16le=U.yb)(f),r._sqlite3_value_type=f=>(r._sqlite3_value_type=U.zb)(f),r._sqlite3_value_encoding=f=>(r._sqlite3_value_encoding=U.Ab)(f),r._sqlite3_value_nochange=f=>(r._sqlite3_value_nochange=U.Bb)(f),r._sqlite3_value_frombind=f=>(r._sqlite3_value_frombind=U.Cb)(f),r._sqlite3_value_dup=f=>(r._sqlite3_value_dup=U.Db)(f),r._sqlite3_value_free=f=>(r._sqlite3_value_free=U.Eb)(f),r._sqlite3_result_blob=(f,m,_,w)=>(r._sqlite3_result_blob=U.Fb)(f,m,_,w),r._sqlite3_result_blob64=(f,m,_,w,N)=>(r._sqlite3_result_blob64=U.Gb)(f,m,_,w,N),r._sqlite3_result_double=(f,m)=>(r._sqlite3_result_double=U.Hb)(f,m),r._sqlite3_result_error=(f,m,_)=>(r._sqlite3_result_error=U.Ib)(f,m,_),r._sqlite3_result_error16=(f,m,_)=>(r._sqlite3_result_error16=U.Jb)(f,m,_),r._sqlite3_result_int=(f,m)=>(r._sqlite3_result_int=U.Kb)(f,m),r._sqlite3_result_int64=(f,m,_)=>(r._sqlite3_result_int64=U.Lb)(f,m,_),r._sqlite3_result_null=f=>(r._sqlite3_result_null=U.Mb)(f),r._sqlite3_result_pointer=(f,m,_,w)=>(r._sqlite3_result_pointer=U.Nb)(f,m,_,w),r._sqlite3_result_subtype=(f,m)=>(r._sqlite3_result_subtype=U.Ob)(f,m),r._sqlite3_result_text=(f,m,_,w)=>(r._sqlite3_result_text=U.Pb)(f,m,_,w),r._sqlite3_result_text64=(f,m,_,w,N,P)=>(r._sqlite3_result_text64=U.Qb)(f,m,_,w,N,P),r._sqlite3_result_text16=(f,m,_,w)=>(r._sqlite3_result_text16=U.Rb)(f,m,_,w),r._sqlite3_result_text16be=(f,m,_,w)=>(r._sqlite3_result_text16be=U.Sb)(f,m,_,w),r._sqlite3_result_text16le=(f,m,_,w)=>(r._sqlite3_result_text16le=U.Tb)(f,m,_,w),r._sqlite3_result_value=(f,m)=>(r._sqlite3_result_value=U.Ub)(f,m),r._sqlite3_result_error_toobig=f=>(r._sqlite3_result_error_toobig=U.Vb)(f),r._sqlite3_result_zeroblob=(f,m)=>(r._sqlite3_result_zeroblob=U.Wb)(f,m),r._sqlite3_result_zeroblob64=(f,m,_)=>(r._sqlite3_result_zeroblob64=U.Xb)(f,m,_),r._sqlite3_result_error_code=(f,m)=>(r._sqlite3_result_error_code=U.Yb)(f,m),r._sqlite3_result_error_nomem=f=>(r._sqlite3_result_error_nomem=U.Zb)(f),r._sqlite3_user_data=f=>(r._sqlite3_user_data=U._b)(f),r._sqlite3_context_db_handle=f=>(r._sqlite3_context_db_handle=U.$b)(f),r._sqlite3_vtab_nochange=f=>(r._sqlite3_vtab_nochange=U.ac)(f),r._sqlite3_vtab_in_first=(f,m)=>(r._sqlite3_vtab_in_first=U.bc)(f,m),r._sqlite3_vtab_in_next=(f,m)=>(r._sqlite3_vtab_in_next=U.cc)(f,m),r._sqlite3_aggregate_context=(f,m)=>(r._sqlite3_aggregate_context=U.dc)(f,m),r._sqlite3_get_auxdata=(f,m)=>(r._sqlite3_get_auxdata=U.ec)(f,m),r._sqlite3_set_auxdata=(f,m,_,w)=>(r._sqlite3_set_auxdata=U.fc)(f,m,_,w),r._sqlite3_column_count=f=>(r._sqlite3_column_count=U.gc)(f),r._sqlite3_data_count=f=>(r._sqlite3_data_count=U.hc)(f),r._sqlite3_column_blob=(f,m)=>(r._sqlite3_column_blob=U.ic)(f,m),r._sqlite3_column_bytes=(f,m)=>(r._sqlite3_column_bytes=U.jc)(f,m),r._sqlite3_column_bytes16=(f,m)=>(r._sqlite3_column_bytes16=U.kc)(f,m),r._sqlite3_column_double=(f,m)=>(r._sqlite3_column_double=U.lc)(f,m),r._sqlite3_column_text=(f,m)=>(r._sqlite3_column_text=U.mc)(f,m),r._sqlite3_column_value=(f,m)=>(r._sqlite3_column_value=U.nc)(f,m),r._sqlite3_column_text16=(f,m)=>(r._sqlite3_column_text16=U.oc)(f,m),r._sqlite3_column_type=(f,m)=>(r._sqlite3_column_type=U.pc)(f,m),r._sqlite3_column_name=(f,m)=>(r._sqlite3_column_name=U.qc)(f,m),r._sqlite3_column_name16=(f,m)=>(r._sqlite3_column_name16=U.rc)(f,m),r._sqlite3_bind_blob=(f,m,_,w,N)=>(r._sqlite3_bind_blob=U.sc)(f,m,_,w,N),r._sqlite3_bind_blob64=(f,m,_,w,N,P)=>(r._sqlite3_bind_blob64=U.tc)(f,m,_,w,N,P),r._sqlite3_bind_double=(f,m,_)=>(r._sqlite3_bind_double=U.uc)(f,m,_),r._sqlite3_bind_int=(f,m,_)=>(r._sqlite3_bind_int=U.vc)(f,m,_),r._sqlite3_bind_int64=(f,m,_,w)=>(r._sqlite3_bind_int64=U.wc)(f,m,_,w),r._sqlite3_bind_null=(f,m)=>(r._sqlite3_bind_null=U.xc)(f,m),r._sqlite3_bind_pointer=(f,m,_,w,N)=>(r._sqlite3_bind_pointer=U.yc)(f,m,_,w,N),r._sqlite3_bind_text=(f,m,_,w,N)=>(r._sqlite3_bind_text=U.zc)(f,m,_,w,N),r._sqlite3_bind_text64=(f,m,_,w,N,P,G)=>(r._sqlite3_bind_text64=U.Ac)(f,m,_,w,N,P,G),r._sqlite3_bind_text16=(f,m,_,w,N)=>(r._sqlite3_bind_text16=U.Bc)(f,m,_,w,N),r._sqlite3_bind_value=(f,m,_)=>(r._sqlite3_bind_value=U.Cc)(f,m,_),r._sqlite3_bind_zeroblob=(f,m,_)=>(r._sqlite3_bind_zeroblob=U.Dc)(f,m,_),r._sqlite3_bind_zeroblob64=(f,m,_,w)=>(r._sqlite3_bind_zeroblob64=U.Ec)(f,m,_,w),r._sqlite3_bind_parameter_count=f=>(r._sqlite3_bind_parameter_count=U.Fc)(f),r._sqlite3_bind_parameter_name=(f,m)=>(r._sqlite3_bind_parameter_name=U.Gc)(f,m),r._sqlite3_bind_parameter_index=(f,m)=>(r._sqlite3_bind_parameter_index=U.Hc)(f,m),r._sqlite3_db_handle=f=>(r._sqlite3_db_handle=U.Ic)(f),r._sqlite3_stmt_readonly=f=>(r._sqlite3_stmt_readonly=U.Jc)(f),r._sqlite3_stmt_isexplain=f=>(r._sqlite3_stmt_isexplain=U.Kc)(f),r._sqlite3_stmt_explain=(f,m)=>(r._sqlite3_stmt_explain=U.Lc)(f,m),r._sqlite3_stmt_busy=f=>(r._sqlite3_stmt_busy=U.Mc)(f),r._sqlite3_next_stmt=(f,m)=>(r._sqlite3_next_stmt=U.Nc)(f,m),r._sqlite3_stmt_status=(f,m,_)=>(r._sqlite3_stmt_status=U.Oc)(f,m,_),r._sqlite3_sql=f=>(r._sqlite3_sql=U.Pc)(f),r._sqlite3_expanded_sql=f=>(r._sqlite3_expanded_sql=U.Qc)(f),r._sqlite3_value_numeric_type=f=>(r._sqlite3_value_numeric_type=U.Rc)(f),r._sqlite3_blob_open=(f,m,_,w,N,P,G,W)=>(r._sqlite3_blob_open=U.Sc)(f,m,_,w,N,P,G,W),r._sqlite3_blob_close=f=>(r._sqlite3_blob_close=U.Tc)(f),r._sqlite3_blob_read=(f,m,_,w)=>(r._sqlite3_blob_read=U.Uc)(f,m,_,w),r._sqlite3_blob_write=(f,m,_,w)=>(r._sqlite3_blob_write=U.Vc)(f,m,_,w),r._sqlite3_blob_bytes=f=>(r._sqlite3_blob_bytes=U.Wc)(f),r._sqlite3_blob_reopen=(f,m,_)=>(r._sqlite3_blob_reopen=U.Xc)(f,m,_),r._sqlite3_set_authorizer=(f,m,_)=>(r._sqlite3_set_authorizer=U.Yc)(f,m,_),r._sqlite3_strglob=(f,m)=>(r._sqlite3_strglob=U.Zc)(f,m),r._sqlite3_strlike=(f,m,_)=>(r._sqlite3_strlike=U._c)(f,m,_),r._sqlite3_errmsg=f=>(r._sqlite3_errmsg=U.$c)(f),r._sqlite3_auto_extension=f=>(r._sqlite3_auto_extension=U.ad)(f),r._sqlite3_cancel_auto_extension=f=>(r._sqlite3_cancel_auto_extension=U.bd)(f),r._sqlite3_reset_auto_extension=()=>(r._sqlite3_reset_auto_extension=U.cd)(),r._sqlite3_prepare=(f,m,_,w,N)=>(r._sqlite3_prepare=U.dd)(f,m,_,w,N),r._sqlite3_prepare_v3=(f,m,_,w,N,P)=>(r._sqlite3_prepare_v3=U.ed)(f,m,_,w,N,P),r._sqlite3_prepare16=(f,m,_,w,N)=>(r._sqlite3_prepare16=U.fd)(f,m,_,w,N),r._sqlite3_prepare16_v2=(f,m,_,w,N)=>(r._sqlite3_prepare16_v2=U.gd)(f,m,_,w,N),r._sqlite3_prepare16_v3=(f,m,_,w,N,P)=>(r._sqlite3_prepare16_v3=U.hd)(f,m,_,w,N,P),r._sqlite3_get_table=(f,m,_,w,N,P)=>(r._sqlite3_get_table=U.id)(f,m,_,w,N,P),r._sqlite3_free_table=f=>(r._sqlite3_free_table=U.jd)(f),r._sqlite3_create_module=(f,m,_,w)=>(r._sqlite3_create_module=U.kd)(f,m,_,w),r._sqlite3_create_module_v2=(f,m,_,w,N)=>(r._sqlite3_create_module_v2=U.ld)(f,m,_,w,N),r._sqlite3_drop_modules=(f,m)=>(r._sqlite3_drop_modules=U.md)(f,m),r._sqlite3_declare_vtab=(f,m)=>(r._sqlite3_declare_vtab=U.nd)(f,m),r._sqlite3_vtab_on_conflict=f=>(r._sqlite3_vtab_on_conflict=U.od)(f),r._sqlite3_vtab_config=(f,m,_)=>(r._sqlite3_vtab_config=U.pd)(f,m,_),r._sqlite3_vtab_collation=(f,m)=>(r._sqlite3_vtab_collation=U.qd)(f,m),r._sqlite3_vtab_in=(f,m,_)=>(r._sqlite3_vtab_in=U.rd)(f,m,_),r._sqlite3_vtab_rhs_value=(f,m,_)=>(r._sqlite3_vtab_rhs_value=U.sd)(f,m,_),r._sqlite3_vtab_distinct=f=>(r._sqlite3_vtab_distinct=U.td)(f),r._sqlite3_keyword_name=(f,m,_)=>(r._sqlite3_keyword_name=U.ud)(f,m,_),r._sqlite3_keyword_count=()=>(r._sqlite3_keyword_count=U.vd)(),r._sqlite3_keyword_check=(f,m)=>(r._sqlite3_keyword_check=U.wd)(f,m),r._sqlite3_complete=f=>(r._sqlite3_complete=U.xd)(f),r._sqlite3_complete16=f=>(r._sqlite3_complete16=U.yd)(f),r._sqlite3_libversion=()=>(r._sqlite3_libversion=U.zd)(),r._sqlite3_libversion_number=()=>(r._sqlite3_libversion_number=U.Ad)(),r._sqlite3_threadsafe=()=>(r._sqlite3_threadsafe=U.Bd)(),r._sqlite3_initialize=()=>(r._sqlite3_initialize=U.Cd)(),r._sqlite3_shutdown=()=>(r._sqlite3_shutdown=U.Dd)(),r._sqlite3_config=(f,m)=>(r._sqlite3_config=U.Ed)(f,m),r._sqlite3_db_mutex=f=>(r._sqlite3_db_mutex=U.Fd)(f),r._sqlite3_db_release_memory=f=>(r._sqlite3_db_release_memory=U.Gd)(f),r._sqlite3_db_cacheflush=f=>(r._sqlite3_db_cacheflush=U.Hd)(f),r._sqlite3_db_config=(f,m,_)=>(r._sqlite3_db_config=U.Id)(f,m,_),r._sqlite3_last_insert_rowid=f=>(r._sqlite3_last_insert_rowid=U.Jd)(f),r._sqlite3_set_last_insert_rowid=(f,m,_)=>(r._sqlite3_set_last_insert_rowid=U.Kd)(f,m,_),r._sqlite3_changes64=f=>(r._sqlite3_changes64=U.Ld)(f),r._sqlite3_changes=f=>(r._sqlite3_changes=U.Md)(f),r._sqlite3_total_changes64=f=>(r._sqlite3_total_changes64=U.Nd)(f),r._sqlite3_total_changes=f=>(r._sqlite3_total_changes=U.Od)(f),r._sqlite3_txn_state=(f,m)=>(r._sqlite3_txn_state=U.Pd)(f,m),r._sqlite3_close=f=>(r._sqlite3_close=U.Qd)(f),r._sqlite3_close_v2=f=>(r._sqlite3_close_v2=U.Rd)(f),r._sqlite3_busy_handler=(f,m,_)=>(r._sqlite3_busy_handler=U.Sd)(f,m,_),r._sqlite3_progress_handler=(f,m,_,w)=>(r._sqlite3_progress_handler=U.Td)(f,m,_,w),r._sqlite3_busy_timeout=(f,m)=>(r._sqlite3_busy_timeout=U.Ud)(f,m),r._sqlite3_interrupt=f=>(r._sqlite3_interrupt=U.Vd)(f),r._sqlite3_is_interrupted=f=>(r._sqlite3_is_interrupted=U.Wd)(f),r._sqlite3_create_function=(f,m,_,w,N,P,G,W)=>(r._sqlite3_create_function=U.Xd)(f,m,_,w,N,P,G,W),r._sqlite3_create_function_v2=(f,m,_,w,N,P,G,W,he)=>(r._sqlite3_create_function_v2=U.Yd)(f,m,_,w,N,P,G,W,he),r._sqlite3_create_window_function=(f,m,_,w,N,P,G,W,he,qe)=>(r._sqlite3_create_window_function=U.Zd)(f,m,_,w,N,P,G,W,he,qe),r._sqlite3_create_function16=(f,m,_,w,N,P,G,W)=>(r._sqlite3_create_function16=U._d)(f,m,_,w,N,P,G,W),r._sqlite3_overload_function=(f,m,_)=>(r._sqlite3_overload_function=U.$d)(f,m,_),r._sqlite3_trace_v2=(f,m,_,w)=>(r._sqlite3_trace_v2=U.ae)(f,m,_,w),r._sqlite3_commit_hook=(f,m,_)=>(r._sqlite3_commit_hook=U.be)(f,m,_),r._sqlite3_update_hook=(f,m,_)=>(r._sqlite3_update_hook=U.ce)(f,m,_),r._sqlite3_rollback_hook=(f,m,_)=>(r._sqlite3_rollback_hook=U.de)(f,m,_),r._sqlite3_autovacuum_pages=(f,m,_,w)=>(r._sqlite3_autovacuum_pages=U.ee)(f,m,_,w),r._sqlite3_wal_autocheckpoint=(f,m)=>(r._sqlite3_wal_autocheckpoint=U.fe)(f,m),r._sqlite3_wal_hook=(f,m,_)=>(r._sqlite3_wal_hook=U.ge)(f,m,_),r._sqlite3_wal_checkpoint_v2=(f,m,_,w,N)=>(r._sqlite3_wal_checkpoint_v2=U.he)(f,m,_,w,N),r._sqlite3_wal_checkpoint=(f,m)=>(r._sqlite3_wal_checkpoint=U.ie)(f,m),r._sqlite3_error_offset=f=>(r._sqlite3_error_offset=U.je)(f),r._sqlite3_errmsg16=f=>(r._sqlite3_errmsg16=U.ke)(f),r._sqlite3_errcode=f=>(r._sqlite3_errcode=U.le)(f),r._sqlite3_extended_errcode=f=>(r._sqlite3_extended_errcode=U.me)(f),r._sqlite3_system_errno=f=>(r._sqlite3_system_errno=U.ne)(f),r._sqlite3_errstr=f=>(r._sqlite3_errstr=U.oe)(f),r._sqlite3_limit=(f,m,_)=>(r._sqlite3_limit=U.pe)(f,m,_),r._sqlite3_open=(f,m)=>(r._sqlite3_open=U.qe)(f,m),r._sqlite3_open_v2=(f,m,_,w)=>(r._sqlite3_open_v2=U.re)(f,m,_,w),r._sqlite3_open16=(f,m)=>(r._sqlite3_open16=U.se)(f,m),r._sqlite3_create_collation=(f,m,_,w,N)=>(r._sqlite3_create_collation=U.te)(f,m,_,w,N),r._sqlite3_create_collation_v2=(f,m,_,w,N,P)=>(r._sqlite3_create_collation_v2=U.ue)(f,m,_,w,N,P),r._sqlite3_create_collation16=(f,m,_,w,N)=>(r._sqlite3_create_collation16=U.ve)(f,m,_,w,N),r._sqlite3_collation_needed=(f,m,_)=>(r._sqlite3_collation_needed=U.we)(f,m,_),r._sqlite3_collation_needed16=(f,m,_)=>(r._sqlite3_collation_needed16=U.xe)(f,m,_),r._sqlite3_get_clientdata=(f,m)=>(r._sqlite3_get_clientdata=U.ye)(f,m),r._sqlite3_set_clientdata=(f,m,_,w)=>(r._sqlite3_set_clientdata=U.ze)(f,m,_,w),r._sqlite3_get_autocommit=f=>(r._sqlite3_get_autocommit=U.Ae)(f),r._sqlite3_table_column_metadata=(f,m,_,w,N,P,G,W,he)=>(r._sqlite3_table_column_metadata=U.Be)(f,m,_,w,N,P,G,W,he),r._sqlite3_sleep=f=>(r._sqlite3_sleep=U.Ce)(f),r._sqlite3_extended_result_codes=(f,m)=>(r._sqlite3_extended_result_codes=U.De)(f,m),r._sqlite3_file_control=(f,m,_,w)=>(r._sqlite3_file_control=U.Ee)(f,m,_,w),r._sqlite3_test_control=(f,m)=>(r._sqlite3_test_control=U.Fe)(f,m),r._sqlite3_create_filename=(f,m,_,w,N)=>(r._sqlite3_create_filename=U.Ge)(f,m,_,w,N),r._sqlite3_free_filename=f=>(r._sqlite3_free_filename=U.He)(f),r._sqlite3_uri_parameter=(f,m)=>(r._sqlite3_uri_parameter=U.Ie)(f,m),r._sqlite3_uri_key=(f,m)=>(r._sqlite3_uri_key=U.Je)(f,m),r._sqlite3_uri_boolean=(f,m,_)=>(r._sqlite3_uri_boolean=U.Ke)(f,m,_),r._sqlite3_uri_int64=(f,m,_,w)=>(r._sqlite3_uri_int64=U.Le)(f,m,_,w),r._sqlite3_filename_database=f=>(r._sqlite3_filename_database=U.Me)(f),r._sqlite3_filename_journal=f=>(r._sqlite3_filename_journal=U.Ne)(f),r._sqlite3_filename_wal=f=>(r._sqlite3_filename_wal=U.Oe)(f),r._sqlite3_db_name=(f,m)=>(r._sqlite3_db_name=U.Pe)(f,m),r._sqlite3_db_filename=(f,m)=>(r._sqlite3_db_filename=U.Qe)(f,m),r._sqlite3_db_readonly=(f,m)=>(r._sqlite3_db_readonly=U.Re)(f,m),r._sqlite3_compileoption_used=f=>(r._sqlite3_compileoption_used=U.Se)(f),r._sqlite3_compileoption_get=f=>(r._sqlite3_compileoption_get=U.Te)(f),r._sqlite3session_create=(f,m,_)=>(r._sqlite3session_create=U.Ue)(f,m,_),r._sqlite3session_delete=f=>(r._sqlite3session_delete=U.Ve)(f),r._sqlite3session_attach=(f,m)=>(r._sqlite3session_attach=U.We)(f,m),r._sqlite3session_changeset=(f,m,_)=>(r._sqlite3session_changeset=U.Xe)(f,m,_),r._sqlite3session_enable=(f,m)=>(r._sqlite3session_enable=U.Ye)(f,m),r._sqlite3changeset_start=(f,m,_)=>(r._sqlite3changeset_start=U.Ze)(f,m,_),r._sqlite3changeset_finalize=f=>(r._sqlite3changeset_finalize=U._e)(f),r._sqlite3changeset_invert=(f,m,_,w)=>(r._sqlite3changeset_invert=U.$e)(f,m,_,w),r._sqlite3changeset_apply=(f,m,_,w,N,P)=>(r._sqlite3changeset_apply=U.af)(f,m,_,w,N,P),r._sqlite3_sourceid=()=>(r._sqlite3_sourceid=U.bf)(),r._malloc=f=>(r._malloc=U.cf)(f),r._free=f=>(r._free=U.df)(f),r._RegisterExtensionFunctions=f=>(r._RegisterExtensionFunctions=U.ef)(f),r._getSqliteFree=()=>(r._getSqliteFree=U.ff)();var fb=r._main=(f,m)=>(fb=r._main=U.gf)(f,m);r._libauthorizer_set_authorizer=(f,m,_)=>(r._libauthorizer_set_authorizer=U.hf)(f,m,_),r._libfunction_create_function=(f,m,_,w,N,P,G,W)=>(r._libfunction_create_function=U.jf)(f,m,_,w,N,P,G,W),r._libhook_commit_hook=(f,m,_)=>(r._libhook_commit_hook=U.kf)(f,m,_),r._libhook_update_hook=(f,m,_)=>(r._libhook_update_hook=U.lf)(f,m,_),r._libprogress_progress_handler=(f,m,_,w)=>(r._libprogress_progress_handler=U.mf)(f,m,_,w),r._libvfs_vfs_register=(f,m,_,w,N,P)=>(r._libvfs_vfs_register=U.nf)(f,m,_,w,N,P);var db=(f,m)=>(db=U.pf)(f,m),ug=()=>(ug=U.qf)(),fg=f=>(fg=U.rf)(f),Vc=f=>(Vc=U.sf)(f),Kc=()=>(Kc=U.tf)();r._sqlite3_version=5472,r.getTempRet0=cg,r.ccall=Vi,r.cwrap=u1,r.addFunction=c1,r.setValue=qr,r.getValue=Hs,r.UTF8ToString=Aa,r.stringToUTF8=Fn,r.lengthBytesUTF8=Oa,r.intArrayFromString=di,r.intArrayToString=ub,r.AsciiToString=ob,r.UTF16ToString=cb,r.stringToUTF16=pu,r.UTF32ToString=lb,r.stringToUTF32=f1,r.writeArrayToMemory=ab;var Sd;Kn=function f(){Sd||dg(),Sd||(Kn=f)};function vd(){var f=fb,m=0,_=0;try{var w=f(m,_);return e1(w,!0),w}catch(N){return t1(N)}}function dg(){if(tt>0||(Xe(),tt>0))return;function f(){var m;Sd||(Sd=!0,r.calledRun=!0,!D&&(Q(),de(),a(r),(m=r.onRuntimeInitialized)==null||m.call(r),hg&&vd(),Le()))}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),f()},1)):f()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();var hg=!0;return r.noInitialRun&&(hg=!1),dg(),function(){const f=Object.getPrototypeOf(async function(){}).constructor;let m=0;r.set_authorizer=function(_,w,N){m&&(r.deleteCallback(m),r._sqlite3_free(m),m=0),m=r._sqlite3_malloc(4),qr(m,w instanceof f?1:0,"i32");const P=Vi("libauthorizer_set_authorizer","number",["number","number","number"],[_,w?1:0,m]);return!P&&w&&r.setCallback(m,(G,W,he,qe,Qe,pt)=>w(N,W,he,qe,Qe,pt)),P}}(),function(){const f=Object.getPrototypeOf(async function(){}).constructor,m=["xFunc","xStep","xFinal"],_=new Map;r.create_function=function(w,N,P,G,W,he,qe,Qe){const pt=r._sqlite3_malloc(4),Pt={xFunc:he,xStep:qe,xFinal:Qe};qr(pt,m.reduce((nt,nn,Gr)=>Pt[nn]instanceof f?nt|1<<Gr:nt,0),"i32");const Ye=Vi("libfunction_create_function","number",["number","string","number","number","number","number","number","number"],[w,N,P,G,pt,he?1:0,qe?1:0,Qe?1:0]);if(!Ye){if(_.has(N)){const nt=_.get(N);r.deleteCallback(nt)}_.set(N,pt),r.setCallback(pt,{xFunc:he,xStep:qe,xFinal:Qe})}return Ye}}(),function(){const f=Object.getPrototypeOf(async function(){}).constructor;let m=0;r.update_hook=function(_,w){m&&(r.deleteCallback(m),r._sqlite3_free(m),m=0),m=r._sqlite3_malloc(4),qr(m,w instanceof f?1:0,"i32"),Vi("libhook_update_hook","void",["number","number","number"],[_,w?1:0,m]),w&&r.setCallback(m,(N,P,G,W,he,qe)=>w(P,G,W,he,qe))}}(),function(){const f=Object.getPrototypeOf(async function(){}).constructor;let m=0;r.commit_hook=function(_,w){m&&(r.deleteCallback(m),r._sqlite3_free(m),m=0),m=r._sqlite3_malloc(4),qr(m,w instanceof f?1:0,"i32"),Vi("libhook_commit_hook","void",["number","number","number"],[_,w?1:0,m]),w&&r.setCallback(m,N=>w())}}(),function(){const f=Object.getPrototypeOf(async function(){}).constructor;let m=0;r.progress_handler=function(_,w,N,P){m&&(r.deleteCallback(m),r._sqlite3_free(m),m=0),m=r._sqlite3_malloc(4),qr(m,N instanceof f?1:0,"i32"),Vi("libprogress_progress_handler","number",["number","number","number","number"],[_,w,N?1:0,m]),N&&r.setCallback(m,G=>N(P))}}(),function(){const f=["xOpen","xDelete","xAccess","xFullPathname","xRandomness","xSleep","xCurrentTime","xGetLastError","xCurrentTimeInt64","xClose","xRead","xWrite","xTruncate","xSync","xFileSize","xLock","xUnlock","xCheckReservedLock","xFileControl","xSectorSize","xDeviceCharacteristics","xShmMap","xShmLock","xShmBarrier","xShmUnmap"],m=new Map;r.vfs_register=function(_,w){let N=0,P=0;f.forEach((W,he)=>{_[W]&&(N|=1<<he,_.hasAsyncMethod(W)&&(P|=1<<he))});const G=r._sqlite3_malloc(4);try{const W=Vi("libvfs_vfs_register","number",["string","number","number","number","number","number"],[_.name,_.mxPathname,N,P,w?1:0,G]);if(!W){if(m.has(_.name)){const qe=m.get(_.name);r.deleteCallback(qe)}const he=Hs(G,"*");m.set(_.name,he),r.setCallback(he,_)}return W}finally{r._sqlite3_free(G)}}}(),n=l,n}})();const rwe=async()=>{const e=await nwe(),t=twe(e);return t.module=e,t},UE=typeof navigator>"u"||navigator.storage===void 0?new Proxy({},{get:()=>Promise.reject(new Error("Can't get OPFS root handle in this environment as navigator.storage is undefined"))}):navigator.storage.getDirectory(),AV=async e=>{const t=await UE;if(e===void 0)return t;let n=t;const r=e==null?void 0:e.split("/").filter(Boolean);for(;r.length>0;)n=await n.getDirectoryHandle(r.shift());return n},OV=async(e=UE,t=Number.POSITIVE_INFINITY,n="")=>{if(t<0)return;const r=await e,a=r.values();for await(const o of a){const l=o.kind==="directory",d=o.kind==="file"?await o.getFile().then(h=>k_e(h.size)):void 0;if(console.log(`${n}${l?"📁":"📄"} ${o.name} ${d?`(${d})`:""}`),l){const h=await r.getDirectoryHandle(o.name);await OV(h,t-1,`${n}  `)}}},swe=async e=>{if(e.kind==="directory")for await(const t of e.keys())await e.removeEntry(t,{recursive:!0})},awe=Object.freeze(Object.defineProperty({__proto__:null,deleteAll:swe,getDirHandle:AV,printTree:OV,rootHandlePromise:UE},Symbol.toStringTag,{value:"Module"}));class LEe extends zi()("PersistedSqliteError",{cause:im}){}const iwe=({storageOptions:e,storeId:t,schema:n})=>Lf(async()=>{const r=DV(e.directory,t),a=await AV(r).catch(()=>{});if(a===void 0)return;const o=async v=>{const R=await v.getFile(),O=await X0e(R);return O?{fileName:O,file:R}:void 0},d=await(async v=>{const R=[];for await(const O of v)O.kind==="file"&&R.push(O);return R})(a.values()),h=await Promise.all(d.map(o)),p="/"+lwe(n),S=h.find(v=>(v==null?void 0:v.fileName)===p);if(S!==void 0){const v=await S.file.slice(Y0e).arrayBuffer();return v.byteLength===0?void 0:new Uint8Array(v)}}).pipe(xD({duration:1e3,label:"@livestore/adapter-web:readPersistedAppDbFromClientSession"}),l8("@livestore/adapter-web:readPersistedAppDbFromClientSession"),Ft("@livestore/adapter-web:readPersistedAppDbFromClientSession")),owe=({storageOptions:e,storeId:t})=>ke(function*(){const n=DV(e.directory,t);yield*cwe(n)}).pipe(nE({schedule:nbe}),Ft("@livestore/adapter-web:resetPersistedDataFromClientSession")),cwe=e=>Lf(async()=>{const t=await UE,n=e.split("/").filter(r=>r.length);try{let r=t;for(let a=0;a<n.length-1;a++)r=await r.getDirectoryHandle(n[a]);await r.removeEntry(n.at(-1),{recursive:!0})}catch(r){if(r instanceof DOMException&&r.name==="NotFoundError")return;throw r}}).pipe(Ct.mapToUnexpectedError,Ft("@livestore/adapter-web:worker:opfsDeleteFile",{attributes:{absFilePath:e}})),DV=(e,t)=>{if(e===void 0||e===""||e==="/")return`livestore-${t}@${VI}`;if(e.includes("/"))throw new Error(`@livestore/adapter-web:worker:sanitizeOpfsDir: Nested directories are not yet supported ('${e}')`);return`${e}@${VI}`},lwe=e=>`state${e.state.sqlite.migrations.strategy==="manual"?"fixed":e.state.sqlite.hash.toString()}.db`;class uwe extends bt(C0,Ct){}const fwe=e=>ND({channelName:`livestore.shutdown.${e}`,schema:uwe});class xV extends kt("DedicatedWorkerDisconnectBroadcast",{}){}const dwe=e=>ND({channelName:`livestore.worker-disconnect.${e}`,schema:xV});class PE extends Os()("DevtoolsWebCommon.CreateConnection",{payload:{from:ie,port:$E},success:Ie({}),failure:EE}){}let FEe=class extends bt(PE){};const hwe=Ie({type:At("opfs"),directory:Br(ie)}),$V=bt(hwe);Ym({key:ie,value:Vf});var iA;(function(e){class t extends Os()("InitialMessage",{payload:{port:$E,storeId:ie,clientId:ie},success:co,failure:Ct}){}e.InitialMessage=t;class n extends bt(t){}e.Request=n})(iA||(iA={}));var cr;(function(e){class t extends Os()("InitialMessage",{payload:{storageOptions:$V,devtoolsEnabled:wc,storeId:ie,clientId:ie,debugInstanceId:ie,syncPayload:sm(Vf)},success:co,failure:Ct}){}e.InitialMessage=t;class n extends Os()("BootStatusStream",{payload:{},success:Ebe,failure:Ct}){}e.BootStatusStream=n;class r extends Os()("PushToLeader",{payload:{batch:Et(Xbe)},success:co,failure:bt(Ct,nSe)}){}e.PushToLeader=r;class a extends Os()("PullStream",{payload:{cursor:wbe},success:Ie({payload:x8,mergeCounter:Ut}),failure:Ct}){}e.PullStream=a;class o extends Os()("Export",{payload:{},success:Ah,failure:Ct}){}e.Export=o;class l extends Os()("ExportEventlog",{payload:{},success:Ah,failure:Ct}){}e.ExportEventlog=l;class d extends Os()("GetRecreateSnapshot",{payload:{},success:Ie({snapshot:Ah,migrationsReport:Rbe}),failure:Ct}){}e.GetRecreateSnapshot=d;class h extends Os()("GetLeaderHead",{payload:{},success:Sr,failure:Ct}){}e.GetLeaderHead=h;class p extends Os()("GetLeaderSyncState",{payload:{},success:ro,failure:Ct}){}e.GetLeaderSyncState=p;class S extends Os()("Shutdown",{payload:{},success:co,failure:Ct}){}e.Shutdown=S;class v extends Os()("ExtraDevtoolsMessage",{payload:{message:XSe},success:co,failure:Ct}){}e.ExtraDevtoolsMessage=v,e.Request=bt(t,n,r,a,o,l,d,h,p,S,v,PE)})(cr||(cr={}));var q0;(function(e){class t extends kt("FromClientSession",{initialMessage:cr.InitialMessage}){}e.InitialMessagePayloadFromClientSession=t;class n extends Os()("InitialMessage",{payload:{payload:bt(t,kt("FromWebBridge",{})),liveStoreVersion:At(xs)},success:co,failure:Ct}){}e.InitialMessage=n;class r extends Os()("UpdateMessagePort",{payload:{port:$E},success:co,failure:Ct}){}e.UpdateMessagePort=r;class a extends bt(n,r,cr.BootStatusStream,cr.PushToLeader,cr.PullStream,cr.Export,cr.GetRecreateSnapshot,cr.ExportEventlog,cr.GetLeaderHead,cr.GetLeaderSyncState,cr.Shutdown,cr.ExtraDevtoolsMessage,PE){}e.Request=a})(q0||(q0={}));const mwe=ND({channelName:"session-info",schema:L8}),vL={sharedWorker:({storeId:e})=>`shared-worker-${e}`,browserExtension:{contentscriptMain:e=>`contentscript-main-${e}`,contentscriptIframe:e=>`contentscript-iframe-${e}`}},oA=kt("ClientSessionContentscriptMainReq",{storeId:ie,clientId:ie,sessionId:ie}),wL=kt("ClientSessionContentscriptMainRes",{tabId:Ut}),gwe={contentscriptMain:Zn(()=>Lk({listenWindow:window,sendWindow:window,schema:{listen:oA,send:wL},ids:{own:"contentscript-main-static",other:"client-session-static"}})),clientSession:Zn(()=>Lk({listenWindow:window,sendWindow:window,schema:{listen:wL,send:oA},ids:{own:"client-session-static",other:"contentscript-main-static"}}))},pwe=({node:e,target:t,worker:n})=>ke(function*(){const r=new MessageChannel,a=yield*jt();Rc&&(yield*$_e(`@livestore/devtools-web-common: closing message channel ${e.nodeName} → ${t}`)),yield*n.execute(PE.make({from:e.nodeName,port:r.port1})).pipe(ea(()=>On(a,!0)),ls,en,jn),yield*a;const o=yield*J_e({port:r.port2,schema:YD});yield*e.addEdge({target:t,edgeChannel:o,replaceIfExists:!0}),Rc&&(yield*ss(`@livestore/devtools-web-common: initiated connection: ${e.nodeName} → ${t}`))}).pipe(Ct.mapToUnexpectedError),ywe=({schema:e,storeId:t,clientId:n,sessionId:r})=>ke(function*(){if(Tc()){const a=globalThis.LIVESTORE_DEVTOOLS_PATH??"/_livestore",o=`${location.origin}${a}`,l=yield*Lf(()=>fetch(o));if(l.ok&&(yield*Lf(()=>l.text())).includes('<meta name="livestore-devtools" content="true" />')){const h=`${o}/web/${t}/${n}/${r}/${e.devtools.alias}`;yield*TO(`[@livestore/adapter-web] Devtools ready on ${h}`)}}}).pipe(Ft("@livestore/adapter-web:client-session:devtools:logDevtoolsUrl")),_we=oE(function*({webmeshNode:e,sessionInfo:t,sharedWorker:n,devtoolsEnabled:r,schema:a}){if(r){const{clientId:o,sessionId:l,storeId:d}=t;yield*ywe({clientId:o,sessionId:l,schema:a,storeId:d}),yield*F8({webChannel:yield*mwe,sessionInfo:t}).pipe(en,jn),yield*ke(function*(){const h=yield*gwe.clientSession;yield*h.send(oA.make({clientId:o,sessionId:l,storeId:d}));const{tabId:p}=yield*h.listen.pipe(Gl(),Xpe,vl),S=vL.browserExtension.contentscriptMain(p),v=yield*Lk({listenWindow:window,sendWindow:window,schema:YD,ids:{own:e.nodeName,other:S}});yield*e.addEdge({target:S,edgeChannel:v})}).pipe(Ft("@livestore/adapter-web:client-session:devtools:browser-extension"),en,jn),yield*pwe({node:e,target:vL.sharedWorker({storeId:d}),worker:n})}}),bwe=rwe();Tc()&&(globalThis.__debugLiveStoreUtils={opfs:awe,runSync:e=>Ga(e),runFork:e=>Li(e)});const Swe=e=>t=>ke(function*(){var de,Le;const{schema:n,storeId:r,devtoolsEnabled:a,debugInstanceId:o,bootStatusQueue:l,shutdown:d,syncPayload:h}=t;yield*vwe,yield*Hn(l,{stage:"loading"});const p=yield*Lf(()=>bwe),S=`livestore-tab-lock-${r}`,v=yield*Rp($V)(e.storage),R=yield*fwe(r);e.resetPersistence===!0&&(yield*R.send(C0.make({reason:"adapter-reset"})),yield*owe({storageOptions:v,storeId:r}));const O=((de=e.experimental)==null?void 0:de.disableFastPath)===!0?void 0:yield*iwe({storageOptions:v,storeId:r,schema:n}),x=e.clientId??EL(`clientId:${r}`,"local"),z=e.sessionId??EL(`sessionId:${r}`,"session"),A=yield*dwe(r);yield*R.listen.pipe(Gl(),ea(ge=>d(Pl(ge))),ls,Bn,en,jn);const E=pI(e.sharedWorker,{name:`livestore-shared-worker-${r}`}),T=yield*G_e({size:1,concurrency:100,initialMessage:()=>new q0.InitialMessage({liveStoreVersion:xs,payload:{_tag:"FromClientSession",initialMessage:new cr.InitialMessage({storageOptions:v,storeId:r,clientId:x,devtoolsEnabled:a,debugInstanceId:o,syncPayload:h})}})}).pipe(vs(LI(()=>E)),en,Ct.mapToUnexpectedError,Sa(d),Ft("@livestore/adapter-web:client-session:setupSharedWorker"),jn),q=yield*jt();let D=yield*sbe(q,S);const I=yield*QB(D?"has-lock":"no-lock"),$=yield*jt();D===!1&&(yield*On($,void 0));const H=ke(function*(){yield*ss(`[@livestore/adapter-web:client-session] ✅ Got lock '${S}' (clientId: ${x}, sessionId: ${z}).`),yield*Ss(()=>ss(`[@livestore/adapter-web:client-session] Releasing lock for '${S}'`)),yield*JS(I,"has-lock");const ge=new MessageChannel,ve=pI(e.worker,{name:`livestore-worker-${r}-${z}`});yield*K_e({initialMessage:()=>new iA.InitialMessage({port:ge.port1,storeId:r,clientId:x})}).pipe(vs(LI(()=>ve)),Ct.mapToUnexpectedError,Sa(d),Ft("@livestore/adapter-web:client-session:setupDedicatedWorker"),en,jn),yield*A.send(xV.make({})),yield*(yield*Tl(T)).executeEffect(new q0.UpdateMessagePort({port:ge.port2})).pipe(Ct.mapToUnexpectedError,Sa(d)),yield*On($,void 0),yield*pO}).pipe(Ft("@livestore/adapter-web:client-session:lock"));D===!1?(yield*ss(`[@livestore/adapter-web:client-session] ⏳ Waiting for lock '${S}' (sessionId: ${z})`),yield*rbe(q,S).pipe(Ry(()=>(D=!0,H)),Bn,en,jn)):yield*H.pipe(Bn,en,jn);const K=ge=>Tl(T).pipe(Zs(()=>$),ft(ve=>ve.executeEffect(ge)),xD({label:`@livestore/adapter-web:client-session:runInWorker:${ge._tag}`,duration:2e3}),Ft(`@livestore/adapter-web:client-session:runInWorker:${ge._tag}`),sd(ve=>bn(Ct)(ve)?ve:jM(ve)||bn(Cc)(ve)?new Ct({cause:ve}):ve),d5(ve=>new Ct({cause:ve}))),V=ge=>ke(function*(){return(yield*Tl(T)).execute(ge).pipe(KB(ht=>bn(Ct)(ht)?ht:jM(ht)||bn(Cc)(ht)?new Ct({cause:ht}):ht),tye(`@livestore/adapter-web:client-session:runInWorkerStream:${ge._tag}`))}).pipe(Zpe),j=yield*V(new cr.BootStatusStream).pipe(ea(ge=>Hn(l,ge)),ls,Sa(ge=>ql(ge)?wt:d(ge)),Bn,en,jn);yield*Yue(l).pipe(Ry(wa(j)),en,jn);const te=O===void 0?yield*K(new cr.GetRecreateSnapshot).pipe(Mt(({snapshot:ge,migrationsReport:ve})=>({_tag:"from-leader-worker",snapshot:ge,migrationsReport:ve}))):{_tag:"fast-path",snapshot:O},Ee=te._tag==="from-leader-worker"?te.migrationsReport:{migrations:[]},fe=yield*ewe({sqlite3:p})({_tag:"in-memory"});fe.import(te.snapshot),(((Le=fe.select("select count(*) as count from sqlite_master")[0])==null?void 0:Le.count)??0)===0&&(yield*Ct.make({cause:"Encountered empty or corrupted database",payload:{snapshotByteLength:te.snapshot.byteLength,storageOptions:e.storage}}));const ae=fe.select(`select seqNumGlobal, seqNumClient from ${w8} order by seqNumGlobal desc, seqNumClient desc limit 1`)[0],Te=ae?lbe({global:ae.seqNumGlobal,client:ae.seqNumClient}):obe;yield*Ss(ge=>ke(function*(){Dm(ge)&&ite(ge)===!1&&bn(C0)(tM(ge.cause))===!1&&bn(tv)(tM(ge.cause))===!1?yield*Cy("[@livestore/adapter-web:client-session] client-session shutdown",ge.cause):yield*ss("[@livestore/adapter-web:client-session] client-session shutdown",D,ge),D&&(yield*On(q,void 0))}).pipe(en,Wa));const Re={export:K(new cr.Export).pipe(em(1e4),Ct.mapToUnexpectedError,Ft("@livestore/adapter-web:client-session:export")),events:{pull:({cursor:ge})=>V(new cr.PullStream({cursor:ge})).pipe(Wpe),push:ge=>K(new cr.PushToLeader({batch:ge})).pipe(Ft("@livestore/adapter-web:client-session:pushToLeader",{attributes:{batchSize:ge.length}}))},initialState:{leaderHead:Te,migrationsReport:Ee},getEventlogData:K(new cr.ExportEventlog).pipe(em(1e4),Ct.mapToUnexpectedError,Ft("@livestore/adapter-web:client-session:getEventlogData")),getSyncState:K(new cr.GetLeaderSyncState).pipe(Ct.mapToUnexpectedError,Ft("@livestore/adapter-web:client-session:getLeaderSyncState")),sendDevtoolsMessage:ge=>K(new cr.ExtraDevtoolsMessage({message:ge})).pipe(Ct.mapToUnexpectedError,Ft("@livestore/adapter-web:client-session:devtoolsMessageForLeader"))},Xe=yield*Tl(T);return yield*uve({...t,sqliteDb:fe,lockStatus:I,clientId:x,sessionId:z,isLeader:!0,leaderThread:Re,webmeshMode:"direct",connectWebmeshNode:({sessionInfo:ge,webmeshNode:ve})=>_we({webmeshNode:ve,sessionInfo:ge,sharedWorker:Xe,devtoolsEnabled:a,schema:n}),registerBeforeUnload:ge=>typeof window<"u"&&typeof window.addEventListener=="function"?(window.addEventListener("beforeunload",ge),()=>window.removeEventListener("beforeunload",ge)):()=>{}})}).pipe(Ct.mapToUnexpectedError),EL=(e,t)=>{const n=()=>Za(5),r=typeof window>"u"?void 0:t==="session"?sessionStorage:t==="local"?localStorage:yt(`[@livestore/adapter-web] Invalid storage type: ${t}`);if(r===void 0)return n();const a=`livestore:${e}`,o=r.getItem(a);if(o)return o;const l=n();return r.setItem(a,l),l},vwe=ke(function*(){const e=(t,n)=>ke(function*(){t&&(yield*Ct.make({cause:`[@livestore/adapter-web] Browser not supported. The LiveStore web adapter needs '${n}' to work properly`}))});yield*tE([e(typeof navigator>"u","navigator"),e(navigator.locks===void 0,"navigator.locks"),e(navigator.storage===void 0,"navigator.storage"),e(crypto.randomUUID===void 0,"crypto.randomUUID"),e(typeof window>"u","window"),e(typeof sessionStorage>"u","sessionStorage")])});function wwe(e){return new SharedWorker("/assets/make-shared-worker-CwBCJlCg.js",{type:"module",name:e==null?void 0:e.name})}function Ewe(e){return new Worker("/assets/livestore.worker-BwuYsVwK.js",{type:"module",name:e==null?void 0:e.name})}const Twe="_background_15g8x_1",Rwe="_lines_15g8x_8",Cwe="_line_15g8x_8",YR={background:Twe,lines:Rwe,line:Cwe},TL=({children:e})=>Pe.jsx("div",{className:YR.background,children:Pe.jsxs("div",{className:YR.lines,children:[Pe.jsx("div",{className:YR.line}),e]})}),kwe="_app_1vl8f_1",Awe={app:kwe},lm={ORDERS:"orders",MENU:"menu",MAIN:"*"},Owe="Orders",Dwe=()=>{const e=localStorage.getItem("clientId");if(e)return e;const t="12345";return localStorage.setItem("clientId",t),t},xwe=Dwe(),$we=Swe({storage:{type:"opfs"},worker:Ewe,sharedWorker:wwe}),qwe=()=>Pe.jsx(n0e,{schema:m0e,adapter:$we,renderLoading:e=>Pe.jsx(TL,{children:Pe.jsx(Uy,{text:"Wait"})}),batchUpdates:Qz.unstable_batchedUpdates,storeId:xwe,syncPayload:{authToken:"insecure-token"},children:Pe.jsx("section",{className:Awe.app,children:Pe.jsx(TL,{children:Pe.jsx($K,{})})})});function Nwe(e){switch(e.toLowerCase()){case"round":return hf.CIRCLE;case"square":return hf.SQUARE;default:return console.warn(`Unknown table shape: ${e}, defaulting to Circle`),hf.CIRCLE}}const Mwe=e=>({id:e.id,shape:e.shape?Nwe(e.shape):hf.CIRCLE}),Iwe="_tablesGrid_1k3lr_1",Lwe={tablesGrid:Iwe};function Fwe({children:e}){return Pe.jsx("div",{className:Lwe.tablesGrid,children:e})}const zwe="_table_1otel_1",Uwe="_hasOrder_1otel_21",Pwe="_id_1otel_25",WR={table:zwe,hasOrder:Uwe,id:Pwe};function jwe({id:e,shape:t=hf.SQUARE,hasOrder:n}){const a=t===hf.CIRCLE?"50%":"8px",o={borderRadius:a,"--beforeElementShape":a};return Pe.jsx("div",{className:`${WR.table} ${n?WR.hasOrder:""}`,style:o,children:Pe.jsx("span",{className:WR.id,children:e})})}const Hwe=cV(e=>Ml.orders,{label:"visibleOrders"});function Bwe(){const{tablesDTO:e}=Uz(),t=e.map(Mwe),{store:n}=uV(),r=n.useQuery(Hwe);console.log("Orders:",r);const a=new Set(r.map(o=>o.accountId));return console.log("Orders account IDs:",a),Pe.jsx(fV,{headerText:Owe,children:Pe.jsx(Fwe,{children:t.map(({id:o,shape:l})=>Pe.jsx(jwe,{id:o,shape:l,hasOrder:a.has(o)},o))})})}const Vwe="_section_mzni2_1",Kwe="_buttonsContainer_mzni2_5",RL={section:Vwe,buttonsContainer:Kwe},Gwe="Orders Management System",Qwe="Menu",Ywe="Orders";function Wwe(){return Pe.jsxs("section",{className:RL.section,children:[Pe.jsx(Uy,{level:1,text:Gwe}),Pe.jsxs("div",{className:RL.buttonsContainer,children:[Pe.jsx(Xk,{text:Ywe,destination:lm.ORDERS,size:"M"}),Pe.jsx(Xk,{text:Qwe,destination:lm.MENU,size:"M"})]})]})}const Jwe={path:lm.MAIN,Component:Wwe},Xwe={path:lm.MENU,loader:async()=>({itemsDTO:await Yz.getItems()}),Component:O0e},Zwe={path:lm.ORDERS,loader:async()=>({tablesDTO:await Yz.getTables()}),Component:Bwe},eEe={path:lm.MAIN,Component:qwe,children:[Xwe,Zwe,Jwe]},tEe=rG([eEe]);o9.createRoot(document.getElementById("react-app")).render(Pe.jsx(gG,{router:tEe}));
